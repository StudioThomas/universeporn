!function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}var t={};__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=9)}([function(e,t,n){n(46),e.exports=angular},function(e,t){e.exports=function(e){"undefined"!=typeof execScript?execScript(e):eval.call(null,e)}},function(e,t){void 0!==e&&void 0!==t&&e.exports===t&&(e.exports="ui.router"),function(e,t,n){"use strict";function inherit(e,t){return c(new(c(function(){},{prototype:e})),t)}function merge(e){return l(arguments,function(t){t!==e&&l(t,function(t,n){e.hasOwnProperty(n)||(e[n]=t)})}),e}function ancestors(e,t){var n=[];for(var i in e.path){if(e.path[i]!==t.path[i])break;n.push(e.path[i])}return n}function objectKeys(e){if(Object.keys)return Object.keys(e);var t=[];return l(e,function(e,n){t.push(n)}),t}function indexOf(e,t){if(Array.prototype.indexOf)return e.indexOf(t,Number(arguments[2])||0);var n=e.length>>>0,i=Number(arguments[2])||0;for(i=i<0?Math.ceil(i):Math.floor(i),i<0&&(i+=n);i<n;i++)if(i in e&&e[i]===t)return i;return-1}function inheritParams(e,t,n,i){var r,o=ancestors(n,i),a={},s=[];for(var l in o)if(o[l]&&o[l].params&&(r=objectKeys(o[l].params),r.length))for(var u in r)indexOf(s,r[u])>=0||(s.push(r[u]),a[r[u]]=e[r[u]]);return c({},a,t)}function equalForKeys(e,t,n){if(!n){n=[];for(var i in e)n.push(i)}for(var r=0;r<n.length;r++){var o=n[r];if(e[o]!=t[o])return!1}return!0}function filterByKeys(e,t){var n={};return l(e,function(e){n[e]=t[e]}),n}function pick(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return l(n,function(n){n in e&&(t[n]=e[n])}),t}function omit(e){var t={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var i in e)-1==indexOf(n,i)&&(t[i]=e[i]);return t}function filter(e,t){var n=s(e),i=n?[]:{};return l(e,function(e,r){t(e,r)&&(i[n?i.length:r]=e)}),i}function map(e,t){var n=s(e)?[]:{};return l(e,function(e,i){n[i]=t(e,i)}),n}function silenceUncaughtInPromise(e){return e.then(n,function(){})&&e}function $Resolve(e,t){var r=1,s=2,u={},d=[],p=u,h=c(e.when(u),{$$promises:u,$$values:u});this.study=function(u){function visit(e,n){if(v[n]!==s){if(g.push(n),v[n]===r)throw g.splice(0,indexOf(g,n)),new Error("Cyclic dependency: "+g.join(" -> "));if(v[n]=r,o(e))m.push(n,[function(){return t.get(e)}],d);else{var i=t.annotate(e);l(i,function(e){e!==n&&u.hasOwnProperty(e)&&visit(u[e],e)}),m.push(n,e,i)}g.pop(),v[n]=s}}function isResolve(e){return a(e)&&e.then&&e.$$promises}if(!a(u))throw new Error("'invocables' must be an object");var f=objectKeys(u||{}),m=[],g=[],v={};return l(u,visit),u=g=v=null,function(r,o,s){function done(){--y||(w||merge(v,o.$$values),d.$$values=v,d.$$promises=d.$$promises||!0,delete d.$$inheritedValues,u.resolve(v))}function fail(e){d.$$failure=e,u.reject(e)}if(isResolve(r)&&s===n&&(s=o,o=r,r=null),r){if(!a(r))throw new Error("'locals' must be an object")}else r=p;if(o){if(!isResolve(o))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else o=h;var u=e.defer(),d=silenceUncaughtInPromise(u.promise),g=d.$$promises={},v=c({},r),y=1+m.length/3,w=!1;if(silenceUncaughtInPromise(d),i(o.$$failure))return fail(o.$$failure),d;o.$$inheritedValues&&merge(v,omit(o.$$inheritedValues,f)),c(g,o.$$promises),o.$$values?(w=merge(v,omit(o.$$values,f)),d.$$inheritedValues=omit(o.$$values,f),done()):(o.$$inheritedValues&&(d.$$inheritedValues=omit(o.$$inheritedValues,f)),o.then(done,fail));for(var b=0,S=m.length;b<S;b+=3)r.hasOwnProperty(m[b])?done():function(n,o,a){function onfailure(e){c.reject(e),fail(e)}function proceed(){if(!i(d.$$failure))try{c.resolve(t.invoke(o,s,v)),c.promise.then(function(e){v[n]=e,done()},onfailure)}catch(e){onfailure(e)}}var c=e.defer(),u=0;l(a,function(e){g.hasOwnProperty(e)&&!r.hasOwnProperty(e)&&(u++,g[e].then(function(t){v[e]=t,--u||proceed()},onfailure))}),u||proceed(),g[n]=silenceUncaughtInPromise(c.promise)}(m[b],m[b+1],m[b+2]);return d}},this.resolve=function(e,t,n,i){return this.study(e)(t,n,i)}}function TemplateFactoryProvider(){var e=t.version.minor<3;this.shouldUnsafelyUseHttp=function(t){e=!!t},this.$get=["$http","$templateCache","$injector",function(t,n,i){return new TemplateFactory(t,n,i,e)}]}function TemplateFactory(e,t,n,o){this.fromConfig=function(e,t,n){return i(e.template)?this.fromString(e.template,t):i(e.templateUrl)?this.fromUrl(e.templateUrl,t):i(e.templateProvider)?this.fromProvider(e.templateProvider,t,n):null},this.fromString=function(e,t){return r(e)?e(t):e},this.fromUrl=function(i,a){return r(i)&&(i=i(a)),null==i?null:o?e.get(i,{cache:t,headers:{Accept:"text/html"}}).then(function(e){return e.data}):n.get("$templateRequest")(i)},this.fromProvider=function(e,t,i){return n.invoke(e,null,i||{params:t})}}function UrlMatcher(e,t,i){function addParameter(t,n,i,r){if(m.push(t),h[t])return h[t];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(t))throw new Error("Invalid parameter name '"+t+"' in pattern '"+e+"'");if(f[t])throw new Error("Duplicate parameter name '"+t+"' in pattern '"+e+"'");return f[t]=new p.Param(t,n,i,r),f[t]}function quoteRegExp(e,t,n,i){var r=["",""],o=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return o;switch(n){case!1:r=["(",")"+(i?"?":"")];break;case!0:o=o.replace(/\/$/,""),r=["(?:/(",")|/)?"];break;default:r=["("+n+"|",")?"]}return o+r[0]+t+r[1]}function matchDetails(i,r){var o,a,s,l,c;return o=i[2]||i[3],c=t.params[o],s=e.substring(u,i.index),a=r?i[4]:i[4]||("*"==i[1]?".*":null),a&&(l=p.type(a)||inherit(p.type("string"),{pattern:new RegExp(a,t.caseInsensitive?"i":n)})),{id:o,regexp:a,segment:s,type:l,cfg:c}}t=c({params:{}},a(t)?t:{});var r,o=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,s=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l="^",u=0,d=this.segments=[],h=i?i.params:{},f=this.params=i?i.params.$$new():new p.ParamSet,m=[];this.source=e;for(var g,v,y;(r=o.exec(e))&&(g=matchDetails(r,!1),!(g.segment.indexOf("?")>=0));)v=addParameter(g.id,g.type,g.cfg,"path"),l+=quoteRegExp(g.segment,v.type.pattern.source,v.squash,v.isOptional),d.push(g.segment),u=o.lastIndex;y=e.substring(u);var w=y.indexOf("?");if(w>=0){var b=this.sourceSearch=y.substring(w);if(y=y.substring(0,w),this.sourcePath=e.substring(0,u+w),b.length>0)for(u=0;r=s.exec(b);)g=matchDetails(r,!0),v=addParameter(g.id,g.type,g.cfg,"search"),u=o.lastIndex}else this.sourcePath=e,this.sourceSearch="";l+=quoteRegExp(y)+(!1===t.strict?"/?":"")+"$",d.push(y),this.regexp=new RegExp(l,t.caseInsensitive?"i":n),this.prefix=d[0],this.$$paramNames=m}function Type(e){c(this,e)}function $UrlMatcherFactory(){function valToString(e){return null!=e?e.toString().replace(/(~|\/)/g,function(e){return{"~":"~~","/":"~2F"}[e]}):e}function valFromString(e){return null!=e?e.toString().replace(/(~~|~2F)/g,function(e){return{"~~":"~","~2F":"/"}[e]}):e}function getDefaultConfig(){return{strict:d,caseInsensitive:u}}function isInjectable(e){return r(e)||s(e)&&r(e[e.length-1])}function flushTypeQueue(){for(;g.length;){var n=g.shift();if(n.pattern)throw new Error("You cannot override a type's .pattern at runtime.");t.extend(f[n.name],e.invoke(n.def))}}function ParamSet(e){c(this,e||{})}p=this;var e,u=!1,d=!0,h=!1,f={},m=!0,g=[],v={string:{encode:valToString,decode:valFromString,is:function(e){return null==e||!i(e)||"string"==typeof e},pattern:/[^\/]*/},int:{encode:valToString,decode:function(e){return parseInt(e,10)},is:function(e){return e!==n&&null!==e&&this.decode(e.toString())===e},pattern:/-?\d+/},bool:{encode:function(e){return e?1:0},decode:function(e){return 0!==parseInt(e,10)},is:function(e){return!0===e||!1===e},pattern:/0|1/},date:{encode:function(e){return this.is(e)?[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"):n},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):n},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return this.is(e)&&this.is(t)&&e.toISOString()===t.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:t.toJson,decode:t.fromJson,is:t.isObject,equals:t.equals,pattern:/[^\/]*/},any:{encode:t.identity,decode:t.identity,equals:t.equals,pattern:/.*/}};$UrlMatcherFactory.$$getDefaultValue=function(t){if(!isInjectable(t.value))return t.value;if(!e)throw new Error("Injectable functions cannot be called at configuration time");return e.invoke(t.value)},this.caseInsensitive=function(e){return i(e)&&(u=e),u},this.strictMode=function(e){return i(e)&&(d=e),d},this.defaultSquashPolicy=function(e){if(!i(e))return h;if(!0!==e&&!1!==e&&!o(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");return h=e,e},this.compile=function(e,t){return new UrlMatcher(e,c(getDefaultConfig(),t))},this.isMatcher=function(e){if(!a(e))return!1;var t=!0;return l(UrlMatcher.prototype,function(n,o){r(n)&&(t=t&&i(e[o])&&r(e[o]))}),t},this.type=function(e,t,n){if(!i(t))return f[e];if(f.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");return f[e]=new Type(c({name:e},t)),n&&(g.push({name:e,def:n}),m||flushTypeQueue()),this},l(v,function(e,t){f[t]=new Type(c({name:t},e))}),f=inherit(f,{}),this.$get=["$injector",function(t){return e=t,m=!1,flushTypeQueue(),l(v,function(e,t){f[t]||(f[t]=new Type(e))}),this}],this.Param=function(r,l,u,d){function $$getDefaultValue(){if(!e)throw new Error("Injectable functions cannot be called at configuration time");var t=e.invoke(u.$$fn);if(null!==t&&t!==n&&!p.type.is(t))throw new Error("Default value ("+t+") for parameter '"+p.id+"' is not an instance of Type ("+p.type.name+")");return t}function $value(e){function hasReplaceVal(e){return function(t){return t.from===e}}return e=function(e){var t=map(filter(p.replace,hasReplaceVal(e)),function(e){return e.to});return t.length?t[0]:e}(e),i(e)?p.type.$normalize(e):$$getDefaultValue()}function toString(){return"{Param:"+r+" "+l+" squash: '"+v+"' optional: "+g+"}"}var p=this;u=function(e){var t=a(e)?objectKeys(e):[];return-1===indexOf(t,"value")&&-1===indexOf(t,"type")&&-1===indexOf(t,"squash")&&-1===indexOf(t,"array")&&(e={value:e}),e.$$fn=isInjectable(e.value)?e.value:function(){return e.value},e}(u),l=function(e,n,i){if(e.type&&n)throw new Error("Param '"+r+"' has two type configurations.");return n||(e.type?t.isString(e.type)?f[e.type]:e.type instanceof Type?e.type:new Type(e.type):"config"===i?f.any:f.string)}(u,l,d);var m=function(){var e={array:"search"===d&&"auto"},t=r.match(/\[\]$/)?{array:!0}:{};return c(e,t,u).array}();l=m?l.$asArray(m,"search"===d):l,"string"!==l.name||m||"path"!==d||u.value!==n||(u.value="");var g=u.value!==n,v=function(e,t){var n=e.squash;if(!t||!1===n)return!1;if(!i(n)||null==n)return h;if(!0===n||o(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}(u,g),y=function(e,t,i,r){var a,l,c=[{from:"",to:i||t?n:""},{from:null,to:i||t?n:""}];return a=s(e.replace)?e.replace:[],o(r)&&a.push({from:r,to:n}),l=map(a,function(e){return e.from}),filter(c,function(e){return-1===indexOf(l,e.from)}).concat(a)}(u,m,g,v);c(this,{id:r,type:l,location:d,array:m,squash:v,replace:y,isOptional:g,value:$value,dynamic:n,config:u,toString:toString})},ParamSet.prototype={$$new:function(){return inherit(this,c(new ParamSet,{$$parent:this}))},$$keys:function(){for(var e=[],t=[],n=this,i=objectKeys(ParamSet.prototype);n;)t.push(n),n=n.$$parent;return t.reverse(),l(t,function(t){l(objectKeys(t),function(t){-1===indexOf(e,t)&&-1===indexOf(i,t)&&e.push(t)})}),e},$$values:function(e){var t={},n=this;return l(n.$$keys(),function(i){t[i]=n[i].value(e&&e[i])}),t},$$equals:function(e,t){var n=!0,i=this;return l(i.$$keys(),function(r){var o=e&&e[r],a=t&&t[r];i[r].type.equals(o,a)||(n=!1)}),n},$$validates:function(e){var i,r,o,a,s,l=this.$$keys();for(i=0;i<l.length&&(r=this[l[i]],(o=e[l[i]])!==n&&null!==o||!r.isOptional);i++){if(a=r.type.$normalize(o),!r.type.is(a))return!1;if(s=r.type.encode(a),t.isString(s)&&!r.type.pattern.exec(s))return!1}return!0},$$parent:n},this.ParamSet=ParamSet}function $UrlRouterProvider(e,a){function regExpPrefix(e){var t=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(e.source);return null!=t?t[1].replace(/\\(.)/g,"$1"):""}function interpolate(e,t){return e.replace(/\$(\$|\d{1,2})/,function(e,n){return t["$"===n?0:Number(n)]})}function handleIfMatch(e,t,n){if(!n)return!1;var r=e.invoke(t,t,{$match:n});return!i(r)||r}function $get(i,r,a,s,c){function appendBasePath(e,t,n){return"/"===f?e:t?f.slice(0,-1)+e:n?f.slice(1)+e:e}function update(e){function check(e){var t=e(a,i);return!!t&&(o(t)&&i.replace().url(t),!0)}if(!e||!e.defaultPrevented){h&&i.url();h=n;var t,r=u.length;for(t=0;t<r;t++)if(check(u[t]))return;d&&check(d)}}function listen(){return l=l||r.$on("$locationChangeSuccess",update)}var h,f=s.baseHref(),m=i.url();return p||listen(),{sync:function(){update()},listen:function(){return listen()},update:function(e){if(e)return void(m=i.url());i.url()!==m&&(i.url(m),i.replace())},push:function(e,t,r){var o=e.format(t||{});null!==o&&t&&t["#"]&&(o+="#"+t["#"]),i.url(o),h=r&&r.$$avoidResync?i.url():n,r&&r.replace&&i.replace()},href:function(n,r,o){if(!n.validates(r))return null;var a=e.html5Mode();t.isObject(a)&&(a=a.enabled),a=a&&c.history;var s=n.format(r);if(o=o||{},a||null===s||(s="#"+e.hashPrefix()+s),null!==s&&r&&r["#"]&&(s+="#"+r["#"]),s=appendBasePath(s,a,o.absolute),!o.absolute||!s)return s;var l=!a&&s?"/":"",u=i.port();return u=80===u||443===u?"":":"+u,[i.protocol(),"://",i.host(),u,l,s].join("")}}}var l,u=[],d=null,p=!1;this.rule=function(e){if(!r(e))throw new Error("'rule' must be a function");return u.push(e),this},this.otherwise=function(e){if(o(e)){var t=e;e=function(){return t}}else if(!r(e))throw new Error("'rule' must be a function");return d=e,this},this.when=function(e,t){var n,i=o(t);if(o(e)&&(e=a.compile(e)),!i&&!r(t)&&!s(t))throw new Error("invalid 'handler' in when()");var l={matcher:function(e,t){return i&&(n=a.compile(t),t=["$match",function(e){return n.format(e)}]),c(function(n,i){return handleIfMatch(n,t,e.exec(i.path(),i.search()))},{prefix:o(e.prefix)?e.prefix:""})},regex:function(e,t){if(e.global||e.sticky)throw new Error("when() RegExp must not be global or sticky");return i&&(n=t,t=["$match",function(e){return interpolate(n,e)}]),c(function(n,i){return handleIfMatch(n,t,e.exec(i.path()))},{prefix:regExpPrefix(e)})}},u={matcher:a.isMatcher(e),regex:e instanceof RegExp};for(var d in u)if(u[d])return this.rule(l[d](e,t));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(e){e===n&&(e=!0),p=e},this.$get=$get,$get.$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function $StateProvider(e,d){function isRelative(e){return 0===e.indexOf(".")||0===e.indexOf("^")}function findState(e,t){if(!e)return n;var i=o(e),r=i?e:e.name;if(isRelative(r)){if(!t)throw new Error("No reference point given for path '"+r+"'");t=findState(t);for(var a=r.split("."),s=0,l=a.length,c=t;s<l;s++)if(""!==a[s]||0!==s){if("^"!==a[s])break;if(!c.parent)throw new Error("Path '"+r+"' not valid for state '"+t.name+"'");c=c.parent}else c=t;a=a.slice(s).join("."),r=c.name+(c.name&&a?".":"")+a}var u=m[r];return!u||!i&&(i||u!==e&&u.self!==e)?n:u}function queueState(e,t){g[e]||(g[e]=[]),g[e].push(t)}function flushQueuedChildren(e){for(var t=g[e]||[];t.length;)registerState(t.shift())}function registerState(t){t=inherit(t,{self:t,resolve:t.resolve||{},toString:function(){return this.name}});var n=t.name;if(!o(n)||n.indexOf("@")>=0)throw new Error("State must have a valid name");if(m.hasOwnProperty(n))throw new Error("State '"+n+"' is already defined");var i=-1!==n.indexOf(".")?n.substring(0,n.lastIndexOf(".")):o(t.parent)?t.parent:a(t.parent)&&o(t.parent.name)?t.parent.name:"";if(i&&!m[i])return queueState(i,t.self);for(var s in y)r(y[s])&&(t[s]=y[s](t,y.$delegates[s]));return m[n]=t,!t[v]&&t.url&&e.when(t.url,["$match","$stateParams",function(e,n){f.$current.navigable==t&&equalForKeys(e,n)||f.transitionTo(t,e,{inherit:!0,location:!1})}]),flushQueuedChildren(n),t}function isGlob(e){return e.indexOf("*")>-1}function doesStateMatchGlob(e){for(var t=e.split("."),n=f.$current.name.split("."),i=0,r=t.length;i<r;i++)"*"===t[i]&&(n[i]="*");return"**"===t[0]&&(n=n.slice(indexOf(n,t[1])),n.unshift("**")),"**"===t[t.length-1]&&(n.splice(indexOf(n,t[t.length-2])+1,Number.MAX_VALUE),n.push("**")),t.length==n.length&&n.join("")===t.join("")}function decorator(e,t){return o(e)&&!i(t)?y[e]:r(t)&&o(e)?(y[e]&&!y.$delegates[e]&&(y.$delegates[e]=y[e]),y[e]=t,this):this}function state(e,t){return a(e)?t=e:t.name=e,registerState(t),this}function $get(e,d,p,g,y,w,b,S,T){function handleRedirect(t,n,i,r){var o=e.$broadcast("$stateNotFound",t,n,i);if(o.defaultPrevented)return b.update(),x;if(!o.retry)return null;if(r.$retry)return b.update(),C;var a=f.transition=d.when(o.retry);return a.then(function(){return a!==f.transition?(e.$broadcast("$stateChangeCancel",t.to,t.toParams,n,i),O):(t.options.$retry=!0,f.transitionTo(t.to,t.toParams,t.options))},function(){return x}),b.update(),a}function resolveState(e,n,i,o,a,c){function resolveViews(){var n=[];return l(e.views,function(i,o){var l=i.resolve&&i.resolve!==e.resolve?i.resolve:{};l.$template=[function(){return p.load(o,{view:i,locals:a.globals,params:u,notify:c.notify})||""}],n.push(y.resolve(l,a.globals,a.resolve,e).then(function(n){if(r(i.controllerProvider)||s(i.controllerProvider)){var c=t.extend({},l,a.globals);n.$$controller=g.invoke(i.controllerProvider,null,c)}else n.$$controller=i.controller;n.$$state=e,n.$$controllerAs=i.controllerAs,n.$$resolveAs=i.resolveAs,a[o]=n}))}),d.all(n).then(function(){return a.globals})}var u=i?n:filterByKeys(e.params.$$keys(),n),h={$stateParams:u};a.resolve=y.resolve(e.resolve,h,a.resolve,e);var f=[a.resolve.then(function(e){a.globals=e})];return o&&f.push(o),d.all(f).then(resolveViews).then(function(e){return a})}var E=new Error("transition superseded"),O=silenceUncaughtInPromise(d.reject(E)),I=silenceUncaughtInPromise(d.reject(new Error("transition prevented"))),x=silenceUncaughtInPromise(d.reject(new Error("transition aborted"))),C=silenceUncaughtInPromise(d.reject(new Error("transition failed")));return h.locals={resolve:null,globals:{$stateParams:{}}},f={params:{},current:h.self,$current:h,transition:null},f.reload=function(e){return f.transitionTo(f.current,w,{reload:e||!0,inherit:!1,notify:!0})},f.go=function(e,t,n){return f.transitionTo(e,t,c({inherit:!0,relative:f.$current},n))},f.transitionTo=function(t,n,r){n=n||{},r=c({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},r||{});var s,l=f.$current,p=f.params,m=l.path,y=findState(t,r.relative),S=n["#"];if(!i(y)){var T={to:t,toParams:n,options:r},x=handleRedirect(T,l.self,p,r);if(x)return x;if(t=T.to,n=T.toParams,r=T.options,y=findState(t,r.relative),!i(y)){if(!r.relative)throw new Error("No such state '"+t+"'");throw new Error("Could not resolve '"+t+"' from state '"+r.relative+"'")}}if(y[v])throw new Error("Cannot transition to abstract state '"+t+"'");if(r.inherit&&(n=inheritParams(w,n||{},f.$current,y)),!y.params.$$validates(n))return C;n=y.params.$$values(n),t=y;var $=t.path,_=0,A=$[_],R=h.locals,P=[];if(r.reload){if(o(r.reload)||a(r.reload)){if(a(r.reload)&&!r.reload.name)throw new Error("Invalid reload state object");var k=!0===r.reload?m[0]:findState(r.reload);if(r.reload&&!k)throw new Error("No such reload state '"+(o(r.reload)?r.reload:r.reload.name)+"'");for(;A&&A===m[_]&&A!==k;)R=P[_]=A.locals,_++,A=$[_]}}else for(;A&&A===m[_]&&A.ownParams.$$equals(n,p);)R=P[_]=A.locals,_++,A=$[_];if(shouldSkipReload(t,n,l,p,R,r))return S&&(n["#"]=S),f.params=n,u(f.params,w),u(filterByKeys(t.params.$$keys(),w),t.locals.globals.$stateParams),r.location&&t.navigable&&t.navigable.url&&(b.push(t.navigable.url,n,{$$avoidResync:!0,replace:"replace"===r.location}),b.update(!0)),f.transition=null,d.when(f.current);if(n=filterByKeys(t.params.$$keys(),n||{}),S&&(n["#"]=S),r.notify&&e.$broadcast("$stateChangeStart",t.self,n,l.self,p,r).defaultPrevented)return e.$broadcast("$stateChangeCancel",t.self,n,l.self,p),null==f.transition&&b.update(),I;for(var N=d.when(R),D=_;D<$.length;D++,A=$[D])R=P[D]=inherit(R),N=resolveState(A,n,A===t,N,R,r);var L=f.transition=N.then(function(){var i,o,a;if(f.transition!==L)return e.$broadcast("$stateChangeCancel",t.self,n,l.self,p),O;for(i=m.length-1;i>=_;i--)a=m[i],a.self.onExit&&g.invoke(a.self.onExit,a.self,a.locals.globals),a.locals=null;for(i=_;i<$.length;i++)o=$[i],o.locals=P[i],o.self.onEnter&&g.invoke(o.self.onEnter,o.self,o.locals.globals);return f.transition!==L?(e.$broadcast("$stateChangeCancel",t.self,n,l.self,p),O):(f.$current=t,f.current=t.self,f.params=n,u(f.params,w),f.transition=null,r.location&&t.navigable&&b.push(t.navigable.url,t.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===r.location}),r.notify&&e.$broadcast("$stateChangeSuccess",t.self,n,l.self,p),b.update(!0),f.current)}).then(null,function(i){return i===E?O:f.transition!==L?(e.$broadcast("$stateChangeCancel",t.self,n,l.self,p),O):(f.transition=null,s=e.$broadcast("$stateChangeError",t.self,n,l.self,p,i),s.defaultPrevented||b.update(),d.reject(i))});return silenceUncaughtInPromise(L),L},f.is=function(e,t,r){r=c({relative:f.$current},r||{});var o=findState(e,r.relative);return i(o)?f.$current===o&&(!t||objectKeys(t).reduce(function(e,n){var i=o.params[n];return e&&(!i||i.type.equals(w[n],t[n]))},!0)):n},f.includes=function(e,t,r){if(r=c({relative:f.$current},r||{}),o(e)&&isGlob(e)){if(!doesStateMatchGlob(e))return!1;e=f.$current.name}var a=findState(e,r.relative);if(!i(a))return n;if(!i(f.$current.includes[a.name]))return!1;if(!t)return!0;for(var s=objectKeys(t),l=0;l<s.length;l++){var u=s[l],d=a.params[u];if(d&&!d.type.equals(w[u],t[u]))return!1}return objectKeys(t).reduce(function(e,n){var i=a.params[n];return e&&!i||i.type.equals(w[n],t[n])},!0)},f.href=function(e,t,r){r=c({lossy:!0,inherit:!0,absolute:!1,relative:f.$current},r||{});var o=findState(e,r.relative);if(!i(o))return null;r.inherit&&(t=inheritParams(w,t||{},f.$current,o));var a=o&&r.lossy?o.navigable:o;return a&&a.url!==n&&null!==a.url?b.href(a.url,filterByKeys(o.params.$$keys().concat("#"),t||{}),{absolute:r.absolute}):null},f.get=function(e,t){if(0===arguments.length)return map(objectKeys(m),function(e){return m[e].self});var n=findState(e,t||f.$current);return n&&n.self?n.self:null},f}function shouldSkipReload(e,t,n,i,r,o){if(!o.reload&&e===n&&(r===n.locals||!1===e.self.reloadOnSearch&&function(e,t,n){function notSearchParam(t){return"search"!=e.params[t].location}var i=e.params.$$keys().filter(notSearchParam),r=pick.apply({},[e.params].concat(i));return new p.ParamSet(r).$$equals(t,n)}(n,i,t)))return!0}var h,f,m={},g={},v="abstract",y={parent:function(e){if(i(e.parent)&&e.parent)return findState(e.parent);var t=/^(.+)\.[^.]+$/.exec(e.name);return t?findState(t[1]):h},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=inherit(e.parent.data,e.data)),e.data},url:function(e){var t=e.url,n={params:e.params||{}};if(o(t))return"^"==t.charAt(0)?d.compile(t.substring(1),n):(e.parent.navigable||h).url.concat(t,n);if(!t||d.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var t=e.url&&e.url.params||new p.ParamSet;return l(e.params||{},function(e,n){t[n]||(t[n]=new p.Param(n,null,e,"config"))}),t},params:function(e){var t=pick(e.ownParams,e.ownParams.$$keys());return e.parent&&e.parent.params?c(e.parent.params.$$new(),t):new p.ParamSet},views:function(e){var t={};return l(i(e.views)?e.views:{"":e},function(n,i){i.indexOf("@")<0&&(i+="@"+e.parent.name),n.resolveAs=n.resolveAs||e.resolveAs||"$resolve",t[i]=n}),t},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var t=e.parent?c({},e.parent.includes):{};return t[e.name]=!0,t},$delegates:{}};h=registerState({name:"",url:"^",views:null,abstract:!0}),h.navigable=null,this.decorator=decorator,this.state=state,this.$get=$get,$get.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function $ViewProvider(){function $get(e,t){return{load:function(e,n){var i;return n=c({template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}},n),n.view&&(i=t.fromConfig(n.view,n.params,n.locals)),i}}}this.$get=$get,$get.$inject=["$rootScope","$templateFactory"]}function $ViewScrollProvider(){var e=!1;this.useAnchorScroll=function(){e=!0},this.$get=["$anchorScroll","$timeout",function(t,n){return e?t:function(e){return n(function(){e[0].scrollIntoView()},0,!1)}}]}function $ViewDirective(e,n,i,r,o){function getRenderer(e,n){if(l)return{enter:function(e,n,i){t.version.minor>2?l.enter(e,null,n).then(i):l.enter(e,null,n,i)},leave:function(e,n){t.version.minor>2?l.leave(e).then(n):l.leave(e,n)}};if(s){var i=s&&s(n,e);return{enter:function(e,t,n){i.enter(e,null,t),n()},leave:function(e,t){i.leave(e),t()}}}return function(){return{enter:function(e,t,n){t.after(e),n()},leave:function(e,t){e.remove(),t()}}}()}var a=function(){return n.has?function(e){return n.has(e)?n.get(e):null}:function(e){try{return n.get(e)}catch(e){return null}}}(),s=a("$animator"),l=a("$animate");return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(n,a,s){return function(n,a,l){function cleanupLastView(){if(c&&(c.remove(),c=null),d&&(d.$destroy(),d=null),u){var e=u.data("$uiViewAnim");m.leave(u,function(){e.$$animLeave.resolve(),c=null}),c=u,u=null}}function updateView(c){var g,v=getUiViewName(n,l,a,r),y=v&&e.$current&&e.$current.locals[v];if(c||y!==p){g=n.$new(),p=e.$current.locals[v],g.$emit("$viewContentLoading",v);var w=s(g,function(e){var r=o.defer(),s=o.defer(),l={$animEnter:r.promise,$animLeave:s.promise,$$animLeave:s};e.data("$uiViewAnim",l),m.enter(e,a,function(){r.resolve(),d&&d.$emit("$viewContentAnimationEnded"),(t.isDefined(f)&&!f||n.$eval(f))&&i(e)}),cleanupLastView()});u=w,d=g,d.$emit("$viewContentLoaded",v),d.$eval(h)}}var c,u,d,p,h=l.onload||"",f=l.autoscroll,m=getRenderer(l,n);a.inheritedData("$uiView");n.$on("$stateChangeSuccess",function(){updateView(!1)}),updateView(!0)}}}}function $ViewDirectiveFill(e,n,i,o){return{restrict:"ECA",priority:-400,compile:function(a){var s=a.html();return a.empty?a.empty():a[0].innerHTML=null,function(a,l,c){var u=i.$current,d=getUiViewName(a,c,l,o),p=u&&u.locals[d];if(!p)return l.html(s),void e(l.contents())(a);l.data("$uiView",{name:d,state:p.$$state}),l.html(p.$template?p.$template:s);var h=t.extend({},p);a[p.$$resolveAs]=h;var f=e(l.contents());if(p.$$controller){p.$scope=a,p.$element=l;var m=n(p.$$controller,p);p.$$controllerAs&&(a[p.$$controllerAs]=m,a[p.$$controllerAs][p.$$resolveAs]=h),r(m.$onInit)&&m.$onInit(),l.data("$ngControllerController",m),l.children().data("$ngControllerController",m)}f(a)}}}}function getUiViewName(e,t,n,i){var r=i(t.uiView||t.name||"")(e),o=n.inheritedData("$uiView");return r.indexOf("@")>=0?r:r+"@"+(o?o.state.name:"")}function parseStateRef(e,t){var n,i=e.match(/^\s*({[^}]*})\s*$/);if(i&&(e=t+"("+i[1]+")"),!(n=e.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/))||4!==n.length)throw new Error("Invalid state ref '"+e+"'");return{state:n[1],paramExpr:n[3]||null}}function stateContext(e){var t=e.parent().inheritedData("$uiView");if(t&&t.state&&t.state.name)return t.state}function getTypeInfo(e){var t="[object SVGAnimatedString]"===Object.prototype.toString.call(e.prop("href")),n="FORM"===e[0].nodeName;return{attr:n?"action":t?"xlink:href":"href",isAnchor:"A"===e.prop("tagName").toUpperCase(),clickable:!n}}function clickHook(e,t,n,i,r){return function(o){var a=o.which||o.button,s=r();if(!(a>1||o.ctrlKey||o.metaKey||o.shiftKey||e.attr("target"))){var l=n(function(){t.go(s.state,s.params,s.options)});o.preventDefault();var c=i.isAnchor&&!s.href?1:0;o.preventDefault=function(){c--<=0&&n.cancel(l)}}}}function defaultOpts(e,t){return{relative:stateContext(e)||t.$current,inherit:!0}}function $StateRefDirective(e,n){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(i,r,o,a){var s,l=parseStateRef(o.uiSref,e.current.name),u={state:l.state,href:null,params:null},d=getTypeInfo(r),p=a[1]||a[0],h=null;u.options=c(defaultOpts(r,e),o.uiSrefOpts?i.$eval(o.uiSrefOpts):{});var f=function(n){n&&(u.params=t.copy(n)),u.href=e.href(l.state,u.params,u.options),h&&h(),p&&(h=p.$$addStateInfo(l.state,u.params)),null!==u.href&&o.$set(d.attr,u.href)};l.paramExpr&&(i.$watch(l.paramExpr,function(e){e!==u.params&&f(e)},!0),u.params=t.copy(i.$eval(l.paramExpr))),f(),d.clickable&&(s=clickHook(r,e,n,d,function(){return u}),r[r.on?"on":"bind"]("click",s),i.$on("$destroy",function(){r[r.off?"off":"unbind"]("click",s)}))}}}function $StateRefDynamicDirective(e,t){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(n,i,r,o){function runStateRefLink(t){d.state=t[0],d.params=t[1],d.options=t[2],d.href=e.href(d.state,d.params,d.options),p&&p(),l&&(p=l.$$addStateInfo(d.state,d.params)),d.href&&r.$set(s.attr,d.href)}var a,s=getTypeInfo(i),l=o[1]||o[0],c=[r.uiState,r.uiStateParams||null,r.uiStateOpts||null],u="["+c.map(function(e){return e||"null"}).join(", ")+"]",d={state:null,params:null,options:null,href:null},p=null;n.$watch(u,runStateRefLink,!0),runStateRefLink(n.$eval(u)),s.clickable&&(a=clickHook(i,e,t,s,function(){return d}),i[i.on?"on":"bind"]("click",a),n.$on("$destroy",function(){i[i.off?"off":"unbind"]("click",a)}))}}}function $StateRefActiveDirective(e,t,n){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(t,i,r,s){function addState(t,n,r){var o=e.get(t,stateContext(i)),a=createStateHash(t,n),s={state:o||{name:t},params:n,hash:a};return p.push(s),h[a]=r,function(){var e=p.indexOf(s);-1!==e&&p.splice(e,1)}}function createStateHash(e,n){if(!o(e))throw new Error("state should be a string");return a(n)?e+d(n):(n=t.$eval(n),a(n)?e+d(n):e)}function update(){for(var e=0;e<p.length;e++)anyMatch(p[e].state,p[e].params)?addClass(i,h[p[e].hash]):removeClass(i,h[p[e].hash]),exactMatch(p[e].state,p[e].params)?addClass(i,c):removeClass(i,c)}function addClass(e,t){s(function(){e.addClass(t)})}function removeClass(e,t){e.removeClass(t)}function anyMatch(t,n){return e.includes(t.name,n)}function exactMatch(t,n){return e.is(t.name,n)}var c,u,p=[],h={};c=n(r.uiSrefActiveEq||"",!1)(t);try{u=t.$eval(r.uiSrefActive)}catch(e){}u=u||n(r.uiSrefActive||"",!1)(t),a(u)&&l(u,function(n,i){if(o(n)){var r=parseStateRef(n,e.current.name);addState(r.state,t.$eval(r.paramExpr),i)}}),this.$$addStateInfo=function(e,t){if(!(a(u)&&p.length>0)){var n=addState(e,t,u);return update(),n}},t.$on("$stateChangeSuccess",update),update()}]}}function $IsStateFilter(e){var t=function(t,n){return e.is(t,n)};return t.$stateful=!0,t}function $IncludedByStateFilter(e){var t=function(t,n,i){return e.includes(t,n,i)};return t.$stateful=!0,t}var i=t.isDefined,r=t.isFunction,o=t.isString,a=t.isObject,s=t.isArray,l=t.forEach,c=t.extend,u=t.copy,d=t.toJson;t.module("ui.router.util",["ng"]),t.module("ui.router.router",["ui.router.util"]),t.module("ui.router.state",["ui.router.router","ui.router.util"]),t.module("ui.router",["ui.router.state"]),t.module("ui.router.compat",["ui.router"]),$Resolve.$inject=["$q","$injector"],t.module("ui.router.util").service("$resolve",$Resolve),t.module("ui.router.util").provider("$templateFactory",TemplateFactoryProvider);var p;UrlMatcher.prototype.concat=function(e,t){var n={caseInsensitive:p.caseInsensitive(),strict:p.strictMode(),squash:p.defaultSquashPolicy()};return new UrlMatcher(this.sourcePath+e+this.sourceSearch,c(n,t),this)},UrlMatcher.prototype.toString=function(){return this.source},UrlMatcher.prototype.exec=function(e,t){var n=this.regexp.exec(e);if(!n)return null;t=t||{};var r,o,a,s=this.parameters(),l=s.length,c=this.segments.length-1,u={};if(c!==n.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");var d,p;for(r=0;r<c;r++){for(a=s[r],d=this.params[a],p=n[r+1],o=0;o<d.replace.length;o++)d.replace[o].from===p&&(p=d.replace[o].to);p&&!0===d.array&&(p=function(e){function reverseString(e){return e.split("").reverse().join("")}function unquoteDashes(e){return e.replace(/\\-/g,"-")}return map(map(reverseString(e).split(/-(?!\\)/),reverseString),unquoteDashes).reverse()}(p)),i(p)&&(p=d.type.decode(p)),u[a]=d.value(p)}for(;r<l;r++){for(a=s[r],u[a]=this.params[a].value(t[a]),d=this.params[a],p=t[a],o=0;o<d.replace.length;o++)d.replace[o].from===p&&(p=d.replace[o].to);i(p)&&(p=d.type.decode(p)),u[a]=d.value(p)}return u},UrlMatcher.prototype.parameters=function(e){return i(e)?this.params[e]||null:this.$$paramNames},UrlMatcher.prototype.validates=function(e){return this.params.$$validates(e)},UrlMatcher.prototype.format=function(e){function encodeDashes(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()})}e=e||{};var t=this.segments,n=this.parameters(),i=this.params;if(!this.validates(e))return null;var r,a=!1,l=t.length-1,c=n.length,u=t[0];for(r=0;r<c;r++){var d=r<l,p=n[r],h=i[p],f=h.value(e[p]),m=h.isOptional&&h.type.equals(h.value(),f),g=!!m&&h.squash,v=h.type.encode(f);if(d){var y=t[r+1],w=r+1===l;if(!1===g)null!=v&&(s(v)?u+=map(v,encodeDashes).join("-"):u+=encodeURIComponent(v)),u+=y;else if(!0===g){var b=u.match(/\/$/)?/\/?(.*)/:/(.*)/;u+=y.match(b)[1]}else o(g)&&(u+=g+y);w&&!0===h.squash&&"/"===u.slice(-1)&&(u=u.slice(0,-1))}else{if(null==v||m&&!1!==g)continue;if(s(v)||(v=[v]),0===v.length)continue;v=map(v,encodeURIComponent).join("&"+p+"="),u+=(a?"&":"?")+p+"="+v,a=!0}}return u},Type.prototype.is=function(e,t){return!0},Type.prototype.encode=function(e,t){return e},Type.prototype.decode=function(e,t){return e},Type.prototype.equals=function(e,t){return e==t},Type.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},Type.prototype.pattern=/.*/,Type.prototype.toString=function(){return"{Type:"+this.name+"}"},Type.prototype.$normalize=function(e){return this.is(e)?e:this.decode(e)},Type.prototype.$asArray=function(e,t){function ArrayType(e,t){function bindTo(e,t){return function(){return e[t].apply(e,arguments)}}function arrayWrap(e){return s(e)?e:i(e)?[e]:[]}function arrayUnwrap(e){switch(e.length){case 0:return n;case 1:return"auto"===t?e[0]:e;default:return e}}function falsey(e){return!e}function arrayHandler(e,t){return function(n){if(s(n)&&0===n.length)return n;n=arrayWrap(n);var i=map(n,e);return!0===t?0===filter(i,falsey).length:arrayUnwrap(i)}}this.encode=arrayHandler(bindTo(e,"encode")),this.decode=arrayHandler(bindTo(e,"decode")),this.is=arrayHandler(bindTo(e,"is"),!0),this.equals=function(e){return function(t,n){var i=arrayWrap(t),r=arrayWrap(n);if(i.length!==r.length)return!1;for(var o=0;o<i.length;o++)if(!e(i[o],r[o]))return!1;return!0}}(bindTo(e,"equals")),this.pattern=e.pattern,this.$normalize=arrayHandler(bindTo(e,"$normalize")),this.name=e.name,this.$arrayMode=t}if(!e)return this;if("auto"===e&&!t)throw new Error("'auto' array mode is for query parameters only");return new ArrayType(this,e)},t.module("ui.router.util").provider("$urlMatcherFactory",$UrlMatcherFactory),t.module("ui.router.util").run(["$urlMatcherFactory",function(e){}]),$UrlRouterProvider.$inject=["$locationProvider","$urlMatcherFactoryProvider"],t.module("ui.router.router").provider("$urlRouter",$UrlRouterProvider),$StateProvider.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],t.module("ui.router.state").factory("$stateParams",function(){return{}}).constant("$state.runtime",{autoinject:!0}).provider("$state",$StateProvider).run(["$injector",function(e){e.get("$state.runtime").autoinject&&e.get("$state")}]),$ViewProvider.$inject=[],t.module("ui.router.state").provider("$view",$ViewProvider),t.module("ui.router.state").provider("$uiViewScroll",$ViewScrollProvider),$ViewDirective.$inject=["$state","$injector","$uiViewScroll","$interpolate","$q"],$ViewDirectiveFill.$inject=["$compile","$controller","$state","$interpolate"],t.module("ui.router.state").directive("uiView",$ViewDirective),t.module("ui.router.state").directive("uiView",$ViewDirectiveFill),$StateRefDirective.$inject=["$state","$timeout"],$StateRefDynamicDirective.$inject=["$state","$timeout"],$StateRefActiveDirective.$inject=["$state","$stateParams","$interpolate"],t.module("ui.router.state").directive("uiSref",$StateRefDirective).directive("uiSrefActive",$StateRefActiveDirective).directive("uiSrefActiveEq",$StateRefActiveDirective).directive("uiState",$StateRefDynamicDirective),$IsStateFilter.$inject=["$state"],$IncludedByStateFilter.$inject=["$state"],t.module("ui.router.state").filter("isState",$IsStateFilter).filter("includedByState",$IncludedByStateFilter)}(window,window.angular)},function(e,t){function bounceOut(e){var t=e*e;return e<4/11?7.5625*t:e<8/11?9.075*t-9.9*e+3.4:e<.9?4356/361*t-35442/1805*e+16061/1805:10.8*e*e-20.52*e+10.72}e.exports=bounceOut},function(e,t,n){n(49),e.exports="ngAnimate"},function(e,t,n){(function(i){var r,o,a=void 0!==e&&e.exports&&void 0!==i?i:this||window;(a._gsQueue||(a._gsQueue=[])).push(function(){"use strict";a._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,n){var i=function(e){var t,n=[],i=e.length;for(t=0;t!==i;n.push(e[t++]));return n},r=function(e,t,n){var i,r,o=e.cycle;for(i in o)r=o[i],e[i]="function"==typeof r?r.call(t[n],n):r[n%r.length];delete e.cycle},o=function(e,t,i){n.call(this,e,t,i),this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=o.prototype.render},a=n._internals,s=a.isSelector,l=a.isArray,c=o.prototype=n.to({},.1,{}),u=[];o.version="1.18.5",c.constructor=o,c.kill()._gc=!1,o.killTweensOf=o.killDelayedCallsTo=n.killTweensOf,o.getTweensOf=n.getTweensOf,o.lagSmoothing=n.lagSmoothing,o.ticker=n.ticker,o.render=n.render,c.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),n.prototype.invalidate.call(this)},c.updateTo=function(e,t){var i,r=this.ratio,o=this.vars.immediateRender||e.immediateRender;t&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(i in e)this.vars[i]=e[i];if(this._initted||o)if(t)this._initted=!1,o&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&n._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var a=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(a,!0,!1)}else if(this._initted=!1,this._init(),this._time>0||o)for(var s,l=1/(1-r),c=this._firstPT;c;)s=c.s+c.c,c.c*=l,c.s=s-c.c,c=c._next;return this},c.render=function(e,t,n){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var i,r,o,s,l,c,u,d,p=this._dirty?this.totalDuration():this._totalDuration,h=this._time,f=this._totalTime,m=this._cycle,g=this._duration,v=this._rawPrevTime;if(e>=p-1e-7?(this._totalTime=p,this._cycle=this._repeat,this._yoyo&&0!=(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=g,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(i=!0,r="onComplete",n=n||this._timeline.autoRemoveChildren),0===g&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(e=0),(v<0||e<=0&&e>=-1e-7||1e-10===v&&"isPause"!==this.data)&&v!==e&&(n=!0,v>1e-10&&(r="onReverseComplete")),this._rawPrevTime=d=!t||e||v===e?e:1e-10)):e<1e-7?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==f||0===g&&v>0)&&(r="onReverseComplete",i=this._reversed),e<0&&(this._active=!1,0===g&&(this._initted||!this.vars.lazy||n)&&(v>=0&&(n=!0),this._rawPrevTime=d=!t||e||v===e?e:1e-10)),this._initted||(n=!0)):(this._totalTime=this._time=e,0!==this._repeat&&(s=g+this._repeatDelay,this._cycle=this._totalTime/s>>0,0!==this._cycle&&this._cycle===this._totalTime/s&&f<=e&&this._cycle--,this._time=this._totalTime-this._cycle*s,this._yoyo&&0!=(1&this._cycle)&&(this._time=g-this._time),this._time>g?this._time=g:this._time<0&&(this._time=0)),this._easeType?(l=this._time/g,c=this._easeType,u=this._easePower,(1===c||3===c&&l>=.5)&&(l=1-l),3===c&&(l*=2),1===u?l*=l:2===u?l*=l*l:3===u?l*=l*l*l:4===u&&(l*=l*l*l*l),1===c?this.ratio=1-l:2===c?this.ratio=l:this._time/g<.5?this.ratio=l/2:this.ratio=1-l/2):this.ratio=this._ease.getRatio(this._time/g)),h===this._time&&!n&&m===this._cycle)return void(f!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate")));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=h,this._totalTime=f,this._rawPrevTime=v,this._cycle=m,a.lazyTweens.push(this),void(this._lazy=[e,t]);this._time&&!i?this.ratio=this._ease.getRatio(this._time/g):i&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==h&&e>=0&&(this._active=!0),0===f&&(2===this._initted&&e>0&&this._init(),this._startAt&&(e>=0?this._startAt.render(e,t,n):r||(r="_dummyGS")),this.vars.onStart&&(0===this._totalTime&&0!==g||t||this._callback("onStart"))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(e<0&&this._startAt&&this._startTime&&this._startAt.render(e,t,n),t||(this._totalTime!==f||r)&&this._callback("onUpdate")),this._cycle!==m&&(t||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),r&&(this._gc&&!n||(e<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(e,t,n),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[r]&&this._callback(r),0===g&&1e-10===this._rawPrevTime&&1e-10!==d&&(this._rawPrevTime=0)))},o.to=function(e,t,n){return new o(e,t,n)},o.from=function(e,t,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new o(e,t,n)},o.fromTo=function(e,t,n,i){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,new o(e,t,i)},o.staggerTo=o.allTo=function(e,t,a,c,d,p,h){c=c||0;var f,m,g,v,y=0,w=[],b=function(){a.onComplete&&a.onComplete.apply(a.onCompleteScope||this,arguments),d.apply(h||a.callbackScope||this,p||u)},S=a.cycle,T=a.startAt&&a.startAt.cycle;for(l(e)||("string"==typeof e&&(e=n.selector(e)||e),s(e)&&(e=i(e))),e=e||[],c<0&&(e=i(e),e.reverse(),c*=-1),f=e.length-1,g=0;g<=f;g++){m={};for(v in a)m[v]=a[v];if(S&&(r(m,e,g),null!=m.duration&&(t=m.duration,delete m.duration)),T){T=m.startAt={};for(v in a.startAt)T[v]=a.startAt[v];r(m.startAt,e,g)}m.delay=y+(m.delay||0),g===f&&d&&(m.onComplete=b),w[g]=new o(e[g],t,m),y+=c}return w},o.staggerFrom=o.allFrom=function(e,t,n,i,r,a,s){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,o.staggerTo(e,t,n,i,r,a,s)},o.staggerFromTo=o.allFromTo=function(e,t,n,i,r,a,s,l){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,o.staggerTo(e,t,i,r,a,s,l)},o.delayedCall=function(e,t,n,i,r){return new o(t,0,{delay:e,onComplete:t,onCompleteParams:n,callbackScope:i,onReverseComplete:t,onReverseCompleteParams:n,immediateRender:!1,useFrames:r,overwrite:0})},o.set=function(e,t){return new o(e,0,t)},o.isTweening=function(e){return n.getTweensOf(e,!0).length>0};var d=function(e,t){for(var i=[],r=0,o=e._first;o;)o instanceof n?i[r++]=o:(t&&(i[r++]=o),i=i.concat(d(o,t)),r=i.length),o=o._next;return i},p=o.getAllTweens=function(t){return d(e._rootTimeline,t).concat(d(e._rootFramesTimeline,t))};o.killAll=function(e,n,i,r){null==n&&(n=!0),null==i&&(i=!0);var o,a,s,l=p(0!=r),c=l.length,u=n&&i&&r;for(s=0;s<c;s++)a=l[s],(u||a instanceof t||(o=a.target===a.vars.onComplete)&&i||n&&!o)&&(e?a.totalTime(a._reversed?0:a.totalDuration()):a._enabled(!1,!1))},o.killChildTweensOf=function(e,t){if(null!=e){var r,c,u,d,p,h=a.tweenLookup;if("string"==typeof e&&(e=n.selector(e)||e),s(e)&&(e=i(e)),l(e))for(d=e.length;--d>-1;)o.killChildTweensOf(e[d],t);else{r=[];for(u in h)for(c=h[u].target.parentNode;c;)c===e&&(r=r.concat(h[u].tweens)),c=c.parentNode;for(p=r.length,d=0;d<p;d++)t&&r[d].totalTime(r[d].totalDuration()),r[d]._enabled(!1,!1)}}};var h=function(e,n,i,r){n=!1!==n,i=!1!==i,r=!1!==r;for(var o,a,s=p(r),l=n&&i&&r,c=s.length;--c>-1;)a=s[c],(l||a instanceof t||(o=a.target===a.vars.onComplete)&&i||n&&!o)&&a.paused(e)};return o.pauseAll=function(e,t,n){h(!0,e,t,n)},o.resumeAll=function(e,t,n){h(!1,e,t,n)},o.globalTimeScale=function(t){var i=e._rootTimeline,r=n.ticker.time;return arguments.length?(t=t||1e-10,i._startTime=r-(r-i._startTime)*i._timeScale/t,i=e._rootFramesTimeline,r=n.ticker.frame,i._startTime=r-(r-i._startTime)*i._timeScale/t,i._timeScale=e._rootTimeline._timeScale=t,t):i._timeScale},c.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()},c.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},c.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!=(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},c.duration=function(t){return arguments.length?e.prototype.duration.call(this,t):this._duration},c.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},c.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},c.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},c.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},o},!0),a._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,n){var i=function(e){t.call(this,e),this._labels={},this.autoRemoveChildren=!0===this.vars.autoRemoveChildren,this.smoothChildTiming=!0===this.vars.smoothChildTiming,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var n,i,r=this.vars;for(i in r)n=r[i],l(n)&&-1!==n.join("").indexOf("{self}")&&(r[i]=this._swapSelfInParams(n));l(r.tweens)&&this.add(r.tweens,0,r.align,r.stagger)},r=n._internals,o=i._internals={},s=r.isSelector,l=r.isArray,c=r.lazyTweens,u=r.lazyRender,d=a._gsDefine.globals,p=function(e){var t,n={};for(t in e)n[t]=e[t];return n},h=function(e,t,n){var i,r,o=e.cycle;for(i in o)r=o[i],e[i]="function"==typeof r?r.call(t[n],n):r[n%r.length];delete e.cycle},f=o.pauseCallback=function(){},m=function(e){var t,n=[],i=e.length;for(t=0;t!==i;n.push(e[t++]));return n},g=i.prototype=new t;return i.version="1.18.5",g.constructor=i,g.kill()._gc=g._forcingPlayhead=g._hasPause=!1,g.to=function(e,t,i,r){var o=i.repeat&&d.TweenMax||n;return t?this.add(new o(e,t,i),r):this.set(e,i,r)},g.from=function(e,t,i,r){return this.add((i.repeat&&d.TweenMax||n).from(e,t,i),r)},g.fromTo=function(e,t,i,r,o){var a=r.repeat&&d.TweenMax||n;return t?this.add(a.fromTo(e,t,i,r),o):this.set(e,r,o)},g.staggerTo=function(e,t,r,o,a,l,c,u){var d,f,g=new i({onComplete:l,onCompleteParams:c,callbackScope:u,smoothChildTiming:this.smoothChildTiming}),v=r.cycle;for("string"==typeof e&&(e=n.selector(e)||e),e=e||[],s(e)&&(e=m(e)),o=o||0,o<0&&(e=m(e),e.reverse(),o*=-1),f=0;f<e.length;f++)d=p(r),d.startAt&&(d.startAt=p(d.startAt),d.startAt.cycle&&h(d.startAt,e,f)),v&&(h(d,e,f),null!=d.duration&&(t=d.duration,delete d.duration)),g.to(e[f],t,d,f*o);return this.add(g,a)},g.staggerFrom=function(e,t,n,i,r,o,a,s){return n.immediateRender=0!=n.immediateRender,n.runBackwards=!0,this.staggerTo(e,t,n,i,r,o,a,s)},g.staggerFromTo=function(e,t,n,i,r,o,a,s,l){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,this.staggerTo(e,t,i,r,o,a,s,l)},g.call=function(e,t,i,r){return this.add(n.delayedCall(0,e,t,i),r)},g.set=function(e,t,i){return i=this._parseTimeOrLabel(i,0,!0),null==t.immediateRender&&(t.immediateRender=i===this._time&&!this._paused),this.add(new n(e,0,t),i)},i.exportRoot=function(e,t){e=e||{},null==e.smoothChildTiming&&(e.smoothChildTiming=!0);var r,o,a=new i(e),s=a._timeline;for(null==t&&(t=!0),s._remove(a,!0),a._startTime=0,a._rawPrevTime=a._time=a._totalTime=s._time,r=s._first;r;)o=r._next,t&&r instanceof n&&r.target===r.vars.onComplete||a.add(r,r._startTime-r._delay),r=o;return s.add(a,0),a},g.add=function(r,o,a,s){var c,u,d,p,h,f;if("number"!=typeof o&&(o=this._parseTimeOrLabel(o,0,!0,r)),!(r instanceof e)){if(r instanceof Array||r&&r.push&&l(r)){for(a=a||"normal",s=s||0,c=o,u=r.length,d=0;d<u;d++)l(p=r[d])&&(p=new i({tweens:p})),this.add(p,c),"string"!=typeof p&&"function"!=typeof p&&("sequence"===a?c=p._startTime+p.totalDuration()/p._timeScale:"start"===a&&(p._startTime-=p.delay())),c+=s;return this._uncache(!0)}if("string"==typeof r)return this.addLabel(r,o);if("function"!=typeof r)throw"Cannot add "+r+" into the timeline; it is not a tween, timeline, function, or string.";r=n.delayedCall(0,r)}if(t.prototype.add.call(this,r,o),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(h=this,f=h.rawTime()>r._startTime;h._timeline;)f&&h._timeline.smoothChildTiming?h.totalTime(h._totalTime,!0):h._gc&&h._enabled(!0,!1),h=h._timeline;return this},g.remove=function(t){if(t instanceof e){this._remove(t,!1);var n=t._timeline=t.vars.useFrames?e._rootFramesTimeline:e._rootTimeline;return t._startTime=(t._paused?t._pauseTime:n._time)-(t._reversed?t.totalDuration()-t._totalTime:t._totalTime)/t._timeScale,this}if(t instanceof Array||t&&t.push&&l(t)){for(var i=t.length;--i>-1;)this.remove(t[i]);return this}return"string"==typeof t?this.removeLabel(t):this.kill(null,t)},g._remove=function(e,n){t.prototype._remove.call(this,e,n);var i=this._last;return i?this._time>i._startTime+i._totalDuration/i._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},g.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},g.insert=g.insertMultiple=function(e,t,n,i){return this.add(e,t||0,n,i)},g.appendMultiple=function(e,t,n,i){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),n,i)},g.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},g.addPause=function(e,t,i,r){var o=n.delayedCall(0,f,i,r||this);return o.vars.onComplete=o.vars.onReverseComplete=t,o.data="isPause",this._hasPause=!0,this.add(o,e)},g.removeLabel=function(e){return delete this._labels[e],this},g.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},g._parseTimeOrLabel=function(t,n,i,r){var o;if(r instanceof e&&r.timeline===this)this.remove(r);else if(r&&(r instanceof Array||r.push&&l(r)))for(o=r.length;--o>-1;)r[o]instanceof e&&r[o].timeline===this&&this.remove(r[o]);if("string"==typeof n)return this._parseTimeOrLabel(n,i&&"number"==typeof t&&null==this._labels[n]?t-this.duration():0,i);if(n=n||0,"string"!=typeof t||!isNaN(t)&&null==this._labels[t])null==t&&(t=this.duration());else{if(-1===(o=t.indexOf("=")))return null==this._labels[t]?i?this._labels[t]=this.duration()+n:n:this._labels[t]+n;n=parseInt(t.charAt(o-1)+"1",10)*Number(t.substr(o+1)),t=o>1?this._parseTimeOrLabel(t.substr(0,o-1),0,i):this.duration()}return Number(t)+n},g.seek=function(e,t){return this.totalTime("number"==typeof e?e:this._parseTimeOrLabel(e),!1!==t)},g.stop=function(){return this.paused(!0)},g.gotoAndPlay=function(e,t){return this.play(e,t)},g.gotoAndStop=function(e,t){return this.pause(e,t)},g.render=function(e,t,n){this._gc&&this._enabled(!0,!1);var i,r,o,a,s,l,d,p=this._dirty?this.totalDuration():this._totalDuration,h=this._time,f=this._startTime,m=this._timeScale,g=this._paused;if(e>=p-1e-7)this._totalTime=this._time=p,this._reversed||this._hasPausedChild()||(r=!0,a="onComplete",s=!!this._timeline.autoRemoveChildren,0===this._duration&&(e<=0&&e>=-1e-7||this._rawPrevTime<0||1e-10===this._rawPrevTime)&&this._rawPrevTime!==e&&this._first&&(s=!0,this._rawPrevTime>1e-10&&(a="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:1e-10,e=p+1e-4;else if(e<1e-7)if(this._totalTime=this._time=0,(0!==h||0===this._duration&&1e-10!==this._rawPrevTime&&(this._rawPrevTime>0||e<0&&this._rawPrevTime>=0))&&(a="onReverseComplete",r=this._reversed),e<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(s=r=!0,a="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(s=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:1e-10,0===e&&r)for(i=this._first;i&&0===i._startTime;)i._duration||(r=!1),i=i._next;e=0,this._initted||(s=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!t){if(e>=h)for(i=this._first;i&&i._startTime<=e&&!l;)i._duration||"isPause"!==i.data||i.ratio||0===i._startTime&&0===this._rawPrevTime||(l=i),i=i._next;else for(i=this._last;i&&i._startTime>=e&&!l;)i._duration||"isPause"===i.data&&i._rawPrevTime>0&&(l=i),i=i._prev;l&&(this._time=e=l._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=e}if(this._time!==h&&this._first||n||s||l){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==h&&e>0&&(this._active=!0),0===h&&this.vars.onStart&&(0===this._time&&this._duration||t||this._callback("onStart")),(d=this._time)>=h)for(i=this._first;i&&(o=i._next,d===this._time&&(!this._paused||g));)(i._active||i._startTime<=d&&!i._paused&&!i._gc)&&(l===i&&this.pause(),i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,n):i.render((e-i._startTime)*i._timeScale,t,n)),i=o;else for(i=this._last;i&&(o=i._prev,d===this._time&&(!this._paused||g));){if(i._active||i._startTime<=h&&!i._paused&&!i._gc){if(l===i){for(l=i._prev;l&&l.endTime()>this._time;)l.render(l._reversed?l.totalDuration()-(e-l._startTime)*l._timeScale:(e-l._startTime)*l._timeScale,t,n),l=l._prev;l=null,this.pause()}i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,n):i.render((e-i._startTime)*i._timeScale,t,n)}i=o}this._onUpdate&&(t||(c.length&&u(),this._callback("onUpdate"))),a&&(this._gc||f!==this._startTime&&m===this._timeScale||(0===this._time||p>=this.totalDuration())&&(r&&(c.length&&u(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[a]&&this._callback(a)))}},g._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof i&&e._hasPausedChild())return!0;e=e._next}return!1},g.getChildren=function(e,t,i,r){r=r||-9999999999;for(var o=[],a=this._first,s=0;a;)a._startTime<r||(a instanceof n?!1!==t&&(o[s++]=a):(!1!==i&&(o[s++]=a),!1!==e&&(o=o.concat(a.getChildren(!0,t,i)),s=o.length))),a=a._next;return o},g.getTweensOf=function(e,t){var i,r,o=this._gc,a=[],s=0;for(o&&this._enabled(!0,!0),i=n.getTweensOf(e),r=i.length;--r>-1;)(i[r].timeline===this||t&&this._contains(i[r]))&&(a[s++]=i[r]);return o&&this._enabled(!1,!0),a},g.recent=function(){return this._recent},g._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},g.shiftChildren=function(e,t,n){n=n||0;for(var i,r=this._first,o=this._labels;r;)r._startTime>=n&&(r._startTime+=e),r=r._next;if(t)for(i in o)o[i]>=n&&(o[i]+=e);return this._uncache(!0)},g._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var n=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),i=n.length,r=!1;--i>-1;)n[i]._kill(e,t)&&(r=!0);return r},g.clear=function(e){var t=this.getChildren(!1,!0,!0),n=t.length;for(this._time=this._totalTime=0;--n>-1;)t[n]._enabled(!1,!1);return!1!==e&&(this._labels={}),this._uncache(!0)},g.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},g._enabled=function(e,n){if(e===this._gc)for(var i=this._first;i;)i._enabled(e,!0),i=i._next;return t.prototype._enabled.call(this,e,n)},g.totalTime=function(t,n,i){this._forcingPlayhead=!0;var r=e.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,r},g.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},g.totalDuration=function(e){if(!arguments.length){if(this._dirty){for(var t,n,i=0,r=this._last,o=999999999999;r;)t=r._prev,r._dirty&&r.totalDuration(),r._startTime>o&&this._sortChildren&&!r._paused?this.add(r,r._startTime-r._delay):o=r._startTime,r._startTime<0&&!r._paused&&(i-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale),this.shiftChildren(-r._startTime,!1,-9999999999),o=0),n=r._startTime+r._totalDuration/r._timeScale,n>i&&(i=n),r=t;this._duration=this._totalDuration=i,this._dirty=!1}return this._totalDuration}return e&&this.totalDuration()?this.timeScale(this._totalDuration/e):this},g.paused=function(t){if(!t)for(var n=this._first,i=this._time;n;)n._startTime===i&&"isPause"===n.data&&(n._rawPrevTime=0),n=n._next;return e.prototype.paused.apply(this,arguments)},g.usesFrames=function(){for(var t=this._timeline;t._timeline;)t=t._timeline;return t===e._rootFramesTimeline},g.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},i},!0),a._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(e,t,n){var i=function(t){e.call(this,t),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._dirty=!0},r=t._internals,o=r.lazyTweens,a=r.lazyRender,s=new n(null,null,1,0),l=i.prototype=new e;return l.constructor=i,l.kill()._gc=!1,i.version="1.18.5",l.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),e.prototype.invalidate.call(this)},l.addCallback=function(e,n,i,r){return this.add(t.delayedCall(0,e,i,r),n)},l.removeCallback=function(e,t){if(e)if(null==t)this._kill(null,e);else for(var n=this.getTweensOf(e,!1),i=n.length,r=this._parseTimeOrLabel(t);--i>-1;)n[i]._startTime===r&&n[i]._enabled(!1,!1);return this},l.removePause=function(t){return this.removeCallback(e._internals.pauseCallback,t)},l.tweenTo=function(e,n){n=n||{};var i,r,o,a={ease:s,useFrames:this.usesFrames(),immediateRender:!1};for(r in n)a[r]=n[r];return a.time=this._parseTimeOrLabel(e),i=Math.abs(Number(a.time)-this._time)/this._timeScale||.001,o=new t(this,i,a),a.onStart=function(){o.target.paused(!0),o.vars.time!==o.target.time()&&i===o.duration()&&o.duration(Math.abs(o.vars.time-o.target.time())/o.target._timeScale),n.onStart&&o._callback("onStart")},o},l.tweenFromTo=function(e,t,n){n=n||{},e=this._parseTimeOrLabel(e),n.startAt={onComplete:this.seek,onCompleteParams:[e],callbackScope:this},n.immediateRender=!1!==n.immediateRender;var i=this.tweenTo(t,n);return i.duration(Math.abs(i.vars.time-e)/this._timeScale||.001)},l.render=function(e,t,n){this._gc&&this._enabled(!0,!1);var i,r,s,l,c,u,d,p,h=this._dirty?this.totalDuration():this._totalDuration,f=this._duration,m=this._time,g=this._totalTime,v=this._startTime,y=this._timeScale,w=this._rawPrevTime,b=this._paused,S=this._cycle;if(e>=h-1e-7)this._locked||(this._totalTime=h,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(r=!0,l="onComplete",c=!!this._timeline.autoRemoveChildren,0===this._duration&&(e<=0&&e>=-1e-7||w<0||1e-10===w)&&w!==e&&this._first&&(c=!0,w>1e-10&&(l="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:1e-10,this._yoyo&&0!=(1&this._cycle)?this._time=e=0:(this._time=f,e=f+1e-4);else if(e<1e-7)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==m||0===f&&1e-10!==w&&(w>0||e<0&&w>=0)&&!this._locked)&&(l="onReverseComplete",r=this._reversed),e<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(c=r=!0,l="onReverseComplete"):w>=0&&this._first&&(c=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=f||!t||e||this._rawPrevTime===e?e:1e-10,0===e&&r)for(i=this._first;i&&0===i._startTime;)i._duration||(r=!1),i=i._next;e=0,this._initted||(c=!0)}else if(0===f&&w<0&&(c=!0),this._time=this._rawPrevTime=e,this._locked||(this._totalTime=e,0!==this._repeat&&(u=f+this._repeatDelay,this._cycle=this._totalTime/u>>0,0!==this._cycle&&this._cycle===this._totalTime/u&&g<=e&&this._cycle--,this._time=this._totalTime-this._cycle*u,this._yoyo&&0!=(1&this._cycle)&&(this._time=f-this._time),this._time>f?(this._time=f,e=f+1e-4):this._time<0?this._time=e=0:e=this._time)),this._hasPause&&!this._forcingPlayhead&&!t){if((e=this._time)>=m)for(i=this._first;i&&i._startTime<=e&&!d;)i._duration||"isPause"!==i.data||i.ratio||0===i._startTime&&0===this._rawPrevTime||(d=i),i=i._next;else for(i=this._last;i&&i._startTime>=e&&!d;)i._duration||"isPause"===i.data&&i._rawPrevTime>0&&(d=i),i=i._prev;d&&(this._time=e=d._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==S&&!this._locked){var T=this._yoyo&&0!=(1&S),E=T===(this._yoyo&&0!=(1&this._cycle)),O=this._totalTime,I=this._cycle,x=this._rawPrevTime,C=this._time;if(this._totalTime=S*f,this._cycle<S?T=!T:this._totalTime+=f,this._time=m,this._rawPrevTime=0===f?w-1e-4:w,this._cycle=S,this._locked=!0,m=T?0:f,this.render(m,t,0===f),t||this._gc||this.vars.onRepeat&&this._callback("onRepeat"),m!==this._time)return;if(E&&(m=T?f+1e-4:-1e-4,this.render(m,!0,!1)),this._locked=!1,this._paused&&!b)return;this._time=C,this._totalTime=O,this._cycle=I,this._rawPrevTime=x}if(!(this._time!==m&&this._first||n||c||d))return void(g!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate")));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==g&&e>0&&(this._active=!0),0===g&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||t||this._callback("onStart")),(p=this._time)>=m)for(i=this._first;i&&(s=i._next,p===this._time&&(!this._paused||b));)(i._active||i._startTime<=this._time&&!i._paused&&!i._gc)&&(d===i&&this.pause(),i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,n):i.render((e-i._startTime)*i._timeScale,t,n)),i=s;else for(i=this._last;i&&(s=i._prev,p===this._time&&(!this._paused||b));){if(i._active||i._startTime<=m&&!i._paused&&!i._gc){if(d===i){for(d=i._prev;d&&d.endTime()>this._time;)d.render(d._reversed?d.totalDuration()-(e-d._startTime)*d._timeScale:(e-d._startTime)*d._timeScale,t,n),d=d._prev;d=null,this.pause()}i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,n):i.render((e-i._startTime)*i._timeScale,t,n)}i=s}this._onUpdate&&(t||(o.length&&a(),this._callback("onUpdate"))),l&&(this._locked||this._gc||v!==this._startTime&&y===this._timeScale||(0===this._time||h>=this.totalDuration())&&(r&&(o.length&&a(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[l]&&this._callback(l)))},l.getActive=function(e,t,n){null==e&&(e=!0),null==t&&(t=!0),null==n&&(n=!1);var i,r,o=[],a=this.getChildren(e,t,n),s=0,l=a.length;for(i=0;i<l;i++)r=a[i],r.isActive()&&(o[s++]=r);return o},l.getLabelAfter=function(e){e||0!==e&&(e=this._time);var t,n=this.getLabelsArray(),i=n.length;for(t=0;t<i;t++)if(n[t].time>e)return n[t].name;return null},l.getLabelBefore=function(e){null==e&&(e=this._time);for(var t=this.getLabelsArray(),n=t.length;--n>-1;)if(t[n].time<e)return t[n].name;return null},l.getLabelsArray=function(){var e,t=[],n=0;for(e in this._labels)t[n++]={time:this._labels[e],name:e};return t.sort(function(e,t){return e.time-t.time}),t},l.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()},l.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},l.totalDuration=function(t){return arguments.length?-1!==this._repeat&&t?this.timeScale(this.totalDuration()/t):this:(this._dirty&&(e.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},l.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!=(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},l.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},l.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},l.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},l.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+1e-8)},i},!0),function(){var e=180/Math.PI,t=[],n=[],i=[],r={},o=a._gsDefine.globals,s=function(e,t,n,i){n===i&&(n=i-(i-t)/1e6),e===t&&(t=e+(n-e)/1e6),this.a=e,this.b=t,this.c=n,this.d=i,this.da=i-e,this.ca=n-e,this.ba=t-e},l=function(e,t,n,i){var r={a:e},o={},a={},s={c:i},l=(e+t)/2,c=(t+n)/2,u=(n+i)/2,d=(l+c)/2,p=(c+u)/2,h=(p-d)/8;return r.b=l+(e-l)/4,o.b=d+h,r.c=o.a=(r.b+o.b)/2,o.c=a.a=(d+p)/2,a.b=p-h,s.b=u+(i-u)/4,a.c=s.a=(a.b+s.b)/2,[r,o,a,s]},c=function(e,r,o,a,s){var c,u,d,p,h,f,m,g,v,y,w,b,S,T=e.length-1,E=0,O=e[0].a;for(c=0;c<T;c++)h=e[E],u=h.a,d=h.d,p=e[E+1].d,s?(w=t[c],b=n[c],S=(b+w)*r*.25/(a?.5:i[c]||.5),f=d-(d-u)*(a?.5*r:0!==w?S/w:0),m=d+(p-d)*(a?.5*r:0!==b?S/b:0),g=d-(f+((m-f)*(3*w/(w+b)+.5)/4||0))):(f=d-(d-u)*r*.5,m=d+(p-d)*r*.5,g=d-(f+m)/2),f+=g,m+=g,h.c=v=f,h.b=0!==c?O:O=h.a+.6*(h.c-h.a),h.da=d-u,h.ca=v-u,h.ba=O-u,o?(y=l(u,O,v,d),e.splice(E,1,y[0],y[1],y[2],y[3]),E+=4):E++,O=m;h=e[E],h.b=O,h.c=O+.4*(h.d-O),h.da=h.d-h.a,h.ca=h.c-h.a,h.ba=O-h.a,o&&(y=l(h.a,O,h.c,h.d),e.splice(E,1,y[0],y[1],y[2],y[3]))},u=function(e,i,r,o){var a,l,c,u,d,p,h=[];if(o)for(e=[o].concat(e),l=e.length;--l>-1;)"string"==typeof(p=e[l][i])&&"="===p.charAt(1)&&(e[l][i]=o[i]+Number(p.charAt(0)+p.substr(2)));if((a=e.length-2)<0)return h[0]=new s(e[0][i],0,0,e[a<-1?0:1][i]),h;for(l=0;l<a;l++)c=e[l][i],u=e[l+1][i],h[l]=new s(c,0,0,u),r&&(d=e[l+2][i],t[l]=(t[l]||0)+(u-c)*(u-c),n[l]=(n[l]||0)+(d-u)*(d-u));return h[l]=new s(e[l][i],0,0,e[l+1][i]),h},d=function(e,o,a,s,l,d){var p,h,f,m,g,v,y,w,b={},S=[],T=d||e[0];l="string"==typeof l?","+l+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==o&&(o=1);for(h in e[0])S.push(h);if(e.length>1){for(w=e[e.length-1],y=!0,p=S.length;--p>-1;)if(h=S[p],Math.abs(T[h]-w[h])>.05){y=!1;break}y&&(e=e.concat(),d&&e.unshift(d),e.push(e[1]),d=e[e.length-3])}for(t.length=n.length=i.length=0,p=S.length;--p>-1;)h=S[p],r[h]=-1!==l.indexOf(","+h+","),b[h]=u(e,h,r[h],d);for(p=t.length;--p>-1;)t[p]=Math.sqrt(t[p]),n[p]=Math.sqrt(n[p]);if(!s){for(p=S.length;--p>-1;)if(r[h])for(f=b[S[p]],v=f.length-1,m=0;m<v;m++)g=f[m+1].da/n[m]+f[m].da/t[m]||0,i[m]=(i[m]||0)+g*g;for(p=i.length;--p>-1;)i[p]=Math.sqrt(i[p])}for(p=S.length,m=a?4:1;--p>-1;)h=S[p],f=b[h],c(f,o,a,s,r[h]),y&&(f.splice(0,m),f.splice(f.length-m,m));return b},p=function(e,t,n){t=t||"soft";var i,r,o,a,l,c,u,d,p,h,f,m={},g="cubic"===t?3:2,v="soft"===t,y=[];if(v&&n&&(e=[n].concat(e)),null==e||e.length<g+1)throw"invalid Bezier data";for(p in e[0])y.push(p);for(c=y.length;--c>-1;){for(p=y[c],m[p]=l=[],h=0,d=e.length,u=0;u<d;u++)i=null==n?e[u][p]:"string"==typeof(f=e[u][p])&&"="===f.charAt(1)?n[p]+Number(f.charAt(0)+f.substr(2)):Number(f),v&&u>1&&u<d-1&&(l[h++]=(i+l[h-2])/2),l[h++]=i;for(d=h-g+1,h=0,u=0;u<d;u+=g)i=l[u],r=l[u+1],o=l[u+2],a=2===g?0:l[u+3],l[h++]=f=3===g?new s(i,r,o,a):new s(i,(2*r+i)/3,(2*r+o)/3,o);l.length=h}return m},h=function(e,t,n){for(var i,r,o,a,s,l,c,u,d,p,h,f=1/n,m=e.length;--m>-1;)for(p=e[m],o=p.a,a=p.d-o,s=p.c-o,l=p.b-o,i=r=0,u=1;u<=n;u++)c=f*u,d=1-c,i=r-(r=(c*c*a+3*d*(c*s+d*l))*c),h=m*n+u-1,t[h]=(t[h]||0)+i*i},f=function(e,t){t=t>>0||6;var n,i,r,o,a=[],s=[],l=0,c=0,u=t-1,d=[],p=[];for(n in e)h(e[n],a,t);for(r=a.length,i=0;i<r;i++)l+=Math.sqrt(a[i]),o=i%t,p[o]=l,o===u&&(c+=l,o=i/t>>0,d[o]=p,s[o]=c,l=0,p=[]);return{length:c,lengths:s,segments:d}},m=a._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.6",API:2,global:!0,init:function(e,t,n){this._target=e,t instanceof Array&&(t={values:t}),this._func={},this._round={},this._props=[],this._timeRes=null==t.timeResolution?6:parseInt(t.timeResolution,10);var i,r,o,a,s,l=t.values||[],c={},u=l[0],h=t.autoRotate||n.vars.orientToBezier;this._autoRotate=h?h instanceof Array?h:[["x","y","rotation",!0===h?0:Number(h)||0]]:null;for(i in u)this._props.push(i);for(o=this._props.length;--o>-1;)i=this._props[o],this._overwriteProps.push(i),r=this._func[i]="function"==typeof e[i],c[i]=r?e[i.indexOf("set")||"function"!=typeof e["get"+i.substr(3)]?i:"get"+i.substr(3)]():parseFloat(e[i]),s||c[i]!==l[0][i]&&(s=c);if(this._beziers="cubic"!==t.type&&"quadratic"!==t.type&&"soft"!==t.type?d(l,isNaN(t.curviness)?1:t.curviness,!1,"thruBasic"===t.type,t.correlate,s):p(l,t.type,c),this._segCount=this._beziers[i].length,this._timeRes){var m=f(this._beziers,this._timeRes);this._length=m.length,this._lengths=m.lengths,this._segments=m.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(h=this._autoRotate)for(this._initialRotations=[],h[0]instanceof Array||(this._autoRotate=h=[h]),o=h.length;--o>-1;){for(a=0;a<3;a++)i=h[o][a],this._func[i]="function"==typeof e[i]&&e[i.indexOf("set")||"function"!=typeof e["get"+i.substr(3)]?i:"get"+i.substr(3)];i=h[o][2],this._initialRotations[o]=(this._func[i]?this._func[i].call(this._target):this._target[i])||0}return this._startRatio=n.vars.runBackwards?1:0,!0},set:function(t){var n,i,r,o,a,s,l,c,u,d,p=this._segCount,h=this._func,f=this._target,m=t!==this._startRatio;if(this._timeRes){if(u=this._lengths,d=this._curSeg,t*=this._length,r=this._li,t>this._l2&&r<p-1){for(c=p-1;r<c&&(this._l2=u[++r])<=t;);this._l1=u[r-1],this._li=r,this._curSeg=d=this._segments[r],this._s2=d[this._s1=this._si=0]}else if(t<this._l1&&r>0){for(;r>0&&(this._l1=u[--r])>=t;);0===r&&t<this._l1?this._l1=0:r++,this._l2=u[r],this._li=r,this._curSeg=d=this._segments[r],this._s1=d[(this._si=d.length-1)-1]||0,this._s2=d[this._si]}if(n=r,t-=this._l1,r=this._si,t>this._s2&&r<d.length-1){for(c=d.length-1;r<c&&(this._s2=d[++r])<=t;);this._s1=d[r-1],this._si=r}else if(t<this._s1&&r>0){for(;r>0&&(this._s1=d[--r])>=t;);0===r&&t<this._s1?this._s1=0:r++,this._s2=d[r],this._si=r}s=(r+(t-this._s1)/(this._s2-this._s1))*this._prec||0}else n=t<0?0:t>=1?p-1:p*t>>0,s=(t-n*(1/p))*p;for(i=1-s,r=this._props.length;--r>-1;)o=this._props[r],a=this._beziers[o][n],l=(s*s*a.da+3*i*(s*a.ca+i*a.ba))*s+a.a,this._round[o]&&(l=Math.round(l)),h[o]?f[o](l):f[o]=l;if(this._autoRotate){var g,v,y,w,b,S,T,E=this._autoRotate;for(r=E.length;--r>-1;)o=E[r][2],S=E[r][3]||0,T=!0===E[r][4]?1:e,a=this._beziers[E[r][0]],g=this._beziers[E[r][1]],a&&g&&(a=a[n],g=g[n],v=a.a+(a.b-a.a)*s,w=a.b+(a.c-a.b)*s,v+=(w-v)*s,w+=(a.c+(a.d-a.c)*s-w)*s,y=g.a+(g.b-g.a)*s,b=g.b+(g.c-g.b)*s,y+=(b-y)*s,b+=(g.c+(g.d-g.c)*s-b)*s,l=m?Math.atan2(b-y,w-v)*T+S:this._initialRotations[r],h[o]?f[o](l):f[o]=l)}}}),g=m.prototype;m.bezierThrough=d,m.cubicToQuadratic=l,m._autoCSS=!0,m.quadraticToCubic=function(e,t,n){return new s(e,(2*t+e)/3,(2*t+n)/3,n)},m._cssRegister=function(){var e=o.CSSPlugin;if(e){var t=e._internals,n=t._parseToProxy,i=t._setPluginRatio,r=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,o,a,s,l){t instanceof Array&&(t={values:t}),l=new m;var c,u,d,p=t.values,h=p.length-1,f=[],g={};if(h<0)return s;for(c=0;c<=h;c++)d=n(e,p[c],a,s,l,h!==c),f[c]=d.end;for(u in t)g[u]=t[u];return g.values=f,s=new r(e,"bezier",0,0,d.pt,2),s.data=d,s.plugin=l,s.setRatio=i,0===g.autoRotate&&(g.autoRotate=!0),!g.autoRotate||g.autoRotate instanceof Array||(c=!0===g.autoRotate?0:Number(g.autoRotate),g.autoRotate=null!=d.end.left?[["left","top","rotation",c,!1]]:null!=d.end.x&&[["x","y","rotation",c,!1]]),g.autoRotate&&(a._transform||a._enableTransforms(!1),d.autoRotate=a._target._gsTransform,d.proxy.rotation=d.autoRotate.rotation||0),l._onInitTween(d.proxy,g,a._tween),s}})}},g._roundProps=function(e,t){for(var n=this._overwriteProps,i=n.length;--i>-1;)(e[n[i]]||e.bezier||e.bezierThrough)&&(this._round[n[i]]=t)},g._kill=function(e){var t,n,i=this._props;for(t in this._beziers)if(t in e)for(delete this._beziers[t],delete this._func[t],n=i.length;--n>-1;)i[n]===t&&i.splice(n,1);return this._super._kill.call(this,e)}}(),a._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(e,t){var n,i,r,o,s=function(){e.call(this,"css"),this._overwriteProps.length=0,this.setRatio=s.prototype.setRatio},l=a._gsDefine.globals,c={},u=s.prototype=new e("css");u.constructor=s,s.version="1.18.5",s.API=2,s.defaultTransformPerspective=0,s.defaultSkewType="compensated",s.defaultSmoothOrigin=!0,u="px",s.suffixMap={top:u,right:u,bottom:u,left:u,width:u,height:u,fontSize:u,padding:u,margin:u,perspective:u,lineHeight:""};var d,p,h,f,m,g,v=/(?:\-|\.|\b)(\d|\.|e\-)+/g,y=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,w=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,b=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,S=/(?:\d|\-|\+|=|#|\.)*/g,T=/opacity *= *([^)]*)/i,E=/opacity:([^;]*)/i,O=/alpha\(opacity *=.+?\)/i,I=/^(rgb|hsl)/,x=/([A-Z])/g,C=/-([a-z])/gi,$=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,_=function(e,t){return t.toUpperCase()},A=/(?:Left|Right|Width)/i,R=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,P=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,k=/,(?=[^\)]*(?:\(|$))/gi,N=/[\s,\(]/i,D=Math.PI/180,L=180/Math.PI,M={},F=document,j=function(e){return F.createElementNS?F.createElementNS("http://www.w3.org/1999/xhtml",e):F.createElement(e)},B=j("div"),H=j("img"),z=s._internals={_specialProps:c},U=navigator.userAgent,V=function(){var e=U.indexOf("Android"),t=j("a");return h=-1!==U.indexOf("Safari")&&-1===U.indexOf("Chrome")&&(-1===e||Number(U.substr(e+8,1))>3),m=h&&Number(U.substr(U.indexOf("Version/")+8,1))<6,f=-1!==U.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(U)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(U))&&(g=parseFloat(RegExp.$1)),!!t&&(t.style.cssText="top:1px;opacity:.55;",/^0.55/.test(t.style.opacity))}(),W=function(e){return T.test("string"==typeof e?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},G=function(e){window.console&&console.log(e)},q="",Y="",X=function(e,t){t=t||B;var n,i,r=t.style;if(void 0!==r[e])return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),n=["O","Moz","ms","Ms","Webkit"],i=5;--i>-1&&void 0===r[n[i]+e];);return i>=0?(Y=3===i?"ms":n[i],q="-"+Y.toLowerCase()+"-",Y+e):null},Z=F.defaultView?F.defaultView.getComputedStyle:function(){},K=s.getStyle=function(e,t,n,i,r){var o;return V||"opacity"!==t?(!i&&e.style[t]?o=e.style[t]:(n=n||Z(e))?o=n[t]||n.getPropertyValue(t)||n.getPropertyValue(t.replace(x,"-$1").toLowerCase()):e.currentStyle&&(o=e.currentStyle[t]),null==r||o&&"none"!==o&&"auto"!==o&&"auto auto"!==o?o:r):W(e)},Q=z.convertToPixels=function(e,n,i,r,o){if("px"===r||!r)return i;if("auto"===r||!i)return 0;var a,l,c,u=A.test(n),d=e,p=B.style,h=i<0,f=1===i;if(h&&(i=-i),f&&(i*=100),"%"===r&&-1!==n.indexOf("border"))a=i/100*(u?e.clientWidth:e.clientHeight);else{if(p.cssText="border:0 solid red;position:"+K(e,"position")+";line-height:0;","%"!==r&&d.appendChild&&"v"!==r.charAt(0)&&"rem"!==r)p[u?"borderLeftWidth":"borderTopWidth"]=i+r;else{if(d=e.parentNode||F.body,l=d._gsCache,c=t.ticker.frame,l&&u&&l.time===c)return l.width*i/100;p[u?"width":"height"]=i+r}d.appendChild(B),a=parseFloat(B[u?"offsetWidth":"offsetHeight"]),d.removeChild(B),u&&"%"===r&&!1!==s.cacheWidths&&(l=d._gsCache=d._gsCache||{},l.time=c,l.width=a/i*100),0!==a||o||(a=Q(e,n,i,r,!0))}return f&&(a/=100),h?-a:a},J=z.calculateOffset=function(e,t,n){if("absolute"!==K(e,"position",n))return 0;var i="left"===t?"Left":"Top",r=K(e,"margin"+i,n);return e["offset"+i]-(Q(e,t,parseFloat(r),r.replace(S,""))||0)},ee=function(e,t){var n,i,r,o={};if(t=t||Z(e,null))if(n=t.length)for(;--n>-1;)r=t[n],-1!==r.indexOf("-transform")&&xe!==r||(o[r.replace(C,_)]=t.getPropertyValue(r));else for(n in t)-1!==n.indexOf("Transform")&&Ie!==n||(o[n]=t[n]);else if(t=e.currentStyle||e.style)for(n in t)"string"==typeof n&&void 0===o[n]&&(o[n.replace(C,_)]=t[n]);return V||(o.opacity=W(e)),i=je(e,t,!1),o.rotation=i.rotation,o.skewX=i.skewX,o.scaleX=i.scaleX,o.scaleY=i.scaleY,o.x=i.x,o.y=i.y,$e&&(o.z=i.z,o.rotationX=i.rotationX,o.rotationY=i.rotationY,o.scaleZ=i.scaleZ),o.filters&&delete o.filters,o},te=function(e,t,n,i,r){var o,a,s,l={},c=e.style;for(a in n)"cssText"!==a&&"length"!==a&&isNaN(a)&&(t[a]!==(o=n[a])||r&&r[a])&&-1===a.indexOf("Origin")&&("number"!=typeof o&&"string"!=typeof o||(l[a]="auto"!==o||"left"!==a&&"top"!==a?""!==o&&"auto"!==o&&"none"!==o||"string"!=typeof t[a]||""===t[a].replace(b,"")?o:0:J(e,a),void 0!==c[a]&&(s=new ge(c,a,c[a],s))));if(i)for(a in i)"className"!==a&&(l[a]=i[a]);return{difs:l,firstMPT:s}},ne={width:["Left","Right"],height:["Top","Bottom"]},ie=["marginLeft","marginRight","marginTop","marginBottom"],re=function(e,t,n){if("svg"===(e.nodeName+"").toLowerCase())return(n||Z(e))[t]||0;if(e.getBBox&&Le(e))return e.getBBox()[t]||0;var i=parseFloat("width"===t?e.offsetWidth:e.offsetHeight),r=ne[t],o=r.length;for(n=n||Z(e,null);--o>-1;)i-=parseFloat(K(e,"padding"+r[o],n,!0))||0,i-=parseFloat(K(e,"border"+r[o]+"Width",n,!0))||0;return i},oe=function(e,t){if("contain"===e||"auto"===e||"auto auto"===e)return e+" ";null!=e&&""!==e||(e="0 0");var n,i=e.split(" "),r=-1!==e.indexOf("left")?"0%":-1!==e.indexOf("right")?"100%":i[0],o=-1!==e.indexOf("top")?"0%":-1!==e.indexOf("bottom")?"100%":i[1];if(i.length>3&&!t){for(i=e.split(", ").join(",").split(","),e=[],n=0;n<i.length;n++)e.push(oe(i[n]));return e.join(",")}return null==o?o="center"===r?"50%":"0":"center"===o&&(o="50%"),("center"===r||isNaN(parseFloat(r))&&-1===(r+"").indexOf("="))&&(r="50%"),e=r+" "+o+(i.length>2?" "+i[2]:""),t&&(t.oxp=-1!==r.indexOf("%"),t.oyp=-1!==o.indexOf("%"),t.oxr="="===r.charAt(1),t.oyr="="===o.charAt(1),t.ox=parseFloat(r.replace(b,"")),t.oy=parseFloat(o.replace(b,"")),t.v=e),t||e},ae=function(e,t){return"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)||0},se=function(e,t){return null==e?t:"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)||0},le=function(e,t,n,i){var r,o,a,s,l;return null==e?s=t:"number"==typeof e?s=e:(r=360,o=e.split("_"),l="="===e.charAt(1),a=(l?parseInt(e.charAt(0)+"1",10)*parseFloat(o[0].substr(2)):parseFloat(o[0]))*(-1===e.indexOf("rad")?1:L)-(l?0:t),o.length&&(i&&(i[n]=t+a),-1!==e.indexOf("short")&&(a%=r)!==a%(r/2)&&(a=a<0?a+r:a-r),-1!==e.indexOf("_cw")&&a<0?a=(a+9999999999*r)%r-(a/r|0)*r:-1!==e.indexOf("ccw")&&a>0&&(a=(a-9999999999*r)%r-(a/r|0)*r)),s=t+a),s<1e-6&&s>-1e-6&&(s=0),s},ce={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ue=function(e,t,n){return e=e<0?e+1:e>1?e-1:e,255*(6*e<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)+.5|0},de=s.parseColor=function(e,t){var n,i,r,o,a,s,l,c,u,d,p;if(e)if("number"==typeof e)n=[e>>16,e>>8&255,255&e];else{if(","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),ce[e])n=ce[e];else if("#"===e.charAt(0))4===e.length&&(i=e.charAt(1),r=e.charAt(2),o=e.charAt(3),e="#"+i+i+r+r+o+o),e=parseInt(e.substr(1),16),n=[e>>16,e>>8&255,255&e];else if("hsl"===e.substr(0,3))if(n=p=e.match(v),t){if(-1!==e.indexOf("="))return e.match(y)}else a=Number(n[0])%360/360,s=Number(n[1])/100,l=Number(n[2])/100,r=l<=.5?l*(s+1):l+s-l*s,i=2*l-r,n.length>3&&(n[3]=Number(e[3])),n[0]=ue(a+1/3,i,r),n[1]=ue(a,i,r),n[2]=ue(a-1/3,i,r);else n=e.match(v)||ce.transparent;n[0]=Number(n[0]),n[1]=Number(n[1]),n[2]=Number(n[2]),n.length>3&&(n[3]=Number(n[3]))}else n=ce.black;return t&&!p&&(i=n[0]/255,r=n[1]/255,o=n[2]/255,c=Math.max(i,r,o),u=Math.min(i,r,o),l=(c+u)/2,c===u?a=s=0:(d=c-u,s=l>.5?d/(2-c-u):d/(c+u),a=c===i?(r-o)/d+(r<o?6:0):c===r?(o-i)/d+2:(i-r)/d+4,a*=60),n[0]=a+.5|0,n[1]=100*s+.5|0,n[2]=100*l+.5|0),n},pe=function(e,t){var n,i,r,o=e.match(he)||[],a=0,s=o.length?"":e;for(n=0;n<o.length;n++)i=o[n],r=e.substr(a,e.indexOf(i,a)-a),a+=r.length+i.length,i=de(i,t),3===i.length&&i.push(1),s+=r+(t?"hsla("+i[0]+","+i[1]+"%,"+i[2]+"%,"+i[3]:"rgba("+i.join(","))+")";return s+e.substr(a)},he="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(u in ce)he+="|"+u+"\\b";he=new RegExp(he+")","gi"),s.colorStringFilter=function(e){var t,n=e[0]+e[1];he.test(n)&&(t=-1!==n.indexOf("hsl(")||-1!==n.indexOf("hsla("),e[0]=pe(e[0],t),e[1]=pe(e[1],t)),he.lastIndex=0},t.defaultStringFilter||(t.defaultStringFilter=s.colorStringFilter);var fe=function(e,t,n,i){if(null==e)return function(e){return e};var r,o=t?(e.match(he)||[""])[0]:"",a=e.split(o).join("").match(w)||[],s=e.substr(0,e.indexOf(a[0])),l=")"===e.charAt(e.length-1)?")":"",c=-1!==e.indexOf(" ")?" ":",",u=a.length,d=u>0?a[0].replace(v,""):"";return u?r=t?function(e){var t,p,h,f;if("number"==typeof e)e+=d;else if(i&&k.test(e)){for(f=e.replace(k,"|").split("|"),h=0;h<f.length;h++)f[h]=r(f[h]);return f.join(",")}if(t=(e.match(he)||[o])[0],p=e.split(t).join("").match(w)||[],h=p.length,u>h--)for(;++h<u;)p[h]=n?p[(h-1)/2|0]:a[h];return s+p.join(c)+c+t+l+(-1!==e.indexOf("inset")?" inset":"")}:function(e){var t,o,p;if("number"==typeof e)e+=d;else if(i&&k.test(e)){for(o=e.replace(k,"|").split("|"),p=0;p<o.length;p++)o[p]=r(o[p]);return o.join(",")}if(t=e.match(w)||[],p=t.length,u>p--)for(;++p<u;)t[p]=n?t[(p-1)/2|0]:a[p];return s+t.join(c)+l}:function(e){return e}},me=function(e){return e=e.split(","),function(t,n,i,r,o,a,s){var l,c=(n+"").split(" ");for(s={},l=0;l<4;l++)s[e[l]]=c[l]=c[l]||c[(l-1)/2>>0];return r.parse(t,s,o,a)}},ge=(z._setPluginRatio=function(e){this.plugin.setRatio(e);for(var t,n,i,r,o,a=this.data,s=a.proxy,l=a.firstMPT;l;)t=s[l.v],l.r?t=Math.round(t):t<1e-6&&t>-1e-6&&(t=0),l.t[l.p]=t,l=l._next;if(a.autoRotate&&(a.autoRotate.rotation=s.rotation),1===e||0===e)for(l=a.firstMPT,o=1===e?"e":"b";l;){if(n=l.t,n.type){if(1===n.type){for(r=n.xs0+n.s+n.xs1,i=1;i<n.l;i++)r+=n["xn"+i]+n["xs"+(i+1)];n[o]=r}}else n[o]=n.s+n.xs0;l=l._next}},function(e,t,n,i,r){this.t=e,this.p=t,this.v=n,this.r=r,i&&(i._prev=this,this._next=i)}),ve=(z._parseToProxy=function(e,t,n,i,r,o){var a,s,l,c,u,d=i,p={},h={},f=n._transform,m=M;for(n._transform=null,M=t,i=u=n.parse(e,t,i,r),M=m,o&&(n._transform=f,d&&(d._prev=null,d._prev&&(d._prev._next=null)));i&&i!==d;){if(i.type<=1&&(s=i.p,h[s]=i.s+i.c,p[s]=i.s,o||(c=new ge(i,"s",s,c,i.r),i.c=0),1===i.type))for(a=i.l;--a>0;)l="xn"+a,s=i.p+"_"+l,h[s]=i.data[l],p[s]=i[l],o||(c=new ge(i,l,s,c,i.rxp[l]));i=i._next}return{proxy:p,end:h,firstMPT:c,pt:u}},z.CSSPropTween=function(e,t,i,r,a,s,l,c,u,d,p){this.t=e,this.p=t,this.s=i,this.c=r,this.n=l||t,e instanceof ve||o.push(this.n),this.r=c,this.type=s||0,u&&(this.pr=u,n=!0),this.b=void 0===d?i:d,this.e=void 0===p?i+r:p,a&&(this._next=a,a._prev=this)}),ye=function(e,t,n,i,r,o){var a=new ve(e,t,n,i-n,r,-1,o);return a.b=n,a.e=a.xs0=i,a},we=s.parseComplex=function(e,t,n,i,r,o,a,l,c,u){n=n||o||"",a=new ve(e,t,0,0,a,u?2:1,null,!1,l,n,i),i+="",r&&he.test(i+n)&&(i=[n,i],s.colorStringFilter(i),n=i[0],i=i[1]);var p,h,f,m,g,w,b,S,T,E,O,I,x,C=n.split(", ").join(",").split(" "),$=i.split(", ").join(",").split(" "),_=C.length,A=!1!==d;for(-1===i.indexOf(",")&&-1===n.indexOf(",")||(C=C.join(" ").replace(k,", ").split(" "),$=$.join(" ").replace(k,", ").split(" "),_=C.length),_!==$.length&&(C=(o||"").split(" "),_=C.length),a.plugin=c,a.setRatio=u,he.lastIndex=0,p=0;p<_;p++)if(m=C[p],g=$[p],(S=parseFloat(m))||0===S)a.appendXtra("",S,ae(g,S),g.replace(y,""),A&&-1!==g.indexOf("px"),!0);else if(r&&he.test(m))I=g.indexOf(")")+1,I=")"+(I?g.substr(I):""),x=-1!==g.indexOf("hsl")&&V,m=de(m,x),g=de(g,x),T=m.length+g.length>6,T&&!V&&0===g[3]?(a["xs"+a.l]+=a.l?" transparent":"transparent",a.e=a.e.split($[p]).join("transparent")):(V||(T=!1),x?a.appendXtra(T?"hsla(":"hsl(",m[0],ae(g[0],m[0]),",",!1,!0).appendXtra("",m[1],ae(g[1],m[1]),"%,",!1).appendXtra("",m[2],ae(g[2],m[2]),T?"%,":"%"+I,!1):a.appendXtra(T?"rgba(":"rgb(",m[0],g[0]-m[0],",",!0,!0).appendXtra("",m[1],g[1]-m[1],",",!0).appendXtra("",m[2],g[2]-m[2],T?",":I,!0),T&&(m=m.length<4?1:m[3],a.appendXtra("",m,(g.length<4?1:g[3])-m,I,!1))),he.lastIndex=0;else if(w=m.match(v)){if(!(b=g.match(y))||b.length!==w.length)return a;for(f=0,h=0;h<w.length;h++)O=w[h],E=m.indexOf(O,f),a.appendXtra(m.substr(f,E-f),Number(O),ae(b[h],O),"",A&&"px"===m.substr(E+O.length,2),0===h),f=E+O.length;a["xs"+a.l]+=m.substr(f)}else a["xs"+a.l]+=a.l||a["xs"+a.l]?" "+g:g;if(-1!==i.indexOf("=")&&a.data){for(I=a.xs0+a.data.s,p=1;p<a.l;p++)I+=a["xs"+p]+a.data["xn"+p];a.e=I+a["xs"+p]}return a.l||(a.type=-1,a.xs0=a.e),a.xfirst||a},be=9;for(u=ve.prototype,u.l=u.pr=0;--be>0;)u["xn"+be]=0,u["xs"+be]="";u.xs0="",u._next=u._prev=u.xfirst=u.data=u.plugin=u.setRatio=u.rxp=null,u.appendXtra=function(e,t,n,i,r,o){var a=this,s=a.l;return a["xs"+s]+=o&&(s||a["xs"+s])?" "+e:e||"",n||0===s||a.plugin?(a.l++,a.type=a.setRatio?2:1,a["xs"+a.l]=i||"",s>0?(a.data["xn"+s]=t+n,a.rxp["xn"+s]=r,a["xn"+s]=t,a.plugin||(a.xfirst=new ve(a,"xn"+s,t,n,a.xfirst||a,0,a.n,r,a.pr),a.xfirst.xs0=0),a):(a.data={s:t+n},a.rxp={},a.s=t,a.c=n,a.r=r,a)):(a["xs"+s]+=t+(i||""),a)};var Se=function(e,t){t=t||{},this.p=t.prefix?X(e)||e:e,c[e]=c[this.p]=this,this.format=t.formatter||fe(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.pr=t.priority||0},Te=z._registerComplexSpecialProp=function(e,t,n){"object"!=typeof t&&(t={parser:n});var i,r=e.split(","),o=t.defaultValue;for(n=n||[o],i=0;i<r.length;i++)t.prefix=0===i&&t.prefix,t.defaultValue=n[i]||o,new Se(r[i],t)};u=Se.prototype,u.parseComplex=function(e,t,n,i,r,o){var a,s,l,c,u,d,p=this.keyword;if(this.multi&&(k.test(n)||k.test(t)?(s=t.replace(k,"|").split("|"),l=n.replace(k,"|").split("|")):p&&(s=[t],l=[n])),l){for(c=l.length>s.length?l.length:s.length,a=0;a<c;a++)t=s[a]=s[a]||this.dflt,n=l[a]=l[a]||this.dflt,p&&(u=t.indexOf(p),d=n.indexOf(p),u!==d&&(-1===d?s[a]=s[a].split(p).join(""):-1===u&&(s[a]+=" "+p)));t=s.join(", "),n=l.join(", ")}return we(e,this.p,t,n,this.clrs,this.dflt,i,this.pr,r,o)},u.parse=function(e,t,n,i,o,a,s){return this.parseComplex(e.style,this.format(K(e,this.p,r,!1,this.dflt)),this.format(t),o,a)},s.registerSpecialProp=function(e,t,n){Te(e,{parser:function(e,i,r,o,a,s,l){var c=new ve(e,r,0,0,a,2,r,!1,n);return c.plugin=s,c.setRatio=t(e,i,o._tween,r),c},priority:n})},s.useSVGTransformAttr=h||f;var Ee,Oe="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Ie=X("transform"),xe=q+"transform",Ce=X("transformOrigin"),$e=null!==X("perspective"),_e=z.Transform=function(){this.perspective=parseFloat(s.defaultTransformPerspective)||0,this.force3D=!(!1===s.defaultForce3D||!$e)&&(s.defaultForce3D||"auto")},Ae=window.SVGElement,Re=function(e,t,n){var i,r=F.createElementNS("http://www.w3.org/2000/svg",e),o=/([a-z])([A-Z])/g;for(i in n)r.setAttributeNS(null,i.replace(o,"$1-$2").toLowerCase(),n[i]);return t.appendChild(r),r},Pe=F.documentElement,ke=function(){var e,t,n,i=g||/Android/i.test(U)&&!window.chrome;return F.createElementNS&&!i&&(e=Re("svg",Pe),t=Re("rect",e,{width:100,height:50,x:100}),n=t.getBoundingClientRect().width,t.style[Ce]="50% 50%",t.style[Ie]="scaleX(0.5)",i=n===t.getBoundingClientRect().width&&!(f&&$e),Pe.removeChild(e)),i}(),Ne=function(e,t,n,i,r,o){var a,l,c,u,d,p,h,f,m,g,v,y,w,b,S=e._gsTransform,T=Fe(e,!0);S&&(w=S.xOrigin,b=S.yOrigin),(!i||(a=i.split(" ")).length<2)&&(h=e.getBBox(),t=oe(t).split(" "),a=[(-1!==t[0].indexOf("%")?parseFloat(t[0])/100*h.width:parseFloat(t[0]))+h.x,(-1!==t[1].indexOf("%")?parseFloat(t[1])/100*h.height:parseFloat(t[1]))+h.y]),n.xOrigin=u=parseFloat(a[0]),n.yOrigin=d=parseFloat(a[1]),i&&T!==Me&&(p=T[0],h=T[1],f=T[2],m=T[3],g=T[4],v=T[5],y=p*m-h*f,l=u*(m/y)+d*(-f/y)+(f*v-m*g)/y,c=u*(-h/y)+d*(p/y)-(p*v-h*g)/y,u=n.xOrigin=a[0]=l,d=n.yOrigin=a[1]=c),S&&(o&&(n.xOffset=S.xOffset,n.yOffset=S.yOffset,S=n),r||!1!==r&&!1!==s.defaultSmoothOrigin?(l=u-w,c=d-b,S.xOffset+=l*T[0]+c*T[2]-l,S.yOffset+=l*T[1]+c*T[3]-c):S.xOffset=S.yOffset=0),o||e.setAttribute("data-svg-origin",a.join(" "))},De=function(e){try{return e.getBBox()}catch(e){}},Le=function(e){return!!(Ae&&e.getBBox&&e.getCTM&&De(e)&&(!e.parentNode||e.parentNode.getBBox&&e.parentNode.getCTM))},Me=[1,0,0,1,0,0],Fe=function(e,t){var n,i,r,o,a,s,l=e._gsTransform||new _e,c=e.style;if(Ie?i=K(e,xe,null,!0):e.currentStyle&&(i=e.currentStyle.filter.match(R),i=i&&4===i.length?[i[0].substr(4),Number(i[2].substr(4)),Number(i[1].substr(4)),i[3].substr(4),l.x||0,l.y||0].join(","):""),n=!i||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,n&&Ie&&((s="none"===Z(e).display)||!e.parentNode)&&(s&&(o=c.display,c.display="block"),e.parentNode||(a=1,Pe.appendChild(e)),i=K(e,xe,null,!0),n=!i||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,o?c.display=o:s&&Ue(c,"display"),a&&Pe.removeChild(e)),(l.svg||e.getBBox&&Le(e))&&(n&&-1!==(c[Ie]+"").indexOf("matrix")&&(i=c[Ie],n=0),r=e.getAttribute("transform"),n&&r&&(-1!==r.indexOf("matrix")?(i=r,n=0):-1!==r.indexOf("translate")&&(i="matrix(1,0,0,1,"+r.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",n=0))),n)return Me;for(r=(i||"").match(v)||[],be=r.length;--be>-1;)o=Number(r[be]),r[be]=(a=o-(o|=0))?(1e5*a+(a<0?-.5:.5)|0)/1e5+o:o;return t&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r},je=z.getTransform=function(e,n,i,r){if(e._gsTransform&&i&&!r)return e._gsTransform;var o,a,l,c,u,d,p=i?e._gsTransform||new _e:new _e,h=p.scaleX<0,f=$e?parseFloat(K(e,Ce,n,!1,"0 0 0").split(" ")[2])||p.zOrigin||0:0,m=parseFloat(s.defaultTransformPerspective)||0;if(p.svg=!(!e.getBBox||!Le(e)),p.svg&&(Ne(e,K(e,Ce,n,!1,"50% 50%")+"",p,e.getAttribute("data-svg-origin")),Ee=s.useSVGTransformAttr||ke),(o=Fe(e))!==Me){if(16===o.length){var g,v,y,w,b,S=o[0],T=o[1],E=o[2],O=o[3],I=o[4],x=o[5],C=o[6],$=o[7],_=o[8],A=o[9],R=o[10],P=o[12],k=o[13],N=o[14],D=o[11],M=Math.atan2(C,R);p.zOrigin&&(N=-p.zOrigin,P=_*N-o[12],k=A*N-o[13],N=R*N+p.zOrigin-o[14]),p.rotationX=M*L,M&&(w=Math.cos(-M),b=Math.sin(-M),g=I*w+_*b,v=x*w+A*b,y=C*w+R*b,_=I*-b+_*w,A=x*-b+A*w,R=C*-b+R*w,D=$*-b+D*w,I=g,x=v,C=y),M=Math.atan2(-E,R),p.rotationY=M*L,M&&(w=Math.cos(-M),b=Math.sin(-M),g=S*w-_*b,v=T*w-A*b,y=E*w-R*b,A=T*b+A*w,R=E*b+R*w,D=O*b+D*w,S=g,T=v,E=y),M=Math.atan2(T,S),p.rotation=M*L,M&&(w=Math.cos(-M),b=Math.sin(-M),S=S*w+I*b,v=T*w+x*b,x=T*-b+x*w,C=E*-b+C*w,T=v),p.rotationX&&Math.abs(p.rotationX)+Math.abs(p.rotation)>359.9&&(p.rotationX=p.rotation=0,p.rotationY=180-p.rotationY),p.scaleX=(1e5*Math.sqrt(S*S+T*T)+.5|0)/1e5,p.scaleY=(1e5*Math.sqrt(x*x+A*A)+.5|0)/1e5,p.scaleZ=(1e5*Math.sqrt(C*C+R*R)+.5|0)/1e5,p.rotationX||p.rotationY?p.skewX=0:(p.skewX=I||x?Math.atan2(I,x)*L+p.rotation:p.skewX||0,Math.abs(p.skewX)>90&&Math.abs(p.skewX)<270&&(h?(p.scaleX*=-1,p.skewX+=p.rotation<=0?180:-180,p.rotation+=p.rotation<=0?180:-180):(p.scaleY*=-1,p.skewX+=p.skewX<=0?180:-180))),p.perspective=D?1/(D<0?-D:D):0,p.x=P,p.y=k,p.z=N,p.svg&&(p.x-=p.xOrigin-(p.xOrigin*S-p.yOrigin*I),p.y-=p.yOrigin-(p.yOrigin*T-p.xOrigin*x))}else if(!$e||r||!o.length||p.x!==o[4]||p.y!==o[5]||!p.rotationX&&!p.rotationY){var F=o.length>=6,j=F?o[0]:1,B=o[1]||0,H=o[2]||0,z=F?o[3]:1;p.x=o[4]||0,p.y=o[5]||0,l=Math.sqrt(j*j+B*B),c=Math.sqrt(z*z+H*H),u=j||B?Math.atan2(B,j)*L:p.rotation||0,d=H||z?Math.atan2(H,z)*L+u:p.skewX||0,Math.abs(d)>90&&Math.abs(d)<270&&(h?(l*=-1,d+=u<=0?180:-180,u+=u<=0?180:-180):(c*=-1,d+=d<=0?180:-180)),p.scaleX=l,p.scaleY=c,p.rotation=u,p.skewX=d,$e&&(p.rotationX=p.rotationY=p.z=0,p.perspective=m,p.scaleZ=1),p.svg&&(p.x-=p.xOrigin-(p.xOrigin*j+p.yOrigin*H),p.y-=p.yOrigin-(p.xOrigin*B+p.yOrigin*z))}p.zOrigin=f;for(a in p)p[a]<2e-5&&p[a]>-2e-5&&(p[a]=0)}return i&&(e._gsTransform=p,p.svg&&(Ee&&e.style[Ie]?t.delayedCall(.001,function(){Ue(e.style,Ie)}):!Ee&&e.getAttribute("transform")&&t.delayedCall(.001,function(){e.removeAttribute("transform")}))),p},Be=function(e){var t,n,i=this.data,r=-i.rotation*D,o=r+i.skewX*D,a=(Math.cos(r)*i.scaleX*1e5|0)/1e5,s=(Math.sin(r)*i.scaleX*1e5|0)/1e5,l=(Math.sin(o)*-i.scaleY*1e5|0)/1e5,c=(Math.cos(o)*i.scaleY*1e5|0)/1e5,u=this.t.style,d=this.t.currentStyle;if(d){n=s,s=-l,l=-n,t=d.filter,u.filter="";var p,h,f=this.t.offsetWidth,m=this.t.offsetHeight,v="absolute"!==d.position,y="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+s+", M21="+l+", M22="+c,w=i.x+f*i.xPercent/100,b=i.y+m*i.yPercent/100;if(null!=i.ox&&(p=(i.oxp?f*i.ox*.01:i.ox)-f/2,h=(i.oyp?m*i.oy*.01:i.oy)-m/2,w+=p-(p*a+h*s),b+=h-(p*l+h*c)),v?(p=f/2,h=m/2,y+=", Dx="+(p-(p*a+h*s)+w)+", Dy="+(h-(p*l+h*c)+b)+")"):y+=", sizingMethod='auto expand')",-1!==t.indexOf("DXImageTransform.Microsoft.Matrix(")?u.filter=t.replace(P,y):u.filter=y+" "+t,0!==e&&1!==e||1===a&&0===s&&0===l&&1===c&&(v&&-1===y.indexOf("Dx=0, Dy=0")||T.test(t)&&100!==parseFloat(RegExp.$1)||-1===t.indexOf(t.indexOf("Alpha"))&&u.removeAttribute("filter")),!v){var E,O,I,x=g<8?1:-1;for(p=i.ieOffsetX||0,h=i.ieOffsetY||0,i.ieOffsetX=Math.round((f-((a<0?-a:a)*f+(s<0?-s:s)*m))/2+w),i.ieOffsetY=Math.round((m-((c<0?-c:c)*m+(l<0?-l:l)*f))/2+b),be=0;be<4;be++)O=ie[be],E=d[O],n=-1!==E.indexOf("px")?parseFloat(E):Q(this.t,O,parseFloat(E),E.replace(S,""))||0,I=n!==i[O]?be<2?-i.ieOffsetX:-i.ieOffsetY:be<2?p-i.ieOffsetX:h-i.ieOffsetY,u[O]=(i[O]=Math.round(n-I*(0===be||2===be?1:x)))+"px"}}},He=z.set3DTransformRatio=z.setTransformRatio=function(e){var t,n,i,r,o,a,s,l,c,u,d,p,h,m,g,v,y,w,b,S,T,E,O,I=this.data,x=this.t.style,C=I.rotation,$=I.rotationX,_=I.rotationY,A=I.scaleX,R=I.scaleY,P=I.scaleZ,k=I.x,N=I.y,L=I.z,M=I.svg,F=I.perspective,j=I.force3D;if(((1===e||0===e)&&"auto"===j&&(this.tween._totalTime===this.tween._totalDuration||!this.tween._totalTime)||!j)&&!L&&!F&&!_&&!$&&1===P||Ee&&M||!$e)return void(C||I.skewX||M?(C*=D,E=I.skewX*D,O=1e5,t=Math.cos(C)*A,r=Math.sin(C)*A,n=Math.sin(C-E)*-R,o=Math.cos(C-E)*R,E&&"simple"===I.skewType&&(y=Math.tan(E),y=Math.sqrt(1+y*y),n*=y,o*=y,I.skewY&&(t*=y,r*=y)),M&&(k+=I.xOrigin-(I.xOrigin*t+I.yOrigin*n)+I.xOffset,N+=I.yOrigin-(I.xOrigin*r+I.yOrigin*o)+I.yOffset,Ee&&(I.xPercent||I.yPercent)&&(m=this.t.getBBox(),k+=.01*I.xPercent*m.width,N+=.01*I.yPercent*m.height),m=1e-6,k<m&&k>-m&&(k=0),N<m&&N>-m&&(N=0)),b=(t*O|0)/O+","+(r*O|0)/O+","+(n*O|0)/O+","+(o*O|0)/O+","+k+","+N+")",M&&Ee?this.t.setAttribute("transform","matrix("+b):x[Ie]=(I.xPercent||I.yPercent?"translate("+I.xPercent+"%,"+I.yPercent+"%) matrix(":"matrix(")+b):x[Ie]=(I.xPercent||I.yPercent?"translate("+I.xPercent+"%,"+I.yPercent+"%) matrix(":"matrix(")+A+",0,0,"+R+","+k+","+N+")");if(f&&(m=1e-4,A<m&&A>-m&&(A=P=2e-5),R<m&&R>-m&&(R=P=2e-5),!F||I.z||I.rotationX||I.rotationY||(F=0)),C||I.skewX)C*=D,g=t=Math.cos(C),v=r=Math.sin(C),I.skewX&&(C-=I.skewX*D,g=Math.cos(C),v=Math.sin(C),"simple"===I.skewType&&(y=Math.tan(I.skewX*D),y=Math.sqrt(1+y*y),g*=y,v*=y,I.skewY&&(t*=y,r*=y))),n=-v,o=g;else{if(!(_||$||1!==P||F||M))return void(x[Ie]=(I.xPercent||I.yPercent?"translate("+I.xPercent+"%,"+I.yPercent+"%) translate3d(":"translate3d(")+k+"px,"+N+"px,"+L+"px)"+(1!==A||1!==R?" scale("+A+","+R+")":""));t=o=1,n=r=0}c=1,i=a=s=l=u=d=0,p=F?-1/F:0,h=I.zOrigin,m=1e-6,S=",",T="0",C=_*D,C&&(g=Math.cos(C),v=Math.sin(C),s=-v,u=p*-v,i=t*v,a=r*v,c=g,p*=g,t*=g,r*=g),C=$*D,C&&(g=Math.cos(C),v=Math.sin(C),y=n*g+i*v,w=o*g+a*v,l=c*v,d=p*v,i=n*-v+i*g,a=o*-v+a*g,c*=g,p*=g,n=y,o=w),1!==P&&(i*=P,a*=P,c*=P,p*=P),1!==R&&(n*=R,o*=R,l*=R,d*=R),1!==A&&(t*=A,r*=A,s*=A,u*=A),(h||M)&&(h&&(k+=i*-h,N+=a*-h,L+=c*-h+h),M&&(k+=I.xOrigin-(I.xOrigin*t+I.yOrigin*n)+I.xOffset,N+=I.yOrigin-(I.xOrigin*r+I.yOrigin*o)+I.yOffset),k<m&&k>-m&&(k=T),N<m&&N>-m&&(N=T),L<m&&L>-m&&(L=0)),b=I.xPercent||I.yPercent?"translate("+I.xPercent+"%,"+I.yPercent+"%) matrix3d(":"matrix3d(",b+=(t<m&&t>-m?T:t)+S+(r<m&&r>-m?T:r)+S+(s<m&&s>-m?T:s),b+=S+(u<m&&u>-m?T:u)+S+(n<m&&n>-m?T:n)+S+(o<m&&o>-m?T:o),$||_||1!==P?(b+=S+(l<m&&l>-m?T:l)+S+(d<m&&d>-m?T:d)+S+(i<m&&i>-m?T:i),b+=S+(a<m&&a>-m?T:a)+S+(c<m&&c>-m?T:c)+S+(p<m&&p>-m?T:p)+S):b+=",0,0,0,0,1,0,",b+=k+S+N+S+L+S+(F?1+-L/F:1)+")",x[Ie]=b};u=_e.prototype,u.x=u.y=u.z=u.skewX=u.skewY=u.rotation=u.rotationX=u.rotationY=u.zOrigin=u.xPercent=u.yPercent=u.xOffset=u.yOffset=0,u.scaleX=u.scaleY=u.scaleZ=1,Te("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(e,t,n,i,o,a,l){if(i._lastParsedTransform===l)return o;i._lastParsedTransform=l;var c,u,d,p,h,f,m,g,v,y=e._gsTransform,w=e.style,b=Oe.length,S=l,T={},E=je(e,r,!0,l.parseTransform);if(i._transform=E,"string"==typeof S.transform&&Ie)u=B.style,u[Ie]=S.transform,u.display="block",u.position="absolute",F.body.appendChild(B),c=je(B,null,!1),E.svg&&(m=E.xOrigin,g=E.yOrigin,c.x-=E.xOffset,c.y-=E.yOffset,(S.transformOrigin||S.svgOrigin)&&(d={},Ne(e,oe(S.transformOrigin),d,S.svgOrigin,S.smoothOrigin,!0),m=d.xOrigin,g=d.yOrigin,c.x-=d.xOffset-E.xOffset,c.y-=d.yOffset-E.yOffset),(m||g)&&(v=Fe(B,!0),c.x-=m-(m*v[0]+g*v[2]),c.y-=g-(m*v[1]+g*v[3]))),F.body.removeChild(B),c.perspective||(c.perspective=E.perspective),null!=S.xPercent&&(c.xPercent=se(S.xPercent,E.xPercent)),null!=S.yPercent&&(c.yPercent=se(S.yPercent,E.yPercent));else if("object"==typeof S){if(c={scaleX:se(null!=S.scaleX?S.scaleX:S.scale,E.scaleX),scaleY:se(null!=S.scaleY?S.scaleY:S.scale,E.scaleY),scaleZ:se(S.scaleZ,E.scaleZ),x:se(S.x,E.x),y:se(S.y,E.y),z:se(S.z,E.z),xPercent:se(S.xPercent,E.xPercent),yPercent:se(S.yPercent,E.yPercent),perspective:se(S.transformPerspective,E.perspective)},null!=(f=S.directionalRotation))if("object"==typeof f)for(u in f)S[u]=f[u];else S.rotation=f;"string"==typeof S.x&&-1!==S.x.indexOf("%")&&(c.x=0,c.xPercent=se(S.x,E.xPercent)),"string"==typeof S.y&&-1!==S.y.indexOf("%")&&(c.y=0,c.yPercent=se(S.y,E.yPercent)),c.rotation=le("rotation"in S?S.rotation:"shortRotation"in S?S.shortRotation+"_short":"rotationZ"in S?S.rotationZ:E.rotation-E.skewY,E.rotation-E.skewY,"rotation",T),$e&&(c.rotationX=le("rotationX"in S?S.rotationX:"shortRotationX"in S?S.shortRotationX+"_short":E.rotationX||0,E.rotationX,"rotationX",T),c.rotationY=le("rotationY"in S?S.rotationY:"shortRotationY"in S?S.shortRotationY+"_short":E.rotationY||0,E.rotationY,"rotationY",T)),c.skewX=le(S.skewX,E.skewX-E.skewY),(c.skewY=le(S.skewY,E.skewY))&&(c.skewX+=c.skewY,c.rotation+=c.skewY)}for($e&&null!=S.force3D&&(E.force3D=S.force3D,h=!0),E.skewType=S.skewType||E.skewType||s.defaultSkewType,p=E.force3D||E.z||E.rotationX||E.rotationY||c.z||c.rotationX||c.rotationY||c.perspective,p||null==S.scale||(c.scaleZ=1);--b>-1;)n=Oe[b],((d=c[n]-E[n])>1e-6||d<-1e-6||null!=S[n]||null!=M[n])&&(h=!0,o=new ve(E,n,E[n],d,o),n in T&&(o.e=T[n]),o.xs0=0,o.plugin=a,i._overwriteProps.push(o.n));return d=S.transformOrigin,E.svg&&(d||S.svgOrigin)&&(m=E.xOffset,g=E.yOffset,Ne(e,oe(d),c,S.svgOrigin,S.smoothOrigin),o=ye(E,"xOrigin",(y?E:c).xOrigin,c.xOrigin,o,"transformOrigin"),o=ye(E,"yOrigin",(y?E:c).yOrigin,c.yOrigin,o,"transformOrigin"),m===E.xOffset&&g===E.yOffset||(o=ye(E,"xOffset",y?m:E.xOffset,E.xOffset,o,"transformOrigin"),o=ye(E,"yOffset",y?g:E.yOffset,E.yOffset,o,"transformOrigin")),d=Ee?null:"0px 0px"),(d||$e&&p&&E.zOrigin)&&(Ie?(h=!0,n=Ce,d=(d||K(e,n,r,!1,"50% 50%"))+"",o=new ve(w,n,0,0,o,-1,"transformOrigin"),o.b=w[n],o.plugin=a,$e?(u=E.zOrigin,d=d.split(" "),E.zOrigin=(d.length>2&&(0===u||"0px"!==d[2])?parseFloat(d[2]):u)||0,o.xs0=o.e=d[0]+" "+(d[1]||"50%")+" 0px",o=new ve(E,"zOrigin",0,0,o,-1,o.n),o.b=u,o.xs0=o.e=E.zOrigin):o.xs0=o.e=d):oe(d+"",E)),h&&(i._transformType=E.svg&&Ee||!p&&3!==this._transformType?2:3),o},prefix:!0}),Te("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),Te("borderRadius",{defaultValue:"0px",parser:function(e,t,n,o,a,s){t=this.format(t);var l,c,u,d,p,h,f,m,g,v,y,w,b,S,T,E,O=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],I=e.style;for(g=parseFloat(e.offsetWidth),v=parseFloat(e.offsetHeight),l=t.split(" "),c=0;c<O.length;c++)this.p.indexOf("border")&&(O[c]=X(O[c])),p=d=K(e,O[c],r,!1,"0px"),-1!==p.indexOf(" ")&&(d=p.split(" "),p=d[0],d=d[1]),h=u=l[c],f=parseFloat(p),w=p.substr((f+"").length),b="="===h.charAt(1),b?(m=parseInt(h.charAt(0)+"1",10),h=h.substr(2),m*=parseFloat(h),y=h.substr((m+"").length-(m<0?1:0))||""):(m=parseFloat(h),y=h.substr((m+"").length)),""===y&&(y=i[n]||w),y!==w&&(S=Q(e,"borderLeft",f,w),T=Q(e,"borderTop",f,w),"%"===y?(p=S/g*100+"%",d=T/v*100+"%"):"em"===y?(E=Q(e,"borderLeft",1,"em"),p=S/E+"em",d=T/E+"em"):(p=S+"px",d=T+"px"),b&&(h=parseFloat(p)+m+y,u=parseFloat(d)+m+y)),a=we(I,O[c],p+" "+d,h+" "+u,!1,"0px",a);return a},prefix:!0,formatter:fe("0px 0px 0px 0px",!1,!0)}),Te("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(e,t,n,i,o,a){return we(e.style,n,this.format(K(e,n,r,!1,"0px 0px")),this.format(t),!1,"0px",o)},prefix:!0,formatter:fe("0px 0px",!1,!0)}),Te("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,n,i,o,a){var s,l,c,u,d,p,h="background-position",f=r||Z(e,null),m=this.format((f?g?f.getPropertyValue(h+"-x")+" "+f.getPropertyValue(h+"-y"):f.getPropertyValue(h):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),v=this.format(t);if(-1!==m.indexOf("%")!=(-1!==v.indexOf("%"))&&v.split(",").length<2&&(p=K(e,"backgroundImage").replace($,""))&&"none"!==p){for(s=m.split(" "),l=v.split(" "),H.setAttribute("src",p),c=2;--c>-1;)m=s[c],(u=-1!==m.indexOf("%"))!==(-1!==l[c].indexOf("%"))&&(d=0===c?e.offsetWidth-H.width:e.offsetHeight-H.height,s[c]=u?parseFloat(m)/100*d+"px":parseFloat(m)/d*100+"%");m=s.join(" ")}return this.parseComplex(e.style,m,v,o,a)},formatter:oe}),Te("backgroundSize",{defaultValue:"0 0",formatter:oe}),Te("perspective",{defaultValue:"0px",prefix:!0}),Te("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),Te("transformStyle",{prefix:!0}),Te("backfaceVisibility",{prefix:!0}),Te("userSelect",{prefix:!0}),Te("margin",{parser:me("marginTop,marginRight,marginBottom,marginLeft")}),Te("padding",{parser:me("paddingTop,paddingRight,paddingBottom,paddingLeft")}),Te("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,n,i,o,a){var s,l,c;return g<9?(l=e.currentStyle,c=g<8?" ":",",s="rect("+l.clipTop+c+l.clipRight+c+l.clipBottom+c+l.clipLeft+")",t=this.format(t).split(",").join(c)):(s=this.format(K(e,this.p,r,!1,this.dflt)),t=this.format(t)),this.parseComplex(e.style,s,t,o,a)}}),Te("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),Te("autoRound,strictUnits",{parser:function(e,t,n,i,r){return r}}),Te("border",{defaultValue:"0px solid #000",parser:function(e,t,n,i,o,a){var s=K(e,"borderTopWidth",r,!1,"0px"),l=this.format(t).split(" "),c=l[0].replace(S,"");return"px"!==c&&(s=parseFloat(s)/Q(e,"borderTopWidth",1,c)+c),this.parseComplex(e.style,this.format(s+" "+K(e,"borderTopStyle",r,!1,"solid")+" "+K(e,"borderTopColor",r,!1,"#000")),l.join(" "),o,a)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(he)||["#000"])[0]}}),Te("borderWidth",{parser:me("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),Te("float,cssFloat,styleFloat",{parser:function(e,t,n,i,r,o){var a=e.style,s="cssFloat"in a?"cssFloat":"styleFloat";return new ve(a,s,0,0,r,-1,n,!1,0,a[s],t)}});var ze=function(e){var t,n=this.t,i=n.filter||K(this.data,"filter")||"",r=this.s+this.c*e|0;100===r&&(-1===i.indexOf("atrix(")&&-1===i.indexOf("radient(")&&-1===i.indexOf("oader(")?(n.removeAttribute("filter"),t=!K(this.data,"filter")):(n.filter=i.replace(O,""),t=!0)),t||(this.xn1&&(n.filter=i=i||"alpha(opacity="+r+")"),-1===i.indexOf("pacity")?0===r&&this.xn1||(n.filter=i+" alpha(opacity="+r+")"):n.filter=i.replace(T,"opacity="+r))};Te("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,n,i,o,a){var s=parseFloat(K(e,"opacity",r,!1,"1")),l=e.style,c="autoAlpha"===n;return"string"==typeof t&&"="===t.charAt(1)&&(t=("-"===t.charAt(0)?-1:1)*parseFloat(t.substr(2))+s),c&&1===s&&"hidden"===K(e,"visibility",r)&&0!==t&&(s=0),V?o=new ve(l,"opacity",s,t-s,o):(o=new ve(l,"opacity",100*s,100*(t-s),o),o.xn1=c?1:0,l.zoom=1,o.type=2,o.b="alpha(opacity="+o.s+")",o.e="alpha(opacity="+(o.s+o.c)+")",o.data=e,o.plugin=a,o.setRatio=ze),c&&(o=new ve(l,"visibility",0,0,o,-1,null,!1,0,0!==s?"inherit":"hidden",0===t?"hidden":"inherit"),o.xs0="inherit",i._overwriteProps.push(o.n),i._overwriteProps.push(n)),o}});var Ue=function(e,t){t&&(e.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),e.removeProperty(t.replace(x,"-$1").toLowerCase())):e.removeAttribute(t))},Ve=function(e){if(this.t._gsClassPT=this,1===e||0===e){this.t.setAttribute("class",0===e?this.b:this.e);for(var t=this.data,n=this.t.style;t;)t.v?n[t.p]=t.v:Ue(n,t.p),t=t._next;1===e&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};Te("className",{parser:function(e,t,i,o,a,s,l){var c,u,d,p,h,f=e.getAttribute("class")||"",m=e.style.cssText;if(a=o._classNamePT=new ve(e,i,0,0,a,2),a.setRatio=Ve,a.pr=-11,n=!0,a.b=f,u=ee(e,r),d=e._gsClassPT){for(p={},h=d.data;h;)p[h.p]=1,h=h._next;d.setRatio(1)}return e._gsClassPT=a,a.e="="!==t.charAt(1)?t:f.replace(new RegExp("(?:\\s|^)"+t.substr(2)+"(?![\\w-])"),"")+("+"===t.charAt(0)?" "+t.substr(2):""),e.setAttribute("class",a.e),c=te(e,u,ee(e),l,p),e.setAttribute("class",f),a.data=c.firstMPT,e.style.cssText=m,a=a.xfirst=o.parse(e,c.difs,a,s)}});var We=function(e){if((1===e||0===e)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var t,n,i,r,o,a=this.t.style,s=c.transform.parse;if("all"===this.e)a.cssText="",r=!0;else for(t=this.e.split(" ").join("").split(","),i=t.length;--i>-1;)n=t[i],c[n]&&(c[n].parse===s?r=!0:n="transformOrigin"===n?Ce:c[n].p),Ue(a,n);r&&(Ue(a,Ie),(o=this.t._gsTransform)&&(o.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(Te("clearProps",{parser:function(e,t,i,r,o){return o=new ve(e,i,0,0,o,2),o.setRatio=We,o.e=t,o.pr=-10,o.data=r._tween,n=!0,o}}),u="bezier,throwProps,physicsProps,physics2D".split(","),be=u.length;be--;)!function(e){if(!c[e]){var t=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";Te(e,{parser:function(e,n,i,r,o,a,s){var u=l.com.greensock.plugins[t];return u?(u._cssRegister(),c[i].parse(e,n,i,r,o,a,s)):(G("Error: "+t+" js file not loaded."),o)}})}}(u[be]);u=s.prototype,u._firstPT=u._lastParsedTransform=u._transform=null,u._onInitTween=function(e,t,a){if(!e.nodeType)return!1;this._target=e,this._tween=a,this._vars=t,d=t.autoRound,n=!1,i=t.suffixMap||s.suffixMap,r=Z(e,""),o=this._overwriteProps;var l,u,f,g,v,y,w,b,S,T=e.style;if(p&&""===T.zIndex&&("auto"!==(l=K(e,"zIndex",r))&&""!==l||this._addLazySet(T,"zIndex",0)),"string"==typeof t&&(g=T.cssText,l=ee(e,r),T.cssText=g+";"+t,l=te(e,l,ee(e)).difs,!V&&E.test(t)&&(l.opacity=parseFloat(RegExp.$1)),t=l,T.cssText=g),t.className?this._firstPT=u=c.className.parse(e,t.className,"className",this,null,null,t):this._firstPT=u=this.parse(e,t,null),this._transformType){for(S=3===this._transformType,Ie?h&&(p=!0,""===T.zIndex&&("auto"!==(w=K(e,"zIndex",r))&&""!==w||this._addLazySet(T,"zIndex",0)),m&&this._addLazySet(T,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(S?"visible":"hidden"))):T.zoom=1,f=u;f&&f._next;)f=f._next;b=new ve(e,"transform",0,0,null,2),this._linkCSSP(b,null,f),b.setRatio=Ie?He:Be,b.data=this._transform||je(e,r,!0),b.tween=a,b.pr=-1,o.pop()}if(n){for(;u;){for(y=u._next,f=g;f&&f.pr>u.pr;)f=f._next;(u._prev=f?f._prev:v)?u._prev._next=u:g=u,(u._next=f)?f._prev=u:v=u,u=y}this._firstPT=g}return!0},u.parse=function(e,t,n,o){var a,s,l,u,p,h,f,m,g,v,y=e.style;for(a in t)h=t[a],s=c[a],s?n=s.parse(e,h,a,this,n,o,t):(p=K(e,a,r)+"",g="string"==typeof h,"color"===a||"fill"===a||"stroke"===a||-1!==a.indexOf("Color")||g&&I.test(h)?(g||(h=de(h),h=(h.length>3?"rgba(":"rgb(")+h.join(",")+")"),n=we(y,a,p,h,!0,"transparent",n,0,o)):g&&N.test(h)?n=we(y,a,p,h,!0,null,n,0,o):(l=parseFloat(p),f=l||0===l?p.substr((l+"").length):"",""!==p&&"auto"!==p||("width"===a||"height"===a?(l=re(e,a,r),f="px"):"left"===a||"top"===a?(l=J(e,a,r),f="px"):(l="opacity"!==a?0:1,f="")),v=g&&"="===h.charAt(1),v?(u=parseInt(h.charAt(0)+"1",10),h=h.substr(2),u*=parseFloat(h),m=h.replace(S,"")):(u=parseFloat(h),m=g?h.replace(S,""):""),""===m&&(m=a in i?i[a]:f),h=u||0===u?(v?u+l:u)+m:t[a],f!==m&&""!==m&&(u||0===u)&&l&&(l=Q(e,a,l,f),"%"===m?(l/=Q(e,a,100,"%")/100,!0!==t.strictUnits&&(p=l+"%")):"em"===m||"rem"===m||"vw"===m||"vh"===m?l/=Q(e,a,1,m):"px"!==m&&(u=Q(e,a,u,m),m="px"),v&&(u||0===u)&&(h=u+l+m)),v&&(u+=l),!l&&0!==l||!u&&0!==u?void 0!==y[a]&&(h||h+""!="NaN"&&null!=h)?(n=new ve(y,a,u||l||0,0,n,-1,a,!1,0,p,h),n.xs0="none"!==h||"display"!==a&&-1===a.indexOf("Style")?h:p):G("invalid "+a+" tween value: "+t[a]):(n=new ve(y,a,l,u-l,n,0,a,!1!==d&&("px"===m||"zIndex"===a),0,p,h),n.xs0=m))),o&&n&&!n.plugin&&(n.plugin=o);return n},u.setRatio=function(e){var t,n,i,r=this._firstPT;if(1!==e||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(e||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;r;){if(t=r.c*e+r.s,r.r?t=Math.round(t):t<1e-6&&t>-1e-6&&(t=0),r.type)if(1===r.type)if(2===(i=r.l))r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2;else if(3===i)r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===i)r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===i)r.t[r.p]=r.xs0+t+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(n=r.xs0+t+r.xs1,i=1;i<r.l;i++)n+=r["xn"+i]+r["xs"+(i+1)];r.t[r.p]=n}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(e);else r.t[r.p]=t+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(e),r=r._next;else for(;r;){if(2!==r.type)if(r.r&&-1!==r.type)if(t=Math.round(r.s+r.c),r.type){if(1===r.type){for(i=r.l,n=r.xs0+t+r.xs1,i=1;i<r.l;i++)n+=r["xn"+i]+r["xs"+(i+1)];r.t[r.p]=n}}else r.t[r.p]=t+r.xs0;else r.t[r.p]=r.e;else r.setRatio(e);r=r._next}},u._enableTransforms=function(e){this._transform=this._transform||je(this._target,r,!0),this._transformType=this._transform.svg&&Ee||!e&&3!==this._transformType?2:3};var Ge=function(e){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};u._addLazySet=function(e,t,n){var i=this._firstPT=new ve(e,t,0,0,this._firstPT,2);i.e=n,i.setRatio=Ge,i.data=this},u._linkCSSP=function(e,t,n,i){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next,i=!0),n?n._next=e:i||null!==this._firstPT||(this._firstPT=e),e._next=t,e._prev=n),e},u._kill=function(t){var n,i,r,o=t;if(t.autoAlpha||t.alpha){o={};for(i in t)o[i]=t[i];o.opacity=1,o.autoAlpha&&(o.visibility=1)}return t.className&&(n=this._classNamePT)&&(r=n.xfirst,r&&r._prev?this._linkCSSP(r._prev,n._next,r._prev._prev):r===this._firstPT&&(this._firstPT=n._next),n._next&&this._linkCSSP(n._next,n._next._next,r._prev),this._classNamePT=null),e.prototype._kill.call(this,o)};var qe=function(e,t,n){var i,r,o,a;if(e.slice)for(r=e.length;--r>-1;)qe(e[r],t,n);else for(i=e.childNodes,r=i.length;--r>-1;)o=i[r],a=o.type,o.style&&(t.push(ee(o)),n&&n.push(o)),1!==a&&9!==a&&11!==a||!o.childNodes.length||qe(o,t,n)};return s.cascadeTo=function(e,n,i){var r,o,a,s,l=t.to(e,n,i),c=[l],u=[],d=[],p=[],h=t._internals.reservedProps;for(e=l._targets||l.target,qe(e,u,p),l.render(n,!0,!0),qe(e,d),l.render(0,!0,!0),l._enabled(!0),r=p.length;--r>-1;)if(o=te(p[r],u[r],d[r]),o.firstMPT){o=o.difs;for(a in i)h[a]&&(o[a]=i[a]);s={};for(a in o)s[a]=u[r][a];c.push(t.fromTo(p[r],n,s,o))}return c},e.activate([s]),s},!0),function(){var e=a._gsDefine.plugin({propName:"roundProps",version:"1.5",priority:-1,API:2,init:function(e,t,n){return this._tween=n,!0}}),t=function(e){for(;e;)e.f||e.blob||(e.r=1),e=e._next},n=e.prototype;n._onInitAllProps=function(){for(var e,n,i,r=this._tween,o=r.vars.roundProps.join?r.vars.roundProps:r.vars.roundProps.split(","),a=o.length,s={},l=r._propLookup.roundProps;--a>-1;)s[o[a]]=1;for(a=o.length;--a>-1;)for(e=o[a],n=r._firstPT;n;)i=n._next,n.pg?n.t._roundProps(s,!0):n.n===e&&(2===n.f&&n.t?t(n.t._firstPT):(this._add(n.t,e,n.s,n.c),i&&(i._prev=n._prev),n._prev?n._prev._next=i:r._firstPT===n&&(r._firstPT=i),n._next=n._prev=null,r._propLookup[e]=l)),n=i;return!1},n._add=function(e,t,n,i){this._addTween(e,t,n,n+i,t,!0),this._overwriteProps.push(t)}}(),function(){a._gsDefine.plugin({propName:"attr",API:2,version:"0.5.0",init:function(e,t,n){var i;if("function"!=typeof e.setAttribute)return!1;for(i in t)this._addTween(e,"setAttribute",e.getAttribute(i)+"",t[i]+"",i,!1,i),this._overwriteProps.push(i);return!0}})}(),a._gsDefine.plugin({propName:"directionalRotation",version:"0.2.1",API:2,init:function(e,t,n){"object"!=typeof t&&(t={rotation:t}),this.finals={};var i,r,o,a,s,l,c=!0===t.useRadians?2*Math.PI:360;for(i in t)"useRadians"!==i&&(l=(t[i]+"").split("_"),r=l[0],o=parseFloat("function"!=typeof e[i]?e[i]:e[i.indexOf("set")||"function"!=typeof e["get"+i.substr(3)]?i:"get"+i.substr(3)]()),a=this.finals[i]="string"==typeof r&&"="===r.charAt(1)?o+parseInt(r.charAt(0)+"1",10)*Number(r.substr(2)):Number(r)||0,s=a-o,l.length&&(r=l.join("_"),-1!==r.indexOf("short")&&(s%=c)!==s%(c/2)&&(s=s<0?s+c:s-c),-1!==r.indexOf("_cw")&&s<0?s=(s+9999999999*c)%c-(s/c|0)*c:-1!==r.indexOf("ccw")&&s>0&&(s=(s-9999999999*c)%c-(s/c|0)*c)),(s>1e-6||s<-1e-6)&&(this._addTween(e,i,o,o+s,i),this._overwriteProps.push(i)));return!0},set:function(e){var t;if(1!==e)this._super.setRatio.call(this,e);else for(t=this._firstPT;t;)t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p],t=t._next}})._autoCSS=!0,a._gsDefine("easing.Back",["easing.Ease"],function(e){var t,n,i,r=a.GreenSockGlobals||a,o=r.com.greensock,s=2*Math.PI,l=Math.PI/2,c=o._class,u=function(t,n){var i=c("easing."+t,function(){},!0),r=i.prototype=new e;return r.constructor=i,r.getRatio=n,i},d=e.register||function(){},p=function(e,t,n,i,r){var o=c("easing."+e,{easeOut:new t,easeIn:new n,easeInOut:new i},!0);return d(o,e),o},h=function(e,t,n){this.t=e,this.v=t,n&&(this.next=n,n.prev=this,this.c=n.v-t,this.gap=n.t-e)},f=function(t,n){var i=c("easing."+t,function(e){this._p1=e||0===e?e:1.70158,this._p2=1.525*this._p1},!0),r=i.prototype=new e;return r.constructor=i,r.getRatio=n,r.config=function(e){return new i(e)},i},m=p("Back",f("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),f("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),f("BackInOut",function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),g=c("easing.SlowMo",function(e,t,n){t=t||0===t?t:.7,null==e?e=.7:e>1&&(e=1),this._p=1!==e?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=!0===n},!0),v=g.prototype=new e;return v.constructor=g,v.getRatio=function(e){var t=e+(.5-e)*this._p;return e<this._p1?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},g.ease=new g(.7,.7),v.config=g.config=function(e,t,n){return new g(e,t,n)},t=c("easing.SteppedEase",function(e){e=e||1,this._p1=1/e,this._p2=e+1},!0),v=t.prototype=new e,v.constructor=t,v.getRatio=function(e){return e<0?e=0:e>=1&&(e=.999999999),(this._p2*e>>0)*this._p1},v.config=t.config=function(e){return new t(e)},n=c("easing.RoughEase",function(t){t=t||{};for(var n,i,r,o,a,s,l=t.taper||"none",c=[],u=0,d=0|(t.points||20),p=d,f=!1!==t.randomize,m=!0===t.clamp,g=t.template instanceof e?t.template:null,v="number"==typeof t.strength?.4*t.strength:.4;--p>-1;)n=f?Math.random():1/d*p,i=g?g.getRatio(n):n,"none"===l?r=v:"out"===l?(o=1-n,r=o*o*v):"in"===l?r=n*n*v:n<.5?(o=2*n,r=o*o*.5*v):(o=2*(1-n),r=o*o*.5*v),f?i+=Math.random()*r-.5*r:p%2?i+=.5*r:i-=.5*r,m&&(i>1?i=1:i<0&&(i=0)),c[u++]={x:n,y:i};for(c.sort(function(e,t){return e.x-t.x}),s=new h(1,1,null),p=d;--p>-1;)a=c[p],s=new h(a.x,a.y,s);this._prev=new h(0,0,0!==s.t?s:s.next)},!0),v=n.prototype=new e,v.constructor=n,v.getRatio=function(e){var t=this._prev;if(e>t.t){for(;t.next&&e>=t.t;)t=t.next;t=t.prev}else for(;t.prev&&e<=t.t;)t=t.prev;return this._prev=t,t.v+(e-t.t)/t.gap*t.c},v.config=function(e){return new n(e)},n.ease=new n,p("Bounce",u("BounceOut",function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),u("BounceIn",function(e){return(e=1-e)<1/2.75?1-7.5625*e*e:e<2/2.75?1-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),u("BounceInOut",function(e){var t=e<.5;return e=t?1-2*e:2*e-1,e<1/2.75?e*=7.5625*e:e=e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,t?.5*(1-e):.5*e+.5})),p("Circ",u("CircOut",function(e){return Math.sqrt(1-(e-=1)*e)}),u("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),u("CircInOut",function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)})),i=function(t,n,i){var r=c("easing."+t,function(e,t){this._p1=e>=1?e:1,this._p2=(t||i)/(e<1?e:1),this._p3=this._p2/s*(Math.asin(1/this._p1)||0),this._p2=s/this._p2},!0),o=r.prototype=new e;return o.constructor=r,o.getRatio=n,o.config=function(e,t){return new r(e,t)},r},p("Elastic",i("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*this._p2)+1},.3),i("ElasticIn",function(e){return-this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)},.3),i("ElasticInOut",function(e){return(e*=2)<1?this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*this._p2)*.5+1},.45)),p("Expo",u("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),u("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),u("ExpoInOut",function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),p("Sine",u("SineOut",function(e){return Math.sin(e*l)}),u("SineIn",function(e){return 1-Math.cos(e*l)}),u("SineInOut",function(e){return-.5*(Math.cos(Math.PI*e)-1)})),c("easing.EaseLookup",{find:function(t){return e.map[t]}},!0),d(r.SlowMo,"SlowMo","ease,"),d(n,"RoughEase","ease,"),d(t,"SteppedEase","ease,"),m},!0)}),a._gsDefine&&a._gsQueue.pop()(),function(i,a){"use strict";var s={},l=i.GreenSockGlobals=i.GreenSockGlobals||i;if(!l.TweenLite){var c,u,d,p,h,f=function(e){var t,n=e.split("."),i=l;for(t=0;t<n.length;t++)i[n[t]]=i=i[n[t]]||{};return i},m=f("com.greensock"),g=function(e){var t,n=[],i=e.length;for(t=0;t!==i;n.push(e[t++]));return n},v=function(){},y=function(){var e=Object.prototype.toString,t=e.call([]);return function(n){return null!=n&&(n instanceof Array||"object"==typeof n&&!!n.push&&e.call(n)===t)}}(),w={},b=function(i,a,c,u){this.sc=w[i]?w[i].sc:[],w[i]=this,this.gsClass=null,this.func=c;var d=[];this.check=function(p){for(var h,m,g,v,y,S=a.length,T=S;--S>-1;)(h=w[a[S]]||new b(a[S],[])).gsClass?(d[S]=h.gsClass,T--):p&&h.sc.push(this);if(0===T&&c){if(m=("com.greensock."+i).split("."),g=m.pop(),v=f(m.join("."))[g]=this.gsClass=c.apply(c,d),u)if(l[g]=v,!(y=void 0!==e&&e.exports)&&n(60))r=[],void 0!==(o=function(){return v}.apply(t,r))&&(e.exports=o);else if(y)if("TweenMax"===i){e.exports=s.TweenMax=v;for(S in s)v[S]=s[S]}else s.TweenMax&&(s.TweenMax[g]=v);for(S=0;S<this.sc.length;S++)this.sc[S].check()}},this.check(!0)},S=i._gsDefine=function(e,t,n,i){return new b(e,t,n,i)},T=m._class=function(e,t,n){return t=t||function(){},S(e,[],function(){return t},n),t};S.globals=l;var E=[0,0,1,1],O=[],I=T("easing.Ease",function(e,t,n,i){this._func=e,this._type=n||0,this._power=i||0,this._params=t?E.concat(t):E},!0),x=I.map={},C=I.register=function(e,t,n,i){for(var r,o,a,s,l=t.split(","),c=l.length,u=(n||"easeIn,easeOut,easeInOut").split(",");--c>-1;)for(o=l[c],r=i?T("easing."+o,null,!0):m.easing[o]||{},a=u.length;--a>-1;)s=u[a],x[o+"."+s]=x[s+o]=r[s]=e.getRatio?e:e[s]||new e};for(d=I.prototype,d._calcEnd=!1,d.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,n=this._power,i=1===t?1-e:2===t?e:e<.5?2*e:2*(1-e);return 1===n?i*=i:2===n?i*=i*i:3===n?i*=i*i*i:4===n&&(i*=i*i*i*i),1===t?1-i:2===t?i:e<.5?i/2:1-i/2},c=["Linear","Quad","Cubic","Quart","Quint,Strong"],u=c.length;--u>-1;)d=c[u]+",Power"+u,C(new I(null,null,1,u),d,"easeOut",!0),C(new I(null,null,2,u),d,"easeIn"+(0===u?",easeNone":"")),C(new I(null,null,3,u),d,"easeInOut");x.linear=m.easing.Linear.easeIn,x.swing=m.easing.Quad.easeInOut;var $=T("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});d=$.prototype,d.addEventListener=function(e,t,n,i,r){r=r||0;var o,a,s=this._listeners[e],l=0;for(this!==p||h||p.wake(),null==s&&(this._listeners[e]=s=[]),a=s.length;--a>-1;)o=s[a],o.c===t&&o.s===n?s.splice(a,1):0===l&&o.pr<r&&(l=a+1);s.splice(l,0,{c:t,s:n,up:i,pr:r})},d.removeEventListener=function(e,t){var n,i=this._listeners[e];if(i)for(n=i.length;--n>-1;)if(i[n].c===t)return void i.splice(n,1)},d.dispatchEvent=function(e){var t,n,i,r=this._listeners[e];if(r)for(t=r.length,n=this._eventTarget;--t>-1;)(i=r[t])&&(i.up?i.c.call(i.s||n,{type:e,target:n}):i.c.call(i.s||n))};var _=i.requestAnimationFrame,A=i.cancelAnimationFrame,R=Date.now||function(){return(new Date).getTime()},P=R();for(c=["ms","moz","webkit","o"],u=c.length;--u>-1&&!_;)_=i[c[u]+"RequestAnimationFrame"],A=i[c[u]+"CancelAnimationFrame"]||i[c[u]+"CancelRequestAnimationFrame"];T("Ticker",function(e,t){var n,i,r,o,a,s=this,l=R(),c=!(!1===t||!_)&&"auto",u=500,d=33,f=function(e){var t,c,p=R()-P;p>u&&(l+=p-d),P+=p,s.time=(P-l)/1e3,t=s.time-a,(!n||t>0||!0===e)&&(s.frame++,a+=t+(t>=o?.004:o-t),c=!0),!0!==e&&(r=i(f)),c&&s.dispatchEvent("tick")};$.call(s),s.time=s.frame=0,s.tick=function(){f(!0)},s.lagSmoothing=function(e,t){u=e||1e10,d=Math.min(t,u,0)},s.sleep=function(){null!=r&&(c&&A?A(r):clearTimeout(r),i=v,r=null,s===p&&(h=!1))},s.wake=function(e){null!==r?s.sleep():e?l+=-P+(P=R()):s.frame>10&&(P=R()-u+5),i=0===n?v:c&&_?_:function(e){return setTimeout(e,1e3*(a-s.time)+1|0)},s===p&&(h=!0),f(2)},s.fps=function(e){if(!arguments.length)return n;n=e,o=1/(n||60),a=this.time+o,s.wake()},s.useRAF=function(e){if(!arguments.length)return c;s.sleep(),c=e,s.fps(n)},s.fps(e),setTimeout(function(){"auto"===c&&s.frame<5&&"hidden"!==document.visibilityState&&s.useRAF(!1)},1500)}),d=m.Ticker.prototype=new m.events.EventDispatcher,d.constructor=m.Ticker;var k=T("core.Animation",function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=!0===t.immediateRender,this.data=t.data,this._reversed=!0===t.reversed,Q){h||p.wake();var n=this.vars.useFrames?K:Q;n.add(this,n._time),this.vars.paused&&this.paused(!0)}});p=k.ticker=new m.Ticker,d=k.prototype,d._dirty=d._gc=d._initted=d._paused=!1,d._totalTime=d._time=0,d._rawPrevTime=-1,d._next=d._last=d._onUpdate=d._timeline=d.timeline=null,d._paused=!1;var N=function(){h&&R()-P>2e3&&p.wake(),setTimeout(N,2e3)};N(),d.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},d.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},d.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},d.seek=function(e,t){return this.totalTime(Number(e),!1!==t)},d.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,!1!==t,!0)},d.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},d.render=function(e,t,n){},d.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},d.isActive=function(){var e,t=this._timeline,n=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime())>=n&&e<n+this.totalDuration()/this._timeScale},d._enabled=function(e,t){return h||p.wake(),this._gc=!e,this._active=this.isActive(),!0!==t&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},d._kill=function(e,t){return this._enabled(!1,!1)},d.kill=function(e,t){return this._kill(e,t),this},d._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},d._swapSelfInParams=function(e){for(var t=e.length,n=e.concat();--t>-1;)"{self}"===e[t]&&(n[t]=this);return n},d._callback=function(e){var t=this.vars;t[e].apply(t[e+"Scope"]||t.callbackScope||this,t[e+"Params"]||O)},d.eventCallback=function(e,t,n,i){if("on"===(e||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[e];null==t?delete r[e]:(r[e]=t,r[e+"Params"]=y(n)&&-1!==n.join("").indexOf("{self}")?this._swapSelfInParams(n):n,r[e+"Scope"]=i),"onUpdate"===e&&(this._onUpdate=t)}return this},d.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},d.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},d.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},d.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},d.totalTime=function(e,t,n){if(h||p.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(e<0&&!n&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var i=this._totalDuration,r=this._timeline;if(e>i&&!n&&(e=i),this._startTime=(this._paused?this._pauseTime:r._time)-(this._reversed?i-e:e)/this._timeScale,r._dirty||this._uncache(!1),r._timeline)for(;r._timeline;)r._timeline._time!==(r._startTime+r._totalTime)/r._timeScale&&r.totalTime(r._totalTime,!0),r=r._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===e&&0!==this._duration||(j.length&&ee(),this.render(e,t,!1),j.length&&ee())}return this},d.progress=d.totalProgress=function(e,t){var n=this.duration();return arguments.length?this.totalTime(n*e,t):n?this._time/n:this.ratio},d.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},d.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},d.timeScale=function(e){if(!arguments.length)return this._timeScale;if(e=e||1e-10,this._timeline&&this._timeline.smoothChildTiming){var t=this._pauseTime,n=t||0===t?t:this._timeline.totalTime();this._startTime=n-(n-this._startTime)*this._timeScale/e}return this._timeScale=e,this._uncache(!1)},d.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},d.paused=function(e){if(!arguments.length)return this._paused;var t,n,i=this._timeline;return e!=this._paused&&i&&(h||e||p.wake(),t=i.rawTime(),n=t-this._pauseTime,!e&&i.smoothChildTiming&&(this._startTime+=n,this._uncache(!1)),this._pauseTime=e?t:null,this._paused=e,this._active=this.isActive(),!e&&0!==n&&this._initted&&this.duration()&&(t=i.smoothChildTiming?this._totalTime:(t-this._startTime)/this._timeScale,this.render(t,t===this._totalTime,!0))),this._gc&&!e&&this._enabled(!0,!1),this};var D=T("core.SimpleTimeline",function(e){k.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});d=D.prototype=new k,d.constructor=D,d.kill()._gc=!1,d._first=d._last=d._recent=null,d._sortChildren=!1,d.add=d.insert=function(e,t,n,i){var r,o;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=e._startTime+(this.rawTime()-e._startTime)/e._timeScale),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),r=this._last,this._sortChildren)for(o=e._startTime;r&&r._startTime>o;)r=r._prev;return r?(e._next=r._next,r._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=r,this._recent=e,this._timeline&&this._uncache(!0),this},d._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},d.render=function(e,t,n){var i,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;r;)i=r._next,(r._active||e>=r._startTime&&!r._paused)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,n):r.render((e-r._startTime)*r._timeScale,t,n)),r=i},d.rawTime=function(){return h||p.wake(),this._totalTime};var L=T("TweenLite",function(e,t,n){if(k.call(this,t,n),this.render=L.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:L.selector(e)||e;var r,o,a,s=e.jquery||e.length&&e!==i&&e[0]&&(e[0]===i||e[0].nodeType&&e[0].style&&!e.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?Z[L.defaultOverwrite]:"number"==typeof l?l>>0:Z[l],(s||e instanceof Array||e.push&&y(e))&&"number"!=typeof e[0])for(this._targets=a=g(e),this._propLookup=[],this._siblings=[],r=0;r<a.length;r++)o=a[r],o?"string"!=typeof o?o.length&&o!==i&&o[0]&&(o[0]===i||o[0].nodeType&&o[0].style&&!o.nodeType)?(a.splice(r--,1),this._targets=a=a.concat(g(o))):(this._siblings[r]=te(o,this,!1),1===l&&this._siblings[r].length>1&&ie(o,this,null,1,this._siblings[r])):"string"==typeof(o=a[r--]=L.selector(o))&&a.splice(r+1,1):a.splice(r--,1);else this._propLookup={},this._siblings=te(e,this,!1),1===l&&this._siblings.length>1&&ie(e,this,null,1,this._siblings);(this.vars.immediateRender||0===t&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-1e-10,this.render(Math.min(0,-this._delay)))},!0),M=function(e){return e&&e.length&&e!==i&&e[0]&&(e[0]===i||e[0].nodeType&&e[0].style&&!e.nodeType)},F=function(e,t){var n,i={};for(n in e)X[n]||n in t&&"transform"!==n&&"x"!==n&&"y"!==n&&"width"!==n&&"height"!==n&&"className"!==n&&"border"!==n||!(!G[n]||G[n]&&G[n]._autoCSS)||(i[n]=e[n],delete e[n]);e.css=i};d=L.prototype=new k,d.constructor=L,d.kill()._gc=!1,d.ratio=0,d._firstPT=d._targets=d._overwrittenProps=d._startAt=null,d._notifyPluginsOfEnabled=d._lazy=!1,L.version="1.18.5",L.defaultEase=d._ease=new I(null,null,1,1),L.defaultOverwrite="auto",L.ticker=p,L.autoSleep=120,L.lagSmoothing=function(e,t){p.lagSmoothing(e,t)},L.selector=i.$||i.jQuery||function(e){var t=i.$||i.jQuery;return t?(L.selector=t,t(e)):"undefined"==typeof document?e:document.querySelectorAll?document.querySelectorAll(e):document.getElementById("#"===e.charAt(0)?e.substr(1):e)};var j=[],B={},H=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,z=function(e){for(var t,n=this._firstPT;n;)t=n.blob?e?this.join(""):this.start:n.c*e+n.s,n.r?t=Math.round(t):t<1e-6&&t>-1e-6&&(t=0),n.f?n.fp?n.t[n.p](n.fp,t):n.t[n.p](t):n.t[n.p]=t,n=n._next},U=function(e,t,n,i){var r,o,a,s,l,c,u,d=[e,t],p=0,h="",f=0;for(d.start=e,n&&(n(d),e=d[0],t=d[1]),d.length=0,r=e.match(H)||[],o=t.match(H)||[],i&&(i._next=null,i.blob=1,d._firstPT=i),l=o.length,s=0;s<l;s++)u=o[s],c=t.substr(p,t.indexOf(u,p)-p),h+=c||!s?c:",",p+=c.length,f?f=(f+1)%5:"rgba("===c.substr(-5)&&(f=1),u===r[s]||r.length<=s?h+=u:(h&&(d.push(h),h=""),a=parseFloat(r[s]),d.push(a),d._firstPT={_next:d._firstPT,t:d,p:d.length-1,s:a,c:("="===u.charAt(1)?parseInt(u.charAt(0)+"1",10)*parseFloat(u.substr(2)):parseFloat(u)-a)||0,f:0,r:f&&f<4}),p+=u.length;return h+=t.substr(p),h&&d.push(h),d.setRatio=z,d},V=function(e,t,n,i,r,o,a,s){var l,c,u="get"===n?e[t]:n,d=typeof e[t],p="string"==typeof i&&"="===i.charAt(1),h={t:e,p:t,s:u,f:"function"===d,pg:0,n:r||t,r:o,pr:0,c:p?parseInt(i.charAt(0)+"1",10)*parseFloat(i.substr(2)):parseFloat(i)-u||0};if("number"!==d&&("function"===d&&"get"===n&&(c=t.indexOf("set")||"function"!=typeof e["get"+t.substr(3)]?t:"get"+t.substr(3),h.s=u=a?e[c](a):e[c]()),"string"==typeof u&&(a||isNaN(u))?(h.fp=a,l=U(u,i,s||L.defaultStringFilter,h),h={t:l,p:"setRatio",s:0,c:1,f:2,pg:0,n:r||t,pr:0}):p||(h.s=parseFloat(u),h.c=parseFloat(i)-h.s||0)),h.c)return(h._next=this._firstPT)&&(h._next._prev=h),this._firstPT=h,h},W=L._internals={isArray:y,isSelector:M,lazyTweens:j,blobDif:U},G=L._plugins={},q=W.tweenLookup={},Y=0,X=W.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1},Z={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},K=k._rootFramesTimeline=new D,Q=k._rootTimeline=new D,J=30,ee=W.lazyRender=function(){var e,t=j.length;for(B={};--t>-1;)(e=j[t])&&!1!==e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0),e._lazy=!1);j.length=0};Q._startTime=p.time,K._startTime=p.frame,Q._active=K._active=!0,setTimeout(ee,1),k._updateRoot=L.render=function(){var e,t,n;if(j.length&&ee(),Q.render((p.time-Q._startTime)*Q._timeScale,!1,!1),K.render((p.frame-K._startTime)*K._timeScale,!1,!1),j.length&&ee(),p.frame>=J){J=p.frame+(parseInt(L.autoSleep,10)||120);for(n in q){for(t=q[n].tweens,e=t.length;--e>-1;)t[e]._gc&&t.splice(e,1);0===t.length&&delete q[n]}if((!(n=Q._first)||n._paused)&&L.autoSleep&&!K._first&&1===p._listeners.tick.length){for(;n&&n._paused;)n=n._next;n||p.sleep()}}},p.addEventListener("tick",k._updateRoot);var te=function(e,t,n){var i,r,o=e._gsTweenID;if(q[o||(e._gsTweenID=o="t"+Y++)]||(q[o]={target:e,tweens:[]}),t&&(i=q[o].tweens,i[r=i.length]=t,n))for(;--r>-1;)i[r]===t&&i.splice(r,1);return q[o].tweens},ne=function(e,t,n,i){var r,o,a=e.vars.onOverwrite;return a&&(r=a(e,t,n,i)),a=L.onOverwrite,a&&(o=a(e,t,n,i)),!1!==r&&!1!==o},ie=function(e,t,n,i,r){var o,a,s,l;if(1===i||i>=4){for(l=r.length,o=0;o<l;o++)if((s=r[o])!==t)s._gc||s._kill(null,e,t)&&(a=!0);else if(5===i)break;return a}var c,u=t._startTime+1e-10,d=[],p=0,h=0===t._duration;for(o=r.length;--o>-1;)(s=r[o])===t||s._gc||s._paused||(s._timeline!==t._timeline?(c=c||re(t,0,h),0===re(s,c,h)&&(d[p++]=s)):s._startTime<=u&&s._startTime+s.totalDuration()/s._timeScale>u&&((h||!s._initted)&&u-s._startTime<=2e-10||(d[p++]=s)));for(o=p;--o>-1;)if(s=d[o],2===i&&s._kill(n,e,t)&&(a=!0),2!==i||!s._firstPT&&s._initted){if(2!==i&&!ne(s,t))continue;s._enabled(!1,!1)&&(a=!0)}return a},re=function(e,t,n){for(var i=e._timeline,r=i._timeScale,o=e._startTime;i._timeline;){if(o+=i._startTime,r*=i._timeScale,i._paused)return-100;i=i._timeline}return o/=r,o>t?o-t:n&&o===t||!e._initted&&o-t<2e-10?1e-10:(o+=e.totalDuration()/e._timeScale/r)>t+1e-10?0:o-t-1e-10};d._init=function(){var e,t,n,i,r,o=this.vars,a=this._overwrittenProps,s=this._duration,l=!!o.immediateRender,c=o.ease;if(o.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),r={};for(i in o.startAt)r[i]=o.startAt[i];if(r.overwrite=!1,r.immediateRender=!0,r.lazy=l&&!1!==o.lazy,r.startAt=r.delay=null,this._startAt=L.to(this.target,0,r),l)if(this._time>0)this._startAt=null;else if(0!==s)return}else if(o.runBackwards&&0!==s)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(l=!1),n={};for(i in o)X[i]&&"autoCSS"!==i||(n[i]=o[i]);if(n.overwrite=0,n.data="isFromStart",n.lazy=l&&!1!==o.lazy,n.immediateRender=l,this._startAt=L.to(this.target,0,n),l){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=c=c?c instanceof I?c:"function"==typeof c?new I(c,o.easeParams):x[c]||L.defaultEase:L.defaultEase,o.easeParams instanceof Array&&c.config&&(this._ease=c.config.apply(c,o.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(e=this._targets.length;--e>-1;)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],a?a[e]:null)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,a);if(t&&L._onPluginEvent("_onInitAllProps",this),a&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),o.runBackwards)for(n=this._firstPT;n;)n.s+=n.c,n.c=-n.c,n=n._next;this._onUpdate=o.onUpdate,this._initted=!0},d._initProps=function(e,t,n,r){var o,a,s,l,c,u;if(null==e)return!1;B[e._gsTweenID]&&ee(),this.vars.css||e.style&&e!==i&&e.nodeType&&G.css&&!1!==this.vars.autoCSS&&F(this.vars,e);for(o in this.vars)if(u=this.vars[o],X[o])u&&(u instanceof Array||u.push&&y(u))&&-1!==u.join("").indexOf("{self}")&&(this.vars[o]=u=this._swapSelfInParams(u,this));else if(G[o]&&(l=new G[o])._onInitTween(e,this.vars[o],this)){for(this._firstPT=c={_next:this._firstPT,t:l,p:"setRatio",s:0,c:1,f:1,n:o,pg:1,pr:l._priority},a=l._overwriteProps.length;--a>-1;)t[l._overwriteProps[a]]=this._firstPT;(l._priority||l._onInitAllProps)&&(s=!0),(l._onDisable||l._onEnable)&&(this._notifyPluginsOfEnabled=!0),c._next&&(c._next._prev=c)}else t[o]=V.call(this,e,o,"get",u,o,0,null,this.vars.stringFilter);return r&&this._kill(r,e)?this._initProps(e,t,n,r):this._overwrite>1&&this._firstPT&&n.length>1&&ie(e,this,t,this._overwrite,n)?(this._kill(t,e),this._initProps(e,t,n,r)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(B[e._gsTweenID]=!0),s)},d.render=function(e,t,n){var i,r,o,a,s=this._time,l=this._duration,c=this._rawPrevTime;if(e>=l-1e-7)this._totalTime=this._time=l,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(i=!0,r="onComplete",n=n||this._timeline.autoRemoveChildren),0===l&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(e=0),(c<0||e<=0&&e>=-1e-7||1e-10===c&&"isPause"!==this.data)&&c!==e&&(n=!0,c>1e-10&&(r="onReverseComplete")),this._rawPrevTime=a=!t||e||c===e?e:1e-10);else if(e<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==s||0===l&&c>0)&&(r="onReverseComplete",i=this._reversed),e<0&&(this._active=!1,0===l&&(this._initted||!this.vars.lazy||n)&&(c>=0&&(1e-10!==c||"isPause"!==this.data)&&(n=!0),this._rawPrevTime=a=!t||e||c===e?e:1e-10)),this._initted||(n=!0);else if(this._totalTime=this._time=e,this._easeType){var u=e/l,d=this._easeType,p=this._easePower;(1===d||3===d&&u>=.5)&&(u=1-u),3===d&&(u*=2),1===p?u*=u:2===p?u*=u*u:3===p?u*=u*u*u:4===p&&(u*=u*u*u*u),this.ratio=1===d?1-u:2===d?u:e/l<.5?u/2:1-u/2}else this.ratio=this._ease.getRatio(e/l);if(this._time!==s||n){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=s,this._rawPrevTime=c,j.push(this),void(this._lazy=[e,t]);this._time&&!i?this.ratio=this._ease.getRatio(this._time/l):i&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==s&&e>=0&&(this._active=!0),0===s&&(this._startAt&&(e>=0?this._startAt.render(e,t,n):r||(r="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==l||t||this._callback("onStart"))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(e<0&&this._startAt&&-1e-4!==e&&this._startAt.render(e,t,n),t||(this._time!==s||i||n)&&this._callback("onUpdate")),r&&(this._gc&&!n||(e<0&&this._startAt&&!this._onUpdate&&-1e-4!==e&&this._startAt.render(e,t,n),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[r]&&this._callback(r),0===l&&1e-10===this._rawPrevTime&&1e-10!==a&&(this._rawPrevTime=0)))}},d._kill=function(e,t,n){if("all"===e&&(e=null),null==e&&(null==t||t===this.target))return this._lazy=!1,this._enabled(!1,!1);t="string"!=typeof t?t||this._targets||this.target:L.selector(t)||t;var i,r,o,a,s,l,c,u,d,p=n&&this._time&&n._startTime===this._startTime&&this._timeline===n._timeline;if((y(t)||M(t))&&"number"!=typeof t[0])for(i=t.length;--i>-1;)this._kill(e,t[i],n)&&(l=!0);else{if(this._targets){for(i=this._targets.length;--i>-1;)if(t===this._targets[i]){s=this._propLookup[i]||{},this._overwrittenProps=this._overwrittenProps||[],r=this._overwrittenProps[i]=e?this._overwrittenProps[i]||{}:"all";break}}else{if(t!==this.target)return!1;s=this._propLookup,r=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(s){if(c=e||s,u=e!==r&&"all"!==r&&e!==s&&("object"!=typeof e||!e._tempKill),n&&(L.onOverwrite||this.vars.onOverwrite)){for(o in c)s[o]&&(d||(d=[]),d.push(o));if((d||!e)&&!ne(this,n,t,d))return!1}for(o in c)(a=s[o])&&(p&&(a.f?a.t[a.p](a.s):a.t[a.p]=a.s,l=!0),a.pg&&a.t._kill(c)&&(l=!0),a.pg&&0!==a.t._overwriteProps.length||(a._prev?a._prev._next=a._next:a===this._firstPT&&(this._firstPT=a._next),a._next&&(a._next._prev=a._prev),a._next=a._prev=null),delete s[o]),u&&(r[o]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return l},d.invalidate=function(){return this._notifyPluginsOfEnabled&&L._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],k.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-1e-10,this.render(Math.min(0,-this._delay))),this},d._enabled=function(e,t){if(h||p.wake(),e&&this._gc){var n,i=this._targets;if(i)for(n=i.length;--n>-1;)this._siblings[n]=te(i[n],this,!0);else this._siblings=te(this.target,this,!0)}return k.prototype._enabled.call(this,e,t),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&L._onPluginEvent(e?"_onEnable":"_onDisable",this)},L.to=function(e,t,n){return new L(e,t,n)},L.from=function(e,t,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new L(e,t,n)},L.fromTo=function(e,t,n,i){return i.startAt=n,i.immediateRender=0!=i.immediateRender&&0!=n.immediateRender,new L(e,t,i)},L.delayedCall=function(e,t,n,i,r){return new L(t,0,{delay:e,onComplete:t,onCompleteParams:n,callbackScope:i,onReverseComplete:t,onReverseCompleteParams:n,immediateRender:!1,lazy:!1,useFrames:r,overwrite:0})},L.set=function(e,t){return new L(e,0,t)},L.getTweensOf=function(e,t){if(null==e)return[];e="string"!=typeof e?e:L.selector(e)||e;var n,i,r,o;if((y(e)||M(e))&&"number"!=typeof e[0]){for(n=e.length,i=[];--n>-1;)i=i.concat(L.getTweensOf(e[n],t));for(n=i.length;--n>-1;)for(o=i[n],r=n;--r>-1;)o===i[r]&&i.splice(n,1)}else for(i=te(e).concat(),n=i.length;--n>-1;)(i[n]._gc||t&&!i[n].isActive())&&i.splice(n,1);return i},L.killTweensOf=L.killDelayedCallsTo=function(e,t,n){"object"==typeof t&&(n=t,t=!1);for(var i=L.getTweensOf(e,t),r=i.length;--r>-1;)i[r]._kill(n,e)};var oe=T("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=oe.prototype},!0);if(d=oe.prototype,oe.version="1.18.0",oe.API=2,d._firstPT=null,d._addTween=V,d.setRatio=z,d._kill=function(e){var t,n=this._overwriteProps,i=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=n.length;--t>-1;)null!=e[n[t]]&&n.splice(t,1);for(;i;)null!=e[i.n]&&(i._next&&(i._next._prev=i._prev),i._prev?(i._prev._next=i._next,i._prev=null):this._firstPT===i&&(this._firstPT=i._next)),i=i._next;return!1},d._roundProps=function(e,t){for(var n=this._firstPT;n;)(e[this._propName]||null!=n.n&&e[n.n.split(this._propName+"_").join("")])&&(n.r=t),n=n._next},L._onPluginEvent=function(e,t){var n,i,r,o,a,s=t._firstPT;if("_onInitAllProps"===e){for(;s;){for(a=s._next,i=r;i&&i.pr>s.pr;)i=i._next;(s._prev=i?i._prev:o)?s._prev._next=s:r=s,(s._next=i)?i._prev=s:o=s,s=a}s=t._firstPT=r}for(;s;)s.pg&&"function"==typeof s.t[e]&&s.t[e]()&&(n=!0),s=s._next;return n},oe.activate=function(e){for(var t=e.length;--t>-1;)e[t].API===oe.API&&(G[(new e[t])._propName]=e[t]);return!0},S.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";var t,n=e.propName,i=e.priority||0,r=e.overwriteProps,o={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},a=T("plugins."+n.charAt(0).toUpperCase()+n.substr(1)+"Plugin",function(){oe.call(this,n,i),this._overwriteProps=r||[]},!0===e.global),s=a.prototype=new oe(n);s.constructor=a,a.API=e.API;for(t in o)"function"==typeof e[t]&&(s[o[t]]=e[t]);return a.version=e.version,oe.activate([a]),a},c=i._gsQueue){for(u=0;u<c.length;u++)c[u]();for(d in w)w[d].func||i.console.log("GSAP encountered missing dependency: com.greensock."+d)}h=!1}}(void 0!==e&&e.exports&&void 0!==i?i:this||window)}).call(t,n(6))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){n(1)(n(80))},function(e,t,n){e.exports=n(10)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),r=(n.n(i),n(13)),o=(n.n(r),n(15)),a=(n.n(o),n(0)),s=n.n(a),l=n(2),c=n.n(l),u=n(47),d=n.n(u),p=n(4),h=n.n(p),f=n(50),m=n.n(f),g=n(52),v=(n.n(g),n(57)),y=n.n(v),w=n(59),b=n.n(w),S=n(62),T=n.n(S),E=n(64),O=n.n(E),I=n(68),x=(n.n(I),n(70)),C=(n.n(x),n(72)),$=(n.n(C),n(74)),_=n.n($),A=n(76),R=n.n(A),P=n(77),k=n.n(P),N=n(78),D=n(95),L=n(140);s.a.module("app",[c.a,d.a,h.a,m.a,N.a.name,D.a.name,g.apiService,g.errorService,g.helperService,g.generalFilters,y.a,b.a,T.a,O.a,_.a]).constant("appConfig",window.appConfig).value("duScrollOffset",0).value("duScrollEasing",o.quintInOut).value("duScrollDuration",800).directive("app",L.a).config(["$stateProvider","$locationProvider","$urlRouterProvider","$urlMatcherFactoryProvider","$httpProvider","$sceDelegateProvider","$sceProvider","cfpLoadingBarProvider","gsapifyRouterProvider","scrollMagicProvider",function(e,t,n,i,r,o,a,s,l,c){"ngInject";t.html5Mode(!0),n.otherwise(function(e,t){setTimeout(function(){window.location.href="/404"},5e3)}),i.strictMode(!1),o.resourceUrlWhitelist(["self","https://*.s3.amazonaws.com/**","https://*.youtube.com/**","https://*.vimeo.com/**","http://*.vimeo.com/**","https://*.embedly.com/**"]),s.includeSpinner=!1,l.defaults={enter:"fadeDelayed",leave:"fade"},l.transition("fade",{duration:.4,delay:.2,css:{opacity:0}}),l.transition("fadeNoDelay",{duration:.4,css:{opacity:0}}),l.transition("fadeDelayed",{duration:.4,delay:.8,css:{opacity:0}}),l.transition("fadeUpDelayed",{duration:.6,delay:.4,css:{opacity:0,y:20}}),l.transition("slideLeft",{duration:.6,css:{x:"-100%"}}),l.transition("slideRight",{duration:.6,css:{x:"100%"}}),e.state("index",{abstract:!0,resolve:{metadata:["$rootScope","ApiService",function(e,t){return t.metadata().then(function(t){return e.metadata=t,e.pageDescription=t.description,t})}],profile:["ApiService",function(e){return e.entitySearchOne({q:"schema:profile",include_docs:!0}).then(function(e){return e.fields.text})}],portfolio:["ApiService",function(e){return e.entitySearchOne({q:"schema:portfolio",children:1})}]},views:{app:{}},data:{"gsapifyRouter.overlay":{leave:{out:{transition:"fadeNoDelay",priority:99}}}}})}]).run(["$rootScope","$state","$location","$window","$document","$timeout","$log","$injector","$q","HelperService","appConfig",function(e,t,n,i,r,o,a,l,c,u,d){"ngInject";k.a.init({hacks:R.a}),e.slug=d.slug,e.assistUrl=d.assistUrl,e.$state=t,e.$location=n,e.$isDesktop="desktop"===i.Detectizr.device.type,e.$isMobile="mobile"===i.Detectizr.device.type,e.$isTablet="tablet"===i.Detectizr.device.type,e.now=new Date,e.$on("$stateChangeError",function(e,t,n,r,o,s){a.error(s),"notFound"!==t.name&&(i.location.href="/404")}),e.$on("$stateChangeSuccess",function(e,t){"undefined"!=typeof ga&&ga("send","pageview",{page:n.path()})}),e.$on("cfpLoadingBar:started",function(){e.loading=!0}),e.$on("cfpLoadingBar:completed",function(){e.loading=!1});var p={},h=void 0,f=function(){var e={name:t.current.name,params:t.params};return JSON.stringify(e)};s.a.element(i).on("scroll",function(){p[h]=i.scrollY}),e.$on("$stateChangeSuccess",function(){h=f()}),e.$on("gsapifyRouter:leaveSuccess",function(e,n){if(-1===t.history[t.history.length-1].name.indexOf(t.current.name)){var i=t.history[t.history.length-2];if(i){var a=JSON.stringify(i);if(h===a)return void r.scrollTo(0,p[a])}"content"===n.attr("ui-view")&&o(function(){r.scrollTo(0,0)})}});r[0].querySelector('link[rel*="icon"]')}])},function(e,t,n){n(1)(n(12))},function(e,t){e.exports="/*!\n * Modernizr v2.8.3\n * www.modernizr.com\n *\n * Copyright (c) Faruk Ates, Paul Irish, Alex Sexton\n * Available under the BSD and MIT licenses: www.modernizr.com/license/\n */\n\n/*\n * Modernizr tests which native CSS3 and HTML5 features are available in\n * the current UA and makes the results available to you in two ways:\n * as properties on a global Modernizr object, and as classes on the\n * <html> element. This information allows you to progressively enhance\n * your pages with a granular level of control over the experience.\n *\n * Modernizr has an optional (not included) conditional resource loader\n * called Modernizr.load(), based on Yepnope.js (yepnopejs.com).\n * To get a build that includes Modernizr.load(), as well as choosing\n * which tests to include, go to www.modernizr.com/download/\n *\n * Authors        Faruk Ates, Paul Irish, Alex Sexton\n * Contributors   Ryan Seddon, Ben Alman\n */\n\nwindow.Modernizr = (function( window, document, undefined ) {\n\n    var version = '2.8.3',\n\n    Modernizr = {},\n\n    /*>>cssclasses*/\n    // option for enabling the HTML classes to be added\n    enableClasses = true,\n    /*>>cssclasses*/\n\n    docElement = document.documentElement,\n\n    /**\n     * Create our \"modernizr\" element that we do most feature tests on.\n     */\n    mod = 'modernizr',\n    modElem = document.createElement(mod),\n    mStyle = modElem.style,\n\n    /**\n     * Create the input element for various Web Forms feature tests.\n     */\n    inputElem /*>>inputelem*/ = document.createElement('input') /*>>inputelem*/ ,\n\n    /*>>smile*/\n    smile = ':)',\n    /*>>smile*/\n\n    toString = {}.toString,\n\n    // TODO :: make the prefixes more granular\n    /*>>prefixes*/\n    // List of property values to set for css tests. See ticket #21\n    prefixes = ' -webkit- -moz- -o- -ms- '.split(' '),\n    /*>>prefixes*/\n\n    /*>>domprefixes*/\n    // Following spec is to expose vendor-specific style properties as:\n    //   elem.style.WebkitBorderRadius\n    // and the following would be incorrect:\n    //   elem.style.webkitBorderRadius\n\n    // Webkit ghosts their properties in lowercase but Opera & Moz do not.\n    // Microsoft uses a lowercase `ms` instead of the correct `Ms` in IE8+\n    //   erik.eae.net/archives/2008/03/10/21.48.10/\n\n    // More here: github.com/Modernizr/Modernizr/issues/issue/21\n    omPrefixes = 'Webkit Moz O ms',\n\n    cssomPrefixes = omPrefixes.split(' '),\n\n    domPrefixes = omPrefixes.toLowerCase().split(' '),\n    /*>>domprefixes*/\n\n    /*>>ns*/\n    ns = {'svg': 'http://www.w3.org/2000/svg'},\n    /*>>ns*/\n\n    tests = {},\n    inputs = {},\n    attrs = {},\n\n    classes = [],\n\n    slice = classes.slice,\n\n    featureName, // used in testing loop\n\n\n    /*>>teststyles*/\n    // Inject element with style element and some CSS rules\n    injectElementWithStyles = function( rule, callback, nodes, testnames ) {\n\n      var style, ret, node, docOverflow,\n          div = document.createElement('div'),\n          // After page load injecting a fake body doesn't work so check if body exists\n          body = document.body,\n          // IE6 and 7 won't return offsetWidth or offsetHeight unless it's in the body element, so we fake it.\n          fakeBody = body || document.createElement('body');\n\n      if ( parseInt(nodes, 10) ) {\n          // In order not to give false positives we create a node for each test\n          // This also allows the method to scale for unspecified uses\n          while ( nodes-- ) {\n              node = document.createElement('div');\n              node.id = testnames ? testnames[nodes] : mod + (nodes + 1);\n              div.appendChild(node);\n          }\n      }\n\n      // <style> elements in IE6-9 are considered 'NoScope' elements and therefore will be removed\n      // when injected with innerHTML. To get around this you need to prepend the 'NoScope' element\n      // with a 'scoped' element, in our case the soft-hyphen entity as it won't mess with our measurements.\n      // msdn.microsoft.com/en-us/library/ms533897%28VS.85%29.aspx\n      // Documents served as xml will throw if using &shy; so use xml friendly encoded version. See issue #277\n      style = ['&#173;','<style id=\"s', mod, '\">', rule, '</style>'].join('');\n      div.id = mod;\n      // IE6 will false positive on some tests due to the style element inside the test div somehow interfering offsetHeight, so insert it into body or fakebody.\n      // Opera will act all quirky when injecting elements in documentElement when page is served as xml, needs fakebody too. #270\n      (body ? div : fakeBody).innerHTML += style;\n      fakeBody.appendChild(div);\n      if ( !body ) {\n          //avoid crashing IE8, if background image is used\n          fakeBody.style.background = '';\n          //Safari 5.13/5.1.4 OSX stops loading if ::-webkit-scrollbar is used and scrollbars are visible\n          fakeBody.style.overflow = 'hidden';\n          docOverflow = docElement.style.overflow;\n          docElement.style.overflow = 'hidden';\n          docElement.appendChild(fakeBody);\n      }\n\n      ret = callback(div, rule);\n      // If this is done after page load we don't want to remove the body so check if body exists\n      if ( !body ) {\n          fakeBody.parentNode.removeChild(fakeBody);\n          docElement.style.overflow = docOverflow;\n      } else {\n          div.parentNode.removeChild(div);\n      }\n\n      return !!ret;\n\n    },\n    /*>>teststyles*/\n\n    /*>>mq*/\n    // adapted from matchMedia polyfill\n    // by Scott Jehl and Paul Irish\n    // gist.github.com/786768\n    testMediaQuery = function( mq ) {\n\n      var matchMedia = window.matchMedia || window.msMatchMedia;\n      if ( matchMedia ) {\n        return matchMedia(mq) && matchMedia(mq).matches || false;\n      }\n\n      var bool;\n\n      injectElementWithStyles('@media ' + mq + ' { #' + mod + ' { position: absolute; } }', function( node ) {\n        bool = (window.getComputedStyle ?\n                  getComputedStyle(node, null) :\n                  node.currentStyle)['position'] == 'absolute';\n      });\n\n      return bool;\n\n     },\n     /*>>mq*/\n\n\n    /*>>hasevent*/\n    //\n    // isEventSupported determines if a given element supports the given event\n    // kangax.github.com/iseventsupported/\n    //\n    // The following results are known incorrects:\n    //   Modernizr.hasEvent(\"webkitTransitionEnd\", elem) // false negative\n    //   Modernizr.hasEvent(\"textInput\") // in Webkit. github.com/Modernizr/Modernizr/issues/333\n    //   ...\n    isEventSupported = (function() {\n\n      var TAGNAMES = {\n        'select': 'input', 'change': 'input',\n        'submit': 'form', 'reset': 'form',\n        'error': 'img', 'load': 'img', 'abort': 'img'\n      };\n\n      function isEventSupported( eventName, element ) {\n\n        element = element || document.createElement(TAGNAMES[eventName] || 'div');\n        eventName = 'on' + eventName;\n\n        // When using `setAttribute`, IE skips \"unload\", WebKit skips \"unload\" and \"resize\", whereas `in` \"catches\" those\n        var isSupported = eventName in element;\n\n        if ( !isSupported ) {\n          // If it has no `setAttribute` (i.e. doesn't implement Node interface), try generic element\n          if ( !element.setAttribute ) {\n            element = document.createElement('div');\n          }\n          if ( element.setAttribute && element.removeAttribute ) {\n            element.setAttribute(eventName, '');\n            isSupported = is(element[eventName], 'function');\n\n            // If property was created, \"remove it\" (by setting value to `undefined`)\n            if ( !is(element[eventName], 'undefined') ) {\n              element[eventName] = undefined;\n            }\n            element.removeAttribute(eventName);\n          }\n        }\n\n        element = null;\n        return isSupported;\n      }\n      return isEventSupported;\n    })(),\n    /*>>hasevent*/\n\n    // TODO :: Add flag for hasownprop ? didn't last time\n\n    // hasOwnProperty shim by kangax needed for Safari 2.0 support\n    _hasOwnProperty = ({}).hasOwnProperty, hasOwnProp;\n\n    if ( !is(_hasOwnProperty, 'undefined') && !is(_hasOwnProperty.call, 'undefined') ) {\n      hasOwnProp = function (object, property) {\n        return _hasOwnProperty.call(object, property);\n      };\n    }\n    else {\n      hasOwnProp = function (object, property) { /* yes, this can give false positives/negatives, but most of the time we don't care about those */\n        return ((property in object) && is(object.constructor.prototype[property], 'undefined'));\n      };\n    }\n\n    // Adapted from ES5-shim https://github.com/kriskowal/es5-shim/blob/master/es5-shim.js\n    // es5.github.com/#x15.3.4.5\n\n    if (!Function.prototype.bind) {\n      Function.prototype.bind = function bind(that) {\n\n        var target = this;\n\n        if (typeof target != \"function\") {\n            throw new TypeError();\n        }\n\n        var args = slice.call(arguments, 1),\n            bound = function () {\n\n            if (this instanceof bound) {\n\n              var F = function(){};\n              F.prototype = target.prototype;\n              var self = new F();\n\n              var result = target.apply(\n                  self,\n                  args.concat(slice.call(arguments))\n              );\n              if (Object(result) === result) {\n                  return result;\n              }\n              return self;\n\n            } else {\n\n              return target.apply(\n                  that,\n                  args.concat(slice.call(arguments))\n              );\n\n            }\n\n        };\n\n        return bound;\n      };\n    }\n\n    /**\n     * setCss applies given styles to the Modernizr DOM node.\n     */\n    function setCss( str ) {\n        mStyle.cssText = str;\n    }\n\n    /**\n     * setCssAll extrapolates all vendor-specific css strings.\n     */\n    function setCssAll( str1, str2 ) {\n        return setCss(prefixes.join(str1 + ';') + ( str2 || '' ));\n    }\n\n    /**\n     * is returns a boolean for if typeof obj is exactly type.\n     */\n    function is( obj, type ) {\n        return typeof obj === type;\n    }\n\n    /**\n     * contains returns a boolean for if substr is found within str.\n     */\n    function contains( str, substr ) {\n        return !!~('' + str).indexOf(substr);\n    }\n\n    /*>>testprop*/\n\n    // testProps is a generic CSS / DOM property test.\n\n    // In testing support for a given CSS property, it's legit to test:\n    //    `elem.style[styleName] !== undefined`\n    // If the property is supported it will return an empty string,\n    // if unsupported it will return undefined.\n\n    // We'll take advantage of this quick test and skip setting a style\n    // on our modernizr element, but instead just testing undefined vs\n    // empty string.\n\n    // Because the testing of the CSS property names (with \"-\", as\n    // opposed to the camelCase DOM properties) is non-portable and\n    // non-standard but works in WebKit and IE (but not Gecko or Opera),\n    // we explicitly reject properties with dashes so that authors\n    // developing in WebKit or IE first don't end up with\n    // browser-specific content by accident.\n\n    function testProps( props, prefixed ) {\n        for ( var i in props ) {\n            var prop = props[i];\n            if ( !contains(prop, \"-\") && mStyle[prop] !== undefined ) {\n                return prefixed == 'pfx' ? prop : true;\n            }\n        }\n        return false;\n    }\n    /*>>testprop*/\n\n    // TODO :: add testDOMProps\n    /**\n     * testDOMProps is a generic DOM property test; if a browser supports\n     *   a certain property, it won't return undefined for it.\n     */\n    function testDOMProps( props, obj, elem ) {\n        for ( var i in props ) {\n            var item = obj[props[i]];\n            if ( item !== undefined) {\n\n                // return the property name as a string\n                if (elem === false) return props[i];\n\n                // let's bind a function\n                if (is(item, 'function')){\n                  // default to autobind unless override\n                  return item.bind(elem || obj);\n                }\n\n                // return the unbound function or obj or value\n                return item;\n            }\n        }\n        return false;\n    }\n\n    /*>>testallprops*/\n    /**\n     * testPropsAll tests a list of DOM properties we want to check against.\n     *   We specify literally ALL possible (known and/or likely) properties on\n     *   the element including the non-vendor prefixed one, for forward-\n     *   compatibility.\n     */\n    function testPropsAll( prop, prefixed, elem ) {\n\n        var ucProp  = prop.charAt(0).toUpperCase() + prop.slice(1),\n            props   = (prop + ' ' + cssomPrefixes.join(ucProp + ' ') + ucProp).split(' ');\n\n        // did they call .prefixed('boxSizing') or are we just testing a prop?\n        if(is(prefixed, \"string\") || is(prefixed, \"undefined\")) {\n          return testProps(props, prefixed);\n\n        // otherwise, they called .prefixed('requestAnimationFrame', window[, elem])\n        } else {\n          props = (prop + ' ' + (domPrefixes).join(ucProp + ' ') + ucProp).split(' ');\n          return testDOMProps(props, prefixed, elem);\n        }\n    }\n    /*>>testallprops*/\n\n\n    /**\n     * Tests\n     * -----\n     */\n\n    // The *new* flexbox\n    // dev.w3.org/csswg/css3-flexbox\n\n    tests['flexbox'] = function() {\n      return testPropsAll('flexWrap');\n    };\n\n    // The *old* flexbox\n    // www.w3.org/TR/2009/WD-css3-flexbox-20090723/\n\n    tests['flexboxlegacy'] = function() {\n        return testPropsAll('boxDirection');\n    };\n\n    // On the S60 and BB Storm, getContext exists, but always returns undefined\n    // so we actually have to call getContext() to verify\n    // github.com/Modernizr/Modernizr/issues/issue/97/\n\n    tests['canvas'] = function() {\n        var elem = document.createElement('canvas');\n        return !!(elem.getContext && elem.getContext('2d'));\n    };\n\n    tests['canvastext'] = function() {\n        return !!(Modernizr['canvas'] && is(document.createElement('canvas').getContext('2d').fillText, 'function'));\n    };\n\n    // webk.it/70117 is tracking a legit WebGL feature detect proposal\n\n    // We do a soft detect which may false positive in order to avoid\n    // an expensive context creation: bugzil.la/732441\n\n    tests['webgl'] = function() {\n        return !!window.WebGLRenderingContext;\n    };\n\n    /*\n     * The Modernizr.touch test only indicates if the browser supports\n     *    touch events, which does not necessarily reflect a touchscreen\n     *    device, as evidenced by tablets running Windows 7 or, alas,\n     *    the Palm Pre / WebOS (touch) phones.\n     *\n     * Additionally, Chrome (desktop) used to lie about its support on this,\n     *    but that has since been rectified: crbug.com/36415\n     *\n     * We also test for Firefox 4 Multitouch Support.\n     *\n     * For more info, see: modernizr.github.com/Modernizr/touch.html\n     */\n\n    tests['touch'] = function() {\n        var bool;\n\n        if(('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {\n          bool = true;\n        } else {\n          injectElementWithStyles(['@media (',prefixes.join('touch-enabled),('),mod,')','{#modernizr{top:9px;position:absolute}}'].join(''), function( node ) {\n            bool = node.offsetTop === 9;\n          });\n        }\n\n        return bool;\n    };\n\n\n    // geolocation is often considered a trivial feature detect...\n    // Turns out, it's quite tricky to get right:\n    //\n    // Using !!navigator.geolocation does two things we don't want. It:\n    //   1. Leaks memory in IE9: github.com/Modernizr/Modernizr/issues/513\n    //   2. Disables page caching in WebKit: webk.it/43956\n    //\n    // Meanwhile, in Firefox < 8, an about:config setting could expose\n    // a false positive that would throw an exception: bugzil.la/688158\n\n    tests['geolocation'] = function() {\n        return 'geolocation' in navigator;\n    };\n\n\n    tests['postmessage'] = function() {\n      return !!window.postMessage;\n    };\n\n\n    // Chrome incognito mode used to throw an exception when using openDatabase\n    // It doesn't anymore.\n    tests['websqldatabase'] = function() {\n      return !!window.openDatabase;\n    };\n\n    // Vendors had inconsistent prefixing with the experimental Indexed DB:\n    // - Webkit's implementation is accessible through webkitIndexedDB\n    // - Firefox shipped moz_indexedDB before FF4b9, but since then has been mozIndexedDB\n    // For speed, we don't test the legacy (and beta-only) indexedDB\n    tests['indexedDB'] = function() {\n      return !!testPropsAll(\"indexedDB\", window);\n    };\n\n    // documentMode logic from YUI to filter out IE8 Compat Mode\n    //   which false positives.\n    tests['hashchange'] = function() {\n      return isEventSupported('hashchange', window) && (document.documentMode === undefined || document.documentMode > 7);\n    };\n\n    // Per 1.6:\n    // This used to be Modernizr.historymanagement but the longer\n    // name has been deprecated in favor of a shorter and property-matching one.\n    // The old API is still available in 1.6, but as of 2.0 will throw a warning,\n    // and in the first release thereafter disappear entirely.\n    tests['history'] = function() {\n      return !!(window.history && history.pushState);\n    };\n\n    tests['draganddrop'] = function() {\n        var div = document.createElement('div');\n        return ('draggable' in div) || ('ondragstart' in div && 'ondrop' in div);\n    };\n\n    // FF3.6 was EOL'ed on 4/24/12, but the ESR version of FF10\n    // will be supported until FF19 (2/12/13), at which time, ESR becomes FF17.\n    // FF10 still uses prefixes, so check for it until then.\n    // for more ESR info, see: mozilla.org/en-US/firefox/organizations/faq/\n    tests['websockets'] = function() {\n        return 'WebSocket' in window || 'MozWebSocket' in window;\n    };\n\n\n    // css-tricks.com/rgba-browser-support/\n    tests['rgba'] = function() {\n        // Set an rgba() color and check the returned value\n\n        setCss('background-color:rgba(150,255,150,.5)');\n\n        return contains(mStyle.backgroundColor, 'rgba');\n    };\n\n    tests['hsla'] = function() {\n        // Same as rgba(), in fact, browsers re-map hsla() to rgba() internally,\n        //   except IE9 who retains it as hsla\n\n        setCss('background-color:hsla(120,40%,100%,.5)');\n\n        return contains(mStyle.backgroundColor, 'rgba') || contains(mStyle.backgroundColor, 'hsla');\n    };\n\n    tests['multiplebgs'] = function() {\n        // Setting multiple images AND a color on the background shorthand property\n        //  and then querying the style.background property value for the number of\n        //  occurrences of \"url(\" is a reliable method for detecting ACTUAL support for this!\n\n        setCss('background:url(https://),url(https://),red url(https://)');\n\n        // If the UA supports multiple backgrounds, there should be three occurrences\n        //   of the string \"url(\" in the return value for elemStyle.background\n\n        return (/(url\\s*\\(.*?){3}/).test(mStyle.background);\n    };\n\n\n\n    // this will false positive in Opera Mini\n    //   github.com/Modernizr/Modernizr/issues/396\n\n    tests['backgroundsize'] = function() {\n        return testPropsAll('backgroundSize');\n    };\n\n    tests['borderimage'] = function() {\n        return testPropsAll('borderImage');\n    };\n\n\n    // Super comprehensive table about all the unique implementations of\n    // border-radius: muddledramblings.com/table-of-css3-border-radius-compliance\n\n    tests['borderradius'] = function() {\n        return testPropsAll('borderRadius');\n    };\n\n    // WebOS unfortunately false positives on this test.\n    tests['boxshadow'] = function() {\n        return testPropsAll('boxShadow');\n    };\n\n    // FF3.0 will false positive on this test\n    tests['textshadow'] = function() {\n        return document.createElement('div').style.textShadow === '';\n    };\n\n\n    tests['opacity'] = function() {\n        // Browsers that actually have CSS Opacity implemented have done so\n        //  according to spec, which means their return values are within the\n        //  range of [0.0,1.0] - including the leading zero.\n\n        setCssAll('opacity:.55');\n\n        // The non-literal . in this regex is intentional:\n        //   German Chrome returns this value as 0,55\n        // github.com/Modernizr/Modernizr/issues/#issue/59/comment/516632\n        return (/^0.55$/).test(mStyle.opacity);\n    };\n\n\n    // Note, Android < 4 will pass this test, but can only animate\n    //   a single property at a time\n    //   goo.gl/v3V4Gp\n    tests['cssanimations'] = function() {\n        return testPropsAll('animationName');\n    };\n\n\n    tests['csscolumns'] = function() {\n        return testPropsAll('columnCount');\n    };\n\n\n    tests['cssgradients'] = function() {\n        /**\n         * For CSS Gradients syntax, please see:\n         * webkit.org/blog/175/introducing-css-gradients/\n         * developer.mozilla.org/en/CSS/-moz-linear-gradient\n         * developer.mozilla.org/en/CSS/-moz-radial-gradient\n         * dev.w3.org/csswg/css3-images/#gradients-\n         */\n\n        var str1 = 'background-image:',\n            str2 = 'gradient(linear,left top,right bottom,from(#9f9),to(white));',\n            str3 = 'linear-gradient(left top,#9f9, white);';\n\n        setCss(\n             // legacy webkit syntax (FIXME: remove when syntax not in use anymore)\n              (str1 + '-webkit- '.split(' ').join(str2 + str1) +\n             // standard syntax             // trailing 'background-image:'\n              prefixes.join(str3 + str1)).slice(0, -str1.length)\n        );\n\n        return contains(mStyle.backgroundImage, 'gradient');\n    };\n\n\n    tests['cssreflections'] = function() {\n        return testPropsAll('boxReflect');\n    };\n\n\n    tests['csstransforms'] = function() {\n        return !!testPropsAll('transform');\n    };\n\n\n    tests['csstransforms3d'] = function() {\n\n        var ret = !!testPropsAll('perspective');\n\n        // Webkit's 3D transforms are passed off to the browser's own graphics renderer.\n        //   It works fine in Safari on Leopard and Snow Leopard, but not in Chrome in\n        //   some conditions. As a result, Webkit typically recognizes the syntax but\n        //   will sometimes throw a false positive, thus we must do a more thorough check:\n        if ( ret && 'webkitPerspective' in docElement.style ) {\n\n          // Webkit allows this media query to succeed only if the feature is enabled.\n          // `@media (transform-3d),(-webkit-transform-3d){ ... }`\n          injectElementWithStyles('@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}', function( node, rule ) {\n            ret = node.offsetLeft === 9 && node.offsetHeight === 3;\n          });\n        }\n        return ret;\n    };\n\n\n    tests['csstransitions'] = function() {\n        return testPropsAll('transition');\n    };\n\n\n    /*>>fontface*/\n    // @font-face detection routine by Diego Perini\n    // javascript.nwbox.com/CSSSupport/\n\n    // false positives:\n    //   WebOS github.com/Modernizr/Modernizr/issues/342\n    //   WP7   github.com/Modernizr/Modernizr/issues/538\n    tests['fontface'] = function() {\n        var bool;\n\n        injectElementWithStyles('@font-face {font-family:\"font\";src:url(\"https://\")}', function( node, rule ) {\n          var style = document.getElementById('smodernizr'),\n              sheet = style.sheet || style.styleSheet,\n              cssText = sheet ? (sheet.cssRules && sheet.cssRules[0] ? sheet.cssRules[0].cssText : sheet.cssText || '') : '';\n\n          bool = /src/i.test(cssText) && cssText.indexOf(rule.split(' ')[0]) === 0;\n        });\n\n        return bool;\n    };\n    /*>>fontface*/\n\n    // CSS generated content detection\n    tests['generatedcontent'] = function() {\n        var bool;\n\n        injectElementWithStyles(['#',mod,'{font:0/0 a}#',mod,':after{content:\"',smile,'\";visibility:hidden;font:3px/1 a}'].join(''), function( node ) {\n          bool = node.offsetHeight >= 3;\n        });\n\n        return bool;\n    };\n\n\n\n    // These tests evaluate support of the video/audio elements, as well as\n    // testing what types of content they support.\n    //\n    // We're using the Boolean constructor here, so that we can extend the value\n    // e.g.  Modernizr.video     // true\n    //       Modernizr.video.ogg // 'probably'\n    //\n    // Codec values from : github.com/NielsLeenheer/html5test/blob/9106a8/index.html#L845\n    //                     thx to NielsLeenheer and zcorpan\n\n    // Note: in some older browsers, \"no\" was a return value instead of empty string.\n    //   It was live in FF3.5.0 and 3.5.1, but fixed in 3.5.2\n    //   It was also live in Safari 4.0.0 - 4.0.4, but fixed in 4.0.5\n\n    tests['video'] = function() {\n        var elem = document.createElement('video'),\n            bool = false;\n\n        // IE9 Running on Windows Server SKU can cause an exception to be thrown, bug #224\n        try {\n            if ( bool = !!elem.canPlayType ) {\n                bool      = new Boolean(bool);\n                bool.ogg  = elem.canPlayType('video/ogg; codecs=\"theora\"')      .replace(/^no$/,'');\n\n                // Without QuickTime, this value will be `undefined`. github.com/Modernizr/Modernizr/issues/546\n                bool.h264 = elem.canPlayType('video/mp4; codecs=\"avc1.42E01E\"') .replace(/^no$/,'');\n\n                bool.webm = elem.canPlayType('video/webm; codecs=\"vp8, vorbis\"').replace(/^no$/,'');\n            }\n\n        } catch(e) { }\n\n        return bool;\n    };\n\n    tests['audio'] = function() {\n        var elem = document.createElement('audio'),\n            bool = false;\n\n        try {\n            if ( bool = !!elem.canPlayType ) {\n                bool      = new Boolean(bool);\n                bool.ogg  = elem.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/,'');\n                bool.mp3  = elem.canPlayType('audio/mpeg;')               .replace(/^no$/,'');\n\n                // Mimetypes accepted:\n                //   developer.mozilla.org/En/Media_formats_supported_by_the_audio_and_video_elements\n                //   bit.ly/iphoneoscodecs\n                bool.wav  = elem.canPlayType('audio/wav; codecs=\"1\"')     .replace(/^no$/,'');\n                bool.m4a  = ( elem.canPlayType('audio/x-m4a;')            ||\n                              elem.canPlayType('audio/aac;'))             .replace(/^no$/,'');\n            }\n        } catch(e) { }\n\n        return bool;\n    };\n\n\n    // In FF4, if disabled, window.localStorage should === null.\n\n    // Normally, we could not test that directly and need to do a\n    //   `('localStorage' in window) && ` test first because otherwise Firefox will\n    //   throw bugzil.la/365772 if cookies are disabled\n\n    // Also in iOS5 Private Browsing mode, attempting to use localStorage.setItem\n    // will throw the exception:\n    //   QUOTA_EXCEEDED_ERRROR DOM Exception 22.\n    // Peculiarly, getItem and removeItem calls do not throw.\n\n    // Because we are forced to try/catch this, we'll go aggressive.\n\n    // Just FWIW: IE8 Compat mode supports these features completely:\n    //   www.quirksmode.org/dom/html5.html\n    // But IE8 doesn't support either with local files\n\n    tests['localstorage'] = function() {\n        try {\n            localStorage.setItem(mod, mod);\n            localStorage.removeItem(mod);\n            return true;\n        } catch(e) {\n            return false;\n        }\n    };\n\n    tests['sessionstorage'] = function() {\n        try {\n            sessionStorage.setItem(mod, mod);\n            sessionStorage.removeItem(mod);\n            return true;\n        } catch(e) {\n            return false;\n        }\n    };\n\n\n    tests['webworkers'] = function() {\n        return !!window.Worker;\n    };\n\n\n    tests['applicationcache'] = function() {\n        return !!window.applicationCache;\n    };\n\n\n    // Thanks to Erik Dahlstrom\n    tests['svg'] = function() {\n        return !!document.createElementNS && !!document.createElementNS(ns.svg, 'svg').createSVGRect;\n    };\n\n    // specifically for SVG inline in HTML, not within XHTML\n    // test page: paulirish.com/demo/inline-svg\n    tests['inlinesvg'] = function() {\n      var div = document.createElement('div');\n      div.innerHTML = '<svg/>';\n      return (div.firstChild && div.firstChild.namespaceURI) == ns.svg;\n    };\n\n    // SVG SMIL animation\n    tests['smil'] = function() {\n        return !!document.createElementNS && /SVGAnimate/.test(toString.call(document.createElementNS(ns.svg, 'animate')));\n    };\n\n    // This test is only for clip paths in SVG proper, not clip paths on HTML content\n    // demo: srufaculty.sru.edu/david.dailey/svg/newstuff/clipPath4.svg\n\n    // However read the comments to dig into applying SVG clippaths to HTML content here:\n    //   github.com/Modernizr/Modernizr/issues/213#issuecomment-1149491\n    tests['svgclippaths'] = function() {\n        return !!document.createElementNS && /SVGClipPath/.test(toString.call(document.createElementNS(ns.svg, 'clipPath')));\n    };\n\n    /*>>webforms*/\n    // input features and input types go directly onto the ret object, bypassing the tests loop.\n    // Hold this guy to execute in a moment.\n    function webforms() {\n        /*>>input*/\n        // Run through HTML5's new input attributes to see if the UA understands any.\n        // We're using f which is the <input> element created early on\n        // Mike Taylr has created a comprehensive resource for testing these attributes\n        //   when applied to all input types:\n        //   miketaylr.com/code/input-type-attr.html\n        // spec: www.whatwg.org/specs/web-apps/current-work/multipage/the-input-element.html#input-type-attr-summary\n\n        // Only input placeholder is tested while textarea's placeholder is not.\n        // Currently Safari 4 and Opera 11 have support only for the input placeholder\n        // Both tests are available in feature-detects/forms-placeholder.js\n        Modernizr['input'] = (function( props ) {\n            for ( var i = 0, len = props.length; i < len; i++ ) {\n                attrs[ props[i] ] = !!(props[i] in inputElem);\n            }\n            if (attrs.list){\n              // safari false positive's on datalist: webk.it/74252\n              // see also github.com/Modernizr/Modernizr/issues/146\n              attrs.list = !!(document.createElement('datalist') && window.HTMLDataListElement);\n            }\n            return attrs;\n        })('autocomplete autofocus list placeholder max min multiple pattern required step'.split(' '));\n        /*>>input*/\n\n        /*>>inputtypes*/\n        // Run through HTML5's new input types to see if the UA understands any.\n        //   This is put behind the tests runloop because it doesn't return a\n        //   true/false like all the other tests; instead, it returns an object\n        //   containing each input type with its corresponding true/false value\n\n        // Big thanks to @miketaylr for the html5 forms expertise. miketaylr.com/\n        Modernizr['inputtypes'] = (function(props) {\n\n            for ( var i = 0, bool, inputElemType, defaultView, len = props.length; i < len; i++ ) {\n\n                inputElem.setAttribute('type', inputElemType = props[i]);\n                bool = inputElem.type !== 'text';\n\n                // We first check to see if the type we give it sticks..\n                // If the type does, we feed it a textual value, which shouldn't be valid.\n                // If the value doesn't stick, we know there's input sanitization which infers a custom UI\n                if ( bool ) {\n\n                    inputElem.value         = smile;\n                    inputElem.style.cssText = 'position:absolute;visibility:hidden;';\n\n                    if ( /^range$/.test(inputElemType) && inputElem.style.WebkitAppearance !== undefined ) {\n\n                      docElement.appendChild(inputElem);\n                      defaultView = document.defaultView;\n\n                      // Safari 2-4 allows the smiley as a value, despite making a slider\n                      bool =  defaultView.getComputedStyle &&\n                              defaultView.getComputedStyle(inputElem, null).WebkitAppearance !== 'textfield' &&\n                              // Mobile android web browser has false positive, so must\n                              // check the height to see if the widget is actually there.\n                              (inputElem.offsetHeight !== 0);\n\n                      docElement.removeChild(inputElem);\n\n                    } else if ( /^(search|tel)$/.test(inputElemType) ){\n                      // Spec doesn't define any special parsing or detectable UI\n                      //   behaviors so we pass these through as true\n\n                      // Interestingly, opera fails the earlier test, so it doesn't\n                      //  even make it here.\n\n                    } else if ( /^(url|email)$/.test(inputElemType) ) {\n                      // Real url and email support comes with prebaked validation.\n                      bool = inputElem.checkValidity && inputElem.checkValidity() === false;\n\n                    } else {\n                      // If the upgraded input compontent rejects the :) text, we got a winner\n                      bool = inputElem.value != smile;\n                    }\n                }\n\n                inputs[ props[i] ] = !!bool;\n            }\n            return inputs;\n        })('search tel url email datetime date month week time datetime-local number range color'.split(' '));\n        /*>>inputtypes*/\n    }\n    /*>>webforms*/\n\n\n    // End of test definitions\n    // -----------------------\n\n\n\n    // Run through all tests and detect their support in the current UA.\n    // todo: hypothetically we could be doing an array of tests and use a basic loop here.\n    for ( var feature in tests ) {\n        if ( hasOwnProp(tests, feature) ) {\n            // run the test, throw the return value into the Modernizr,\n            //   then based on that boolean, define an appropriate className\n            //   and push it into an array of classes we'll join later.\n            featureName  = feature.toLowerCase();\n            Modernizr[featureName] = tests[feature]();\n\n            classes.push((Modernizr[featureName] ? '' : 'no-') + featureName);\n        }\n    }\n\n    /*>>webforms*/\n    // input tests need to run.\n    Modernizr.input || webforms();\n    /*>>webforms*/\n\n\n    /**\n     * addTest allows the user to define their own feature tests\n     * the result will be added onto the Modernizr object,\n     * as well as an appropriate className set on the html element\n     *\n     * @param feature - String naming the feature\n     * @param test - Function returning true if feature is supported, false if not\n     */\n     Modernizr.addTest = function ( feature, test ) {\n       if ( typeof feature == 'object' ) {\n         for ( var key in feature ) {\n           if ( hasOwnProp( feature, key ) ) {\n             Modernizr.addTest( key, feature[ key ] );\n           }\n         }\n       } else {\n\n         feature = feature.toLowerCase();\n\n         if ( Modernizr[feature] !== undefined ) {\n           // we're going to quit if you're trying to overwrite an existing test\n           // if we were to allow it, we'd do this:\n           //   var re = new RegExp(\"\\\\b(no-)?\" + feature + \"\\\\b\");\n           //   docElement.className = docElement.className.replace( re, '' );\n           // but, no rly, stuff 'em.\n           return Modernizr;\n         }\n\n         test = typeof test == 'function' ? test() : test;\n\n         if (typeof enableClasses !== \"undefined\" && enableClasses) {\n           docElement.className += ' ' + (test ? '' : 'no-') + feature;\n         }\n         Modernizr[feature] = test;\n\n       }\n\n       return Modernizr; // allow chaining.\n     };\n\n\n    // Reset modElem.cssText to nothing to reduce memory footprint.\n    setCss('');\n    modElem = inputElem = null;\n\n    /*>>shiv*/\n    /**\n     * @preserve HTML5 Shiv prev3.7.1 | @afarkas @jdalton @jon_neal @rem | MIT/GPL2 Licensed\n     */\n    ;(function(window, document) {\n        /*jshint evil:true */\n        /** version */\n        var version = '3.7.0';\n\n        /** Preset options */\n        var options = window.html5 || {};\n\n        /** Used to skip problem elements */\n        var reSkip = /^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i;\n\n        /** Not all elements can be cloned in IE **/\n        var saveClones = /^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i;\n\n        /** Detect whether the browser supports default html5 styles */\n        var supportsHtml5Styles;\n\n        /** Name of the expando, to work with multiple documents or to re-shiv one document */\n        var expando = '_html5shiv';\n\n        /** The id for the the documents expando */\n        var expanID = 0;\n\n        /** Cached data for each document */\n        var expandoData = {};\n\n        /** Detect whether the browser supports unknown elements */\n        var supportsUnknownElements;\n\n        (function() {\n          try {\n            var a = document.createElement('a');\n            a.innerHTML = '<xyz></xyz>';\n            //if the hidden property is implemented we can assume, that the browser supports basic HTML5 Styles\n            supportsHtml5Styles = ('hidden' in a);\n\n            supportsUnknownElements = a.childNodes.length == 1 || (function() {\n              // assign a false positive if unable to shiv\n              (document.createElement)('a');\n              var frag = document.createDocumentFragment();\n              return (\n                typeof frag.cloneNode == 'undefined' ||\n                typeof frag.createDocumentFragment == 'undefined' ||\n                typeof frag.createElement == 'undefined'\n              );\n            }());\n          } catch(e) {\n            // assign a false positive if detection fails => unable to shiv\n            supportsHtml5Styles = true;\n            supportsUnknownElements = true;\n          }\n\n        }());\n\n        /*--------------------------------------------------------------------------*/\n\n        /**\n         * Creates a style sheet with the given CSS text and adds it to the document.\n         * @private\n         * @param {Document} ownerDocument The document.\n         * @param {String} cssText The CSS text.\n         * @returns {StyleSheet} The style element.\n         */\n        function addStyleSheet(ownerDocument, cssText) {\n          var p = ownerDocument.createElement('p'),\n          parent = ownerDocument.getElementsByTagName('head')[0] || ownerDocument.documentElement;\n\n          p.innerHTML = 'x<style>' + cssText + '</style>';\n          return parent.insertBefore(p.lastChild, parent.firstChild);\n        }\n\n        /**\n         * Returns the value of `html5.elements` as an array.\n         * @private\n         * @returns {Array} An array of shived element node names.\n         */\n        function getElements() {\n          var elements = html5.elements;\n          return typeof elements == 'string' ? elements.split(' ') : elements;\n        }\n\n        /**\n         * Returns the data associated to the given document\n         * @private\n         * @param {Document} ownerDocument The document.\n         * @returns {Object} An object of data.\n         */\n        function getExpandoData(ownerDocument) {\n          var data = expandoData[ownerDocument[expando]];\n          if (!data) {\n            data = {};\n            expanID++;\n            ownerDocument[expando] = expanID;\n            expandoData[expanID] = data;\n          }\n          return data;\n        }\n\n        /**\n         * returns a shived element for the given nodeName and document\n         * @memberOf html5\n         * @param {String} nodeName name of the element\n         * @param {Document} ownerDocument The context document.\n         * @returns {Object} The shived element.\n         */\n        function createElement(nodeName, ownerDocument, data){\n          if (!ownerDocument) {\n            ownerDocument = document;\n          }\n          if(supportsUnknownElements){\n            return ownerDocument.createElement(nodeName);\n          }\n          if (!data) {\n            data = getExpandoData(ownerDocument);\n          }\n          var node;\n\n          if (data.cache[nodeName]) {\n            node = data.cache[nodeName].cloneNode();\n          } else if (saveClones.test(nodeName)) {\n            node = (data.cache[nodeName] = data.createElem(nodeName)).cloneNode();\n          } else {\n            node = data.createElem(nodeName);\n          }\n\n          // Avoid adding some elements to fragments in IE < 9 because\n          // * Attributes like `name` or `type` cannot be set/changed once an element\n          //   is inserted into a document/fragment\n          // * Link elements with `src` attributes that are inaccessible, as with\n          //   a 403 response, will cause the tab/window to crash\n          // * Script elements appended to fragments will execute when their `src`\n          //   or `text` property is set\n          return node.canHaveChildren && !reSkip.test(nodeName) && !node.tagUrn ? data.frag.appendChild(node) : node;\n        }\n\n        /**\n         * returns a shived DocumentFragment for the given document\n         * @memberOf html5\n         * @param {Document} ownerDocument The context document.\n         * @returns {Object} The shived DocumentFragment.\n         */\n        function createDocumentFragment(ownerDocument, data){\n          if (!ownerDocument) {\n            ownerDocument = document;\n          }\n          if(supportsUnknownElements){\n            return ownerDocument.createDocumentFragment();\n          }\n          data = data || getExpandoData(ownerDocument);\n          var clone = data.frag.cloneNode(),\n          i = 0,\n          elems = getElements(),\n          l = elems.length;\n          for(;i<l;i++){\n            clone.createElement(elems[i]);\n          }\n          return clone;\n        }\n\n        /**\n         * Shivs the `createElement` and `createDocumentFragment` methods of the document.\n         * @private\n         * @param {Document|DocumentFragment} ownerDocument The document.\n         * @param {Object} data of the document.\n         */\n        function shivMethods(ownerDocument, data) {\n          if (!data.cache) {\n            data.cache = {};\n            data.createElem = ownerDocument.createElement;\n            data.createFrag = ownerDocument.createDocumentFragment;\n            data.frag = data.createFrag();\n          }\n\n\n          ownerDocument.createElement = function(nodeName) {\n            //abort shiv\n            if (!html5.shivMethods) {\n              return data.createElem(nodeName);\n            }\n            return createElement(nodeName, ownerDocument, data);\n          };\n\n          ownerDocument.createDocumentFragment = Function('h,f', 'return function(){' +\n                                                          'var n=f.cloneNode(),c=n.createElement;' +\n                                                          'h.shivMethods&&(' +\n                                                          // unroll the `createElement` calls\n                                                          getElements().join().replace(/[\\w\\-]+/g, function(nodeName) {\n            data.createElem(nodeName);\n            data.frag.createElement(nodeName);\n            return 'c(\"' + nodeName + '\")';\n          }) +\n            ');return n}'\n                                                         )(html5, data.frag);\n        }\n\n        /*--------------------------------------------------------------------------*/\n\n        /**\n         * Shivs the given document.\n         * @memberOf html5\n         * @param {Document} ownerDocument The document to shiv.\n         * @returns {Document} The shived document.\n         */\n        function shivDocument(ownerDocument) {\n          if (!ownerDocument) {\n            ownerDocument = document;\n          }\n          var data = getExpandoData(ownerDocument);\n\n          if (html5.shivCSS && !supportsHtml5Styles && !data.hasCSS) {\n            data.hasCSS = !!addStyleSheet(ownerDocument,\n                                          // corrects block display not defined in IE6/7/8/9\n                                          'article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}' +\n                                            // adds styling not present in IE6/7/8/9\n                                            'mark{background:#FF0;color:#000}' +\n                                            // hides non-rendered elements\n                                            'template{display:none}'\n                                         );\n          }\n          if (!supportsUnknownElements) {\n            shivMethods(ownerDocument, data);\n          }\n          return ownerDocument;\n        }\n\n        /*--------------------------------------------------------------------------*/\n\n        /**\n         * The `html5` object is exposed so that more elements can be shived and\n         * existing shiving can be detected on iframes.\n         * @type Object\n         * @example\n         *\n         * // options can be changed before the script is included\n         * html5 = { 'elements': 'mark section', 'shivCSS': false, 'shivMethods': false };\n         */\n        var html5 = {\n\n          /**\n           * An array or space separated string of node names of the elements to shiv.\n           * @memberOf html5\n           * @type Array|String\n           */\n          'elements': options.elements || 'abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video',\n\n          /**\n           * current version of html5shiv\n           */\n          'version': version,\n\n          /**\n           * A flag to indicate that the HTML5 style sheet should be inserted.\n           * @memberOf html5\n           * @type Boolean\n           */\n          'shivCSS': (options.shivCSS !== false),\n\n          /**\n           * Is equal to true if a browser supports creating unknown/HTML5 elements\n           * @memberOf html5\n           * @type boolean\n           */\n          'supportsUnknownElements': supportsUnknownElements,\n\n          /**\n           * A flag to indicate that the document's `createElement` and `createDocumentFragment`\n           * methods should be overwritten.\n           * @memberOf html5\n           * @type Boolean\n           */\n          'shivMethods': (options.shivMethods !== false),\n\n          /**\n           * A string to describe the type of `html5` object (\"default\" or \"default print\").\n           * @memberOf html5\n           * @type String\n           */\n          'type': 'default',\n\n          // shivs the document according to the specified `html5` object options\n          'shivDocument': shivDocument,\n\n          //creates a shived element\n          createElement: createElement,\n\n          //creates a shived documentFragment\n          createDocumentFragment: createDocumentFragment\n        };\n\n        /*--------------------------------------------------------------------------*/\n\n        // expose html5\n        window.html5 = html5;\n\n        // shiv the document\n        shivDocument(document);\n\n    }(this, document));\n    /*>>shiv*/\n\n    // Assign private properties to the return object with prefix\n    Modernizr._version      = version;\n\n    // expose these for the plugin API. Look in the source for how to join() them against your input\n    /*>>prefixes*/\n    Modernizr._prefixes     = prefixes;\n    /*>>prefixes*/\n    /*>>domprefixes*/\n    Modernizr._domPrefixes  = domPrefixes;\n    Modernizr._cssomPrefixes  = cssomPrefixes;\n    /*>>domprefixes*/\n\n    /*>>mq*/\n    // Modernizr.mq tests a given media query, live against the current state of the window\n    // A few important notes:\n    //   * If a browser does not support media queries at all (eg. oldIE) the mq() will always return false\n    //   * A max-width or orientation query will be evaluated against the current state, which may change later.\n    //   * You must specify values. Eg. If you are testing support for the min-width media query use:\n    //       Modernizr.mq('(min-width:0)')\n    // usage:\n    // Modernizr.mq('only screen and (max-width:768)')\n    Modernizr.mq            = testMediaQuery;\n    /*>>mq*/\n\n    /*>>hasevent*/\n    // Modernizr.hasEvent() detects support for a given event, with an optional element to test on\n    // Modernizr.hasEvent('gesturestart', elem)\n    Modernizr.hasEvent      = isEventSupported;\n    /*>>hasevent*/\n\n    /*>>testprop*/\n    // Modernizr.testProp() investigates whether a given style property is recognized\n    // Note that the property names must be provided in the camelCase variant.\n    // Modernizr.testProp('pointerEvents')\n    Modernizr.testProp      = function(prop){\n        return testProps([prop]);\n    };\n    /*>>testprop*/\n\n    /*>>testallprops*/\n    // Modernizr.testAllProps() investigates whether a given style property,\n    //   or any of its vendor-prefixed variants, is recognized\n    // Note that the property names must be provided in the camelCase variant.\n    // Modernizr.testAllProps('boxSizing')\n    Modernizr.testAllProps  = testPropsAll;\n    /*>>testallprops*/\n\n\n    /*>>teststyles*/\n    // Modernizr.testStyles() allows you to add custom styles to the document and test an element afterwards\n    // Modernizr.testStyles('#modernizr { position:absolute }', function(elem, rule){ ... })\n    Modernizr.testStyles    = injectElementWithStyles;\n    /*>>teststyles*/\n\n\n    /*>>prefixed*/\n    // Modernizr.prefixed() returns the prefixed or nonprefixed property name variant of your input\n    // Modernizr.prefixed('boxSizing') // 'MozBoxSizing'\n\n    // Properties must be passed as dom-style camelcase, rather than `box-sizing` hypentated style.\n    // Return values will also be the camelCase variant, if you need to translate that to hypenated style use:\n    //\n    //     str.replace(/([A-Z])/g, function(str,m1){ return '-' + m1.toLowerCase(); }).replace(/^ms-/,'-ms-');\n\n    // If you're trying to ascertain which transition end event to bind to, you might do something like...\n    //\n    //     var transEndEventNames = {\n    //       'WebkitTransition' : 'webkitTransitionEnd',\n    //       'MozTransition'    : 'transitionend',\n    //       'OTransition'      : 'oTransitionEnd',\n    //       'msTransition'     : 'MSTransitionEnd',\n    //       'transition'       : 'transitionend'\n    //     },\n    //     transEndEventName = transEndEventNames[ Modernizr.prefixed('transition') ];\n\n    Modernizr.prefixed      = function(prop, obj, elem){\n      if(!obj) {\n        return testPropsAll(prop, 'pfx');\n      } else {\n        // Testing DOM property e.g. Modernizr.prefixed('requestAnimationFrame', window) // 'mozRequestAnimationFrame'\n        return testPropsAll(prop, obj, elem);\n      }\n    };\n    /*>>prefixed*/\n\n\n    /*>>cssclasses*/\n    // Remove \"no-js\" class from <html> element, if it exists:\n    docElement.className = docElement.className.replace(/(^|\\s)no-js(\\s|$)/, '$1$2') +\n\n                            // Add the new classes to the <html> element.\n                            (enableClasses ? ' js ' + classes.join(' ') : '');\n    /*>>cssclasses*/\n\n    return Modernizr;\n\n})(this, this.document);\n"},function(e,t,n){n(1)(n(14))},function(e,t){e.exports='/*!\n * Detectizr v2.2.0\n * http://barisaydinoglu.github.com/Detectizr/\n *\n * Written by Baris Aydinoglu (http://baris.aydinoglu.info) - Copyright 2012\n * Released under the MIT license\n *\n * Date: 2015-09-28T21:37Z\n */\nwindow.Detectizr = (function(window, navigator, document, undefined) {\n\tvar Detectizr = {},\n\t\tModernizr = window.Modernizr,\n\t\tdeviceTypes = ["tv", "tablet", "mobile", "desktop"],\n\t\toptions = {\n\t\t\t// option for enabling HTML classes of all features (not only the true features) to be added\n\t\t\taddAllFeaturesAsClass: false,\n\t\t\t// option for enabling detection of device\n\t\t\tdetectDevice: true,\n\t\t\t// option for enabling detection of device model\n\t\t\tdetectDeviceModel: true,\n\t\t\t// option for enabling detection of screen size\n\t\t\tdetectScreen: true,\n\t\t\t// option for enabling detection of operating system type and version\n\t\t\tdetectOS: true,\n\t\t\t// option for enabling detection of browser type and version\n\t\t\tdetectBrowser: true,\n\t\t\t// option for enabling detection of common browser plugins\n\t\t\tdetectPlugins: true\n\t\t},\n\t\tplugins2detect = [{\n\t\t\tname: "adobereader",\n\t\t\tsubstrs: ["Adobe", "Acrobat"],\n\t\t\t// AcroPDF.PDF is used by version 7 and later\n\t\t\t// PDF.PdfCtrl is used by version 6 and earlier\n\t\t\tprogIds: ["AcroPDF.PDF", "PDF.PDFCtrl.5"]\n\t\t}, {\n\t\t\tname: "flash",\n\t\t\tsubstrs: ["Shockwave Flash"],\n\t\t\tprogIds: ["ShockwaveFlash.ShockwaveFlash.1"]\n\t\t}, {\n\t\t\tname: "wmplayer",\n\t\t\tsubstrs: ["Windows Media"],\n\t\t\tprogIds: ["wmplayer.ocx"]\n\t\t}, {\n\t\t\tname: "silverlight",\n\t\t\tsubstrs: ["Silverlight"],\n\t\t\tprogIds: ["AgControl.AgControl"]\n\t\t}, {\n\t\t\tname: "quicktime",\n\t\t\tsubstrs: ["QuickTime"],\n\t\t\tprogIds: ["QuickTime.QuickTime"]\n\t\t}],\n\t\trclass = /[\\t\\r\\n]/g,\n\t\tdocElement = document.documentElement,\n\t\tresizeTimeoutId,\n\t\toldOrientation;\n\n\t// Create Global "extend" method, so Detectizr does not need jQuery.extend\n\tfunction extend(obj, extObj) {\n\t\tvar a, b, i;\n\t\tif (arguments.length > 2) {\n\t\t\tfor (a = 1, b = arguments.length; a < b; a += 1) {\n\t\t\t\textend(obj, arguments[a]);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (i in extObj) {\n\t\t\t\tif (extObj.hasOwnProperty(i)) {\n\t\t\t\t\tobj[i] = extObj[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn obj;\n\t}\n\n\t// simplified and localized indexOf method as one parameter fixed as useragent\n\tfunction is(key) {\n\t\treturn Detectizr.browser.userAgent.indexOf(key) > -1;\n\t}\n\n\t// simplified and localized regex test method as one parameter fixed as useragent\n\tfunction test(regex) {\n\t\treturn regex.test(Detectizr.browser.userAgent);\n\t}\n\n\t// simplified and localized regex exec method as one parameter fixed as useragent\n\tfunction exec(regex) {\n\t\treturn regex.exec(Detectizr.browser.userAgent);\n\t}\n\n\t// localized string trim method\n\tfunction trim(value) {\n\t\treturn value.replace(/^\\s+|\\s+$/g, "");\n\t}\n\n\t// convert string to camelcase\n\tfunction toCamel(string) {\n\t\tif (string === null || string === undefined) {\n\t\t\treturn "";\n\t\t}\n\t\treturn String(string).replace(/((\\s|\\-|\\.)+[a-z0-9])/g, function($1) {\n\t\t\treturn $1.toUpperCase().replace(/(\\s|\\-|\\.)/g, "");\n\t\t});\n\t}\n\n\t// removeClass function inspired from jQuery.removeClass\n\tfunction removeClass(element, value) {\n\t\tvar class2remove = value || "",\n\t\t\tcur = element.nodeType === 1 && (element.className ? (" " + element.className + " ").replace(rclass, " ") : "");\n\t\tif (cur) {\n\t\t\twhile (cur.indexOf(" " + class2remove + " ") >= 0) {\n\t\t\t\tcur = cur.replace(" " + class2remove + " ", " ");\n\t\t\t}\n\t\t\telement.className = value ? trim(cur) : "";\n\t\t}\n\t}\n\n\t// add version test to Modernizr\n\tfunction addVersionTest(version, major, minor) {\n\t\tif (!!version) {\n\t\t\tversion = toCamel(version);\n\t\t\tif (!!major) {\n\t\t\t\tmajor = toCamel(major);\n\t\t\t\taddConditionalTest(version + major, true);\n\t\t\t\tif (!!minor) {\n\t\t\t\t\taddConditionalTest(version + major + "_" + minor, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// add test to Modernizr based on a condition\n\tfunction addConditionalTest(feature, test) {\n\t\tif (!!feature && !!Modernizr) {\n\t\t\tif (options.addAllFeaturesAsClass) {\n\t\t\t\tModernizr.addTest(feature, test);\n\t\t\t} else {\n\t\t\t\ttest = typeof test === "function" ? test() : test;\n\t\t\t\tif (test) {\n\t\t\t\t\tModernizr.addTest(feature, true);\n\t\t\t\t} else {\n\t\t\t\t\tdelete Modernizr[feature];\n\t\t\t\t\tremoveClass(docElement, feature);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// set version based on versionFull\n\tfunction setVersion(versionType, versionFull) {\n\t\tversionType.version = versionFull;\n\t\tvar versionArray = versionFull.split(".");\n\t\tif (versionArray.length > 0) {\n\t\t\tversionArray = versionArray.reverse();\n\t\t\tversionType.major = versionArray.pop();\n\t\t\tif (versionArray.length > 0) {\n\t\t\t\tversionType.minor = versionArray.pop();\n\t\t\t\tif (versionArray.length > 0) {\n\t\t\t\t\tversionArray = versionArray.reverse();\n\t\t\t\t\tversionType.patch = versionArray.join(".");\n\t\t\t\t} else {\n\t\t\t\t\tversionType.patch = "0";\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tversionType.minor = "0";\n\t\t\t}\n\t\t} else {\n\t\t\tversionType.major = "0";\n\t\t}\n\t}\n\n\tfunction checkOrientation() {\n\t\t//timeout wrapper points with doResizeCode as callback\n\t\twindow.clearTimeout(resizeTimeoutId);\n\t\tresizeTimeoutId = window.setTimeout(function() {\n\t\t\toldOrientation = Detectizr.device.orientation;\n\t\t\t//wrapper for height/width check\n\t\t\tif (window.innerHeight > window.innerWidth) {\n\t\t\t\tDetectizr.device.orientation = "portrait";\n\t\t\t} else {\n\t\t\t\tDetectizr.device.orientation = "landscape";\n\t\t\t}\n\t\t\taddConditionalTest(Detectizr.device.orientation, true);\n\t\t\tif (oldOrientation !== Detectizr.device.orientation) {\n\t\t\t\taddConditionalTest(oldOrientation, false);\n\t\t\t}\n\t\t}, 10);\n\t}\n\n\tfunction detectPlugin(substrs) {\n\t\tvar plugins = navigator.plugins,\n\t\t\tplugin, haystack, pluginFoundText, j, k;\n\t\tfor (j = plugins.length - 1; j >= 0; j--) {\n\t\t\tplugin = plugins[j];\n\t\t\thaystack = plugin.name + plugin.description;\n\t\t\tpluginFoundText = 0;\n\t\t\tfor (k = substrs.length; k >= 0; k--) {\n\t\t\t\tif (haystack.indexOf(substrs[k]) !== -1) {\n\t\t\t\t\tpluginFoundText += 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pluginFoundText === substrs.length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction detectObject(progIds) {\n\t\tvar j;\n\t\tfor (j = progIds.length - 1; j >= 0; j--) {\n\t\t\ttry {\n\t\t\t\tnew ActiveXObject(progIds[j]);\n\t\t\t} catch (e) {\n\t\t\t\t// Ignore\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction detect(opt) {\n\t\tvar i, j, device, os, browser, plugin2detect, pluginFound;\n\n\t\toptions = extend({}, options, opt || {});\n\n\t\t/** Device detection **/\n\t\tif (options.detectDevice) {\n\t\t\tDetectizr.device = {\n\t\t\t\ttype: "",\n\t\t\t\tmodel: "",\n\t\t\t\torientation: ""\n\t\t\t};\n\t\t\tdevice = Detectizr.device;\n\t\t\tif (test(/googletv|smarttv|smart-tv|internet.tv|netcast|nettv|appletv|boxee|kylo|roku|dlnadoc|roku|pov_tv|hbbtv|ce\\-html/)) {\n\t\t\t\t// Check if user agent is a smart tv\n\t\t\t\tdevice.type = deviceTypes[0];\n\t\t\t\tdevice.model = "smartTv";\n\t\t\t} else if (test(/xbox|playstation.3|wii/)) {\n\t\t\t\t// Check if user agent is a game console\n\t\t\t\tdevice.type = deviceTypes[0];\n\t\t\t\tdevice.model = "gameConsole";\n\t\t\t} else if (test(/ip(a|ro)d/)) {\n\t\t\t\t// Check if user agent is a iPad\n\t\t\t\tdevice.type = deviceTypes[1];\n\t\t\t\tdevice.model = "ipad";\n\t\t\t} else if ((test(/tablet/) && !test(/rx-34/)) || test(/folio/)) {\n\t\t\t\t// Check if user agent is a Tablet\n\t\t\t\tdevice.type = deviceTypes[1];\n\t\t\t\tdevice.model = String(exec(/playbook/) || "");\n\t\t\t} else if (test(/linux/) && test(/android/) && !test(/fennec|mobi|htc.magic|htcX06ht|nexus.one|sc-02b|fone.945/)) {\n\t\t\t\t// Check if user agent is an Android Tablet\n\t\t\t\tdevice.type = deviceTypes[1];\n\t\t\t\tdevice.model = "android";\n\t\t\t} else if (test(/kindle/) || (test(/mac.os/) && test(/silk/))) {\n\t\t\t\t// Check if user agent is a Kindle or Kindle Fire\n\t\t\t\tdevice.type = deviceTypes[1];\n\t\t\t\tdevice.model = "kindle";\n\t\t\t} else if (test(/gt-p10|sc-01c|shw-m180s|sgh-t849|sch-i800|shw-m180l|sph-p100|sgh-i987|zt180|htc(.flyer|\\_flyer)|sprint.atp51|viewpad7|pandigital(sprnova|nova)|ideos.s7|dell.streak.7|advent.vega|a101it|a70bht|mid7015|next2|nook/) || (test(/mb511/) && test(/rutem/))) {\n\t\t\t\t// Check if user agent is a pre Android 3.0 Tablet\n\t\t\t\tdevice.type = deviceTypes[1];\n\t\t\t\tdevice.model = "android";\n\t\t\t} else if (test(/bb10/)) {\n\t\t\t\t// Check if user agent is a BB10 device\n\t\t\t\tdevice.type = deviceTypes[1];\n\t\t\t\tdevice.model = "blackberry";\n\t\t\t} else {\n\t\t\t\t// Check if user agent is one of common mobile types\n\t\t\t\tdevice.model = exec(/iphone|ipod|android|blackberry|opera mini|opera mobi|skyfire|maemo|windows phone|palm|iemobile|symbian|symbianos|fennec|j2me/);\n\t\t\t\tif (device.model !== null) {\n\t\t\t\t\tdevice.type = deviceTypes[2];\n\t\t\t\t\tdevice.model = String(device.model);\n\t\t\t\t} else {\n\t\t\t\t\tdevice.model = "";\n\t\t\t\t\tif (test(/bolt|fennec|iris|maemo|minimo|mobi|mowser|netfront|novarra|prism|rx-34|skyfire|tear|xv6875|xv6975|google.wireless.transcoder/)) {\n\t\t\t\t\t\t// Check if user agent is unique Mobile User Agent\n\t\t\t\t\t\tdevice.type = deviceTypes[2];\n\t\t\t\t\t} else if (test(/opera/) && test(/windows.nt.5/) && test(/htc|xda|mini|vario|samsung\\-gt\\-i8000|samsung\\-sgh\\-i9/)) {\n\t\t\t\t\t\t// Check if user agent is an odd Opera User Agent - http://goo.gl/nK90K\n\t\t\t\t\t\tdevice.type = deviceTypes[2];\n\t\t\t\t\t} else if ((test(/windows.(nt|xp|me|9)/) && !test(/phone/)) || test(/win(9|.9|nt)/) || test(/\\(windows 8\\)/)) {\n\t\t\t\t\t\t// Check if user agent is Windows Desktop, "(Windows 8)" Chrome extra exception\n\t\t\t\t\t\tdevice.type = deviceTypes[3];\n\t\t\t\t\t} else if (test(/macintosh|powerpc/) && !test(/silk/)) {\n\t\t\t\t\t\t// Check if agent is Mac Desktop\n\t\t\t\t\t\tdevice.type = deviceTypes[3];\n\t\t\t\t\t\tdevice.model = "mac";\n\t\t\t\t\t} else if (test(/linux/) && test(/x11/)) {\n\t\t\t\t\t\t// Check if user agent is a Linux Desktop\n\t\t\t\t\t\tdevice.type = deviceTypes[3];\n\t\t\t\t\t} else if (test(/solaris|sunos|bsd/)) {\n\t\t\t\t\t\t// Check if user agent is a Solaris, SunOS, BSD Desktop\n\t\t\t\t\t\tdevice.type = deviceTypes[3];\n\t\t\t\t\t} else if (test(/cros/)) {\n\t\t\t\t\t\t// Check if user agent is a Chromebook\n\t\t\t\t\t\tdevice.type = deviceTypes[3];\n\t\t\t\t\t} else if (test(/bot|crawler|spider|yahoo|ia_archiver|covario-ids|findlinks|dataparksearch|larbin|mediapartners-google|ng-search|snappy|teoma|jeeves|tineye/) && !test(/mobile/)) {\n\t\t\t\t\t\t// Check if user agent is a Desktop BOT/Crawler/Spider\n\t\t\t\t\t\tdevice.type = deviceTypes[3];\n\t\t\t\t\t\tdevice.model = "crawler";\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Otherwise assume it is a Mobile Device\n\t\t\t\t\t\tdevice.type = deviceTypes[2];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (i = 0, j = deviceTypes.length; i < j; i += 1) {\n\t\t\t\taddConditionalTest(deviceTypes[i], (device.type === deviceTypes[i]));\n\t\t\t}\n\t\t\tif (options.detectDeviceModel) {\n\t\t\t\taddConditionalTest(toCamel(device.model), true);\n\t\t\t}\n\t\t}\n\n\t\t/** Screen detection **/\n\t\tif (options.detectScreen) {\n\t\t\tdevice.screen = {};\n\t\t\tif (!!Modernizr && !!Modernizr.mq) {\n\t\t\t\tif (Modernizr.mq("only screen and (max-width: 240px)")) {\n\t\t\t\t\tdevice.screen.size = "veryVerySmall";\n\t\t\t\t\taddConditionalTest("veryVerySmallScreen", true);\n\t\t\t\t} else if (Modernizr.mq("only screen and (max-width: 320px)")) {\n\t\t\t\t\tdevice.screen.size = "verySmall";\n\t\t\t\t\taddConditionalTest("verySmallScreen", true);\n\t\t\t\t} else if (Modernizr.mq("only screen and (max-width: 480px)")) {\n\t\t\t\t\tdevice.screen.size = "small";\n\t\t\t\t\taddConditionalTest("smallScreen", true);\n\t\t\t\t}\n\t\t\t\tif (device.type === deviceTypes[1] || device.type === deviceTypes[2]) {\n\t\t\t\t\tif (Modernizr.mq("only screen and (-moz-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen  and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)")) {\n\t\t\t\t\t\tdevice.screen.resolution = "high";\n\t\t\t\t\t\taddConditionalTest("highresolution", true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (device.type === deviceTypes[1] || device.type === deviceTypes[2]) {\n\t\t\t\twindow.onresize = function(event) {\n\t\t\t\t\tcheckOrientation(event);\n\t\t\t\t};\n\t\t\t\tcheckOrientation();\n\t\t\t} else {\n\t\t\t\tdevice.orientation = "landscape";\n\t\t\t\taddConditionalTest(device.orientation, true);\n\t\t\t}\n\t\t}\n\n\t\t/** OS detection **/\n\t\tif (options.detectOS) {\n\t\t\tDetectizr.os = {};\n\t\t\tos = Detectizr.os;\n\t\t\tif (device.model !== "") {\n\t\t\t\tif (device.model === "ipad" || device.model === "iphone" || device.model === "ipod") {\n\t\t\t\t\tos.name = "ios";\n\t\t\t\t\tsetVersion(os, (test(/os\\s([\\d_]+)/) ? RegExp.$1 : "").replace(/_/g, "."));\n\t\t\t\t} else if (device.model === "android") {\n\t\t\t\t\tos.name = "android";\n\t\t\t\t\tsetVersion(os, (test(/android\\s([\\d\\.]+)/) ? RegExp.$1 : ""));\n\t\t\t\t} else if (device.model === "blackberry") {\n\t\t\t\t\tos.name = "blackberry";\n\t\t\t\t\tsetVersion(os, (test(/version\\/([^\\s]+)/) ? RegExp.$1 : ""));\n\t\t\t\t} else if (device.model === "playbook") {\n\t\t\t\t\tos.name = "blackberry";\n\t\t\t\t\tsetVersion(os, (test(/os ([^\\s]+)/) ? RegExp.$1.replace(";", "") : ""));\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!os.name) {\n\t\t\t\tif (is("win") || is("16bit")) {\n\t\t\t\t\tos.name = "windows";\n\t\t\t\t\tif (is("windows nt 10")) {\n\t\t\t\t\t\tsetVersion(os, "10");\n\t\t\t\t\t} else if (is("windows nt 6.3")) {\n\t\t\t\t\t\tsetVersion(os, "8.1");\n\t\t\t\t\t} else if (is("windows nt 6.2") || test(/\\(windows 8\\)/)) { //windows 8 chrome mac fix\n\t\t\t\t\t\tsetVersion(os, "8");\n\t\t\t\t\t} else if (is("windows nt 6.1")) {\n\t\t\t\t\t\tsetVersion(os, "7");\n\t\t\t\t\t} else if (is("windows nt 6.0")) {\n\t\t\t\t\t\tsetVersion(os, "vista");\n\t\t\t\t\t} else if (is("windows nt 5.2") || is("windows nt 5.1") || is("windows xp")) {\n\t\t\t\t\t\tsetVersion(os, "xp");\n\t\t\t\t\t} else if (is("windows nt 5.0") || is("windows 2000")) {\n\t\t\t\t\t\tsetVersion(os, "2k");\n\t\t\t\t\t} else if (is("winnt") || is("windows nt")) {\n\t\t\t\t\t\tsetVersion(os, "nt");\n\t\t\t\t\t} else if (is("win98") || is("windows 98")) {\n\t\t\t\t\t\tsetVersion(os, "98");\n\t\t\t\t\t} else if (is("win95") || is("windows 95")) {\n\t\t\t\t\t\tsetVersion(os, "95");\n\t\t\t\t\t}\n\t\t\t\t} else if (is("mac") || is("darwin")) {\n\t\t\t\t\tos.name = "mac os";\n\t\t\t\t\tif (is("68k") || is("68000")) {\n\t\t\t\t\t\tsetVersion(os, "68k");\n\t\t\t\t\t} else if (is("ppc") || is("powerpc")) {\n\t\t\t\t\t\tsetVersion(os, "ppc");\n\t\t\t\t\t} else if (is("os x")) {\n\t\t\t\t\t\tsetVersion(os, (test(/os\\sx\\s([\\d_]+)/) ? RegExp.$1 : "os x").replace(/_/g, "."));\n\t\t\t\t\t}\n\t\t\t\t} else if (is("webtv")) {\n\t\t\t\t\tos.name = "webtv";\n\t\t\t\t} else if (is("x11") || is("inux")) {\n\t\t\t\t\tos.name = "linux";\n\t\t\t\t} else if (is("sunos")) {\n\t\t\t\t\tos.name = "sun";\n\t\t\t\t} else if (is("irix")) {\n\t\t\t\t\tos.name = "irix";\n\t\t\t\t} else if (is("freebsd")) {\n\t\t\t\t\tos.name = "freebsd";\n\t\t\t\t} else if (is("bsd")) {\n\t\t\t\t\tos.name = "bsd";\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!!os.name) {\n\t\t\t\taddConditionalTest(os.name, true);\n\t\t\t\tif (!!os.major) {\n\t\t\t\t\taddVersionTest(os.name, os.major);\n\t\t\t\t\tif (!!os.minor) {\n\t\t\t\t\t\taddVersionTest(os.name, os.major, os.minor);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (test(/\\sx64|\\sx86|\\swin64|\\swow64|\\samd64/)) {\n\t\t\t\tos.addressRegisterSize = "64bit";\n\t\t\t} else {\n\t\t\t\tos.addressRegisterSize = "32bit";\n\t\t\t}\n\t\t\taddConditionalTest(os.addressRegisterSize, true);\n\t\t}\n\n\t\t/** Browser detection **/\n\t\tif (options.detectBrowser) {\n\t\t\tbrowser = Detectizr.browser;\n\t\t\tif (!test(/opera|webtv/) && (test(/msie\\s([\\d\\w\\.]+)/) || is("trident"))) {\n\t\t\t\tbrowser.engine = "trident";\n\t\t\t\tbrowser.name = "ie";\n\t\t\t\tif (!window.addEventListener && document.documentMode && document.documentMode === 7) {\n\t\t\t\t\tsetVersion(browser, "8.compat");\n\t\t\t\t} else if (test(/trident.*rv[ :](\\d+)\\./)) {\n\t\t\t\t\tsetVersion(browser, RegExp.$1);\n\t\t\t\t} else {\n\t\t\t\t\tsetVersion(browser, (test(/trident\\/4\\.0/) ? "8" : RegExp.$1));\n\t\t\t\t}\n\t\t\t} else if (is("firefox")) {\n\t\t\t\tbrowser.engine = "gecko";\n\t\t\t\tbrowser.name = "firefox";\n\t\t\t\tsetVersion(browser, (test(/firefox\\/([\\d\\w\\.]+)/) ? RegExp.$1 : ""));\n\t\t\t} else if (is("gecko/")) {\n\t\t\t\tbrowser.engine = "gecko";\n\t\t\t} else if (is("opera")) {\n\t\t\t\tbrowser.name = "opera";\n\t\t\t\tbrowser.engine = "presto";\n\t\t\t\tsetVersion(browser, (test(/version\\/([\\d\\.]+)/) ? RegExp.$1 : (test(/opera(\\s|\\/)([\\d\\.]+)/) ? RegExp.$2 : "")));\n\t\t\t} else if (is("konqueror")) {\n\t\t\t\tbrowser.name = "konqueror";\n\t\t\t} else if (is("edge")) {\n\t\t\t\tbrowser.engine = "webkit";\n\t\t\t\tbrowser.name = "edge";\n\t\t\t\tsetVersion(browser, (test(/edge\\/([\\d\\.]+)/) ? RegExp.$1 : ""));\n\t\t\t} else if (is("chrome")) {\n\t\t\t\tbrowser.engine = "webkit";\n\t\t\t\tbrowser.name = "chrome";\n\t\t\t\tsetVersion(browser, (test(/chrome\\/([\\d\\.]+)/) ? RegExp.$1 : ""));\n\t\t\t} else if (is("iron")) {\n\t\t\t\tbrowser.engine = "webkit";\n\t\t\t\tbrowser.name = "iron";\n\t\t\t} else if (is("crios")) {\n\t\t\t\tbrowser.name = "chrome";\n\t\t\t\tbrowser.engine = "webkit";\n\t\t\t\tsetVersion(browser, (test(/crios\\/([\\d\\.]+)/) ? RegExp.$1 : ""));\n\t\t\t} else if (is("applewebkit/")) {\n\t\t\t\tbrowser.name = "safari";\n\t\t\t\tbrowser.engine = "webkit";\n\t\t\t\tsetVersion(browser, (test(/version\\/([\\d\\.]+)/) ? RegExp.$1 : ""));\n\t\t\t} else if (is("mozilla/")) {\n\t\t\t\tbrowser.engine = "gecko";\n\t\t\t}\n\t\t\tif (!!browser.name) {\n\t\t\t\taddConditionalTest(browser.name, true);\n\t\t\t\tif (!!browser.major) {\n\t\t\t\t\taddVersionTest(browser.name, browser.major);\n\t\t\t\t\tif (!!browser.minor) {\n\t\t\t\t\t\taddVersionTest(browser.name, browser.major, browser.minor);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\taddConditionalTest(browser.engine, true);\n\n\t\t\t// Browser Language\n\t\t\tbrowser.language = navigator.userLanguage || navigator.language;\n\t\t\taddConditionalTest(browser.language, true);\n\t\t}\n\n\t\t/** Plugin detection **/\n\t\tif (options.detectPlugins) {\n\t\t\tbrowser.plugins = [];\n\t\t\tfor (i = plugins2detect.length - 1; i >= 0; i--) {\n\t\t\t\tplugin2detect = plugins2detect[i];\n\t\t\t\tpluginFound = false;\n\t\t\t\tif (window.ActiveXObject) {\n\t\t\t\t\tpluginFound = detectObject(plugin2detect.progIds);\n\t\t\t\t} else if (navigator.plugins) {\n\t\t\t\t\tpluginFound = detectPlugin(plugin2detect.substrs);\n\t\t\t\t}\n\t\t\t\tif (pluginFound) {\n\t\t\t\t\tbrowser.plugins.push(plugin2detect.name);\n\t\t\t\t\taddConditionalTest(plugin2detect.name, true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (navigator.javaEnabled()) {\n\t\t\t\tbrowser.plugins.push("java");\n\t\t\t\taddConditionalTest("java", true);\n\t\t\t}\n\t\t}\n\t}\n\tDetectizr.detect = function(settings) {\n\t\treturn detect(settings);\n\t};\n\tDetectizr.init = function() {\n\t\tif (Detectizr !== undefined) {\n\t\t\tDetectizr.browser = {\n\t\t\t\tuserAgent: (navigator.userAgent || navigator.vendor || window.opera).toLowerCase()\n\t\t\t};\n\t\t\tDetectizr.detect();\n\t\t}\n\t};\n\tDetectizr.init();\n\n\treturn Detectizr;\n}(this, this.navigator, this.document));\n\n'},function(e,t,n){e.exports={backInOut:n(16),backIn:n(17),backOut:n(18),bounceInOut:n(19),bounceIn:n(20),bounceOut:n(3),circInOut:n(21),circIn:n(22),circOut:n(23),cubicInOut:n(24),cubicIn:n(25),cubicOut:n(26),elasticInOut:n(27),elasticIn:n(28),elasticOut:n(29),expoInOut:n(30),expoIn:n(31),expoOut:n(32),linear:n(33),quadInOut:n(34),quadIn:n(35),quadOut:n(36),quartInOut:n(37),quartIn:n(38),quartOut:n(39),quintInOut:n(40),quintIn:n(41),quintOut:n(42),sineInOut:n(43),sineIn:n(44),sineOut:n(45)}},function(e,t){function backInOut(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}e.exports=backInOut},function(e,t){function backIn(e){var t=1.70158;return e*e*((t+1)*e-t)}e.exports=backIn},function(e,t){function backOut(e){var t=1.70158;return--e*e*((t+1)*e+t)+1}e.exports=backOut},function(e,t,n){function bounceInOut(e){return e<.5?.5*(1-i(1-2*e)):.5*i(2*e-1)+.5}var i=n(3);e.exports=bounceInOut},function(e,t,n){function bounceIn(e){return 1-i(1-e)}var i=n(3);e.exports=bounceIn},function(e,t){function circInOut(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}e.exports=circInOut},function(e,t){function circIn(e){return 1-Math.sqrt(1-e*e)}e.exports=circIn},function(e,t){function circOut(e){return Math.sqrt(1- --e*e)}e.exports=circOut},function(e,t){function cubicInOut(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}e.exports=cubicInOut},function(e,t){function cubicIn(e){return e*e*e}e.exports=cubicIn},function(e,t){function cubicOut(e){var t=e-1;return t*t*t+1}e.exports=cubicOut},function(e,t){function elasticInOut(e){return e<.5?.5*Math.sin(13*Math.PI/2*2*e)*Math.pow(2,10*(2*e-1)):.5*Math.sin(-13*Math.PI/2*(2*e-1+1))*Math.pow(2,-10*(2*e-1))+1}e.exports=elasticInOut},function(e,t){function elasticIn(e){return Math.sin(13*e*Math.PI/2)*Math.pow(2,10*(e-1))}e.exports=elasticIn},function(e,t){function elasticOut(e){return Math.sin(-13*(e+1)*Math.PI/2)*Math.pow(2,-10*e)+1}e.exports=elasticOut},function(e,t){function expoInOut(e){return 0===e||1===e?e:e<.5?.5*Math.pow(2,20*e-10):-.5*Math.pow(2,10-20*e)+1}e.exports=expoInOut},function(e,t){function expoIn(e){return 0===e?e:Math.pow(2,10*(e-1))}e.exports=expoIn},function(e,t){function expoOut(e){return 1===e?e:1-Math.pow(2,-10*e)}e.exports=expoOut},function(e,t){function linear(e){return e}e.exports=linear},function(e,t){function quadInOut(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)}e.exports=quadInOut},function(e,t){function quadIn(e){return e*e}e.exports=quadIn},function(e,t){function quadOut(e){return-e*(e-2)}e.exports=quadOut},function(e,t){function quarticInOut(e){return e<.5?8*Math.pow(e,4):-8*Math.pow(e-1,4)+1}e.exports=quarticInOut},function(e,t){function quarticIn(e){return Math.pow(e,4)}e.exports=quarticIn},function(e,t){function quarticOut(e){return Math.pow(e-1,3)*(1-e)+1}e.exports=quarticOut},function(e,t){function qinticInOut(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}e.exports=qinticInOut},function(e,t){function qinticIn(e){return e*e*e*e*e}e.exports=qinticIn},function(e,t){function qinticOut(e){return--e*e*e*e*e+1}e.exports=qinticOut},function(e,t){function sineInOut(e){return-.5*(Math.cos(Math.PI*e)-1)}e.exports=sineInOut},function(e,t){function sineIn(e){var t=Math.cos(e*Math.PI*.5);return Math.abs(t)<1e-14?1:1-t}e.exports=sineIn},function(e,t){function sineOut(e){return Math.sin(e*Math.PI/2)}e.exports=sineOut},function(e,t){!function(e){"use strict";function errorHandlingConfig(e){if(!isObject(e))return t;isDefined(e.objectMaxDepth)&&(t.objectMaxDepth=isValidObjectMaxDepth(e.objectMaxDepth)?e.objectMaxDepth:NaN)}function isValidObjectMaxDepth(e){return isNumber(e)&&e>0}function minErr(e,n){return n=n||Error,function(){var i,r,o=arguments[0],a=arguments[1],s="["+(e?e+":":"")+o+"] ",l=sliceArgs(arguments,2).map(function(e){return toDebugString(e,t.objectMaxDepth)});for(s+=a.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1);return t<l.length?l[t]:e}),s+="\nhttp://errors.angularjs.org/1.6.6/"+(e?e+"/":"")+o,r=0,i="?";r<l.length;r++,i="&")s+=i+"p"+r+"="+encodeURIComponent(l[r]);return new n(s)}}function isArrayLike(e){if(null==e||isWindow(e))return!1;if(T(e)||isString(e)||u&&e instanceof u)return!0;var t="length"in Object(e)&&e.length;return isNumber(t)&&(t>=0&&(t-1 in e||e instanceof Array)||"function"==typeof e.item)}function forEach(e,t,n){var i,o;if(e)if(isFunction(e))for(i in e)"prototype"!==i&&"length"!==i&&"name"!==i&&e.hasOwnProperty(i)&&t.call(n,e[i],i,e);else if(T(e)||isArrayLike(e)){var a="object"!=typeof e;for(i=0,o=e.length;i<o;i++)(a||i in e)&&t.call(n,e[i],i,e)}else if(e.forEach&&e.forEach!==forEach)e.forEach(t,n,e);else if(isBlankObject(e))for(i in e)t.call(n,e[i],i,e);else if("function"==typeof e.hasOwnProperty)for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e);else for(i in e)r.call(e,i)&&t.call(n,e[i],i,e);return e}function forEachSorted(e,t,n){for(var i=Object.keys(e).sort(),r=0;r<i.length;r++)t.call(n,e[i[r]],i[r]);return i}function reverseParams(e){return function(t,n){e(n,t)}}function nextUid(){return++b}function setHashKey(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function baseExtend(e,t,n){for(var i=e.$$hashKey,r=0,o=t.length;r<o;++r){var a=t[r];if(isObject(a)||isFunction(a))for(var s=Object.keys(a),l=0,c=s.length;l<c;l++){var u=s[l],d=a[u];n&&isObject(d)?isDate(d)?e[u]=new Date(d.valueOf()):isRegExp(d)?e[u]=new RegExp(d):d.nodeName?e[u]=d.cloneNode(!0):isElement(d)?e[u]=d.clone():(isObject(e[u])||(e[u]=T(d)?[]:{}),baseExtend(e[u],[d],!0)):e[u]=d}}return setHashKey(e,i),e}function extend(e){return baseExtend(e,h.call(arguments,1),!1)}function merge(e){return baseExtend(e,h.call(arguments,1),!0)}function toInt(e){return parseInt(e,10)}function inherit(e,t){return extend(Object.create(e),t)}function noop(){}function identity(e){return e}function valueFn(e){return function(){return e}}function hasCustomToString(e){return isFunction(e.toString)&&e.toString!==g}function isUndefined(e){return void 0===e}function isDefined(e){return void 0!==e}function isObject(e){return null!==e&&"object"==typeof e}function isBlankObject(e){return null!==e&&"object"==typeof e&&!v(e)}function isString(e){return"string"==typeof e}function isNumber(e){return"number"==typeof e}function isDate(e){return"[object Date]"===g.call(e)}function isError(e){switch(g.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}}function isFunction(e){return"function"==typeof e}function isRegExp(e){return"[object RegExp]"===g.call(e)}function isWindow(e){return e&&e.window===e}function isScope(e){return e&&e.$evalAsync&&e.$watch}function isFile(e){return"[object File]"===g.call(e)}function isFormData(e){return"[object FormData]"===g.call(e)}function isBlob(e){return"[object Blob]"===g.call(e)}function isBoolean(e){return"boolean"==typeof e}function isPromiseLike(e){return e&&isFunction(e.then)}function isTypedArray(e){return e&&isNumber(e.length)&&E.test(g.call(e))}function isArrayBuffer(e){return"[object ArrayBuffer]"===g.call(e)}function isElement(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function makeMap(e){var t,n={},i=e.split(",");for(t=0;t<i.length;t++)n[i[t]]=!0;return n}function nodeName_(e){return o(e.nodeName||e[0]&&e[0].nodeName)}function includes(e,t){return-1!==Array.prototype.indexOf.call(e,t)}function arrayRemove(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function copy(e,t,n){function copyRecurse(e,t,n){if(--n<0)return"...";var i,o=t.$$hashKey;if(T(e))for(var a=0,s=e.length;a<s;a++)t.push(copyElement(e[a],n));else if(isBlankObject(e))for(i in e)t[i]=copyElement(e[i],n);else if(e&&"function"==typeof e.hasOwnProperty)for(i in e)e.hasOwnProperty(i)&&(t[i]=copyElement(e[i],n));else for(i in e)r.call(e,i)&&(t[i]=copyElement(e[i],n));return setHashKey(t,o),t}function copyElement(e,t){if(!isObject(e))return e;var n=i.indexOf(e);if(-1!==n)return o[n];if(isWindow(e)||isScope(e))throw y("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,a=copyType(e);return void 0===a&&(a=T(e)?[]:Object.create(v(e)),r=!0),i.push(e),o.push(a),r?copyRecurse(e,a,t):a}function copyType(e){switch(g.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(copyElement(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(!e.slice){var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}return e.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":var n=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]);return n.lastIndex=e.lastIndex,n;case"[object Blob]":return new e.constructor([e],{type:e.type})}if(isFunction(e.cloneNode))return e.cloneNode(!0)}var i=[],o=[];if(n=isValidObjectMaxDepth(n)?n:NaN,t){if(isTypedArray(t)||isArrayBuffer(t))throw y("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===t)throw y("cpi","Can't copy! Source and destination are identical.");return T(t)?t.length=0:forEach(t,function(e,n){"$$hashKey"!==n&&delete t[n]}),i.push(e),o.push(t),copyRecurse(e,t,n)}return copyElement(e,n)}function simpleCompare(e,t){return e===t||e!==e&&t!==t}function equals(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var n,i,r,o=typeof e,a=typeof t;if(o===a&&"object"===o){if(!T(e)){if(isDate(e))return!!isDate(t)&&simpleCompare(e.getTime(),t.getTime());if(isRegExp(e))return!!isRegExp(t)&&e.toString()===t.toString();if(isScope(e)||isScope(t)||isWindow(e)||isWindow(t)||T(t)||isDate(t)||isRegExp(t))return!1;r=createMap();for(i in e)if("$"!==i.charAt(0)&&!isFunction(e[i])){if(!equals(e[i],t[i]))return!1;r[i]=!0}for(i in t)if(!(i in r)&&"$"!==i.charAt(0)&&isDefined(t[i])&&!isFunction(t[i]))return!1;return!0}if(!T(t))return!1;if((n=e.length)===t.length){for(i=0;i<n;i++)if(!equals(e[i],t[i]))return!1;return!0}}return!1}function concat(e,t,n){return e.concat(h.call(t,n))}function sliceArgs(e,t){return h.call(e,t||0)}function bind(e,t){var n=arguments.length>2?sliceArgs(arguments,2):[];return!isFunction(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,concat(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function toJsonReplacer(t,n){var i=n;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?i=void 0:isWindow(n)?i="$WINDOW":n&&e.document===n?i="$DOCUMENT":isScope(n)&&(i="$SCOPE"),i}function toJson(e,t){if(!isUndefined(e))return isNumber(t)||(t=t?2:null),JSON.stringify(e,toJsonReplacer,t)}function fromJson(e){return isString(e)?JSON.parse(e):e}function timezoneToOffset(e,t){e=e.replace($,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return S(n)?t:n}function addDateMinutes(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function convertTimezoneToLocal(e,t,n){n=n?-1:1;var i=e.getTimezoneOffset();return addDateMinutes(e,n*(timezoneToOffset(t,i)-i))}function startingTag(e){e=u(e).clone().empty();var t=u("<div>").append(e).html();try{return e[0].nodeType===N?o(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(e,t){return"<"+o(t)})}catch(e){return o(t)}}function tryDecodeURIComponent(e){try{return decodeURIComponent(e)}catch(e){}}function parseKeyValue(e){var t={};return forEach((e||"").split("&"),function(e){var n,i,o;e&&(i=e=e.replace(/\+/g,"%20"),n=e.indexOf("="),-1!==n&&(i=e.substring(0,n),o=e.substring(n+1)),i=tryDecodeURIComponent(i),isDefined(i)&&(o=!isDefined(o)||tryDecodeURIComponent(o),r.call(t,i)?T(t[i])?t[i].push(o):t[i]=[t[i],o]:t[i]=o))}),t}function toKeyValue(e){var t=[];return forEach(e,function(e,n){T(e)?forEach(e,function(e){t.push(encodeUriQuery(n,!0)+(!0===e?"":"="+encodeUriQuery(e,!0)))}):t.push(encodeUriQuery(n,!0)+(!0===e?"":"="+encodeUriQuery(e,!0)))}),t.length?t.join("&"):""}function encodeUriSegment(e){return encodeUriQuery(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function getNgAttribute(e,t){var n,i,r=_.length;for(i=0;i<r;++i)if(n=_[i]+t,isString(n=e.getAttribute(n)))return n;return null}function angularInit(t,n){var i,r,o={};if(forEach(_,function(e){var n=e+"app";!i&&t.hasAttribute&&t.hasAttribute(n)&&(i=t,r=t.getAttribute(n))}),forEach(_,function(e){var n,o=e+"app";!i&&(n=t.querySelector("["+o.replace(":","\\:")+"]"))&&(i=n,r=n.getAttribute(o))}),i){if(!A)return void e.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");o.strictDi=null!==getNgAttribute(i,"strict-di"),n(i,r?[r]:[],o)}}function bootstrap(t,n,i){isObject(i)||(i={}),i=extend({strictDi:!1},i);var r=function(){if(t=u(t),t.injector()){var r=t[0]===e.document?"document":startingTag(t);throw y("btstrpd","App already bootstrapped with this element '{0}'",r.replace(/</,"&lt;").replace(/>/,"&gt;"))}n=n||[],n.unshift(["$provide",function(e){e.value("$rootElement",t)}]),i.debugInfoEnabled&&n.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),n.unshift("ng");var o=createInjector(n,i.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,i){e.$apply(function(){t.data("$injector",i),n(t)(e)})}]),o},o=/^NG_ENABLE_DEBUG_INFO!/,a=/^NG_DEFER_BOOTSTRAP!/;if(e&&o.test(e.name)&&(i.debugInfoEnabled=!0,e.name=e.name.replace(o,"")),e&&!a.test(e.name))return r();e.name=e.name.replace(a,""),w.resumeBootstrap=function(e){return forEach(e,function(e){n.push(e)}),r()},isFunction(w.resumeDeferredBootstrap)&&w.resumeDeferredBootstrap()}function reloadWithDebugInfo(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function getTestability(e){var t=w.element(e).injector();if(!t)throw y("test","no injector found for element argument to getTestability");return t.get("$$testability")}function snake_case(e,t){return t=t||"_",e.replace(R,function(e,n){return(n?t:"")+e.toLowerCase()})}function assertArg(e,t,n){if(!e)throw y("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function assertArgFn(e,t,n){return n&&T(e)&&(e=e[e.length-1]),assertArg(isFunction(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function assertNotHasOwnProperty(e,t){if("hasOwnProperty"===e)throw y("badname","hasOwnProperty is not a valid {0} name",t)}function getter(e,t,n){if(!t)return e;for(var i,r=t.split("."),o=e,a=r.length,s=0;s<a;s++)i=r[s],e&&(e=(o=e)[i]);return!n&&isFunction(e)?bind(o,e):e}function getBlockNodes(e){for(var t,n=e[0],i=e[e.length-1],r=1;n!==i&&(n=n.nextSibling);r++)(t||e[r]!==n)&&(t||(t=u(h.call(e,0,r))),t.push(n));return t||e}function createMap(){return Object.create(null)}function stringify(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=!hasCustomToString(e)||T(e)||isDate(e)?toJson(e):e.toString()}return e}function setupModuleLoader(e){function ensure(e,t,n){return e[t]||(e[t]=n())}var t=minErr("$injector"),n=minErr("ng"),i=ensure(e,"angular",Object);return i.$$minErr=i.$$minErr||minErr,ensure(i,"module",function(){var e={};return function(i,r,o){var a={};return function(e,t){if("hasOwnProperty"===e)throw n("badname","hasOwnProperty is not a valid {0} name",t)}(i,"module"),r&&e.hasOwnProperty(i)&&(e[i]=null),ensure(e,i,function(){function invokeLater(t,n,i,r){return r||(r=e),function(){return r[i||"push"]([t,n,arguments]),u}}function invokeLaterAndSetModuleName(t,n,r){return r||(r=e),function(e,o){return o&&isFunction(o)&&(o.$$moduleName=i),r.push([t,n,arguments]),u}}if(!r)throw t("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",i);var e=[],s=[],l=[],c=invokeLater("$injector","invoke","push",s),u={_invokeQueue:e,_configBlocks:s,_runBlocks:l,info:function(e){if(isDefined(e)){if(!isObject(e))throw n("aobj","Argument '{0}' must be an object","value");return a=e,this}return a},requires:r,name:i,provider:invokeLaterAndSetModuleName("$provide","provider"),factory:invokeLaterAndSetModuleName("$provide","factory"),service:invokeLaterAndSetModuleName("$provide","service"),value:invokeLater("$provide","value"),constant:invokeLater("$provide","constant","unshift"),decorator:invokeLaterAndSetModuleName("$provide","decorator",s),animation:invokeLaterAndSetModuleName("$animateProvider","register"),filter:invokeLaterAndSetModuleName("$filterProvider","register"),controller:invokeLaterAndSetModuleName("$controllerProvider","register"),directive:invokeLaterAndSetModuleName("$compileProvider","directive"),component:invokeLaterAndSetModuleName("$compileProvider","component"),config:c,run:function(e){return l.push(e),this}};return o&&c(o),u})}})}function shallowCopy(e,t){if(T(e)){t=t||[];for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}else if(isObject(e)){t=t||{};for(var r in e)"$"===r.charAt(0)&&"$"===r.charAt(1)||(t[r]=e[r])}return t||e}function serializeObject(e,t){var n=[];return isValidObjectMaxDepth(t)&&(e=w.copy(e,null,t)),JSON.stringify(e,function(e,t){if(t=toJsonReplacer(e,t),isObject(t)){if(n.indexOf(t)>=0)return"...";n.push(t)}return t})}function toDebugString(e,t){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):isUndefined(e)?"undefined":"string"!=typeof e?serializeObject(e,t):e}function jqNextId(){return++B}function cssKebabToCamel(e){return kebabToCamel(e.replace(z,"ms-"))}function fnCamelCaseReplace(e,t){return t.toUpperCase()}function kebabToCamel(e){return e.replace(H,fnCamelCaseReplace)}function jqLiteIsTextNode(e){return!G.test(e)}function jqLiteAcceptsData(e){var t=e.nodeType;return t===k||!t||t===L}function jqLiteHasData(e){for(var t in j[e.ng339])return!0;return!1}function jqLiteBuildFragment(e,t){var n,i,r,o,a=t.createDocumentFragment(),s=[];if(jqLiteIsTextNode(e))s.push(t.createTextNode(e));else{for(n=a.appendChild(t.createElement("div")),i=(q.exec(e)||["",""])[1].toLowerCase(),r=X[i]||X._default,n.innerHTML=r[1]+e.replace(Y,"<$1></$2>")+r[2],o=r[0];o--;)n=n.lastChild;s=concat(s,n.childNodes),n=a.firstChild,n.textContent=""}return a.textContent="",a.innerHTML="",forEach(s,function(e){a.appendChild(e)}),a}function jqLiteParseHTML(t,n){n=n||e.document;var i;return(i=W.exec(t))?[n.createElement(i[1])]:(i=jqLiteBuildFragment(t,n))?i.childNodes:[]}function jqLiteWrapNode(e,t){var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)}function JQLite(e){if(e instanceof JQLite)return e;var t;if(isString(e)&&(e=O(e),t=!0),!(this instanceof JQLite)){if(t&&"<"!==e.charAt(0))throw V("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new JQLite(e)}t?jqLiteAddNodes(this,jqLiteParseHTML(e)):isFunction(e)?jqLiteReady(e):jqLiteAddNodes(this,e)}function jqLiteClone(e){return e.cloneNode(!0)}function jqLiteDealoc(e,t){!t&&jqLiteAcceptsData(e)&&u.cleanData([e]),e.querySelectorAll&&u.cleanData(e.querySelectorAll("*"))}function jqLiteOff(e,t,n,i){if(isDefined(i))throw V("offargs","jqLite#off() does not support the `selector` argument");var r=jqLiteExpandoStore(e),o=r&&r.events,a=r&&r.handle;if(a)if(t){var s=function(t){var i=o[t];isDefined(n)&&arrayRemove(i||[],n),isDefined(n)&&i&&i.length>0||(e.removeEventListener(t,a),delete o[t])};forEach(t.split(" "),function(e){s(e),U[e]&&s(U[e])})}else for(t in o)"$destroy"!==t&&e.removeEventListener(t,a),delete o[t]}function jqLiteRemoveData(e,t){var n=e.ng339,i=n&&j[n];if(i){if(t)return void delete i.data[t];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),jqLiteOff(e)),delete j[n],e.ng339=void 0}}function jqLiteExpandoStore(e,t){var n=e.ng339,i=n&&j[n];return t&&!i&&(e.ng339=n=jqNextId(),i=j[n]={events:{},data:{},handle:void 0}),i}function jqLiteData(e,t,n){if(jqLiteAcceptsData(e)){var i,r=isDefined(n),o=!r&&t&&!isObject(t),a=!t,s=jqLiteExpandoStore(e,!o),l=s&&s.data;if(r)l[kebabToCamel(t)]=n;else{if(a)return l;if(o)return l&&l[kebabToCamel(t)];for(i in t)l[kebabToCamel(i)]=t[i]}}}function jqLiteHasClass(e,t){return!!e.getAttribute&&(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1}function jqLiteRemoveClass(e,t){t&&e.setAttribute&&forEach(t.split(" "),function(t){e.setAttribute("class",O((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+O(t)+" "," ")))})}function jqLiteAddClass(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");forEach(t.split(" "),function(e){e=O(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",O(n))}}function jqLiteAddNodes(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var i=0;i<n;i++)e[e.length++]=t[i]}else e[e.length++]=t}}function jqLiteController(e,t){return jqLiteInheritedData(e,"$"+(t||"ngController")+"Controller")}function jqLiteInheritedData(e,t,n){e.nodeType===L&&(e=e.documentElement);for(var i=T(t)?t:[t];e;){for(var r=0,o=i.length;r<o;r++)if(isDefined(n=u.data(e,i[r])))return n;e=e.parentNode||e.nodeType===M&&e.host}}function jqLiteEmpty(e){for(jqLiteDealoc(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function jqLiteRemove(e,t){t||jqLiteDealoc(e);var n=e.parentNode;n&&n.removeChild(e)}function jqLiteDocumentLoaded(t,n){n=n||e,"complete"===n.document.readyState?n.setTimeout(t):u(n).on("load",t)}function jqLiteReady(t){function trigger(){e.document.removeEventListener("DOMContentLoaded",trigger),e.removeEventListener("load",trigger),t()}"complete"===e.document.readyState?e.setTimeout(t):(e.document.addEventListener("DOMContentLoaded",trigger),e.addEventListener("load",trigger))}function getBooleanAttrName(e,t){var n=Q[t.toLowerCase()];return n&&J[nodeName_(e)]&&n}function getAliasedAttrName(e){return ee[e]}function createEventHandler(e,t){var n=function(n,i){n.isDefaultPrevented=function(){return n.defaultPrevented};var r=t[i||n.type],o=r?r.length:0;if(o){if(isUndefined(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var s=r.specialHandlerWrapper||defaultHandlerWrapper;o>1&&(r=shallowCopy(r));for(var l=0;l<o;l++)n.isImmediatePropagationStopped()||s(e,n,r[l])}};return n.elem=e,n}function defaultHandlerWrapper(e,t,n){n.call(e,t)}function specialMouseHandlerWrapper(e,t,n){var i=t.relatedTarget;i&&(i===e||Z.call(e,i))||n.call(e,t)}function $$jqLiteProvider(){this.$get=function(){return extend(JQLite,{hasClass:function(e,t){return e.attr&&(e=e[0]),jqLiteHasClass(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),jqLiteAddClass(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),jqLiteRemoveClass(e,t)}})}}function hashKey(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var i=typeof e;return n="function"===i||"object"===i&&null!==e?e.$$hashKey=i+":"+(t||nextUid)():i+":"+e}function NgMapShim(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}function stringifyFn(e){return Function.prototype.toString.call(e)}function extractArgs(e){var t=stringifyFn(e).replace(le,"");return t.match(re)||t.match(oe)}function anonFn(e){var t=extractArgs(e);return t?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function annotate(e,t,n){var i,r,o;if("function"==typeof e){if(!(i=e.$inject)){if(i=[],e.length){if(t)throw isString(n)&&n||(n=e.name||anonFn(e)),ce("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);r=extractArgs(e),forEach(r[1].split(ae),function(e){e.replace(se,function(e,t,n){i.push(n)})})}e.$inject=i}}else T(e)?(o=e.length-1,assertArgFn(e[o],"fn"),i=e.slice(0,o)):assertArgFn(e,"fn",!0);return i}function createInjector(e,t){function supportObject(e){return function(t,n){if(!isObject(t))return e(t,n);forEach(t,reverseParams(e))}}function provider(e,t){if(assertNotHasOwnProperty(e,"service"),(isFunction(t)||T(t))&&(t=s.instantiate(t)),!t.$get)throw ce("pget","Provider '{0}' must define $get factory method.",e);return a[e+i]=t}function enforceReturnValue(e,t){return function(){var n=d.invoke(t,this);if(isUndefined(n))throw ce("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function factory(e,t,n){return provider(e,{$get:!1!==n?enforceReturnValue(e,t):t})}function service(e,t){return factory(e,["$injector",function(e){return e.instantiate(t)}])}function value(e,t){return factory(e,valueFn(t),!1)}function constant(e,t){assertNotHasOwnProperty(e,"constant"),a[e]=t,l[e]=t}function decorator(e,t){var n=s.get(e+i),r=n.$get;n.$get=function(){var e=d.invoke(r,n);return d.invoke(t,null,{$delegate:e})}}function loadModules(e){assertArg(isUndefined(e)||T(e),"modulesToLoad","not an array");var t,n=[];return forEach(e,function(e){function runInvokeQueue(e){var t,n;for(t=0,n=e.length;t<n;t++){var i=e[t],r=s.get(i[0]);r[i[1]].apply(r,i[2])}}if(!o.get(e)){o.set(e,!0);try{isString(e)?(t=p(e),d.modules[e]=t,n=n.concat(loadModules(t.requires)).concat(t._runBlocks),runInvokeQueue(t._invokeQueue),runInvokeQueue(t._configBlocks)):isFunction(e)?n.push(s.invoke(e)):T(e)?n.push(s.invoke(e)):assertArgFn(e,"module")}catch(t){throw T(e)&&(e=e[e.length-1]),t.message&&t.stack&&-1===t.stack.indexOf(t.message)&&(t=t.message+"\n"+t.stack),ce("modulerr","Failed to instantiate module {0} due to:\n{1}",e,t.stack||t.message||t)}}}),n}function createInternalInjector(e,o){function getService(t,i){if(e.hasOwnProperty(t)){if(e[t]===n)throw ce("cdep","Circular dependency found: {0}",t+" <- "+r.join(" <- "));return e[t]}try{return r.unshift(t),e[t]=n,e[t]=o(t,i),e[t]}catch(i){throw e[t]===n&&delete e[t],i}finally{r.shift()}}function injectionArgs(e,n,i){for(var r=[],o=createInjector.$$annotate(e,t,i),a=0,s=o.length;a<s;a++){var l=o[a];if("string"!=typeof l)throw ce("itkn","Incorrect injection token! Expected service name as string, got {0}",l);r.push(n&&n.hasOwnProperty(l)?n[l]:getService(l,i))}return r}function isClass(e){if(c||"function"!=typeof e)return!1;var t=e.$$ngIsClass;return isBoolean(t)||(t=e.$$ngIsClass=/^(?:class\b|constructor\()/.test(stringifyFn(e))),t}function invoke(e,t,n,i){"string"==typeof n&&(i=n,n=null);var r=injectionArgs(e,n,i);return T(e)&&(e=e[e.length-1]),isClass(e)?(r.unshift(null),new(Function.prototype.bind.apply(e,r))):e.apply(t,r)}function instantiate(e,t,n){var i=T(e)?e[e.length-1]:e,r=injectionArgs(e,t,n);return r.unshift(null),new(Function.prototype.bind.apply(i,r))}return{invoke:invoke,instantiate:instantiate,get:getService,annotate:createInjector.$$annotate,has:function(t){return a.hasOwnProperty(t+i)||e.hasOwnProperty(t)}}}t=!0===t;var n={},i="Provider",r=[],o=new ne,a={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(service),value:supportObject(value),constant:supportObject(constant),decorator:decorator}},s=a.$injector=createInternalInjector(a,function(e,t){throw w.isString(t)&&r.push(t),ce("unpr","Unknown provider: {0}",r.join(" <- "))}),l={},u=createInternalInjector(l,function(e,t){var n=s.get(e+i,t);return d.invoke(n.$get,n,void 0,e)}),d=u;a["$injector"+i]={$get:valueFn(u)},d.modules=s.modules=createMap();var h=loadModules(e);return d=u.get("$injector"),d.strictDi=t,forEach(h,function(e){e&&d.invoke(e)}),d}function $AnchorScrollProvider(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,i){function getFirstAnchor(e){var t=null;return Array.prototype.some.call(e,function(e){if("a"===nodeName_(e))return t=e,!0}),t}function getYOffset(){var e=scroll.yOffset;if(isFunction(e))e=e();else if(isElement(e)){var n=e[0],i=t.getComputedStyle(n);e="fixed"!==i.position?0:n.getBoundingClientRect().bottom}else isNumber(e)||(e=0);return e}function scrollTo(e){if(e){e.scrollIntoView();var n=getYOffset();if(n){var i=e.getBoundingClientRect().top;t.scrollBy(0,i-n)}}else t.scrollTo(0,0)}function scroll(e){e=isString(e)?e:isNumber(e)?e.toString():n.hash();var t;e?(t=r.getElementById(e))?scrollTo(t):(t=getFirstAnchor(r.getElementsByName(e)))?scrollTo(t):"top"===e&&scrollTo(null):scrollTo(null)}var r=t.document;return e&&i.$watch(function(){return n.hash()},function(e,t){e===t&&""===e||jqLiteDocumentLoaded(function(){i.$evalAsync(scroll)})}),scroll}]}function mergeClasses(e,t){return e||t?e?t?(T(e)&&(e=e.join(" ")),T(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function extractElementNode(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===de)return n}}function splitClasses(e){isString(e)&&(e=e.split(" "));var t=createMap();return forEach(e,function(e){e.length&&(t[e]=!0)}),t}function prepareAnimateOptions(e){return isObject(e)?e:{}}function Browser(e,t,n,i){function completeOutstandingRequest(e){try{e.apply(null,sliceArgs(arguments,1))}finally{if(0===--d)for(;p.length;)try{p.pop()()}catch(e){n.error(e)}}}function getHash(e){var t=e.indexOf("#");return-1===t?"":e.substr(t)}function cacheStateAndFireUrlChange(){v=null,fireStateOrUrlChange()}function cacheState(){h=y(),h=isUndefined(h)?null:h,equals(h,S)&&(h=S),S=h,f=h}function fireStateOrUrlChange(){var e=f;cacheState(),m===r.url()&&e===h||(m=r.url(),f=h,forEach(w,function(e){e(r.url(),h)}))}var r=this,o=e.location,a=e.history,s=e.setTimeout,l=e.clearTimeout,c={};r.isMock=!1;var d=0,p=[];r.$$completeOutstandingRequest=completeOutstandingRequest,r.$$incOutstandingRequestCount=function(){d++},r.notifyWhenNoOutstandingRequests=function(e){0===d?e():p.push(e)};var h,f,m=o.href,g=t.find("base"),v=null,y=i.history?function(){try{return a.state}catch(e){}}:noop;cacheState(),r.url=function(t,n,s){if(isUndefined(s)&&(s=null),o!==e.location&&(o=e.location),a!==e.history&&(a=e.history),t){var l=f===s;if(m===t&&(!i.history||l))return r;var c=m&&stripHash(m)===stripHash(t);return m=t,f=s,!i.history||c&&l?(c||(v=t),n?o.replace(t):c?o.hash=getHash(t):o.href=t,o.href!==t&&(v=t)):(a[n?"replaceState":"pushState"](s,"",t),cacheState()),v&&(v=t),r}return v||o.href.replace(/%27/g,"'")},r.state=function(){return h};var w=[],b=!1,S=null;r.onUrlChange=function(t){return b||(i.history&&u(e).on("popstate",cacheStateAndFireUrlChange),u(e).on("hashchange",cacheStateAndFireUrlChange),b=!0),w.push(t),t},r.$$applicationDestroyed=function(){u(e).off("hashchange popstate",cacheStateAndFireUrlChange)},r.$$checkUrlChange=fireStateOrUrlChange,r.baseHref=function(){var e=g.attr("href");return e?e.replace(/^(https?:)?\/\/[^\/]*/,""):""},r.defer=function(e,t){var n;return d++,n=s(function(){delete c[n],completeOutstandingRequest(e)},t||0),c[n]=!0,n},r.defer.cancel=function(e){return!!c[e]&&(delete c[e],l(e),completeOutstandingRequest(noop),!0)}}function $BrowserProvider(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,i){return new Browser(e,i,t,n)}]}function $CacheFactoryProvider(){this.$get=function(){function cacheFactory(t,n){function refresh(e){e!==l&&(c?c===e&&(c=e.n):c=e,link(e.n,e.p),link(e,l),l=e,l.n=null)}function link(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}if(t in e)throw minErr("$cacheFactory")("iid","CacheId '{0}' is already taken!",t);var i=0,r=extend({},n,{id:t}),o=createMap(),a=n&&n.capacity||Number.MAX_VALUE,s=createMap(),l=null,c=null;return e[t]={put:function(e,t){if(!isUndefined(t)){if(a<Number.MAX_VALUE){refresh(s[e]||(s[e]={key:e}))}return e in o||i++,o[e]=t,i>a&&this.remove(c.key),t}},get:function(e){if(a<Number.MAX_VALUE){var t=s[e];if(!t)return;refresh(t)}return o[e]},remove:function(e){if(a<Number.MAX_VALUE){var t=s[e];if(!t)return;t===l&&(l=t.p),t===c&&(c=t.n),link(t.n,t.p),delete s[e]}e in o&&(delete o[e],i--)},removeAll:function(){o=createMap(),i=0,s=createMap(),l=c=null},destroy:function(){o=null,r=null,s=null,delete e[t]},info:function(){return extend({},r,{size:i})}}}var e={};return cacheFactory.info=function(){var t={};return forEach(e,function(e,n){t[n]=e.info()}),t},cacheFactory.get=function(t){return e[t]},cacheFactory}}function $TemplateCacheProvider(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function UNINITIALIZED_VALUE(){}function $CompileProvider(t,n){function parseIsolateBindings(e,t,n){var i=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,r=createMap();return forEach(e,function(e,o){if(e in f)return void(r[o]=f[e]);var a=e.match(i);if(!a)throw ye("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,o,e,n?"controller bindings definition":"isolate scope definition");r[o]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||o},a[4]&&(f[e]=r[o])}),r}function parseDirectiveBindings(e,t){var n={isolateScope:null,bindToController:null};if(isObject(e.scope)&&(!0===e.bindToController?(n.bindToController=parseIsolateBindings(e.scope,t,!0),n.isolateScope={}):n.isolateScope=parseIsolateBindings(e.scope,t,!1)),isObject(e.bindToController)&&(n.bindToController=parseIsolateBindings(e.bindToController,t,!0)),n.bindToController&&!e.controller)throw ye("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);return n}function assertValidDirectiveName(e){var t=e.charAt(0);if(!t||t!==o(t))throw ye("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw ye("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}function getDirectiveRequire(e){var t=e.require||e.controller&&e.name;return!T(t)&&isObject(t)&&forEach(t,function(e,n){var i=e.match(p);e.substring(i[0].length)||(t[n]=i[0]+n)}),t}function getDirectiveRestrict(e,t){if(e&&(!isString(e)||!/[EACM]/.test(e)))throw ye("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",e,t);return e||"EA"}var i={},a="Directive",s=/^\s*directive:\s*([\w-]+)\s+(.*)$/,l=/(([\w-]+)(?::([^;]+))?;?)/,d=makeMap("ngSrc,ngSrcset,src,srcset"),p=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,h=/^(on[a-z]+|formaction)$/,f=createMap();this.directive=function registerDirective(e,n){return assertArg(e,"name"),assertNotHasOwnProperty(e,"directive"),isString(e)?(assertValidDirectiveName(e),assertArg(n,"directiveFactory"),i.hasOwnProperty(e)||(i[e]=[],t.factory(e+a,["$injector","$exceptionHandler",function(t,n){var r=[];return forEach(i[e],function(i,o){try{var a=t.invoke(i);isFunction(a)?a={compile:valueFn(a)}:!a.compile&&a.link&&(a.compile=valueFn(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||e,a.require=getDirectiveRequire(a),a.restrict=getDirectiveRestrict(a.restrict,e),a.$$moduleName=i.$$moduleName,r.push(a)}catch(e){n(e)}}),r}])),i[e].push(n)):forEach(e,reverseParams(registerDirective)),this},this.component=function registerComponent(e,t){function factory(e){function makeInjectable(t){return isFunction(t)||T(t)?function(n,i){return e.invoke(t,this,{$element:n,$attrs:i})}:t}var i=t.template||t.templateUrl?t.template:"",r={controller:n,controllerAs:identifierForController(t.controller)||t.controllerAs||"$ctrl",template:makeInjectable(i),templateUrl:makeInjectable(t.templateUrl),transclude:t.transclude,scope:{},bindToController:t.bindings||{},restrict:"E",require:t.require};return forEach(t,function(e,t){"$"===t.charAt(0)&&(r[t]=e)}),r}if(!isString(e))return forEach(e,reverseParams(bind(this,registerComponent))),this;var n=t.controller||function(){};return forEach(t,function(e,t){"$"===t.charAt(0)&&(factory[t]=e,isFunction(n)&&(n[t]=e))}),factory.$inject=["$injector"],this.directive(e,factory)},this.aHrefSanitizationWhitelist=function(e){return isDefined(e)?(n.aHrefSanitizationWhitelist(e),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return isDefined(e)?(n.imgSrcSanitizationWhitelist(e),this):n.imgSrcSanitizationWhitelist()};var m=!0;this.debugInfoEnabled=function(e){return isDefined(e)?(m=e,this):m};var v=!1;this.preAssignBindingsEnabled=function(e){return isDefined(e)?(v=e,this):v};var y=!1;this.strictComponentBindingsEnabled=function(e){return isDefined(e)?(y=e,this):y};var w=10;this.onChangesTtl=function(e){return arguments.length?(w=e,this):w};var b=!0;this.commentDirectivesEnabled=function(e){return arguments.length?(b=e,this):b};var S=!0;this.cssClassDirectivesEnabled=function(e){return arguments.length?(S=e,this):S},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(t,n,f,E,I,x,C,$,_,A){function flushOnChangesQueue(){try{if(!--j)throw R=void 0,ye("infchng","{0} $onChanges() iterations reached. Aborting!\n",w);C.$apply(function(){for(var e=[],t=0,n=R.length;t<n;++t)try{R[t]()}catch(t){e.push(t)}if(R=void 0,e.length)throw e})}finally{j++}}function Attributes(e,t){if(t){var n,i,r,o=Object.keys(t);for(n=0,i=o.length;n<i;n++)r=o[n],this[r]=t[r]}else this.$attr={};this.$$element=e}function setSpecialAttr(e,t,n){L.innerHTML="<span "+t+">";var i=L.firstChild.attributes,r=i[0];i.removeNamedItem(r.name),r.value=n,e.attributes.setNamedItem(r)}function safeAddClass(e,t){try{e.addClass(t)}catch(e){}}function compile(e,t,n,i,r){e instanceof u||(e=u(e));var o=compileNodes(e,t,e,n,i,r);compile.$$addScopeClass(e);var a=null;return function(t,n,i){if(!e)throw ye("multilink","This element has already been linked.");assertArg(t,"scope"),r&&r.needsNewScope&&(t=t.$parent.$new()),i=i||{};var s=i.parentBoundTranscludeFn,l=i.transcludeControllers,c=i.futureParentElement;s&&s.$$boundTransclude&&(s=s.$$boundTransclude),a||(a=detectNamespaceForChildElements(c));var d;if(d="html"!==a?u(wrapTemplate(a,u("<div>").append(e).html())):n?K.clone.call(e):e,l)for(var p in l)d.data("$"+p+"Controller",l[p].instance);return compile.$$addScopeInfo(d,t),n&&n(d,t),o&&o(t,d,d,s),n||(e=o=null),d}}function detectNamespaceForChildElements(e){var t=e&&e[0];return t&&"foreignobject"!==nodeName_(t)&&g.call(t).match(/SVG/)?"svg":"html"}function compileNodes(e,t,n,i,r,o){function compositeLinkFn(e,n,i,r){var o,a,s,l,c,d,p,h,g;if(f){var v=n.length;for(g=new Array(v),c=0;c<m.length;c+=3)p=m[c],g[p]=n[p]}else g=n;for(c=0,d=m.length;c<d;)s=g[m[c++]],o=m[c++],a=m[c++],o?(o.scope?(l=e.$new(),compile.$$addScopeInfo(u(s),l)):l=e,h=o.transcludeOnThisElement?createBoundTranscludeFn(e,o.transclude,r):!o.templateOnThisElement&&r?r:!r&&t?createBoundTranscludeFn(e,t):null,o(a,l,s,i,h)):a&&a(e,s.childNodes,void 0,r)}for(var a,s,l,d,p,h,f,m=[],g=T(e)||e instanceof u,v=0;v<e.length;v++)a=new Attributes,11===c&&mergeConsecutiveTextNodes(e,v,g),s=collectDirectives(e[v],[],a,0===v?i:void 0,r),l=s.length?applyDirectivesToNode(s,e[v],a,t,n,null,[],[],o):null,l&&l.scope&&compile.$$addScopeClass(a.$$element),p=l&&l.terminal||!(d=e[v].childNodes)||!d.length?null:compileNodes(d,l?(l.transcludeOnThisElement||!l.templateOnThisElement)&&l.transclude:t),(l||p)&&(m.push(v,l,p),h=!0,f=f||l),o=null;return h?compositeLinkFn:null}function mergeConsecutiveTextNodes(e,t,n){var i,r=e[t],o=r.parentNode;if(r.nodeType===N)for(;;){if(!(i=o?r.nextSibling:e[t+1])||i.nodeType!==N)break;r.nodeValue=r.nodeValue+i.nodeValue,i.parentNode&&i.parentNode.removeChild(i),n&&i===e[t+1]&&e.splice(t+1,1)}}function createBoundTranscludeFn(e,t,n){function boundTranscludeFn(i,r,o,a,s){return i||(i=e.$new(!1,s),i.$$transcluded=!0),t(i,r,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}var i=boundTranscludeFn.$$slots=createMap();for(var r in t.$$slots)t.$$slots[r]?i[r]=createBoundTranscludeFn(e,t.$$slots[r],n):i[r]=null;return boundTranscludeFn}function collectDirectives(e,t,n,i,r){var o,a,s,c=e.nodeType,u=n.$attr;switch(c){case k:a=nodeName_(e),addDirective(t,directiveNormalize(a),"E",i,r);for(var d,p,h,f,m,g,v=e.attributes,y=0,w=v&&v.length;y<w;y++){var b=!1,S=!1;d=v[y],p=d.name,m=d.value,f=directiveNormalize(p),g=U.test(f),g&&(p=p.replace(be,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var T=f.match(V);T&&directiveIsMultiElement(T[1])&&(b=p,S=p.substr(0,p.length-5)+"end",p=p.substr(0,p.length-6)),h=directiveNormalize(p.toLowerCase()),u[h]=p,!g&&n.hasOwnProperty(h)||(n[h]=m,getBooleanAttrName(e,h)&&(n[h]=!0)),addAttrInterpolateDirective(e,t,m,h,g),addDirective(t,h,"A",i,r,b,S)}if("input"===a&&"hidden"===e.getAttribute("type")&&e.setAttribute("autocomplete","off"),!F)break;if(s=e.className,isObject(s)&&(s=s.animVal),isString(s)&&""!==s)for(;o=l.exec(s);)h=directiveNormalize(o[2]),addDirective(t,h,"C",i,r)&&(n[h]=O(o[3])),s=s.substr(o.index+o[0].length);break;case N:addTextInterpolateDirective(t,e.nodeValue);break;case D:if(!M)break;collectCommentDirectives(e,t,n,i,r)}return t.sort(byPriority),t}function collectCommentDirectives(e,t,n,i,r){try{var o=s.exec(e.nodeValue);if(o){var a=directiveNormalize(o[1]);addDirective(t,a,"M",i,r)&&(n[a]=O(o[2]))}}catch(e){}}function groupScan(e,t,n){var i=[],r=0;if(t&&e.hasAttribute&&e.hasAttribute(t))do{if(!e)throw ye("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType===k&&(e.hasAttribute(t)&&r++,e.hasAttribute(n)&&r--),i.push(e),e=e.nextSibling}while(r>0);else i.push(e);return u(i)}function groupElementsLinkFnWrapper(e,t,n){return function(i,r,o,a,s){return r=groupScan(r[0],t,n),e(i,r,o,a,s)}}function compilationGenerator(e,t,n,i,r,o){var a;return e?compile(t,n,i,r,o):function(){return a||(a=compile(t,n,i,r,o),t=n=o=null),a.apply(this,arguments)}}function applyDirectivesToNode(e,t,n,i,r,o,a,s,l){function addLinkFns(e,t,n,i){e&&(n&&(e=groupElementsLinkFnWrapper(e,n,i)),e.require=c.require,e.directiveName=d,(b===c||c.$$isolateScope)&&(e=cloneAndAnnotateFn(e,{isolateScope:!0})),a.push(e)),t&&(n&&(t=groupElementsLinkFnWrapper(t,n,i)),t.require=c.require,t.directiveName=d,(b===c||c.$$isolateScope)&&(t=cloneAndAnnotateFn(t,{isolateScope:!0})),s.push(t))}function nodeLinkFn(e,i,r,o,l){function controllersBoundTransclude(e,t,n,i){var r;if(isScope(e)||(i=n,n=t,t=e,e=void 0),C&&(r=g),n||(n=C?O.parent():O),!i)return l(e,t,r,n,k);var o=l.$$slots[i];if(o)return o(e,t,r,n,k);if(isUndefined(o))throw ye("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',i,startingTag(O))}var c,d,p,h,m,g,E,O,I,x;t===r?(I=n,O=n.$$element):(O=u(r),I=new Attributes(O,n)),m=i,b?h=i.$new(!0):y&&(m=i.$parent),l&&(E=controllersBoundTransclude,E.$$boundTransclude=l,E.isSlotFilled=function(e){return!!l.$$slots[e]}),w&&(g=setupControllers(O,I,E,w,h,i,b)),b&&(compile.$$addScopeInfo(O,h,!0,!(S&&(S===b||S===b.$$originalDirective))),compile.$$addScopeClass(O,!0),h.$$isolateBindings=b.$$isolateBindings,x=initializeDirectiveBindings(i,I,h,h.$$isolateBindings,b),x.removeWatches&&h.$on("$destroy",x.removeWatches));for(var $ in g){var _=w[$],A=g[$],R=_.$$bindings.bindToController;if(v){A.bindingInfo=R?initializeDirectiveBindings(m,I,A.instance,R,_):{};var P=A();P!==A.instance&&(A.instance=P,O.data("$"+_.name+"Controller",P),A.bindingInfo.removeWatches&&A.bindingInfo.removeWatches(),A.bindingInfo=initializeDirectiveBindings(m,I,A.instance,R,_))}else A.instance=A(),O.data("$"+_.name+"Controller",A.instance),A.bindingInfo=initializeDirectiveBindings(m,I,A.instance,R,_)}for(forEach(w,function(e,t){var n=e.require;e.bindToController&&!T(n)&&isObject(n)&&extend(g[t].instance,getControllers(t,n,O,g))}),forEach(g,function(e){var t=e.instance;if(isFunction(t.$onChanges))try{t.$onChanges(e.bindingInfo.initialChanges)}catch(e){f(e)}if(isFunction(t.$onInit))try{t.$onInit()}catch(e){f(e)}isFunction(t.$doCheck)&&(m.$watch(function(){t.$doCheck()}),t.$doCheck()),isFunction(t.$onDestroy)&&m.$on("$destroy",function(){t.$onDestroy()})}),c=0,d=a.length;c<d;c++)p=a[c],invokeLinkFn(p,p.isolateScope?h:i,O,I,p.require&&getControllers(p.directiveName,p.require,O,g),E);var k=i;for(b&&(b.template||null===b.templateUrl)&&(k=h),e&&e(k,r.childNodes,void 0,l),c=s.length-1;c>=0;c--)p=s[c],invokeLinkFn(p,p.isolateScope?h:i,O,I,p.require&&getControllers(p.directiveName,p.require,O,g),E);forEach(g,function(e){var t=e.instance;isFunction(t.$postLink)&&t.$postLink()})}l=l||{};for(var c,d,p,h,m,g=-Number.MAX_VALUE,y=l.newScopeDirective,w=l.controllerDirectives,b=l.newIsolateScopeDirective,S=l.templateDirective,E=l.nonTlbTranscludeDirective,I=!1,x=!1,C=l.hasElementTranscludeDirective,$=n.$$element=u(t),_=o,A=i,R=!1,P=!1,N=0,D=e.length;N<D;N++){c=e[N];var L=c.$$start,M=c.$$end;if(L&&($=groupScan(t,L,M)),p=void 0,g>c.priority)break;if(m=c.scope,m&&(c.templateUrl||(isObject(m)?(assertNoDuplicate("new/isolated scope",b||y,c,$),b=c):assertNoDuplicate("new/isolated scope",b,c,$)),y=y||c),d=c.name,!R&&(c.replace&&(c.templateUrl||c.template)||c.transclude&&!c.$$tlb)){for(var F,j=N+1;F=e[j++];)if(F.transclude&&!F.$$tlb||F.replace&&(F.templateUrl||F.template)){P=!0;break}R=!0}if(!c.templateUrl&&c.controller&&(w=w||createMap(),assertNoDuplicate("'"+d+"' controller",w[d],c,$),w[d]=c),m=c.transclude)if(I=!0,c.$$tlb||(assertNoDuplicate("transclusion",E,c,$),E=c),"element"===m)C=!0,g=c.priority,p=$,$=n.$$element=u(compile.$$createComment(d,n[d])),t=$[0],replaceWith(r,sliceArgs(p),t),p[0].$$parentNode=p[0].parentNode,A=compilationGenerator(P,p,i,g,_&&_.name,{nonTlbTranscludeDirective:E});else{var B=createMap();if(isObject(m)){p=[];var H=createMap(),U=createMap();forEach(m,function(e,t){var n="?"===e.charAt(0);e=n?e.substring(1):e,H[e]=t,B[t]=null,U[t]=n}),forEach($.contents(),function(e){var t=H[directiveNormalize(nodeName_(e))];t?(U[t]=!0,B[t]=B[t]||[],B[t].push(e)):p.push(e)}),forEach(U,function(e,t){if(!e)throw ye("reqslot","Required transclusion slot `{0}` was not filled.",t)});for(var V in B)B[V]&&(B[V]=compilationGenerator(P,B[V],i))}else p=u(jqLiteClone(t)).contents();$.empty(),A=compilationGenerator(P,p,i,void 0,void 0,{needsNewScope:c.$$isolateScope||c.$$newScope}),A.$$slots=B}if(c.template)if(x=!0,assertNoDuplicate("template",S,c,$),S=c,m=isFunction(c.template)?c.template($,n):c.template,m=z(m),c.replace){if(_=c,p=jqLiteIsTextNode(m)?[]:removeComments(wrapTemplate(c.templateNamespace,O(m))),t=p[0],1!==p.length||t.nodeType!==k)throw ye("tplrt","Template for directive '{0}' must have exactly one root element. {1}",d,"");replaceWith(r,$,t);var W={$attr:{}},G=collectDirectives(t,[],W),q=e.splice(N+1,e.length-(N+1));(b||y)&&markDirectiveScope(G,b,y),e=e.concat(G).concat(q),mergeTemplateAttributes(n,W),D=e.length}else $.html(m);if(c.templateUrl)x=!0,assertNoDuplicate("template",S,c,$),S=c,c.replace&&(_=c),nodeLinkFn=compileTemplateUrl(e.splice(N,e.length-N),$,n,r,I&&A,a,s,{controllerDirectives:w,newScopeDirective:y!==c&&y,newIsolateScopeDirective:b,templateDirective:S,nonTlbTranscludeDirective:E}),D=e.length;else if(c.compile)try{h=c.compile($,n,A);var Y=c.$$originalDirective||c;isFunction(h)?addLinkFns(null,bind(Y,h),L,M):h&&addLinkFns(bind(Y,h.pre),bind(Y,h.post),L,M)}catch(e){f(e,startingTag($))}c.terminal&&(nodeLinkFn.terminal=!0,g=Math.max(g,c.priority))}return nodeLinkFn.scope=y&&!0===y.scope,nodeLinkFn.transcludeOnThisElement=I,nodeLinkFn.templateOnThisElement=x,nodeLinkFn.transclude=A,l.hasElementTranscludeDirective=C,nodeLinkFn}function getControllers(e,t,n,i){var r;if(isString(t)){var o=t.match(p),a=t.substring(o[0].length),s=o[1]||o[3],l="?"===o[2];if("^^"===s?n=n.parent():(r=i&&i[a],r=r&&r.instance),!r){var c="$"+a+"Controller";r=s?n.inheritedData(c):n.data(c)}if(!r&&!l)throw ye("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,e)}else if(T(t)){r=[];for(var u=0,d=t.length;u<d;u++)r[u]=getControllers(e,t[u],n,i)}else isObject(t)&&(r={},forEach(t,function(t,o){r[o]=getControllers(e,t,n,i)}));return r||null}function setupControllers(e,t,n,i,r,o,a){var s=createMap();for(var l in i){var c=i[l],u={$scope:c===a||c.$$isolateScope?r:o,$element:e,$attrs:t,$transclude:n},d=c.controller;"@"===d&&(d=t[c.name]);var p=x(d,u,!0,c.controllerAs);s[c.name]=p,e.data("$"+c.name+"Controller",p.instance)}return s}function markDirectiveScope(e,t,n){for(var i=0,r=e.length;i<r;i++)e[i]=inherit(e[i],{$$isolateScope:t,$$newScope:n})}function addDirective(e,n,r,o,s,l,c){if(n===s)return null;var u=null;if(i.hasOwnProperty(n))for(var d,p=t.get(n+a),h=0,f=p.length;h<f;h++)if(d=p[h],(isUndefined(o)||o>d.priority)&&-1!==d.restrict.indexOf(r)){if(l&&(d=inherit(d,{$$start:l,$$end:c})),!d.$$bindings){var m=d.$$bindings=parseDirectiveBindings(d,d.name);isObject(m.isolateScope)&&(d.$$isolateBindings=m.isolateScope)}e.push(d),u=d}return u}function directiveIsMultiElement(e){if(i.hasOwnProperty(e))for(var n,r=t.get(e+a),o=0,s=r.length;o<s;o++)if(n=r[o],n.multiElement)return!0;return!1}function mergeTemplateAttributes(e,t){var n=t.$attr,i=e.$attr;forEach(e,function(i,r){"$"!==r.charAt(0)&&(t[r]&&t[r]!==i&&(i.length?i+=("style"===r?";":" ")+t[r]:i=t[r]),e.$set(r,i,!0,n[r]))}),forEach(t,function(t,r){e.hasOwnProperty(r)||"$"===r.charAt(0)||(e[r]=t,"class"!==r&&"style"!==r&&(i[r]=n[r]))})}function compileTemplateUrl(e,t,n,i,r,o,a,s){var l,c,d=[],p=t[0],h=e.shift(),m=inherit(h,{templateUrl:null,transclude:null,replace:null,$$originalDirective:h}),g=isFunction(h.templateUrl)?h.templateUrl(t,n):h.templateUrl,v=h.templateNamespace;return t.empty(),E(g).then(function(f){var y,w,b,S;if(f=z(f),h.replace){if(b=jqLiteIsTextNode(f)?[]:removeComments(wrapTemplate(v,O(f))),y=b[0],1!==b.length||y.nodeType!==k)throw ye("tplrt","Template for directive '{0}' must have exactly one root element. {1}",h.name,g);w={$attr:{}},replaceWith(i,t,y);var T=collectDirectives(y,[],w);isObject(h.scope)&&markDirectiveScope(T,!0),e=T.concat(e),mergeTemplateAttributes(n,w)}else y=p,t.html(f);for(e.unshift(m),l=applyDirectivesToNode(e,y,n,r,t,h,o,a,s),forEach(i,function(e,n){e===y&&(i[n]=t[0])}),c=compileNodes(t[0].childNodes,r);d.length;){var E=d.shift(),I=d.shift(),x=d.shift(),C=d.shift(),$=t[0];if(!E.$$destroyed){if(I!==p){var _=I.className;s.hasElementTranscludeDirective&&h.replace||($=jqLiteClone(y)),replaceWith(x,u(I),$),safeAddClass(u($),_)}S=l.transcludeOnThisElement?createBoundTranscludeFn(E,l.transclude,C):C,l(c,E,$,i,S)}}d=null}).catch(function(e){isError(e)&&f(e)}),function(e,t,n,i,r){var o=r;t.$$destroyed||(d?d.push(t,n,i,o):(l.transcludeOnThisElement&&(o=createBoundTranscludeFn(t,l.transclude,r)),l(c,t,n,i,o)))}}function byPriority(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function assertNoDuplicate(e,t,n,i){function wrapModuleNameIfDefined(e){return e?" (module: "+e+")":""}if(t)throw ye("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,wrapModuleNameIfDefined(t.$$moduleName),n.name,wrapModuleNameIfDefined(n.$$moduleName),e,startingTag(i))}function addTextInterpolateDirective(e,t){var i=n(t,!0);i&&e.push({priority:0,compile:function(e){var t=e.parent(),n=!!t.length;return n&&compile.$$addBindingClass(t),function(e,t){var r=t.parent();n||compile.$$addBindingClass(r),compile.$$addBindingInfo(r,i.expressions),e.$watch(i,function(e){t[0].nodeValue=e})}}})}function wrapTemplate(t,n){switch(t=o(t||"html")){case"svg":case"math":var i=e.document.createElement("div");return i.innerHTML="<"+t+">"+n+"</"+t+">",i.childNodes[0].childNodes;default:return n}}function getTrustedContext(e,t){if("srcdoc"===t)return $.HTML;var n=nodeName_(e);if("src"===t||"ngSrc"===t){if(-1===["img","video","audio","source","track"].indexOf(n))return $.RESOURCE_URL}else if("xlinkHref"===t||"form"===n&&"action"===t||"link"===n&&"href"===t)return $.RESOURCE_URL}function addAttrInterpolateDirective(e,t,i,r,o){var a=getTrustedContext(e,r),s=!o,l=d[r]||o,c=n(i,s,a,l);if(c){if("multiple"===r&&"select"===nodeName_(e))throw ye("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",startingTag(e));if(h.test(r))throw ye("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");t.push({priority:100,compile:function(){return{pre:function(e,t,o){var s=o.$$observers||(o.$$observers=createMap()),u=o[r];u!==i&&(c=u&&n(u,!0,a,l),i=u),c&&(o[r]=c(e),(s[r]||(s[r]=[])).$$inter=!0,(o.$$observers&&o.$$observers[r].$$scope||e).$watch(c,function(e,t){"class"===r&&e!==t?o.$updateClass(e,t):o.$set(r,e)}))}}}})}}function replaceWith(t,n,i){var r,o,a=n[0],s=n.length,l=a.parentNode;if(t)for(r=0,o=t.length;r<o;r++)if(t[r]===a){t[r++]=i;for(var c=r,d=c+s-1,p=t.length;c<p;c++,d++)d<p?t[c]=t[d]:delete t[c];t.length-=s-1,t.context===a&&(t.context=i);break}l&&l.replaceChild(i,a);var h=e.document.createDocumentFragment();for(r=0;r<s;r++)h.appendChild(n[r]);for(u.hasData(a)&&(u.data(i,u.data(a)),u(a).off("$destroy")),u.cleanData(h.querySelectorAll("*")),r=1;r<s;r++)delete n[r];n[0]=i,n.length=1}function cloneAndAnnotateFn(e,t){return extend(function(){return e.apply(null,arguments)},e,t)}function invokeLinkFn(e,t,n,i,r,o){try{e(t,n,i,r,o)}catch(e){f(e,startingTag(n))}}function strictBindingsCheck(e,t){if(y)throw ye("missingattr","Attribute '{0}' of '{1}' is non-optional and must be set!",e,t)}function initializeDirectiveBindings(e,t,i,o,a){function recordChanges(t,n,r){isFunction(i.$onChanges)&&!simpleCompare(n,r)&&(R||(e.$$postDigest(flushOnChangesQueue),R=[]),s||(s={},R.push(triggerOnChangesHook)),s[t]&&(r=s[t].previousValue),s[t]=new SimpleChange(r,n))}function triggerOnChangesHook(){i.$onChanges(s),s=void 0}var s,l=[],c={};return forEach(o,function(o,s){var u,d,p,h,f,m=o.attrName,g=o.optional,v=o.mode;switch(v){case"@":g||r.call(t,m)||(strictBindingsCheck(m,a.name),i[s]=t[m]=void 0),f=t.$observe(m,function(e){if(isString(e)||isBoolean(e)){var t=i[s];recordChanges(s,e,t),i[s]=e}}),t.$$observers[m].$$scope=e,u=t[m],isString(u)?i[s]=n(u)(e):isBoolean(u)&&(i[s]=u),c[s]=new SimpleChange(we,i[s]),l.push(f);break;case"=":if(!r.call(t,m)){if(g)break;strictBindingsCheck(m,a.name),t[m]=void 0}if(g&&!t[m])break;d=I(t[m]),h=d.literal?equals:simpleCompare,p=d.assign||function(){throw u=i[s]=d(e),ye("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",t[m],m,a.name)},u=i[s]=d(e);var y=function(t){return h(t,i[s])||(h(t,u)?p(e,t=i[s]):i[s]=t),u=t};y.$stateful=!0,f=o.collection?e.$watchCollection(t[m],y):e.$watch(I(t[m],y),null,d.literal),l.push(f);break;case"<":if(!r.call(t,m)){if(g)break;strictBindingsCheck(m,a.name),t[m]=void 0}if(g&&!t[m])break;d=I(t[m]);var w=d.literal,b=i[s]=d(e);c[s]=new SimpleChange(we,i[s]),f=e.$watch(d,function(e,t){if(t===e){if(t===b||w&&equals(t,b))return;t=b}recordChanges(s,e,t),i[s]=e},w),l.push(f);break;case"&":if(g||r.call(t,m)||strictBindingsCheck(m,a.name),(d=t.hasOwnProperty(m)?I(t[m]):noop)===noop&&g)break;i[s]=function(t){return d(e,t)}}}),{initialChanges:c,removeWatches:l.length&&function(){for(var e=0,t=l.length;e<t;++e)l[e]()}}}var R,P=/^\w/,L=e.document.createElement("div"),M=b,F=S,j=w;Attributes.prototype={$normalize:directiveNormalize,$addClass:function(e){e&&e.length>0&&_.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&_.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=tokenDifference(e,t);n&&n.length&&_.addClass(this.$$element,n);var i=tokenDifference(t,e);i&&i.length&&_.removeClass(this.$$element,i)},$set:function(e,t,n,i){var r,o=this.$$element[0],a=getBooleanAttrName(o,e),s=getAliasedAttrName(e),l=e;if(a?(this.$$element.prop(e,t),i=a):s&&(this[s]=t,l=s),this[e]=t,i?this.$attr[e]=i:(i=this.$attr[e])||(this.$attr[e]=i=snake_case(e,"-")),"a"===(r=nodeName_(this.$$element))&&("href"===e||"xlinkHref"===e)||"img"===r&&"src"===e)this[e]=t=A(t,"src"===e);else if("img"===r&&"srcset"===e&&isDefined(t)){for(var c="",u=O(t),d=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,p=/\s/.test(u)?d:/(,)/,h=u.split(p),m=Math.floor(h.length/2),g=0;g<m;g++){var v=2*g;c+=A(O(h[v]),!0),c+=" "+O(h[v+1])}var y=O(h[2*g]).split(/\s/);c+=A(O(y[0]),!0),2===y.length&&(c+=" "+O(y[1])),this[e]=t=c}!1!==n&&(null===t||isUndefined(t)?this.$$element.removeAttr(i):P.test(i)?this.$$element.attr(i,t):setSpecialAttr(this.$$element[0],i,t));var w=this.$$observers;w&&forEach(w[l],function(e){try{e(t)}catch(e){f(e)}})},$observe:function(e,t){var n=this,i=n.$$observers||(n.$$observers=createMap()),r=i[e]||(i[e]=[]);return r.push(t),C.$evalAsync(function(){r.$$inter||!n.hasOwnProperty(e)||isUndefined(n[e])||t(n[e])}),function(){arrayRemove(r,t)}}};var B=n.startSymbol(),H=n.endSymbol(),z="{{"===B&&"}}"===H?identity:function(e){return e.replace(/\{\{/g,B).replace(/}}/g,H)},U=/^ngAttr[A-Z]/,V=/^(.+)Start$/;return compile.$$addBindingInfo=m?function(e,t){var n=e.data("$binding")||[];T(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:noop,compile.$$addBindingClass=m?function(e){safeAddClass(e,"ng-binding")}:noop,compile.$$addScopeInfo=m?function(e,t,n,i){var r=n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(r,t)}:noop,compile.$$addScopeClass=m?function(e,t){safeAddClass(e,t?"ng-isolate-scope":"ng-scope")}:noop,compile.$$createComment=function(t,n){var i="";return m&&(i=" "+(t||"")+": ",n&&(i+=n+" ")),e.document.createComment(i)},compile}]}function SimpleChange(e,t){this.previousValue=e,this.currentValue=t}function directiveNormalize(e){return e.replace(be,"").replace(Se,fnCamelCaseReplace)}function tokenDifference(e,t){var n="",i=e.split(/\s+/),r=t.split(/\s+/);e:for(var o=0;o<i.length;o++){for(var a=i[o],s=0;s<r.length;s++)if(a===r[s])continue e;n+=(n.length>0?" ":"")+a}return n}function removeComments(e){e=u(e);var t=e.length;if(t<=1)return e;for(;t--;){var n=e[t];(n.nodeType===D||n.nodeType===N&&""===n.nodeValue.trim())&&f.call(e,t,1)}return e}function identifierForController(e,t){if(t&&isString(t))return t;if(isString(e)){var n=Ee.exec(e);if(n)return n[3]}}function $ControllerProvider(){var e={},t=!1;this.has=function(t){return e.hasOwnProperty(t)},this.register=function(t,n){assertNotHasOwnProperty(t,"controller"),isObject(t)?extend(e,t):e[t]=n},this.allowGlobals=function(){t=!0},this.$get=["$injector","$window",function(n,i){function addIdentifier(e,t,n,i){if(!e||!isObject(e.$scope))throw minErr("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,t);e.$scope[t]=n}return function(r,o,a,s){var l,c,u,d;if(a=!0===a,s&&isString(s)&&(d=s),isString(r)){if(!(c=r.match(Ee)))throw Te("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);if(u=c[1],d=d||c[3],!(r=e.hasOwnProperty(u)?e[u]:getter(o.$scope,u,!0)||(t?getter(i,u,!0):void 0)))throw Te("ctrlreg","The controller with the name '{0}' is not registered.",u);assertArgFn(r,u,!0)}if(a){var p=(T(r)?r[r.length-1]:r).prototype;return l=Object.create(p||null),d&&addIdentifier(o,d,l,u||r.name),extend(function(){var e=n.invoke(r,l,o,u);return e!==l&&(isObject(e)||isFunction(e))&&(l=e,d&&addIdentifier(o,d,l,u||r.name)),l},{instance:l,identifier:d})}return l=n.instantiate(r,o,u),d&&addIdentifier(o,d,l,u||r.name),l}}]}function $DocumentProvider(){this.$get=["$window",function(e){return u(e.document)}]}function $$IsDocumentHiddenProvider(){this.$get=["$document","$rootScope",function(e,t){function changeListener(){i=n.hidden}var n=e[0],i=n&&n.hidden;return e.on("visibilitychange",changeListener),t.$on("$destroy",function(){e.off("visibilitychange",changeListener)}),function(){return i}}]}function $ExceptionHandlerProvider(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function serializeValue(e){return isObject(e)?isDate(e)?e.toISOString():toJson(e):e}function $HttpParamSerializerProvider(){this.$get=function(){return function(e){if(!e)return"";var t=[];return forEachSorted(e,function(e,n){null===e||isUndefined(e)||isFunction(e)||(T(e)?forEach(e,function(e){t.push(encodeUriQuery(n)+"="+encodeUriQuery(serializeValue(e)))}):t.push(encodeUriQuery(n)+"="+encodeUriQuery(serializeValue(e))))}),t.join("&")}}}function $HttpParamSerializerJQLikeProvider(){this.$get=function(){return function(e){function serialize(e,n,i){null===e||isUndefined(e)||(T(e)?forEach(e,function(e,t){serialize(e,n+"["+(isObject(e)?t:"")+"]")}):isObject(e)&&!isDate(e)?forEachSorted(e,function(e,t){serialize(e,n+(i?"":"[")+t+(i?"":"]"))}):t.push(encodeUriQuery(n)+"="+encodeUriQuery(serializeValue(e))))}if(!e)return"";var t=[];return serialize(e,"",!0),t.join("&")}}}function defaultHttpResponseTransform(e,t){if(isString(e)){var n=e.replace(_e,"").trim();if(n){var i=t("Content-Type"),r=i&&0===i.indexOf(Ie);if(r||isJsonLike(n))try{e=fromJson(n)}catch(t){if(!r)return e;throw Ae("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',e,t)}}}return e}function isJsonLike(e){var t=e.match(Ce);return t&&$e[t[0]].test(e)}function parseHeaders(e){function fillInParsed(e,t){e&&(n[e]=n[e]?n[e]+", "+t:t)}var t,n=createMap();return isString(e)?forEach(e.split("\n"),function(e){t=e.indexOf(":"),fillInParsed(o(O(e.substr(0,t))),O(e.substr(t+1)))}):isObject(e)&&forEach(e,function(e,t){fillInParsed(o(t),O(e))}),n}function headersGetter(e){var t;return function(n){if(t||(t=parseHeaders(e)),n){var i=t[o(n)];return void 0===i&&(i=null),i}return t}}function transformData(e,t,n,i){return isFunction(i)?i(e,t,n):(forEach(i,function(i){e=i(e,t,n)}),e)}function isSuccess(e){return 200<=e&&e<300}function $HttpProvider(){var e=this.defaults={transformResponse:[defaultHttpResponseTransform],transformRequest:[function(e){return!isObject(e)||isFile(e)||isBlob(e)||isFormData(e)?e:toJson(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:shallowCopy(xe),put:shallowCopy(xe),patch:shallowCopy(xe)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},t=!1;this.useApplyAsync=function(e){return isDefined(e)?(t=!!e,this):t};var n=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(i,r,s,l,c,u,d,p){function $http(t){function chainInterceptors(e,t){for(var n=0,i=t.length;n<i;){var r=t[n++],o=t[n++];e=e.then(r,o)}return t.length=0,e}function completeOutstandingRequest(){i.$$completeOutstandingRequest(noop)}function executeHeaderFns(e,t){var n,i={};return forEach(e,function(e,r){isFunction(e)?null!=(n=e(t))&&(i[r]=n):i[r]=e}),i}function serverRequest(t){var n=t.headers,i=transformData(t.data,headersGetter(n),void 0,t.transformRequest);return isUndefined(i)&&forEach(n,function(e,t){"content-type"===o(t)&&delete n[t]}),isUndefined(t.withCredentials)&&!isUndefined(e.withCredentials)&&(t.withCredentials=e.withCredentials),sendReq(t,i).then(transformResponse,transformResponse)}function transformResponse(e){var t=extend({},e);return t.data=transformData(e.data,e.headers,e.status,n.transformResponse),isSuccess(e.status)?t:u.reject(t)}if(!isObject(t))throw minErr("$http")("badreq","Http request configuration must be an object.  Received: {0}",t);if(!isString(p.valueOf(t.url)))throw minErr("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",t.url);var n=extend({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer,jsonpCallbackParam:e.jsonpCallbackParam},t);n.headers=function(t){var n,i,r,a=e.headers,s=extend({},t.headers);a=extend({},a.common,a[o(t.method)]);e:for(n in a){i=o(n);for(r in s)if(o(r)===i)continue e;s[n]=a[n]}return executeHeaderFns(s,shallowCopy(t))}(t),n.method=a(n.method),n.paramSerializer=isString(n.paramSerializer)?d.get(n.paramSerializer):n.paramSerializer,i.$$incOutstandingRequestCount();var r=[],s=[],l=u.resolve(n);return forEach(f,function(e){(e.request||e.requestError)&&r.unshift(e.request,e.requestError),(e.response||e.responseError)&&s.push(e.response,e.responseError)}),l=chainInterceptors(l,r),l=l.then(serverRequest),l=chainInterceptors(l,s),l=l.finally(completeOutstandingRequest)}function sendReq(n,i){function createApplyHandlers(e){if(e){var n={};return forEach(e,function(e,i){n[i]=function(n){function callEventHandler(){e(n)}t?c.$applyAsync(callEventHandler):c.$$phase?callEventHandler():c.$apply(callEventHandler)}}),n}}function done(e,n,i,r,o){function resolveHttpPromise(){resolvePromise(n,e,i,r,o)}a&&(isSuccess(e)?a.put(v,[e,n,parseHeaders(i),r,o]):a.remove(v)),t?c.$applyAsync(resolveHttpPromise):(resolveHttpPromise(),c.$$phase||c.$apply())}function resolvePromise(e,t,i,r,o){t=t>=-1?t:0,(isSuccess(t)?d.resolve:d.reject)({data:e,status:t,headers:headersGetter(i),config:n,statusText:r,xhrStatus:o})}function resolvePromiseWithResult(e){resolvePromise(e.data,e.status,shallowCopy(e.headers()),e.statusText,e.xhrStatus)}function removePendingReq(){var e=$http.pendingRequests.indexOf(n);-1!==e&&$http.pendingRequests.splice(e,1)}var a,l,d=u.defer(),f=d.promise,m=n.headers,g="jsonp"===o(n.method),v=n.url;if(g?v=p.getTrustedResourceUrl(v):isString(v)||(v=p.valueOf(v)),v=buildUrl(v,n.paramSerializer(n.params)),g&&(v=sanitizeJsonpCallbackParam(v,n.jsonpCallbackParam)),$http.pendingRequests.push(n),f.then(removePendingReq,removePendingReq),!n.cache&&!e.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(a=isObject(n.cache)?n.cache:isObject(e.cache)?e.cache:h),a&&(l=a.get(v),isDefined(l)?isPromiseLike(l)?l.then(resolvePromiseWithResult,resolvePromiseWithResult):T(l)?resolvePromise(l[1],l[0],shallowCopy(l[2]),l[3],l[4]):resolvePromise(l,200,{},"OK","complete"):a.put(v,f)),isUndefined(l)){var y=urlIsSameOrigin(n.url)?s()[n.xsrfCookieName||e.xsrfCookieName]:void 0;y&&(m[n.xsrfHeaderName||e.xsrfHeaderName]=y),r(n.method,v,i,done,m,n.timeout,n.withCredentials,n.responseType,createApplyHandlers(n.eventHandlers),createApplyHandlers(n.uploadEventHandlers))}return f}function buildUrl(e,t){return t.length>0&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}function sanitizeJsonpCallbackParam(e,t){if(/[&?][^=]+=JSON_CALLBACK/.test(e))throw Ae("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',e);if(new RegExp("[&?]"+t+"=").test(e))throw Ae("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',t,e);return e+=(-1===e.indexOf("?")?"?":"&")+t+"=JSON_CALLBACK"}var h=l("$http");e.paramSerializer=isString(e.paramSerializer)?d.get(e.paramSerializer):e.paramSerializer;var f=[];return forEach(n,function(e){f.unshift(isString(e)?d.get(e):d.invoke(e))}),$http.pendingRequests=[],function(e){forEach(arguments,function(e){$http[e]=function(t,n){return $http(extend({},n||{},{method:e,url:t}))}})}("get","delete","head","jsonp"),function(e){forEach(arguments,function(e){$http[e]=function(t,n,i){return $http(extend({},i||{},{method:e,url:t,data:n}))}})}("post","put","patch"),$http.defaults=e,$http}]}function $xhrFactoryProvider(){this.$get=function(){return function(){return new e.XMLHttpRequest}}}function $HttpBackendProvider(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,n,i){return createHttpBackend(e,i,e.defer,t,n[0])}]}function createHttpBackend(e,t,n,i,r){function jsonpReq(e,t,n){e=e.replace("JSON_CALLBACK",t);var o=r.createElement("script"),a=null;return o.type="text/javascript",o.src=e,o.async=!0,a=function(e){o.removeEventListener("load",a),o.removeEventListener("error",a),r.body.removeChild(o),o=null;var s=-1,l="unknown";e&&("load"!==e.type||i.wasCalled(t)||(e={type:"error"}),l=e.type,s="error"===e.type?404:200),n&&n(s,l)},o.addEventListener("load",a),o.addEventListener("error",a),r.body.appendChild(o),a}return function(r,a,s,l,c,u,d,p,h,f){function timeoutRequest(){g&&g(),v&&v.abort()}function completeRequest(e,t,i,r,o,a){isDefined(S)&&n.cancel(S),g=v=null,e(t,i,r,o,a)}if(a=a||e.url(),"jsonp"===o(r))var m=i.createCallback(a),g=jsonpReq(a,m,function(e,t){var n=200===e&&i.getResponse(m);completeRequest(l,e,n,"",t,"complete"),i.removeCallback(m)});else{var v=t(r,a);v.open(r,a,!0),forEach(c,function(e,t){isDefined(e)&&v.setRequestHeader(t,e)}),v.onload=function(){var e=v.statusText||"",t="response"in v?v.response:v.responseText,n=1223===v.status?204:v.status;0===n&&(n=t?200:"file"===urlResolve(a).protocol?404:0),completeRequest(l,n,t,v.getAllResponseHeaders(),e,"complete")};var y=function(){completeRequest(l,-1,null,null,"","error")},w=function(){completeRequest(l,-1,null,null,"","abort")},b=function(){completeRequest(l,-1,null,null,"","timeout")};if(v.onerror=y,v.onabort=w,v.ontimeout=b,forEach(h,function(e,t){v.addEventListener(t,e)}),forEach(f,function(e,t){v.upload.addEventListener(t,e)}),d&&(v.withCredentials=!0),p)try{v.responseType=p}catch(e){if("json"!==p)throw e}v.send(isUndefined(s)?null:s)}if(u>0)var S=n(timeoutRequest,u);else isPromiseLike(u)&&u.then(timeoutRequest)}}function $InterpolateProvider(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,i,r){function escape(e){return"\\\\\\"+e}function unescapeText(n){return n.replace(s,e).replace(l,t)}function constantWatchDelegate(e,t,n,i){var r=e.$watch(function(e){return r(),i(e)},t,n);return r}function $interpolate(s,l,c,u){function parseStringifyInterceptor(e){try{return e=T(e),u&&!isDefined(e)?e:stringify(e)}catch(e){i(Re.interr(s,e))}}if(!s.length||-1===s.indexOf(e)){var d;if(!l){d=valueFn(unescapeText(s)),d.exp=s,d.expressions=[],d.$$watchDelegate=constantWatchDelegate}return d}u=!!u;for(var p,h,f,m=0,g=[],v=[],y=s.length,w=[],b=[];m<y;){if(-1===(p=s.indexOf(e,m))||-1===(h=s.indexOf(t,p+o))){m!==y&&w.push(unescapeText(s.substring(m)));break}m!==p&&w.push(unescapeText(s.substring(m,p))),f=s.substring(p+o,h),g.push(f),v.push(n(f,parseStringifyInterceptor)),m=h+a,b.push(w.length),w.push("")}if(c&&w.length>1&&Re.throwNoconcat(s),!l||g.length){var S=function(e){for(var t=0,n=g.length;t<n;t++){if(u&&isUndefined(e[t]))return;w[b[t]]=e[t]}return w.join("")},T=function(e){return c?r.getTrusted(c,e):r.valueOf(e)};return extend(function(e){var t=0,n=g.length,r=new Array(n);try{for(;t<n;t++)r[t]=v[t](e);return S(r)}catch(e){i(Re.interr(s,e))}},{exp:s,expressions:g,$$watchDelegate:function(e,t){var n;return e.$watchGroup(v,function(i,r){var o=S(i);isFunction(t)&&t.call(this,o,i!==r?n:o,e),n=o})}})}}var o=e.length,a=t.length,s=new RegExp(e.replace(/./g,escape),"g"),l=new RegExp(t.replace(/./g,escape),"g");return $interpolate.startSymbol=function(){return e},$interpolate.endSymbol=function(){return t},$interpolate}]}function $IntervalProvider(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(e,t,n,i,r){function interval(a,s,l,c){function callback(){u?a.apply(null,d):a(f)}var u=arguments.length>4,d=u?sliceArgs(arguments,4):[],p=t.setInterval,h=t.clearInterval,f=0,m=isDefined(c)&&!c,g=(m?i:n).defer(),v=g.promise;return l=isDefined(l)?l:0,v.$$intervalId=p(function(){m?r.defer(callback):e.$evalAsync(callback),g.notify(f++),l>0&&f>=l&&(g.resolve(f),h(v.$$intervalId),delete o[v.$$intervalId]),m||e.$apply()},s),o[v.$$intervalId]=g,v}var o={};return interval.cancel=function(e){return!!(e&&e.$$intervalId in o)&&(markQExceptionHandled(o[e.$$intervalId].promise),o[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete o[e.$$intervalId],!0)},interval}]}function encodePath(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=encodeUriSegment(t[n]);return t.join("/")}function parseAbsoluteUrl(e,t){var n=urlResolve(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=toInt(n.port)||Ne[n.protocol]||null}function parseAppUrl(e,t){if(Le.test(e))throw De("badpath",'Invalid url "{0}".',e);var n="/"!==e.charAt(0);n&&(e="/"+e);var i=urlResolve(e);t.$$path=decodeURIComponent(n&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),t.$$search=parseKeyValue(i.search),t.$$hash=decodeURIComponent(i.hash),t.$$path&&"/"!==t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function startsWith(e,t){return e.slice(0,t.length)===t}function stripBaseUrl(e,t){if(startsWith(t,e))return t.substr(e.length)}function stripHash(e){var t=e.indexOf("#");return-1===t?e:e.substr(0,t)}function trimEmptyHash(e){return e.replace(/(#.+)|#$/,"$1")}function stripFile(e){return e.substr(0,stripHash(e).lastIndexOf("/")+1)}function serverBase(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function LocationHtml5Url(e,t,n){this.$$html5=!0,n=n||"",parseAbsoluteUrl(e,this),this.$$parse=function(e){var n=stripBaseUrl(t,e);if(!isString(n))throw De("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);parseAppUrl(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=toKeyValue(this.$$search),n=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=t+this.$$url.substr(1),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(i,r){if(r&&"#"===r[0])return this.hash(r.slice(1)),!0;var o,a,s;return isDefined(o=stripBaseUrl(e,i))?(a=o,s=n&&isDefined(o=stripBaseUrl(n,o))?t+(stripBaseUrl("/",o)||o):e+a):isDefined(o=stripBaseUrl(t,i))?s=t+o:t===i+"/"&&(s=t),s&&this.$$parse(s),!!s}}function LocationHashbangUrl(e,t,n){parseAbsoluteUrl(e,this),this.$$parse=function(i){var r,o=stripBaseUrl(e,i)||stripBaseUrl(t,i);isUndefined(o)||"#"!==o.charAt(0)?this.$$html5?r=o:(r="",isUndefined(o)&&(e=i,this.replace())):(r=stripBaseUrl(n,o),isUndefined(r)&&(r=o)),parseAppUrl(r,this),this.$$path=function(e,t,n){var i,r=/^\/[A-Z]:(\/.*)/;return startsWith(t,n)&&(t=t.replace(n,"")),r.exec(t)?e:(i=r.exec(e),i?i[1]:e)}(this.$$path,r,e),this.$$compose()},this.$$compose=function(){var t=toKeyValue(this.$$search),i=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(t?"?"+t:"")+i,this.$$absUrl=e+(this.$$url?n+this.$$url:""),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(t,n){return stripHash(e)===stripHash(t)&&(this.$$parse(t),!0)}}function LocationHashbangInHtml5Url(e,t,n){this.$$html5=!0,LocationHashbangUrl.apply(this,arguments),this.$$parseLinkUrl=function(i,r){if(r&&"#"===r[0])return this.hash(r.slice(1)),!0;var o,a;return e===stripHash(i)?o=i:(a=stripBaseUrl(t,i))?o=e+n+a:t===i+"/"&&(o=t),o&&this.$$parse(o),!!o},this.$$compose=function(){var t=toKeyValue(this.$$search),i=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(t?"?"+t:"")+i,this.$$absUrl=e+n+this.$$url,this.$$urlUpdatedByLocation=!0}}function locationGetter(e){return function(){return this[e]}}function locationGetterSetter(e,t){return function(n){return isUndefined(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function $LocationProvider(){var e="!",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return isDefined(t)?(e=t,this):e},this.html5Mode=function(e){return isBoolean(e)?(t.enabled=e,this):isObject(e)?(isBoolean(e.enabled)&&(t.enabled=e.enabled),isBoolean(e.requireBase)&&(t.requireBase=e.requireBase),(isBoolean(e.rewriteLinks)||isString(e.rewriteLinks))&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,i,r,o,a){function setBrowserUrlWithFallback(e,t,n){var r=s.url(),o=s.$$state;try{i.url(e,t,n),s.$$state=i.state()}catch(e){throw s.url(r),s.$$state=o,e}}function afterLocationChange(e,t){n.$broadcast("$locationChangeSuccess",s.absUrl(),e,s.$$state,t)}var s,l,c,d=i.baseHref(),p=i.url();if(t.enabled){if(!d&&t.requireBase)throw De("nobase","$location in HTML5 mode requires a <base> tag to be present!");c=serverBase(p)+(d||"/"),l=r.history?LocationHtml5Url:LocationHashbangInHtml5Url}else c=stripHash(p),l=LocationHashbangUrl;var h=stripFile(c);s=new l(c,h,"#"+e),s.$$parseLinkUrl(p,p),s.$$state=i.state();var f=/^\s*(javascript|mailto):/i;o.on("click",function(e){var r=t.rewriteLinks;if(r&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!==e.which&&2!==e.button){for(var l=u(e.target);"a"!==nodeName_(l[0]);)if(l[0]===o[0]||!(l=l.parent())[0])return;if(!isString(r)||!isUndefined(l.attr(r))){var c=l.prop("href"),d=l.attr("href")||l.attr("xlink:href");isObject(c)&&"[object SVGAnimatedString]"===c.toString()&&(c=urlResolve(c.animVal).href),f.test(c)||!c||l.attr("target")||e.isDefaultPrevented()||s.$$parseLinkUrl(c,d)&&(e.preventDefault(),s.absUrl()!==i.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}}),trimEmptyHash(s.absUrl())!==trimEmptyHash(p)&&i.url(s.absUrl(),!0);var m=!0;return i.onUrlChange(function(e,t){if(!startsWith(e,h))return void(a.location.href=e);n.$evalAsync(function(){var i,r=s.absUrl(),o=s.$$state;e=trimEmptyHash(e),s.$$parse(e),s.$$state=t,i=n.$broadcast("$locationChangeStart",e,r,t,o).defaultPrevented,s.absUrl()===e&&(i?(s.$$parse(r),s.$$state=o,setBrowserUrlWithFallback(r,!1,o)):(m=!1,afterLocationChange(r,o)))}),n.$$phase||n.$digest()}),n.$watch(function(){if(m||s.$$urlUpdatedByLocation){s.$$urlUpdatedByLocation=!1;var e=trimEmptyHash(i.url()),t=trimEmptyHash(s.absUrl()),o=i.state(),a=s.$$replace,l=e!==t||s.$$html5&&r.history&&o!==s.$$state;(m||l)&&(m=!1,n.$evalAsync(function(){var t=s.absUrl(),i=n.$broadcast("$locationChangeStart",t,e,s.$$state,o).defaultPrevented;s.absUrl()===t&&(i?(s.$$parse(e),s.$$state=o):(l&&setBrowserUrlWithFallback(t,a,o===s.$$state?null:s.$$state),afterLocationChange(e,o)))}))}s.$$replace=!1}),s}]}function $LogProvider(){var e=!0,t=this;this.debugEnabled=function(t){return isDefined(t)?(e=t,this):e},this.$get=["$window",function(n){function formatError(e){return isError(e)&&(e.stack&&i?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function consoleLog(e){var t=n.console||{},i=t[e]||t.log||noop;return function(){var e=[];return forEach(arguments,function(t){e.push(formatError(t))}),Function.prototype.apply.call(i,t,e)}}var i=c||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:consoleLog("log"),info:consoleLog("info"),warn:consoleLog("warn"),error:consoleLog("error"),debug:function(){var n=consoleLog("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function getStringValue(e){return e+""}function ifDefined(e,t){return void 0!==e?e:t}function plusFn(e,t){return void 0===e?t:void 0===t?e:e+t}function isStateless(e,t){return!e(t).$stateful}function isPure(e,t){switch(e.type){case Ue.MemberExpression:if(e.computed)return!1;break;case Ue.UnaryExpression:return Ve;case Ue.BinaryExpression:return"+"!==e.operator&&Ve;case Ue.CallExpression:return!1}return void 0===t?We:t}function findConstantAndWatchExpressions(e,t,n){var i,r,o,a=e.isPure=isPure(e,n);switch(e.type){case Ue.Program:i=!0,forEach(e.body,function(e){findConstantAndWatchExpressions(e.expression,t,a),i=i&&e.expression.constant}),e.constant=i;break;case Ue.Literal:e.constant=!0,e.toWatch=[];break;case Ue.UnaryExpression:findConstantAndWatchExpressions(e.argument,t,a),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case Ue.BinaryExpression:findConstantAndWatchExpressions(e.left,t,a),findConstantAndWatchExpressions(e.right,t,a),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case Ue.LogicalExpression:findConstantAndWatchExpressions(e.left,t,a),findConstantAndWatchExpressions(e.right,t,a),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case Ue.ConditionalExpression:findConstantAndWatchExpressions(e.test,t,a),findConstantAndWatchExpressions(e.alternate,t,a),findConstantAndWatchExpressions(e.consequent,t,a),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case Ue.Identifier:e.constant=!1,e.toWatch=[e];break;case Ue.MemberExpression:findConstantAndWatchExpressions(e.object,t,a),e.computed&&findConstantAndWatchExpressions(e.property,t,a),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=e.constant?[]:[e];break;case Ue.CallExpression:o=!!e.filter&&isStateless(t,e.callee.name),i=o,r=[],forEach(e.arguments,function(e){findConstantAndWatchExpressions(e,t,a),i=i&&e.constant,r.push.apply(r,e.toWatch)}),e.constant=i,e.toWatch=o?r:[e];break;case Ue.AssignmentExpression:findConstantAndWatchExpressions(e.left,t,a),findConstantAndWatchExpressions(e.right,t,a),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case Ue.ArrayExpression:i=!0,r=[],forEach(e.elements,function(e){findConstantAndWatchExpressions(e,t,a),i=i&&e.constant,r.push.apply(r,e.toWatch)}),e.constant=i,e.toWatch=r;break;case Ue.ObjectExpression:i=!0,r=[],forEach(e.properties,function(e){findConstantAndWatchExpressions(e.value,t,a),i=i&&e.value.constant,r.push.apply(r,e.value.toWatch),e.computed&&(findConstantAndWatchExpressions(e.key,t,!1),i=i&&e.key.constant,r.push.apply(r,e.key.toWatch))}),e.constant=i,e.toWatch=r;break;case Ue.ThisExpression:case Ue.LocalsExpression:e.constant=!1,e.toWatch=[]}}function getInputs(e){if(1===e.length){var t=e[0].expression,n=t.toWatch;return 1!==n.length?n:n[0]!==t?n:void 0}}function isAssignable(e){return e.type===Ue.Identifier||e.type===Ue.MemberExpression}function assignableAST(e){if(1===e.body.length&&isAssignable(e.body[0].expression))return{type:Ue.AssignmentExpression,left:e.body[0].expression,right:{type:Ue.NGValueParameter},operator:"="}}function isLiteral(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===Ue.Literal||e.body[0].expression.type===Ue.ArrayExpression||e.body[0].expression.type===Ue.ObjectExpression)}function isConstant(e){return e.constant}function ASTCompiler(e){this.$filter=e}function ASTInterpreter(e){this.$filter=e}function Parser(e,t,n){this.ast=new Ue(e,n),this.astCompiler=n.csp?new ASTInterpreter(t):new ASTCompiler(t)}function getValueOf(e){return isFunction(e.valueOf)?e.valueOf():je.call(e)}function $ParseProvider(){var e,t,n=createMap(),i={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(e,t){i[e]=t},this.setIdentifierFns=function(n,i){return e=n,t=i,this},this.$get=["$filter",function(r){function $parse(e,t){var i,o,s;switch(typeof e){case"string":if(e=e.trim(),s=e,!(i=n[s])){":"===e.charAt(0)&&":"===e.charAt(1)&&(o=!0,e=e.substring(2));i=new Parser(new ze(a),r,a).parse(e),i.constant?i.$$watchDelegate=constantWatchDelegate:o?i.$$watchDelegate=i.literal?oneTimeLiteralWatchDelegate:oneTimeWatchDelegate:i.inputs&&(i.$$watchDelegate=inputsWatchDelegate),n[s]=i}return addInterceptor(i,t);case"function":return addInterceptor(e,t);default:return addInterceptor(noop,t)}}function expressionInputDirtyCheck(e,t,n){return null==e||null==t?e===t:!("object"==typeof e&&"object"==typeof(e=getValueOf(e))&&!n)&&(e===t||e!==e&&t!==t)}function inputsWatchDelegate(e,t,n,i,r){var o,a=i.inputs;if(1===a.length){var s=expressionInputDirtyCheck;return a=a[0],e.$watch(function(e){var t=a(e);return expressionInputDirtyCheck(t,s,a.isPure)||(o=i(e,void 0,void 0,[t]),s=t&&getValueOf(t)),o},t,n,r)}for(var l=[],c=[],u=0,d=a.length;u<d;u++)l[u]=expressionInputDirtyCheck,c[u]=null;return e.$watch(function(e){for(var t=!1,n=0,r=a.length;n<r;n++){var s=a[n](e);(t||(t=!expressionInputDirtyCheck(s,l[n],a[n].isPure)))&&(c[n]=s,l[n]=s&&getValueOf(s))}return t&&(o=i(e,void 0,void 0,c)),o},t,n,r)}function oneTimeWatchDelegate(e,t,n,i,r){function oneTimeWatch(e){return i(e)}function oneTimeListener(e,n,i){a=e,isFunction(t)&&t(e,n,i),isDefined(e)&&i.$$postDigest(function(){isDefined(a)&&o()})}var o,a;return o=i.inputs?inputsWatchDelegate(e,oneTimeListener,n,i,r):e.$watch(oneTimeWatch,oneTimeListener,n)}function oneTimeLiteralWatchDelegate(e,t,n,i){function isAllDefined(e){var t=!0;return forEach(e,function(e){isDefined(e)||(t=!1)}),t}var r,o;return r=e.$watch(function(e){return i(e)},function(e,n,i){o=e,isFunction(t)&&t(e,n,i),isAllDefined(e)&&i.$$postDigest(function(){isAllDefined(o)&&r()})},n)}function constantWatchDelegate(e,t,n,i){var r=e.$watch(function(e){return r(),i(e)},t,n);return r}function addInterceptor(e,t){if(!t)return e;var n=e.$$watchDelegate,i=!1,r=n!==oneTimeLiteralWatchDelegate&&n!==oneTimeWatchDelegate,o=r?function(n,r,o,a){var s=i&&a?a[0]:e(n,r,o,a);return t(s,n,r)}:function(n,i,r,o){var a=e(n,i,r,o),s=t(a,n,i);return isDefined(a)?s:a};return i=!e.inputs,n&&n!==inputsWatchDelegate?(o.$$watchDelegate=n,o.inputs=e.inputs):t.$stateful||(o.$$watchDelegate=inputsWatchDelegate,o.inputs=e.inputs?e.inputs:[e]),o.inputs&&(o.inputs=o.inputs.map(function(e){return e.isPure===We?function(t){return e(t)}:e})),o}var o=x().noUnsafeEval,a={csp:o,literals:copy(i),isIdentifierStart:isFunction(e)&&e,isIdentifierContinue:isFunction(t)&&t};return $parse}]}function $QProvider(){var e=!0;this.$get=["$rootScope","$exceptionHandler",function(t,n){return qFactory(function(e){t.$evalAsync(e)},n,e)}],this.errorOnUnhandledRejections=function(t){return isDefined(t)?(e=t,this):e}}function $$QProvider(){var e=!0;this.$get=["$browser","$exceptionHandler",function(t,n){return qFactory(function(e){t.defer(e)},n,e)}],this.errorOnUnhandledRejections=function(t){return isDefined(t)?(e=t,this):e}}function qFactory(e,t,n){function defer(){return new Deferred}function Deferred(){var e=this.promise=new Promise;this.resolve=function(t){resolvePromise(e,t)},this.reject=function(t){rejectPromise(e,t)},this.notify=function(t){notifyPromise(e,t)}}function Promise(){this.$$state={status:0}}function processQueue(t){var i,o,a;a=t.pending,t.processScheduled=!1,t.pending=void 0;try{for(var s=0,l=a.length;s<l;++s){markQStateExceptionHandled(t),o=a[s][0],i=a[s][t.status];try{isFunction(i)?resolvePromise(o,i(t.value)):1===t.status?resolvePromise(o,t.value):rejectPromise(o,t.value)}catch(e){rejectPromise(o,e)}}}finally{--r,n&&0===r&&e(processChecks)}}function processChecks(){for(;!r&&o.length;){var e=o.shift();if(!isStateExceptionHandled(e)){markQStateExceptionHandled(e);var n="Possibly unhandled rejection: "+toDebugString(e.value);isError(e.value)?t(e.value,n):t(n)}}}function scheduleProcessQueue(t){!n||t.pending||2!==t.status||isStateExceptionHandled(t)||(0===r&&0===o.length&&e(processChecks),o.push(t)),!t.processScheduled&&t.pending&&(t.processScheduled=!0,++r,e(function(){processQueue(t)}))}function resolvePromise(e,t){e.$$state.status||(t===e?$$reject(e,i("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):$$resolve(e,t))}function $$resolve(e,t){function doResolve(t){i||(i=!0,$$resolve(e,t))}function doReject(t){i||(i=!0,$$reject(e,t))}function doNotify(t){notifyPromise(e,t)}var n,i=!1;try{(isObject(t)||isFunction(t))&&(n=t.then),isFunction(n)?(e.$$state.status=-1,n.call(t,doResolve,doReject,doNotify)):(e.$$state.value=t,e.$$state.status=1,scheduleProcessQueue(e.$$state))}catch(e){doReject(e)}}function rejectPromise(e,t){e.$$state.status||$$reject(e,t)}function $$reject(e,t){e.$$state.value=t,e.$$state.status=2,scheduleProcessQueue(e.$$state)}function notifyPromise(n,i){var r=n.$$state.pending;n.$$state.status<=0&&r&&r.length&&e(function(){for(var e,n,o=0,a=r.length;o<a;o++){n=r[o][0],e=r[o][3];try{notifyPromise(n,isFunction(e)?e(i):i)}catch(e){t(e)}}})}function reject(e){var t=new Promise;return rejectPromise(t,e),t}function handleCallback(e,t,n){var i=null;try{isFunction(n)&&(i=n())}catch(e){return reject(e)}return isPromiseLike(i)?i.then(function(){return t(e)},reject):t(e)}function when(e,t,n,i){var r=new Promise;return resolvePromise(r,e),r.then(t,n,i)}function all(e){var t=new Promise,n=0,i=T(e)?[]:{};return forEach(e,function(e,r){n++,when(e).then(function(e){i[r]=e,--n||resolvePromise(t,i)},function(e){rejectPromise(t,e)})}),0===n&&resolvePromise(t,i),t}function race(e){var t=defer();return forEach(e,function(e){when(e).then(t.resolve,t.reject)}),t.promise}function $Q(e){function resolveFn(e){resolvePromise(t,e)}function rejectFn(e){rejectPromise(t,e)}if(!isFunction(e))throw i("norslvr","Expected resolverFn, got '{0}'",e);var t=new Promise;return e(resolveFn,rejectFn),t}var i=minErr("$q",TypeError),r=0,o=[];extend(Promise.prototype,{then:function(e,t,n){if(isUndefined(e)&&isUndefined(t)&&isUndefined(n))return this;var i=new Promise;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,e,t,n]),this.$$state.status>0&&scheduleProcessQueue(this.$$state),i},catch:function(e){return this.then(null,e)},finally:function(e,t){return this.then(function(t){return handleCallback(t,a,e)},function(t){return handleCallback(t,reject,e)},t)}});var a=when;return $Q.prototype=Promise.prototype,$Q.defer=defer,$Q.reject=reject,$Q.when=when,$Q.resolve=a,$Q.all=all,$Q.race=race,$Q}function isStateExceptionHandled(e){return!!e.pur}function markQStateExceptionHandled(e){e.pur=!0}function markQExceptionHandled(e){markQStateExceptionHandled(e.$$state)}function $$RAFProvider(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,i=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,r=!!n,o=r?function(e){var t=n(e);return function(){i(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return o.supported=r,o}]}function $RootScopeProvider(){function createChildScopeClass(e){function ChildScope(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=nextUid(),this.$$ChildScope=null}return ChildScope.prototype=e,ChildScope}var e=10,t=minErr("$rootScope"),n=null,i=null;this.digestTtl=function(t){return arguments.length&&(e=t),e},this.$get=["$exceptionHandler","$parse","$browser",function(o,a,s){function destroyChildScope(e){e.currentScope.$$destroyed=!0}function cleanUpScope(e){9===c&&(e.$$childHead&&cleanUpScope(e.$$childHead),e.$$nextSibling&&cleanUpScope(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}function Scope(){this.$id=nextUid(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function beginPhase(e){if(l.$$phase)throw t("inprog","{0} already in progress",l.$$phase);l.$$phase=e}function clearPhase(){l.$$phase=null}function incrementWatchersCount(e,t){do{e.$$watchersCount+=t}while(e=e.$parent)}function decrementListenerCount(e,t,n){do{e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n]}while(e=e.$parent)}function initWatchVal(){}function flushApplyAsync(){for(;p.length;)try{p.shift()()}catch(e){o(e)}i=null}function scheduleApplyAsync(){null===i&&(i=s.defer(function(){l.$apply(flushApplyAsync)}))}Scope.prototype={constructor:Scope,$new:function(e,t){var n;return t=t||this,e?(n=new Scope,n.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=createChildScopeClass(this)),n=new this.$$ChildScope),n.$parent=t,n.$$prevSibling=t.$$childTail,t.$$childHead?(t.$$childTail.$$nextSibling=n,t.$$childTail=n):t.$$childHead=t.$$childTail=n,(e||t!==this)&&n.$on("$destroy",destroyChildScope),n},$watch:function(e,t,i,r){var o=a(e);if(o.$$watchDelegate)return o.$$watchDelegate(this,t,i,o,e);var s=this,l=s.$$watchers,c={fn:t,last:initWatchVal,get:o,exp:r||e,eq:!!i};return n=null,isFunction(t)||(c.fn=noop),l||(l=s.$$watchers=[],l.$$digestWatchIndex=-1),l.unshift(c),l.$$digestWatchIndex++,incrementWatchersCount(this,1),function(){var e=arrayRemove(l,c);e>=0&&(incrementWatchersCount(s,-1),e<l.$$digestWatchIndex&&l.$$digestWatchIndex--),n=null}},$watchGroup:function(e,t){function watchGroupAction(){a=!1,s?(s=!1,t(i,i,o)):t(i,n,o)}var n=new Array(e.length),i=new Array(e.length),r=[],o=this,a=!1,s=!0;if(!e.length){var l=!0;return o.$evalAsync(function(){l&&t(i,i,o)}),function(){l=!1}}return 1===e.length?this.$watch(e[0],function(e,r,o){i[0]=e,n[0]=r,t(i,e===r?i:n,o)}):(forEach(e,function(e,t){var s=o.$watch(e,function(e,r){i[t]=e,n[t]=r,a||(a=!0,o.$evalAsync(watchGroupAction))});r.push(s)}),function(){for(;r.length;)r.shift()()})},$watchCollection:function(e,t){function $watchCollectionInterceptor(e){n=e;var t,o,a,s;if(!isUndefined(n)){if(isObject(n))if(isArrayLike(n)){i!==d&&(i=d,f=i.length=0,c++),t=n.length,f!==t&&(c++,i.length=f=t);for(var l=0;l<t;l++)s=i[l],a=n[l],s!==s&&a!==a||s===a||(c++,i[l]=a)}else{i!==p&&(i=p={},f=0,c++),t=0;for(o in n)r.call(n,o)&&(t++,a=n[o],s=i[o],o in i?s!==s&&a!==a||s===a||(c++,i[o]=a):(f++,i[o]=a,c++));if(f>t){c++;for(o in i)r.call(n,o)||(f--,delete i[o])}}else i!==n&&(i=n,c++);return c}}function $watchCollectionAction(){if(h?(h=!1,t(n,n,s)):t(n,o,s),l)if(isObject(n))if(isArrayLike(n)){o=new Array(n.length);for(var e=0;e<n.length;e++)o[e]=n[e]}else{o={};for(var i in n)r.call(n,i)&&(o[i]=n[i])}else o=n}$watchCollectionInterceptor.$stateful=!0;var n,i,o,s=this,l=t.length>1,c=0,u=a(e,$watchCollectionInterceptor),d=[],p={},h=!0,f=0;return this.$watch(u,$watchCollectionAction)},$digest:function(){var r,a,c,p,f,m,g,v,y,w,b,T=e,E=this,O=[];beginPhase("$digest"),s.$$checkUrlChange(),this===l&&null!==i&&(s.defer.cancel(i),flushApplyAsync()),n=null;do{g=!1,y=E;for(var I=0;I<u.length;I++){try{b=u[I],p=b.fn,p(b.scope,b.locals)}catch(e){o(e)}n=null}u.length=0;e:do{if(m=y.$$watchers)for(m.$$digestWatchIndex=m.length;m.$$digestWatchIndex--;)try{if(r=m[m.$$digestWatchIndex])if(f=r.get,(a=f(y))===(c=r.last)||(r.eq?equals(a,c):S(a)&&S(c))){if(r===n){g=!1;break e}}else g=!0,n=r,r.last=r.eq?copy(a,null):a,p=r.fn,p(a,c===initWatchVal?a:c,y),T<5&&(w=4-T,O[w]||(O[w]=[]),O[w].push({msg:isFunction(r.exp)?"fn: "+(r.exp.name||r.exp.toString()):r.exp,newVal:a,oldVal:c}))}catch(e){o(e)}if(!(v=y.$$watchersCount&&y.$$childHead||y!==E&&y.$$nextSibling))for(;y!==E&&!(v=y.$$nextSibling);)y=y.$parent}while(y=v);if((g||u.length)&&!T--)throw clearPhase(),t("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,O)}while(g||u.length);for(clearPhase();h<d.length;)try{d[h++]()}catch(e){o(e)}d.length=h=0,s.$$checkUrlChange()},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===l&&s.$$applicationDestroyed(),incrementWatchersCount(this,-this.$$watchersCount);for(var t in this.$$listenerCount)decrementListenerCount(this,this.$$listenerCount[t],t);e&&e.$$childHead===this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail===this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=noop,this.$on=this.$watch=this.$watchGroup=function(){return noop},this.$$listeners={},this.$$nextSibling=null,cleanUpScope(this)}},$eval:function(e,t){return a(e)(this,t)},$evalAsync:function(e,t){l.$$phase||u.length||s.defer(function(){u.length&&l.$digest()}),u.push({scope:this,fn:a(e),locals:t})},$$postDigest:function(e){d.push(e)},$apply:function(e){try{beginPhase("$apply");try{return this.$eval(e)}finally{clearPhase()}}catch(e){o(e)}finally{try{l.$digest()}catch(e){throw o(e),e}}},$applyAsync:function(e){function $applyAsyncExpression(){t.$eval(e)}var t=this;e&&p.push($applyAsyncExpression),e=a(e),scheduleApplyAsync()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var i=this;do{i.$$listenerCount[e]||(i.$$listenerCount[e]=0),i.$$listenerCount[e]++}while(i=i.$parent);var r=this;return function(){var i=n.indexOf(t);-1!==i&&(n[i]=null,decrementListenerCount(r,1,e))}},$emit:function(e,t){var n,i,r,a=[],s=this,l=!1,c={name:e,targetScope:s,stopPropagation:function(){l=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},u=concat([c],arguments,1);do{for(n=s.$$listeners[e]||a,c.currentScope=s,i=0,r=n.length;i<r;i++)if(n[i])try{n[i].apply(null,u)}catch(e){o(e)}else n.splice(i,1),i--,r--;if(l)return c.currentScope=null,c;s=s.$parent}while(s);return c.currentScope=null,c},$broadcast:function(e,t){var n=this,i=n,r=n,a={name:e,targetScope:n,preventDefault:function(){a.defaultPrevented=!0},defaultPrevented:!1};if(!n.$$listenerCount[e])return a;for(var s,l,c,u=concat([a],arguments,1);i=r;){for(a.currentScope=i,s=i.$$listeners[e]||[],l=0,c=s.length;l<c;l++)if(s[l])try{s[l].apply(null,u)}catch(e){o(e)}else s.splice(l,1),l--,c--;if(!(r=i.$$listenerCount[e]&&i.$$childHead||i!==n&&i.$$nextSibling))for(;i!==n&&!(r=i.$$nextSibling);)i=i.$parent}return a.currentScope=null,a}};var l=new Scope,u=l.$$asyncQueue=[],d=l.$$postDigestQueue=[],p=l.$$applyAsyncQueue=[],h=0;return l}]}function $$SanitizeUriProvider(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return isDefined(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return isDefined(e)?(t=e,this):t},this.$get=function(){return function(n,i){var r,o=i?t:e;return r=urlResolve(n).href,""===r||r.match(o)?n:"unsafe:"+r}}}function snakeToCamel(e){return e.replace(Ye,fnCamelCaseReplace)}function adjustMatcher(e){if("self"===e)return e;if(isString(e)){if(e.indexOf("***")>-1)throw Ge("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=I(e).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+e+"$")}if(isRegExp(e))return new RegExp("^"+e.source+"$");throw Ge("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function adjustMatchers(e){var t=[];return isDefined(e)&&forEach(e,function(e){t.push(adjustMatcher(e))}),t}function $SceDelegateProvider(){this.SCE_CONTEXTS=qe;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=adjustMatchers(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=adjustMatchers(e)),t},this.$get=["$injector",function(n){function matchUrl(e,t){return"self"===e?urlIsSameOrigin(t):!!e.exec(t.href)}function isResourceUrlAllowedByPolicy(n){var i,r,o=urlResolve(n.toString()),a=!1;for(i=0,r=e.length;i<r;i++)if(matchUrl(e[i],o)){a=!0;break}if(a)for(i=0,r=t.length;i<r;i++)if(matchUrl(t[i],o)){a=!1;break}return a}function generateHolderType(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function trustAs(e,t){var n=o.hasOwnProperty(e)?o[e]:null;if(!n)throw Ge("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||isUndefined(t)||""===t)return t;if("string"!=typeof t)throw Ge("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)}function valueOf(e){return e instanceof r?e.$$unwrapTrustedValue():e}function getTrusted(e,t){if(null===t||isUndefined(t)||""===t)return t;var n=o.hasOwnProperty(e)?o[e]:null;if(n&&t instanceof n)return t.$$unwrapTrustedValue();if(e===qe.RESOURCE_URL){if(isResourceUrlAllowedByPolicy(t))return t;throw Ge("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===qe.HTML)return i(t);throw Ge("unsafe","Attempting to use an unsafe value in a safe context.")}var i=function(e){throw Ge("unsafe","Attempting to use an unsafe value in a safe context.")};n.has("$sanitize")&&(i=n.get("$sanitize"));var r=generateHolderType(),o={};return o[qe.HTML]=generateHolderType(r),o[qe.CSS]=generateHolderType(r),o[qe.URL]=generateHolderType(r),o[qe.JS]=generateHolderType(r),o[qe.RESOURCE_URL]=generateHolderType(o[qe.URL]),{trustAs:trustAs,getTrusted:getTrusted,valueOf:valueOf}}]}function $SceProvider(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&c<8)throw Ge("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var i=shallowCopy(qe);i.isEnabled=function(){return e},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,e||(i.trustAs=i.getTrusted=function(e,t){return t},i.valueOf=identity),i.parseAs=function(e,n){var r=t(n);return r.literal&&r.constant?r:t(n,function(t){return i.getTrusted(e,t)})};var r=i.parseAs,a=i.getTrusted,s=i.trustAs;return forEach(qe,function(e,t){var n=o(t);i[snakeToCamel("parse_as_"+n)]=function(t){return r(e,t)},i[snakeToCamel("get_trusted_"+n)]=function(t){return a(e,t)},i[snakeToCamel("trust_as_"+n)]=function(t){return s(e,t)}}),i}]}function $SnifferProvider(){this.$get=["$window","$document",function(e,t){var n={},i=e.nw&&e.nw.process,r=!i&&e.chrome&&(e.chrome.app&&e.chrome.app.runtime||!e.chrome.app&&e.chrome.runtime&&e.chrome.runtime.id),a=!r&&e.history&&e.history.pushState,s=toInt((/android (\d+)/.exec(o((e.navigator||{}).userAgent))||[])[1]),l=/Boxee/i.test((e.navigator||{}).userAgent),u=t[0]||{},d=u.body&&u.body.style,p=!1,h=!1;return d&&(p=!!("transition"in d||"webkitTransition"in d),h=!!("animation"in d||"webkitAnimation"in d)),{history:!(!a||s<4||l),hasEvent:function(e){if("input"===e&&c)return!1;if(isUndefined(n[e])){var t=u.createElement("div");n[e]="on"+e in t}return n[e]},csp:x(),transitions:p,animations:h,android:s}}]}function $TemplateRequestProvider(){var e;this.httpOptions=function(t){return t?(e=t,this):e},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(t,n,i,r,o){function handleRequestFn(a,s){function handleError(e){return s||(e=Xe("tpload","Failed to load template: {0} (HTTP status: {1} {2})",a,e.status,e.statusText),t(e)),r.reject(e)}handleRequestFn.totalPendingRequests++,isString(a)&&!isUndefined(n.get(a))||(a=o.getTrustedResourceUrl(a));var l=i.defaults&&i.defaults.transformResponse;return T(l)?l=l.filter(function(e){return e!==defaultHttpResponseTransform}):l===defaultHttpResponseTransform&&(l=null),i.get(a,extend({cache:n,transformResponse:l},e)).finally(function(){handleRequestFn.totalPendingRequests--}).then(function(e){return n.put(a,e.data),e.data},handleError)}return handleRequestFn.totalPendingRequests=0,handleRequestFn}]}function $$TestabilityProvider(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var i={};return i.findBindings=function(e,t,n){var i=e.getElementsByClassName("ng-binding"),r=[];return forEach(i,function(e){var i=w.element(e).data("$binding");i&&forEach(i,function(i){if(n){new RegExp("(^|\\s)"+I(t)+"(\\s|\\||$)").test(i)&&r.push(e)}else-1!==i.indexOf(t)&&r.push(e)})}),r},i.findModels=function(e,t,n){for(var i=["ng-","data-ng-","ng\\:"],r=0;r<i.length;++r){var o=n?"=":"*=",a="["+i[r]+"model"+o+'"'+t+'"]',s=e.querySelectorAll(a);if(s.length)return s}},i.getLocation=function(){return n.url()},i.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},i.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},i}]}function $TimeoutProvider(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,i,r){function timeout(a,s,l){isFunction(a)||(l=s,s=a,a=noop);var c,u=sliceArgs(arguments,3),d=isDefined(l)&&!l,p=(d?i:n).defer(),h=p.promise;return c=t.defer(function(){try{p.resolve(a.apply(null,u))}catch(e){p.reject(e),r(e)}finally{delete o[h.$$timeoutId]}d||e.$apply()},s),h.$$timeoutId=c,o[c]=p,h}var o={};return timeout.cancel=function(e){return!!(e&&e.$$timeoutId in o)&&(markQExceptionHandled(o[e.$$timeoutId].promise),o[e.$$timeoutId].reject("canceled"),delete o[e.$$timeoutId],t.defer.cancel(e.$$timeoutId))},timeout}]}function urlResolve(e){var t=e;return c&&(Ze.setAttribute("href",t),t=Ze.href),Ze.setAttribute("href",t),{href:Ze.href,protocol:Ze.protocol?Ze.protocol.replace(/:$/,""):"",host:Ze.host,search:Ze.search?Ze.search.replace(/^\?/,""):"",hash:Ze.hash?Ze.hash.replace(/^#/,""):"",hostname:Ze.hostname,port:Ze.port,pathname:"/"===Ze.pathname.charAt(0)?Ze.pathname:"/"+Ze.pathname}}function urlIsSameOrigin(e){var t=isString(e)?urlResolve(e):e;return t.protocol===Ke.protocol&&t.host===Ke.host}function $WindowProvider(){this.$get=valueFn(e)}function $$CookieReader(e){function safeGetCookie(e){try{return e.cookie||""}catch(e){return""}}function safeDecodeURIComponent(e){try{return decodeURIComponent(e)}catch(t){return e}}var t=e[0]||{},n={},i="";return function(){var e,r,o,a,s,l=safeGetCookie(t);if(l!==i)for(i=l,e=i.split("; "),n={},o=0;o<e.length;o++)r=e[o],(a=r.indexOf("="))>0&&(s=safeDecodeURIComponent(r.substring(0,a)),isUndefined(n[s])&&(n[s]=safeDecodeURIComponent(r.substring(a+1))));return n}}function $$CookieReaderProvider(){this.$get=$$CookieReader}function $FilterProvider(e){function register(n,i){if(isObject(n)){var r={};return forEach(n,function(e,t){r[t]=register(t,e)}),r}return e.factory(n+t,i)}var t="Filter";this.register=register,this.$get=["$injector",function(e){return function(n){return e.get(n+t)}}],register("currency",currencyFilter),register("date",dateFilter),register("filter",filterFilter),register("json",jsonFilter),register("limitTo",limitToFilter),register("lowercase",rt),register("number",numberFilter),register("orderBy",orderByFilter),register("uppercase",ot)}function filterFilter(){return function(e,t,n,i){if(!isArrayLike(e)){if(null==e)return e;throw minErr("filter")("notarray","Expected array but received: {0}",e)}i=i||"$";var r,o,a=getTypeForFilter(t);switch(a){case"function":r=t;break;case"boolean":case"null":case"number":case"string":o=!0;case"object":r=createPredicateFn(t,n,i,o);break;default:return e}return Array.prototype.filter.call(e,r)}}function createPredicateFn(e,t,n,i){var r=isObject(e)&&n in e;return!0===t?t=equals:isFunction(t)||(t=function(e,t){return!isUndefined(e)&&(null===e||null===t?e===t:!(isObject(t)||isObject(e)&&!hasCustomToString(e))&&(e=o(""+e),t=o(""+t),-1!==e.indexOf(t)))}),function(o){return r&&!isObject(o)?deepCompare(o,e[n],t,n,!1):deepCompare(o,e,t,n,i)}}function deepCompare(e,t,n,i,r,o){var a=getTypeForFilter(e),s=getTypeForFilter(t);if("string"===s&&"!"===t.charAt(0))return!deepCompare(e,t.substring(1),n,i,r);if(T(e))return e.some(function(e){return deepCompare(e,t,n,i,r)});switch(a){case"object":var l;if(r){for(l in e)if(l.charAt&&"$"!==l.charAt(0)&&deepCompare(e[l],t,n,i,!0))return!0;return!o&&deepCompare(e,t,n,i,!1)}if("object"===s){for(l in t){var c=t[l];if(!isFunction(c)&&!isUndefined(c)){var u=l===i;if(!deepCompare(u?e:e[l],c,n,i,u,u))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function getTypeForFilter(e){return null===e?"null":typeof e}function currencyFilter(e){var t=e.NUMBER_FORMATS;return function(e,n,i){return isUndefined(n)&&(n=t.CURRENCY_SYM),isUndefined(i)&&(i=t.PATTERNS[1].maxFrac),null==e?e:formatNumber(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,i).replace(/\u00A4/g,n)}}function numberFilter(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:formatNumber(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function parse(e){var t,n,i,r,o,a=0;for((n=e.indexOf(Je))>-1&&(e=e.replace(Je,"")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charAt(i)===et;i++);if(i===(o=e.length))t=[0],n=1;else{for(o--;e.charAt(o)===et;)o--;for(n-=i,t=[],r=0;i<=o;i++,r++)t[r]=+e.charAt(i)}return n>Qe&&(t=t.splice(0,Qe-1),a=n-1,n=1),{d:t,e:a,i:n}}function roundNumber(e,t,n,i){var r=e.d,o=r.length-e.i;t=isUndefined(t)?Math.min(Math.max(n,o),i):+t;var a=t+e.i,s=r[a];if(a>0){r.splice(Math.max(e.i,a));for(var l=a;l<r.length;l++)r[l]=0}else{o=Math.max(0,o),e.i=1,r.length=Math.max(1,a=t+1),r[0]=0;for(var c=1;c<a;c++)r[c]=0}if(s>=5)if(a-1<0){for(var u=0;u>a;u--)r.unshift(0),e.i++;r.unshift(1),e.i++}else r[a-1]++;for(;o<Math.max(0,t);o++)r.push(0);var d=r.reduceRight(function(e,t,n,i){return t+=e,i[n]=t%10,Math.floor(t/10)},0);d&&(r.unshift(d),e.i++)}function formatNumber(e,t,n,i,r){if(!isString(e)&&!isNumber(e)||isNaN(e))return"";var o,a=!isFinite(e),s=!1,l=Math.abs(e)+"",c="";if(a)c="∞";else{o=parse(l),roundNumber(o,r,t.minFrac,t.maxFrac);var u=o.d,d=o.i,p=o.e,h=[];for(s=u.reduce(function(e,t){return e&&!t},!0);d<0;)u.unshift(0),d++;d>0?h=u.splice(d,u.length):(h=u,u=[0]);var f=[];for(u.length>=t.lgSize&&f.unshift(u.splice(-t.lgSize,u.length).join(""));u.length>t.gSize;)f.unshift(u.splice(-t.gSize,u.length).join(""));u.length&&f.unshift(u.join("")),c=f.join(n),h.length&&(c+=i+h.join("")),p&&(c+="e+"+p)}return e<0&&!s?t.negPre+c+t.negSuf:t.posPre+c+t.posSuf}function padNumber(e,t,n,i){var r="";for((e<0||i&&e<=0)&&(i?e=1-e:(e=-e,r="-")),e=""+e;e.length<t;)e=et+e;return n&&(e=e.substr(e.length-t)),r+e}function dateGetter(e,t,n,i,r){return n=n||0,function(o){var a=o["get"+e]();return(n>0||a>-n)&&(a+=n),0===a&&-12===n&&(a=12),padNumber(a,t,i,r)}}function dateStrGetter(e,t,n){return function(i,r){var o=i["get"+e]();return r[a((n?"STANDALONE":"")+(t?"SHORT":"")+e)][o]}}function timeZoneGetter(e,t,n){var i=-1*n,r=i>=0?"+":"";return r+=padNumber(Math[i>0?"floor":"ceil"](i/60),2)+padNumber(Math.abs(i%60),2)}function getFirstThursdayOfYear(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function getThursdayThisWeek(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function weekGetter(e){return function(t){var n=getFirstThursdayOfYear(t.getFullYear()),i=getThursdayThisWeek(t),r=+i-+n;return padNumber(1+Math.round(r/6048e5),e)}}function ampmGetter(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function eraGetter(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function longEraGetter(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}function dateFilter(e){function jsonStringToDate(e){var n;if(n=e.match(t)){var i=new Date(0),r=0,o=0,a=n[8]?i.setUTCFullYear:i.setFullYear,s=n[8]?i.setUTCHours:i.setHours;n[9]&&(r=toInt(n[9]+n[10]),o=toInt(n[9]+n[11])),a.call(i,toInt(n[1]),toInt(n[2])-1,toInt(n[3]));var l=toInt(n[4]||0)-r,c=toInt(n[5]||0)-o,u=toInt(n[6]||0),d=Math.round(1e3*parseFloat("0."+(n[7]||0)));return s.call(i,l,c,u,d),i}return e}var t=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(t,n,i){var r,o,a="",s=[];if(n=n||"mediumDate",n=e.DATETIME_FORMATS[n]||n,isString(t)&&(t=it.test(t)?toInt(t):jsonStringToDate(t)),isNumber(t)&&(t=new Date(t)),!isDate(t)||!isFinite(t.getTime()))return t;for(;n;)o=nt.exec(n),o?(s=concat(s,o,1),n=s.pop()):(s.push(n),n=null);var l=t.getTimezoneOffset();return i&&(l=timezoneToOffset(i,l),t=convertTimezoneToLocal(t,i,!0)),forEach(s,function(n){r=tt[n],a+=r?r(t,e.DATETIME_FORMATS,l):"''"===n?"'":n.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),a}}function jsonFilter(){return function(e,t){return isUndefined(t)&&(t=2),toJson(e,t)}}function limitToFilter(){return function(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):toInt(t),S(t)?e:(isNumber(e)&&(e=e.toString()),isArrayLike(e)?(n=!n||isNaN(n)?0:toInt(n),n=n<0?Math.max(0,e.length+n):n,t>=0?sliceFn(e,n,n+t):0===n?sliceFn(e,t,e.length):sliceFn(e,Math.max(0,n+t),n)):e)}}function sliceFn(e,t,n){return isString(e)?e.slice(t,n):h.call(e,t,n)}function orderByFilter(e){function processPredicates(t){return t.map(function(t){var n=1,i=identity;if(isFunction(t))i=t;else if(isString(t)&&("+"!==t.charAt(0)&&"-"!==t.charAt(0)||(n="-"===t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(i=e(t),i.constant))){var r=i();i=function(e){return e[r]}}return{get:i,descending:n}})}function isPrimitive(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function objectValue(e){return isFunction(e.valueOf)&&(e=e.valueOf(),isPrimitive(e))?e:(hasCustomToString(e)&&(e=e.toString(),isPrimitive(e)),e)}function getPredicateValue(e,t){var n=typeof e;return null===e?(n="string",e="null"):"object"===n&&(e=objectValue(e)),{value:e,type:n,index:t}}function defaultCompare(e,t){var n=0,i=e.type,r=t.type;if(i===r){var o=e.value,a=t.value;"string"===i?(o=o.toLowerCase(),a=a.toLowerCase()):"object"===i&&(isObject(o)&&(o=e.index),isObject(a)&&(a=t.index)),o!==a&&(n=o<a?-1:1)}else n=i<r?-1:1;return n}return function(e,t,n,i){function getComparisonObject(e,t){return{value:e,tieBreaker:{value:t,type:"number",index:t},predicateValues:r.map(function(n){return getPredicateValue(n.get(e),t)})}}function doComparison(e,t){for(var n=0,i=r.length;n<i;n++){var s=a(e.predicateValues[n],t.predicateValues[n]);if(s)return s*r[n].descending*o}return(a(e.tieBreaker,t.tieBreaker)||defaultCompare(e.tieBreaker,t.tieBreaker))*o}if(null==e)return e;if(!isArrayLike(e))throw minErr("orderBy")("notarray","Expected array but received: {0}",e);T(t)||(t=[t]),0===t.length&&(t=["+"]);var r=processPredicates(t),o=n?-1:1,a=isFunction(i)?i:defaultCompare,s=Array.prototype.map.call(e,getComparisonObject);return s.sort(doComparison),e=s.map(function(e){return e.value})}}function ngDirective(e){return isFunction(e)&&(e={link:e}),e.restrict=e.restrict||"AC",valueFn(e)}function nullFormRenameControl(e,t){e.$name=t}function FormController(e,t,n,i,r){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=r(t.name||t.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=lt,this.$$element=e,this.$$animate=i,setupValidity(this)}function setupValidity(e){e.$$classCache={},e.$$classCache[Wt]=!(e.$$classCache[Vt]=e.$$element.hasClass(Vt))}function addSetValidityMethod(e){function createAndSet(e,t,i,r){e[t]||(e[t]={}),n(e[t],i,r)}function unsetAndCleanup(e,t,n,r){e[t]&&i(e[t],n,r),isObjectEmpty(e[t])&&(e[t]=void 0)}function cachedToggleClass(e,t,n){n&&!e.$$classCache[t]?(e.$$animate.addClass(e.$$element,t),e.$$classCache[t]=!0):!n&&e.$$classCache[t]&&(e.$$animate.removeClass(e.$$element,t),e.$$classCache[t]=!1)}function toggleValidationCss(e,t,n){t=t?"-"+snake_case(t,"-"):"",cachedToggleClass(e,Vt+t,!0===n),cachedToggleClass(e,Wt+t,!1===n)}var t=e.clazz,n=e.set,i=e.unset;t.prototype.$setValidity=function(e,t,r){isUndefined(t)?createAndSet(this,"$pending",e,r):unsetAndCleanup(this,"$pending",e,r),isBoolean(t)?t?(i(this.$error,e,r),n(this.$$success,e,r)):(n(this.$error,e,r),i(this.$$success,e,r)):(i(this.$error,e,r),i(this.$$success,e,r)),this.$pending?(cachedToggleClass(this,ct,!0),this.$valid=this.$invalid=void 0,toggleValidationCss(this,"",null)):(cachedToggleClass(this,ct,!1),this.$valid=isObjectEmpty(this.$error),this.$invalid=!this.$valid,toggleValidationCss(this,"",this.$valid));var o;o=this.$pending&&this.$pending[e]?void 0:!this.$error[e]&&(!!this.$$success[e]||null),toggleValidationCss(this,e,o),this.$$parentForm.$setValidity(e,o,this)}}function isObjectEmpty(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function stringBasedInputType(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function textInputType(e,t,n,i,r,o){baseInputType(e,t,n,i,r,o),stringBasedInputType(i)}function baseInputType(e,t,n,r,a,s){var l=o(t[0].type);if(!a.android){var c=!1;t.on("compositionstart",function(){c=!0}),t.on("compositionend",function(){c=!1,d()})}var u,d=function(e){if(u&&(s.defer.cancel(u),u=null),!c){var i=t.val(),o=e&&e.type;"password"===l||n.ngTrim&&"false"===n.ngTrim||(i=O(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,o)}};if(a.hasEvent("input"))t.on("input",d);else{var p=function(e,t,n){u||(u=s.defer(function(){u=null,t&&t.value===n||d(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||p(e,this,this.value)}),a.hasEvent("paste")&&t.on("paste cut",p)}t.on("change",d),Et[l]&&r.$$hasNativeValidators&&l===n.type&&t.on(Tt,function(e){if(!u){var t=this[i],n=t.badInput,r=t.typeMismatch;u=s.defer(function(){u=null,t.badInput===n&&t.typeMismatch===r||d(e)})}}),r.$render=function(){var e=r.$isEmpty(r.$viewValue)?"":r.$viewValue;t.val()!==e&&t.val(e)}}function weekParser(e,t){if(isDate(e))return e;if(isString(e)){wt.lastIndex=0;var n=wt.exec(e);if(n){var i=+n[1],r=+n[2],o=0,a=0,s=0,l=0,c=getFirstThursdayOfYear(i),u=7*(r-1);return t&&(o=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),l=t.getMilliseconds()),new Date(i,0,c.getDate()+u,o,a,s,l)}}return NaN}function createDateParser(e,t){return function(n,i){var r,o;if(isDate(n))return n;if(isString(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),ht.test(n))return new Date(n);if(e.lastIndex=0,r=e.exec(n))return r.shift(),o=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},forEach(r,function(e,n){n<t.length&&(o[t[n]]=+e)}),new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0)}return NaN}}function createDateInputType(e,t,n,i){return function(r,o,a,s,l,c,u){function isValidDate(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function parseObservedDateValue(e){return isDefined(e)&&!isDate(e)?n(e)||void 0:e}badInputChecker(r,o,a,s),baseInputType(r,o,a,s,l,c);var d,p=s&&s.$options.getOption("timezone");if(s.$$parserName=e,s.$parsers.push(function(e){if(s.$isEmpty(e))return null;if(t.test(e)){var i=n(e,d);return p&&(i=convertTimezoneToLocal(i,p)),i}}),s.$formatters.push(function(e){if(e&&!isDate(e))throw Yt("datefmt","Expected `{0}` to be a date",e);return isValidDate(e)?(d=e,d&&p&&(d=convertTimezoneToLocal(d,p,!0)),u("date")(e,i,p)):(d=null,"")}),isDefined(a.min)||a.ngMin){var h;s.$validators.min=function(e){return!isValidDate(e)||isUndefined(h)||n(e)>=h},a.$observe("min",function(e){h=parseObservedDateValue(e),s.$validate()})}if(isDefined(a.max)||a.ngMax){var f;s.$validators.max=function(e){return!isValidDate(e)||isUndefined(f)||n(e)<=f},a.$observe("max",function(e){f=parseObservedDateValue(e),s.$validate()})}}}function badInputChecker(e,t,n,r){var o=t[0];(r.$$hasNativeValidators=isObject(o.validity))&&r.$parsers.push(function(e){var n=t.prop(i)||{};return n.badInput||n.typeMismatch?void 0:e})}function numberFormatterParser(e){e.$$parserName="number",e.$parsers.push(function(t){return e.$isEmpty(t)?null:gt.test(t)?parseFloat(t):void 0}),e.$formatters.push(function(t){if(!e.$isEmpty(t)){if(!isNumber(t))throw Yt("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t})}function parseNumberAttrVal(e){return isDefined(e)&&!isNumber(e)&&(e=parseFloat(e)),S(e)?void 0:e}function isNumberInteger(e){return(0|e)===e}function countDecimals(e){var t=e.toString(),n=t.indexOf(".");if(-1===n){if(-1<e&&e<1){var i=/e-(\d+)$/.exec(t);if(i)return Number(i[1])}return 0}return t.length-n-1}function isValidForStep(e,t,n){var i=Number(e),r=!isNumberInteger(i),o=!isNumberInteger(t),a=!isNumberInteger(n);if(r||o||a){var s=r?countDecimals(i):0,l=o?countDecimals(t):0,c=a?countDecimals(n):0,u=Math.max(s,l,c),d=Math.pow(10,u);i*=d,t*=d,n*=d,r&&(i=Math.round(i)),o&&(t=Math.round(t)),a&&(n=Math.round(n))}return(i-t)%n==0}function numberInputType(e,t,n,i,r,o){badInputChecker(e,t,n,i),numberFormatterParser(i),baseInputType(e,t,n,i,r,o);var a,s;if((isDefined(n.min)||n.ngMin)&&(i.$validators.min=function(e){return i.$isEmpty(e)||isUndefined(a)||e>=a},n.$observe("min",function(e){a=parseNumberAttrVal(e),i.$validate()})),(isDefined(n.max)||n.ngMax)&&(i.$validators.max=function(e){return i.$isEmpty(e)||isUndefined(s)||e<=s},n.$observe("max",function(e){s=parseNumberAttrVal(e),i.$validate()})),isDefined(n.step)||n.ngStep){var l;i.$validators.step=function(e,t){return i.$isEmpty(t)||isUndefined(l)||isValidForStep(t,a||0,l)},n.$observe("step",function(e){l=parseNumberAttrVal(e),i.$validate()})}}function rangeInputType(e,t,n,i,r,o){function setInitialValueAndObserver(e,i){t.attr(e,n[e]),n.$observe(e,i)}function minChange(e){if(s=parseNumberAttrVal(e),!S(i.$modelValue))if(a){var n=t.val();s>n&&(n=s,t.val(n)),i.$setViewValue(n)}else i.$validate()}function maxChange(e){if(l=parseNumberAttrVal(e),!S(i.$modelValue))if(a){var n=t.val();l<n&&(t.val(l),n=l<s?s:l),i.$setViewValue(n)}else i.$validate()}function stepChange(e){c=parseNumberAttrVal(e),S(i.$modelValue)||(a&&i.$viewValue!==t.val()?i.$setViewValue(t.val()):i.$validate())}badInputChecker(e,t,n,i),numberFormatterParser(i),baseInputType(e,t,n,i,r,o);var a=i.$$hasNativeValidators&&"range"===t[0].type,s=a?0:void 0,l=a?100:void 0,c=a?1:void 0,u=t[0].validity,d=isDefined(n.min),p=isDefined(n.max),h=isDefined(n.step),f=i.$render;i.$render=a&&isDefined(u.rangeUnderflow)&&isDefined(u.rangeOverflow)?function(){f(),i.$setViewValue(t.val())}:f,d&&(i.$validators.min=a?function(){return!0}:function(e,t){return i.$isEmpty(t)||isUndefined(s)||t>=s},setInitialValueAndObserver("min",minChange)),p&&(i.$validators.max=a?function(){return!0}:function(e,t){return i.$isEmpty(t)||isUndefined(l)||t<=l},setInitialValueAndObserver("max",maxChange)),h&&(i.$validators.step=a?function(){return!u.stepMismatch}:function(e,t){return i.$isEmpty(t)||isUndefined(c)||isValidForStep(t,s||0,c)},setInitialValueAndObserver("step",stepChange))}function urlInputType(e,t,n,i,r,o){baseInputType(e,t,n,i,r,o),stringBasedInputType(i),i.$$parserName="url",i.$validators.url=function(e,t){var n=e||t;return i.$isEmpty(n)||ft.test(n)}}function emailInputType(e,t,n,i,r,o){baseInputType(e,t,n,i,r,o),stringBasedInputType(i),i.$$parserName="email",i.$validators.email=function(e,t){var n=e||t;return i.$isEmpty(n)||mt.test(n)}}function radioInputType(e,t,n,i){var r=!n.ngTrim||"false"!==O(n.ngTrim);isUndefined(n.name)&&t.attr("name",nextUid());var o=function(e){var o;t[0].checked&&(o=n.value,r&&(o=O(o)),i.$setViewValue(o,e&&e.type))};t.on("click",o),i.$render=function(){var e=n.value;r&&(e=O(e)),t[0].checked=e===i.$viewValue},n.$observe("value",i.$render)}function parseConstantExpr(e,t,n,i,r){var o;if(isDefined(i)){if(o=e(i),!o.constant)throw Yt("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,i);return o(t)}return r}function checkboxInputType(e,t,n,i,r,o,a,s){var l=parseConstantExpr(s,e,"ngTrueValue",n.ngTrueValue,!0),c=parseConstantExpr(s,e,"ngFalseValue",n.ngFalseValue,!1),u=function(e){i.$setViewValue(t[0].checked,e&&e.type)};t.on("click",u),i.$render=function(){t[0].checked=i.$viewValue},i.$isEmpty=function(e){return!1===e},i.$formatters.push(function(e){return equals(e,l)}),i.$parsers.push(function(e){return e?l:c})}function classDirective(e,t){function arrayDifference(e,t){if(!e||!e.length)return[];if(!t||!t.length)return e;var n=[];e:for(var i=0;i<e.length;i++){for(var r=e[i],o=0;o<t.length;o++)if(r===t[o])continue e;n.push(r)}return n}function split(e){return e&&e.split(" ")}function toClassString(e){var t=e;return T(e)?t=e.map(toClassString).join(" "):isObject(e)&&(t=Object.keys(e).filter(function(t){return e[t]}).join(" ")),t}function toFlatValue(e){var t=e;if(T(e))t=e.map(toFlatValue);else if(isObject(e)){var n=!1;t=Object.keys(e).filter(function(t){var i=e[t];return!n&&isUndefined(i)&&(n=!0),i}),n&&t.push(void 0)}return t}e="ngClass"+e;var n;return["$parse",function(i){return{restrict:"AC",link:function(r,o,a){function addClasses(e){e=digestClassCounts(split(e),1),a.$addClass(e)}function removeClasses(e){e=digestClassCounts(split(e),-1),a.$removeClass(e)}function updateClasses(e,t){var n=split(e),i=split(t),r=arrayDifference(n,i),o=arrayDifference(i,n),s=digestClassCounts(r,-1),l=digestClassCounts(o,1);a.$addClass(l),a.$removeClass(s)}function digestClassCounts(e,t){var n=[];return forEach(e,function(e){(t>0||h[e])&&(h[e]=(h[e]||0)+t,h[e]===+(t>0)&&n.push(e))}),n.join(" ")}function ngClassIndexWatchAction(e){e===t?addClasses(s):removeClasses(s),f=e}function ngClassOneTimeWatchAction(e){var t=toClassString(e);t!==s&&ngClassWatchAction(t)}function ngClassWatchAction(e){f===t&&updateClasses(s,e),s=e}var s,l=a[e].trim(),c=":"===l.charAt(0)&&":"===l.charAt(1),u=c?toFlatValue:toClassString,d=i(l,u),p=c?ngClassOneTimeWatchAction:ngClassWatchAction,h=o.data("$classCounts"),f=!0;h||(h=createMap(),o.data("$classCounts",h)),"ngClass"!==e&&(n||(n=i("$index",function(e){return 1&e})),r.$watch(n,ngClassIndexWatchAction)),r.$watch(d,p,c)}}}]}function NgModelController(e,t,n,i,r,o,a,s,l){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=l(n.name||"",!1)(e),this.$$parentForm=lt,this.$options=Xt,this.$$parsedNgModel=r(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$currentValidationRunId=0,Object.defineProperty(this,"$$scope",{value:e}),this.$$attr=n,this.$$element=i,this.$$animate=o,this.$$timeout=a,this.$$parse=r,this.$$q=s,this.$$exceptionHandler=t,setupValidity(this),setupModelWatcher(this)}function setupModelWatcher(e){e.$$scope.$watch(function(t){var n=e.$$ngModelGet(t);if(n!==e.$modelValue&&(e.$modelValue===e.$modelValue||n===n)){e.$modelValue=e.$$rawModelValue=n,e.$$parserValid=void 0;for(var i=e.$formatters,r=i.length,o=n;r--;)o=i[r](o);e.$viewValue!==o&&(e.$$updateEmptyClasses(o),e.$viewValue=e.$$lastCommittedViewValue=o,e.$render(),e.$$runValidators(e.$modelValue,e.$viewValue,noop))}return n})}function ModelOptions(e){this.$$options=e}function defaults(e,t){forEach(t,function(t,n){isDefined(e[n])||(e[n]=t)})}function setOptionSelectedStatus(e,t){e.prop("selected",t),e.attr("selected",t)}var t={objectMaxDepth:5},n=/^\/(.+)\/([a-z]*)$/,i="validity",r=Object.prototype.hasOwnProperty,o=function(e){return isString(e)?e.toLowerCase():e},a=function(e){return isString(e)?e.toUpperCase():e},s=function(e){return isString(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},l=function(e){return isString(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(o=s,a=l);var c,u,d,p,h=[].slice,f=[].splice,m=[].push,g=Object.prototype.toString,v=Object.getPrototypeOf,y=minErr("ng"),w=e.angular||(e.angular={}),b=0;c=e.document.documentMode;var S=Number.isNaN||function(e){return e!==e};noop.$inject=[],identity.$inject=[];var T=Array.isArray,E=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,O=function(e){return isString(e)?e.trim():e},I=function(e){return e.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},x=function(){if(!isDefined(x.rules)){var t=e.document.querySelector("[ng-csp]")||e.document.querySelector("[data-ng-csp]");if(t){var n=t.getAttribute("ng-csp")||t.getAttribute("data-ng-csp");x.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else x.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(e){return!0}}(),noInlineStyle:!1}}return x.rules},C=function(){if(isDefined(C.name_))return C.name_;var t,n,i,r,o=_.length;for(n=0;n<o;++n)if(i=_[n],t=e.document.querySelector("["+i.replace(":","\\:")+"jq]")){r=t.getAttribute(i+"jq");break}return C.name_=r},$=/:/g,_=["ng-","data-ng-","ng:","x-ng-"],A=function(t){var n=t.currentScript;if(!n)return!0;if(!(n instanceof e.HTMLScriptElement||n instanceof e.SVGScriptElement))return!1;var i=n.attributes;return[i.getNamedItem("src"),i.getNamedItem("href"),i.getNamedItem("xlink:href")].every(function(e){if(!e)return!0;if(!e.value)return!1;var n=t.createElement("a");if(n.href=e.value,t.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})}(e.document),R=/[A-Z]/g,P=!1,k=1,N=3,D=8,L=9,M=11,F={full:"1.6.6",major:1,minor:6,dot:6,codeName:"interdimensional-cable"};JQLite.expando="ng339";var j=JQLite.cache={},B=1;JQLite._data=function(e){return this.cache[e[this.expando]]||{}};var H=/-([a-z])/g,z=/^-ms-/,U={mouseleave:"mouseout",mouseenter:"mouseover"},V=minErr("jqLite"),W=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,G=/<|&#?\w+;/,q=/<([\w:-]+)/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,X={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};X.optgroup=X.option,X.tbody=X.tfoot=X.colgroup=X.caption=X.thead,X.th=X.td;var Z=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))},K=JQLite.prototype={ready:jqLiteReady,toString:function(){var e=[];return forEach(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return u(e>=0?this[e]:this[this.length+e])},length:0,push:m,sort:[].sort,splice:[].splice},Q={};forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Q[o(e)]=e});var J={};forEach("input,select,option,textarea,button,form,details".split(","),function(e){J[e]=!0});var ee={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};forEach({data:jqLiteData,removeData:jqLiteRemoveData,hasData:jqLiteHasData,cleanData:function(e){for(var t=0,n=e.length;t<n;t++)jqLiteRemoveData(e[t])}},function(e,t){JQLite[t]=e}),forEach({data:jqLiteData,inheritedData:jqLiteInheritedData,scope:function(e){return u.data(e,"$scope")||jqLiteInheritedData(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return u.data(e,"$isolateScope")||u.data(e,"$isolateScopeNoTemplate")},controller:jqLiteController,injector:function(e){return jqLiteInheritedData(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:jqLiteHasClass,css:function(e,t,n){if(t=cssKebabToCamel(t),!isDefined(n))return e.style[t];e.style[t]=n},attr:function(e,t,n){var i,r=e.nodeType;if(r!==N&&2!==r&&r!==D&&e.getAttribute){var a=o(t),s=Q[a];if(!isDefined(n))return i=e.getAttribute(t),s&&null!==i&&(i=a),null===i?void 0:i;null===n||!1===n&&s?e.removeAttribute(t):e.setAttribute(t,s?a:n)}},prop:function(e,t,n){if(!isDefined(n))return e[t];e[t]=n},text:function(){function getText(e,t){if(isUndefined(t)){var n=e.nodeType;return n===k||n===N?e.textContent:""}e.textContent=t}return getText.$dv="",getText}(),val:function(e,t){if(isUndefined(t)){if(e.multiple&&"select"===nodeName_(e)){var n=[];return forEach(e.options,function(e){e.selected&&n.push(e.value||e.text)}),n}return e.value}e.value=t},html:function(e,t){if(isUndefined(t))return e.innerHTML;jqLiteDealoc(e,!0),e.innerHTML=t},empty:jqLiteEmpty},function(e,t){JQLite.prototype[t]=function(t,n){var i,r,o=this.length;if(e!==jqLiteEmpty&&isUndefined(2===e.length&&e!==jqLiteHasClass&&e!==jqLiteController?t:n)){if(isObject(t)){for(i=0;i<o;i++)if(e===jqLiteData)e(this[i],t);else for(r in t)e(this[i],r,t[r]);return this}for(var a=e.$dv,s=isUndefined(a)?Math.min(o,1):o,l=0;l<s;l++){var c=e(this[l],t,n);a=a?a+c:c}return a}for(i=0;i<o;i++)e(this[i],t,n);return this}}),forEach({removeData:jqLiteRemoveData,on:function(e,t,n,i){if(isDefined(i))throw V("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(jqLiteAcceptsData(e)){var r=jqLiteExpandoStore(e,!0),o=r.events,a=r.handle;a||(a=r.handle=createEventHandler(e,o));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],l=s.length,c=function(t,i,r){var s=o[t];s||(s=o[t]=[],s.specialHandlerWrapper=i,"$destroy"===t||r||e.addEventListener(t,a)),s.push(n)};l--;)t=s[l],U[t]?(c(U[t],specialMouseHandlerWrapper),c(t,void 0,!0)):c(t)}},off:jqLiteOff,one:function(e,t,n){e=u(e),e.on(t,function onFn(){e.off(t,n),e.off(t,onFn)}),e.on(t,n)},replaceWith:function(e,t){var n,i=e.parentNode;jqLiteDealoc(e),forEach(new JQLite(t),function(t){n?i.insertBefore(t,n.nextSibling):i.replaceChild(t,e),n=t})},children:function(e){var t=[];return forEach(e.childNodes,function(e){e.nodeType===k&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===k||n===M){t=new JQLite(t);for(var i=0,r=t.length;i<r;i++){var o=t[i];e.appendChild(o)}}},prepend:function(e,t){if(e.nodeType===k){var n=e.firstChild;forEach(new JQLite(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){jqLiteWrapNode(e,u(t).eq(0).clone()[0])},remove:jqLiteRemove,detach:function(e){jqLiteRemove(e,!0)},after:function(e,t){var n=e,i=e.parentNode;if(i){t=new JQLite(t);for(var r=0,o=t.length;r<o;r++){var a=t[r];i.insertBefore(a,n.nextSibling),n=a}}},addClass:jqLiteAddClass,removeClass:jqLiteRemoveClass,toggleClass:function(e,t,n){t&&forEach(t.split(" "),function(t){var i=n;isUndefined(i)&&(i=!jqLiteHasClass(e,t)),(i?jqLiteAddClass:jqLiteRemoveClass)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==M?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:jqLiteClone,triggerHandler:function(e,t,n){var i,r,o,a=t.type||t,s=jqLiteExpandoStore(e),l=s&&s.events,c=l&&l[a];c&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:noop,type:a,target:e},t.type&&(i=extend(i,t)),r=shallowCopy(c),o=n?[i].concat(n):[i],forEach(r,function(t){i.isImmediatePropagationStopped()||t.apply(e,o)}))}},function(e,t){JQLite.prototype[t]=function(t,n,i){for(var r,o=0,a=this.length;o<a;o++)isUndefined(r)?(r=e(this[o],t,n,i),isDefined(r)&&(r=u(r))):jqLiteAddNodes(r,e(this[o],t,n,i));return isDefined(r)?r:this}}),JQLite.prototype.bind=JQLite.prototype.on,JQLite.prototype.unbind=JQLite.prototype.off;var te=Object.create(null);NgMapShim.prototype={_idx:function(e){return e===this._lastKey?this._lastIndex:(this._lastKey=e,this._lastIndex=this._keys.indexOf(e),this._lastIndex)},_transformKey:function(e){return S(e)?te:e},get:function(e){e=this._transformKey(e);var t=this._idx(e);if(-1!==t)return this._values[t]},set:function(e,t){e=this._transformKey(e);var n=this._idx(e);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=e,this._values[n]=t},delete:function(e){e=this._transformKey(e);var t=this._idx(e);return-1!==t&&(this._keys.splice(t,1),this._values.splice(t,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var ne=NgMapShim,ie=[function(){this.$get=[function(){return ne}]}],re=/^([^(]+?)=>/,oe=/^[^(]*\(\s*([^)]*)\)/m,ae=/,/,se=/^\s*(_?)(\S+?)\1\s*$/,le=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,ce=minErr("$injector");createInjector.$$annotate=annotate;var ue=minErr("$animate"),de=1,pe=function(){this.$get=noop},he=function(){var e=new ne,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,i){function updateData(e,t,n){var i=!1;return t&&(t=isString(t)?t.split(" "):T(t)?t:[],forEach(t,function(t){t&&(i=!0,e[t]=n)})),i}function handleCSSClassChanges(){forEach(t,function(t){var n=e.get(t);if(n){var i=splitClasses(t.attr("class")),r="",o="";forEach(n,function(e,t){e!==!!i[t]&&(e?r+=(r.length?" ":"")+t:o+=(o.length?" ":"")+t)}),forEach(t,function(e){r&&jqLiteAddClass(e,r),o&&jqLiteRemoveClass(e,o)}),e.delete(t)}}),t.length=0}function addRemoveClassesPostDigest(n,r,o){var a=e.get(n)||{},s=updateData(a,r,!0),l=updateData(a,o,!1);(s||l)&&(e.set(n,a),t.push(n),1===t.length&&i.$$postDigest(handleCSSClassChanges))}return{enabled:noop,on:noop,off:noop,pin:noop,push:function(e,t,i,r){r&&r(),i=i||{},i.from&&e.css(i.from),i.to&&e.css(i.to),(i.addClass||i.removeClass)&&addRemoveClassesPostDigest(e,i.addClass,i.removeClass);var o=new n;return o.complete(),o}}}]},fe=["$provide",function(e){var t=this,n=null,i=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,i){if(n&&"."!==n.charAt(0))throw ue("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var r=n+"-animation";t.$$registeredAnimations[n.substr(1)]=r,e.factory(r,i)},this.customFilter=function(e){return 1===arguments.length&&(i=isFunction(e)?e:null),i},this.classNameFilter=function(e){if(1===arguments.length&&(n=e instanceof RegExp?e:null)){if(new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]").test(n.toString()))throw n=null,ue("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate")}return n},this.$get=["$$animateQueue",function(e){function domInsert(e,t,n){if(n){var i=extractElementNode(n);!i||i.parentNode||i.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.end&&e.end()},enter:function(t,n,i,r){return n=n&&u(n),i=i&&u(i),n=n||i.parent(),domInsert(t,n,i),e.push(t,"enter",prepareAnimateOptions(r))},move:function(t,n,i,r){return n=n&&u(n),i=i&&u(i),n=n||i.parent(),domInsert(t,n,i),e.push(t,"move",prepareAnimateOptions(r))},leave:function(t,n){return e.push(t,"leave",prepareAnimateOptions(n),function(){t.remove()})},addClass:function(t,n,i){return i=prepareAnimateOptions(i),i.addClass=mergeClasses(i.addclass,n),e.push(t,"addClass",i)},removeClass:function(t,n,i){return i=prepareAnimateOptions(i),i.removeClass=mergeClasses(i.removeClass,n),e.push(t,"removeClass",i)},setClass:function(t,n,i,r){return r=prepareAnimateOptions(r),r.addClass=mergeClasses(r.addClass,n),r.removeClass=mergeClasses(r.removeClass,i),e.push(t,"setClass",r)},animate:function(t,n,i,r,o){return o=prepareAnimateOptions(o),o.from=o.from?extend(o.from,n):n,o.to=o.to?extend(o.to,i):i,r=r||"ng-inline-animate",o.tempClasses=mergeClasses(o.tempClasses,r),e.push(t,"animate",o)}}}]}],me=function(){this.$get=["$$rAF",function(e){function waitForTick(n){t.push(n),t.length>1||e(function(){for(var e=0;e<t.length;e++)t[e]();t=[]})}var t=[];return function(){var e=!1;return waitForTick(function(){e=!0}),function(t){e?t():waitForTick(t)}}}]},ge=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(e,t,n,i,r){function AnimateRunner(e){this.setHost(e);var t=n(),o=function(e){r(e,0,!1)};this._doneCallbacks=[],this._tick=function(e){i()?o(e):t(e)},this._state=0}return AnimateRunner.chain=function(e,t){function next(){if(n===e.length)return void t(!0);e[n](function(e){if(!1===e)return void t(!1);n++,next()})}var n=0;next()},AnimateRunner.all=function(e,t){function onProgress(r){i=i&&r,++n===e.length&&t(i)}var n=0,i=!0;forEach(e,function(e){e.done(onProgress)})},AnimateRunner.prototype={setHost:function(e){this.host=e||{}},done:function(e){2===this._state?e():this._doneCallbacks.push(e)},progress:noop,getPromise:function(){if(!this.promise){var t=this;this.promise=e(function(e,n){t.done(function(t){!1===t?n():e()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise().catch(e)},finally:function(e){return this.getPromise().finally(e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;0===t._state&&(t._state=1,t._tick(function(){t._resolve(e)}))},_resolve:function(e){2!==this._state&&(forEach(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=2)}},AnimateRunner}]},ve=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(e,t,n){return function(t,i){function run(){return e(function(){applyAnimationContents(),o||a.complete(),o=!0}),a}function applyAnimationContents(){r.addClass&&(t.addClass(r.addClass),r.addClass=null),r.removeClass&&(t.removeClass(r.removeClass),r.removeClass=null),r.to&&(t.css(r.to),r.to=null)}var r=i||{};r.$$prepared||(r=copy(r)),r.cleanupStyles&&(r.from=r.to=null),r.from&&(t.css(r.from),r.from=null);var o,a=new n;return{start:run,end:run}}}]},ye=minErr("$compile"),we=new UNINITIALIZED_VALUE;$CompileProvider.$inject=["$provide","$$sanitizeUriProvider"],SimpleChange.prototype.isFirstChange=function(){return this.previousValue===we};var be=/^((?:x|data)[:\-_])/i,Se=/[:\-_]+(.)/g,Te=minErr("$controller"),Ee=/^(\S+)(\s+as\s+([\w$]+))?$/,Oe=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof u&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},Ie="application/json",xe={"Content-Type":Ie+";charset=utf-8"},Ce=/^\[|^\{(?!\{)/,$e={"[":/]$/,"{":/}$/},_e=/^\)]\}',?\n/,Ae=minErr("$http"),Re=w.$interpolateMinErr=minErr("$interpolate");Re.throwNoconcat=function(e){throw Re("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},Re.interr=function(e,t){return Re("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var Pe=function(){this.$get=function(){function createCallback(e){var t=function(e){t.data=e,t.called=!0};return t.id=e,t}var e=w.callbacks,t={};return{createCallback:function(n){var i="_"+(e.$$counter++).toString(36),r="angular.callbacks."+i,o=createCallback(i);return t[r]=e[i]=o,r},wasCalled:function(e){return t[e].called},getResponse:function(e){return t[e].data},removeCallback:function(n){var i=t[n];delete e[i.id],delete t[n]}}}},ke=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Ne={http:80,https:443,ftp:21},De=minErr("$location"),Le=/^\s*[\\\/]{2,}/,Me={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:locationGetter("$$absUrl"),url:function(e){if(isUndefined(e))return this.$$url;var t=ke.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:locationGetter("$$protocol"),host:locationGetter("$$host"),port:locationGetter("$$port"),path:locationGetterSetter("$$path",function(e){return e=null!==e?e.toString():"","/"===e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(e)||isNumber(e))e=e.toString(),this.$$search=parseKeyValue(e);else{if(!isObject(e))throw De("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=copy(e,{}),forEach(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:isUndefined(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:locationGetterSetter("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};forEach([LocationHashbangInHtml5Url,LocationHashbangUrl,LocationHtml5Url],function(e){e.prototype=Object.create(Me),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==LocationHtml5Url||!this.$$html5)throw De("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=isUndefined(t)?null:t,this.$$urlUpdatedByLocation=!0,this}});var Fe=minErr("$parse"),je={}.constructor.prototype.valueOf,Be=createMap();forEach("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){Be[e]=!0});var He={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},ze=function(e){this.options=e};ze.prototype={constructor:ze,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),i=n+this.peek(2),r=Be[t],o=Be[n],a=Be[i];if(r||o||a){var s=a?i:o?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||" "===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),i=t.charCodeAt(0);return n>=55296&&n<=56319&&i>=56320&&i<=57343?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var i=isDefined(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw Fe("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,i,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=o(this.text.charAt(this.index));if("."===n||this.isNumber(n))e+=n;else{var i=this.peek();if("e"===n&&this.isExpOperator(i))e+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"===e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!==e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",i=e,r=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(i+=o,r){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else{n+=He[o]||o}r=!1}else if("\\"===o)r=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:i,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",t)}};var Ue=function(e,t){this.lexer=e,this.options=t};Ue.Program="Program",Ue.ExpressionStatement="ExpressionStatement",Ue.AssignmentExpression="AssignmentExpression",Ue.ConditionalExpression="ConditionalExpression",Ue.LogicalExpression="LogicalExpression",Ue.BinaryExpression="BinaryExpression",Ue.UnaryExpression="UnaryExpression",Ue.CallExpression="CallExpression",Ue.MemberExpression="MemberExpression",Ue.Identifier="Identifier",Ue.Literal="Literal",Ue.ArrayExpression="ArrayExpression",Ue.Property="Property",Ue.ObjectExpression="ObjectExpression",Ue.ThisExpression="ThisExpression",Ue.LocalsExpression="LocalsExpression",Ue.NGValueParameter="NGValueParameter",Ue.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:Ue.Program,body:e}},expressionStatement:function(){return{type:Ue.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!isAssignable(e))throw Fe("lval","Trying to assign a value to a non l-value");e={type:Ue.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:Ue.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:Ue.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:Ue.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:Ue.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:Ue.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:Ue.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:Ue.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:Ue.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=copy(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:Ue.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t;t=this.expect("(","[",".");)"("===t.text?(e={type:Ue.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:Ue.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:Ue.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:Ue.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do{e.push(this.filterChain())}while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:Ue.Identifier,name:e.text}},constant:function(){return{type:Ue.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Ue.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:Ue.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),{type:Ue.ObjectExpression,properties:t}},throwError:function(e,t){throw Fe("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw Fe("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw Fe("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,i){return this.peekAhead(0,e,t,n,i)},peekAhead:function(e,t,n,i,r){if(this.tokens.length>e){var o=this.tokens[e],a=o.text;if(a===t||a===n||a===i||a===r||!t&&!n&&!i&&!r)return o}return!1},expect:function(e,t,n,i){var r=this.peek(e,t,n,i);return!!r&&(this.tokens.shift(),r)},selfReferential:{this:{type:Ue.ThisExpression},$locals:{type:Ue.LocalsExpression}}};var Ve=1,We=2;ASTCompiler.prototype={compile:function(e){var t=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},findConstantAndWatchExpressions(e,t.$filter);var n,i="";if(this.stage="assign",n=assignableAST(e)){this.state.computing="assign";var r=this.nextId();this.recurse(n,r),this.return_(r),i="fn.assign="+this.generateFunction("assign","s,v,l")}var o=getInputs(e.body);t.stage="inputs",forEach(o,function(e,n){var i="fn"+n;t.state[i]={vars:[],body:[],own:{}},t.state.computing=i;var r=t.nextId();t.recurse(e,r),t.return_(r),t.state.inputs.push({name:i,isPure:e.isPure}),e.watchId=n}),this.state.computing="fn",this.stage="main",this.recurse(e);var a='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+i+this.watchFns()+"return fn;",s=new Function("$filter","getStringValue","ifDefined","plus",a)(this.$filter,getStringValue,ifDefined,plusFn);return this.state=this.stage=void 0,s},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return forEach(t,function(t){e.push("var "+t.name+"="+n.generateFunction(t.name,"s")),t.isPure&&e.push(t.name,".isPure="+JSON.stringify(t.isPure)+";")}),t.length&&e.push("fn.inputs=["+t.map(function(e){return e.name}).join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return forEach(this.state.filters,function(n,i){e.push(n+"=$filter("+t.escape(i)+")")}),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,n,i,r,o){var a,s,l,c,u,d=this;if(i=i||noop,!o&&isDefined(e.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,n,i,r,!0));switch(e.type){case Ue.Program:forEach(e.body,function(t,n){d.recurse(t.expression,void 0,void 0,function(e){s=e}),n!==e.body.length-1?d.current().body.push(s,";"):d.return_(s)});break;case Ue.Literal:c=this.escape(e.value),this.assign(t,c),i(t||c);break;case Ue.UnaryExpression:this.recurse(e.argument,void 0,void 0,function(e){s=e}),c=e.operator+"("+this.ifDefined(s,0)+")",this.assign(t,c),i(c);break;case Ue.BinaryExpression:this.recurse(e.left,void 0,void 0,function(e){a=e}),this.recurse(e.right,void 0,void 0,function(e){s=e}),c="+"===e.operator?this.plus(a,s):"-"===e.operator?this.ifDefined(a,0)+e.operator+this.ifDefined(s,0):"("+a+")"+e.operator+"("+s+")",this.assign(t,c),i(c);break;case Ue.LogicalExpression:t=t||this.nextId(),d.recurse(e.left,t),d.if_("&&"===e.operator?t:d.not(t),d.lazyRecurse(e.right,t)),i(t);break;case Ue.ConditionalExpression:t=t||this.nextId(),d.recurse(e.test,t),d.if_(t,d.lazyRecurse(e.alternate,t),d.lazyRecurse(e.consequent,t)),i(t);break;case Ue.Identifier:t=t||this.nextId(),n&&(n.context="inputs"===d.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),n.computed=!1,n.name=e.name),d.if_("inputs"===d.stage||d.not(d.getHasOwnProperty("l",e.name)),function(){d.if_("inputs"===d.stage||"s",function(){r&&1!==r&&d.if_(d.isNull(d.nonComputedMember("s",e.name)),d.lazyAssign(d.nonComputedMember("s",e.name),"{}")),d.assign(t,d.nonComputedMember("s",e.name))})},t&&d.lazyAssign(t,d.nonComputedMember("l",e.name))),i(t);break;case Ue.MemberExpression:a=n&&(n.context=this.nextId())||this.nextId(),t=t||this.nextId(),d.recurse(e.object,a,void 0,function(){d.if_(d.notNull(a),function(){e.computed?(s=d.nextId(),d.recurse(e.property,s),d.getStringValue(s),r&&1!==r&&d.if_(d.not(d.computedMember(a,s)),d.lazyAssign(d.computedMember(a,s),"{}")),c=d.computedMember(a,s),d.assign(t,c),n&&(n.computed=!0,n.name=s)):(r&&1!==r&&d.if_(d.isNull(d.nonComputedMember(a,e.property.name)),d.lazyAssign(d.nonComputedMember(a,e.property.name),"{}")),c=d.nonComputedMember(a,e.property.name),d.assign(t,c),n&&(n.computed=!1,n.name=e.property.name))},function(){d.assign(t,"undefined")}),i(t)},!!r);break;case Ue.CallExpression:t=t||this.nextId(),e.filter?(s=d.filter(e.callee.name),l=[],forEach(e.arguments,function(e){var t=d.nextId();d.recurse(e,t),l.push(t)}),c=s+"("+l.join(",")+")",d.assign(t,c),i(t)):(s=d.nextId(),a={},l=[],d.recurse(e.callee,s,a,function(){d.if_(d.notNull(s),function(){forEach(e.arguments,function(t){d.recurse(t,e.constant?void 0:d.nextId(),void 0,function(e){l.push(e)})}),c=a.name?d.member(a.context,a.name,a.computed)+"("+l.join(",")+")":s+"("+l.join(",")+")",d.assign(t,c)},function(){d.assign(t,"undefined")}),i(t)}));break;case Ue.AssignmentExpression:s=this.nextId(),a={},this.recurse(e.left,void 0,a,function(){d.if_(d.notNull(a.context),function(){d.recurse(e.right,s),c=d.member(a.context,a.name,a.computed)+e.operator+s,d.assign(t,c),i(t||c)})},1);break;case Ue.ArrayExpression:l=[],forEach(e.elements,function(t){d.recurse(t,e.constant?void 0:d.nextId(),void 0,function(e){l.push(e)})}),c="["+l.join(",")+"]",this.assign(t,c),i(t||c);break;case Ue.ObjectExpression:l=[],u=!1,forEach(e.properties,function(e){e.computed&&(u=!0)}),u?(t=t||this.nextId(),this.assign(t,"{}"),forEach(e.properties,function(e){e.computed?(a=d.nextId(),d.recurse(e.key,a)):a=e.key.type===Ue.Identifier?e.key.name:""+e.key.value,s=d.nextId(),d.recurse(e.value,s),d.assign(d.member(t,a,e.computed),s)})):(forEach(e.properties,function(t){d.recurse(t.value,e.constant?void 0:d.nextId(),void 0,function(e){l.push(d.escape(t.key.type===Ue.Identifier?t.key.name:""+t.key.value)+":"+e)})}),c="{"+l.join(",")+"}",this.assign(t,c)),i(t||c);break;case Ue.ThisExpression:this.assign(t,"s"),i(t||"s");break;case Ue.LocalsExpression:this.assign(t,"l"),i(t||"l");break;case Ue.NGValueParameter:this.assign(t,"v"),i(t||"v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,i=this.current().own;return i.hasOwnProperty(n)||(i[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),i[n]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(!0===e)t();else{var i=this.current().body;i.push("if(",e,"){"),t(),i.push("}"),n&&(i.push("else{"),n(),i.push("}"))}},not:function(e){return"!("+e+")"},isNull:function(e){return e+"==null"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){var n=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/,i=/[^$_a-zA-Z0-9]/g;return n.test(t)?e+"."+t:e+'["'+t.replace(i,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},lazyRecurse:function(e,t,n,i,r,o){var a=this;return function(){a.recurse(e,t,n,i,r,o)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(isString(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(isNumber(e))return e.toString();if(!0===e)return"true";if(!1===e)return"false";if(null===e)return"null";if(void 0===e)return"undefined";throw Fe("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},ASTInterpreter.prototype={compile:function(e){var t=this;findConstantAndWatchExpressions(e,t.$filter);var n,i;(n=assignableAST(e))&&(i=this.recurse(n));var r,o=getInputs(e.body);o&&(r=[],forEach(o,function(e,n){var i=t.recurse(e);i.isPure=e.isPure,e.input=i,r.push(i),e.watchId=n}));var a=[];forEach(e.body,function(e){a.push(t.recurse(e.expression))});var s=0===e.body.length?noop:1===e.body.length?a[0]:function(e,t){var n;return forEach(a,function(i){n=i(e,t)}),n};return i&&(s.assign=function(e,t,n){return i(e,n,t)}),r&&(s.inputs=r),s},recurse:function(e,t,n){var i,r,o,a=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case Ue.Literal:return this.value(e.value,t);case Ue.UnaryExpression:return r=this.recurse(e.argument),this["unary"+e.operator](r,t);case Ue.BinaryExpression:case Ue.LogicalExpression:return i=this.recurse(e.left),r=this.recurse(e.right),this["binary"+e.operator](i,r,t);case Ue.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case Ue.Identifier:return a.identifier(e.name,t,n);case Ue.MemberExpression:return i=this.recurse(e.object,!1,!!n),e.computed||(r=e.property.name),e.computed&&(r=this.recurse(e.property)),e.computed?this.computedMember(i,r,t,n):this.nonComputedMember(i,r,t,n);case Ue.CallExpression:return o=[],forEach(e.arguments,function(e){o.push(a.recurse(e))}),e.filter&&(r=this.$filter(e.callee.name)),e.filter||(r=this.recurse(e.callee,!0)),e.filter?function(e,n,i,a){for(var s=[],l=0;l<o.length;++l)s.push(o[l](e,n,i,a));var c=r.apply(void 0,s,a);return t?{context:void 0,name:void 0,value:c}:c}:function(e,n,i,a){var s,l=r(e,n,i,a);if(null!=l.value){for(var c=[],u=0;u<o.length;++u)c.push(o[u](e,n,i,a));s=l.value.apply(l.context,c)}return t?{value:s}:s};case Ue.AssignmentExpression:return i=this.recurse(e.left,!0,1),r=this.recurse(e.right),function(e,n,o,a){var s=i(e,n,o,a),l=r(e,n,o,a);return s.context[s.name]=l,t?{value:l}:l};case Ue.ArrayExpression:return o=[],forEach(e.elements,function(e){o.push(a.recurse(e))}),function(e,n,i,r){for(var a=[],s=0;s<o.length;++s)a.push(o[s](e,n,i,r));return t?{value:a}:a};case Ue.ObjectExpression:return o=[],forEach(e.properties,function(e){e.computed?o.push({key:a.recurse(e.key),computed:!0,value:a.recurse(e.value)}):o.push({key:e.key.type===Ue.Identifier?e.key.name:""+e.key.value,computed:!1,value:a.recurse(e.value)})}),function(e,n,i,r){for(var a={},s=0;s<o.length;++s)o[s].computed?a[o[s].key(e,n,i,r)]=o[s].value(e,n,i,r):a[o[s].key]=o[s].value(e,n,i,r);return t?{value:a}:a};case Ue.ThisExpression:return function(e){return t?{value:e}:e};case Ue.LocalsExpression:return function(e,n){return t?{value:n}:n};case Ue.NGValueParameter:return function(e,n,i){return t?{value:i}:i}}},"unary+":function(e,t){return function(n,i,r,o){var a=e(n,i,r,o);return a=isDefined(a)?+a:0,t?{value:a}:a}},"unary-":function(e,t){return function(n,i,r,o){var a=e(n,i,r,o);return a=isDefined(a)?-a:-0,t?{value:a}:a}},"unary!":function(e,t){return function(n,i,r,o){var a=!e(n,i,r,o);return t?{value:a}:a}},"binary+":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a),l=t(i,r,o,a),c=plusFn(s,l);return n?{value:c}:c}},"binary-":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a),l=t(i,r,o,a),c=(isDefined(s)?s:0)-(isDefined(l)?l:0);return n?{value:c}:c}},"binary*":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)*t(i,r,o,a);return n?{value:s}:s}},"binary/":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)/t(i,r,o,a);return n?{value:s}:s}},"binary%":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)%t(i,r,o,a);return n?{value:s}:s}},"binary===":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)===t(i,r,o,a);return n?{value:s}:s}},"binary!==":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)!==t(i,r,o,a);return n?{value:s}:s}},"binary==":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)==t(i,r,o,a);return n?{value:s}:s}},"binary!=":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)!=t(i,r,o,a);return n?{value:s}:s}},"binary<":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)<t(i,r,o,a);return n?{value:s}:s}},"binary>":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)>t(i,r,o,a);return n?{value:s}:s}},"binary<=":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)<=t(i,r,o,a);return n?{value:s}:s}},"binary>=":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)>=t(i,r,o,a);return n?{value:s}:s}},"binary&&":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)&&t(i,r,o,a);return n?{value:s}:s}},"binary||":function(e,t,n){return function(i,r,o,a){var s=e(i,r,o,a)||t(i,r,o,a);return n?{value:s}:s}},"ternary?:":function(e,t,n,i){return function(r,o,a,s){var l=e(r,o,a,s)?t(r,o,a,s):n(r,o,a,s);return i?{value:l}:l}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(e,t,n){return function(i,r,o,a){var s=r&&e in r?r:i;n&&1!==n&&s&&null==s[e]&&(s[e]={});var l=s?s[e]:void 0;return t?{context:s,name:e,value:l}:l}},computedMember:function(e,t,n,i){return function(r,o,a,s){var l,c,u=e(r,o,a,s);return null!=u&&(l=t(r,o,a,s),l=getStringValue(l),i&&1!==i&&u&&!u[l]&&(u[l]={}),c=u[l]),n?{context:u,name:l,value:c}:c}},nonComputedMember:function(e,t,n,i){return function(r,o,a,s){var l=e(r,o,a,s);i&&1!==i&&l&&null==l[t]&&(l[t]={});var c=null!=l?l[t]:void 0;return n?{context:l,name:t,value:c}:c}},inputs:function(e,t){return function(n,i,r,o){return o?o[t]:e(n,i,r)}}},Parser.prototype={constructor:Parser,parse:function(e){var t=this.ast.ast(e),n=this.astCompiler.compile(t);return n.literal=isLiteral(t),n.constant=isConstant(t),n}};var Ge=minErr("$sce"),qe={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Ye=/_([a-z])/g,Xe=minErr("$compile"),Ze=e.document.createElement("a"),Ke=urlResolve(e.location.href);$$CookieReader.$inject=["$document"],$FilterProvider.$inject=["$provide"];var Qe=22,Je=".",et="0";currencyFilter.$inject=["$locale"],numberFilter.$inject=["$locale"];var tt={yyyy:dateGetter("FullYear",4,0,!1,!0),yy:dateGetter("FullYear",2,0,!0,!0),y:dateGetter("FullYear",1,0,!1,!0),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),LLLL:dateStrGetter("Month",!1,!0),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:ampmGetter,Z:timeZoneGetter,ww:weekGetter(2),w:weekGetter(1),G:eraGetter,GG:eraGetter,GGG:eraGetter,GGGG:longEraGetter},nt=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,it=/^-?\d+$/;dateFilter.$inject=["$locale"];var rt=valueFn(o),ot=valueFn(a);orderByFilter.$inject=["$parse"];var at=valueFn({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref)return function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===g.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),st={};forEach(Q,function(e,t){function defaultLinkFn(e,i,r){e.$watch(r[n],function(e){r.$set(t,!!e)})}if("multiple"!==e){var n=directiveNormalize("ng-"+t),i=defaultLinkFn;"checked"===e&&(i=function(e,t,i){i.ngModel!==i[n]&&defaultLinkFn(e,t,i)}),st[n]=function(){return{restrict:"A",priority:100,link:i}}}}),forEach(ee,function(e,t){st[t]=function(){return{priority:100,link:function(e,i,r){if("ngPattern"===t&&"/"===r.ngPattern.charAt(0)){var o=r.ngPattern.match(n);if(o)return void r.$set("ngPattern",new RegExp(o[1],o[2]))}e.$watch(r[t],function(e){r.$set(t,e)})}}}}),forEach(["src","srcset","href"],function(e){var t=directiveNormalize("ng-"+e);st[t]=function(){return{priority:99,link:function(n,i,r){var o=e,a=e;"href"===e&&"[object SVGAnimatedString]"===g.call(i.prop("href"))&&(a="xlinkHref",r.$attr[a]="xlink:href",o=null),r.$observe(t,function(t){if(!t)return void("href"===e&&r.$set(a,null));r.$set(a,t),c&&o&&i.prop(o,r[a])})}}}});var lt={$addControl:noop,$$renameControl:nullFormRenameControl,$removeControl:noop,$setValidity:noop,$setDirty:noop,$setPristine:noop,$setSubmitted:noop},ct="ng-pending";FormController.$inject=["$element","$attrs","$scope","$animate","$interpolate"],FormController.prototype={$rollbackViewValue:function(){forEach(this.$$controls,function(e){e.$rollbackViewValue()})},$commitViewValue:function(){forEach(this.$$controls,function(e){e.$commitViewValue()})},$addControl:function(e){assertNotHasOwnProperty(e.$name,"input"),this.$$controls.push(e),e.$name&&(this[e.$name]=e),e.$$parentForm=this},$$renameControl:function(e,t){var n=e.$name;this[n]===e&&delete this[n],this[t]=e,e.$name=t},$removeControl:function(e){e.$name&&this[e.$name]===e&&delete this[e.$name],forEach(this.$pending,function(t,n){this.$setValidity(n,null,e)},this),forEach(this.$error,function(t,n){this.$setValidity(n,null,e)},this),forEach(this.$$success,function(t,n){this.$setValidity(n,null,e)},this),arrayRemove(this.$$controls,e),e.$$parentForm=lt},$setDirty:function(){this.$$animate.removeClass(this.$$element,Gt),this.$$animate.addClass(this.$$element,qt),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Gt,qt+" ng-submitted"),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,forEach(this.$$controls,function(e){e.$setPristine()})},$setUntouched:function(){forEach(this.$$controls,function(e){e.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted"),this.$submitted=!0,this.$$parentForm.$setSubmitted()}},addSetValidityMethod({clazz:FormController,set:function(e,t,n){var i=e[t];if(i){-1===i.indexOf(n)&&i.push(n)}else e[t]=[n]},unset:function(e,t,n){var i=e[t];i&&(arrayRemove(i,n),0===i.length&&delete e[t])}});var ut=function(e){return["$timeout","$parse",function(t,n){function getSetter(e){return""===e?n('this[""]').assign:n(e).assign||noop}return{name:"form",restrict:e?"EAC":"E",require:["form","^^?form"],controller:FormController,compile:function(n,i){n.addClass(Gt).addClass(Vt);var r=i.name?"name":!(!e||!i.ngForm)&&"ngForm";return{pre:function(e,n,i,o){var a=o[0];if(!("action"in i)){var s=function(t){e.$apply(function(){a.$commitViewValue(),a.$setSubmitted()}),t.preventDefault()};n[0].addEventListener("submit",s),n.on("$destroy",function(){t(function(){n[0].removeEventListener("submit",s)},0,!1)})}(o[1]||a.$$parentForm).$addControl(a);var l=r?getSetter(a.$name):noop;r&&(l(e,a),i.$observe(r,function(t){a.$name!==t&&(l(e,void 0),a.$$parentForm.$$renameControl(a,t),(l=getSetter(a.$name))(e,a))})),n.on("$destroy",function(){a.$$parentForm.$removeControl(a),l(e,void 0),extend(a,lt)})}}}}}]},dt=ut(),pt=ut(!0),ht=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,ft=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:\/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,mt=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+\/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,gt=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,vt=/^(\d{4,})-(\d{2})-(\d{2})$/,yt=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,wt=/^(\d{4,})-W(\d\d)$/,bt=/^(\d{4,})-(\d\d)$/,St=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Tt="keydown wheel mousedown",Et=createMap();forEach("date,datetime-local,month,time,week".split(","),function(e){Et[e]=!0});var Ot={text:textInputType,date:createDateInputType("date",vt,createDateParser(vt,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":createDateInputType("datetimelocal",yt,createDateParser(yt,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:createDateInputType("time",St,createDateParser(St,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:createDateInputType("week",wt,weekParser,"yyyy-Www"),month:createDateInputType("month",bt,createDateParser(bt,["yyyy","MM"]),"yyyy-MM"),number:numberInputType,url:urlInputType,email:emailInputType,radio:radioInputType,range:rangeInputType,checkbox:checkboxInputType,hidden:noop,button:noop,submit:noop,reset:noop,file:noop},It=["$browser","$sniffer","$filter","$parse",function(e,t,n,i){return{restrict:"E",require:["?ngModel"],link:{pre:function(r,a,s,l){l[0]&&(Ot[o(s.type)]||Ot.text)(r,a,s,l[0],t,e,n,i)}}}}],xt=/^(true|false|\d+)$/,Ct=function(){function updateElementValue(e,t,n){var i=isDefined(n)?n:9===c?"":null;e.prop("value",i),t.$set("value",n)}return{restrict:"A",priority:100,compile:function(e,t){return xt.test(t.ngValue)?function(e,t,n){updateElementValue(t,n,e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){updateElementValue(t,n,e)})}}}},$t=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,n,i){e.$$addBindingInfo(n,i.ngBind),n=n[0],t.$watch(i.ngBind,function(e){n.textContent=stringify(e)})}}}}],_t=["$interpolate","$compile",function(e,t){return{compile:function(n){return t.$$addBindingClass(n),function(n,i,r){var o=e(i.attr(r.$attr.ngBindTemplate));t.$$addBindingInfo(i,o.expressions),i=i[0],r.$observe("ngBindTemplate",function(e){i.textContent=isUndefined(e)?"":e})}}}}],At=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(i,r){var o=t(r.ngBindHtml),a=t(r.ngBindHtml,function(t){return e.valueOf(t)});return n.$$addBindingClass(i),function(t,i,r){n.$$addBindingInfo(i,r.ngBindHtml),t.$watch(a,function(){var n=o(t);i.html(e.getTrustedHtml(n)||"")})}}}}],Rt=valueFn({restrict:"A",require:"ngModel",link:function(e,t,n,i){i.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),Pt=classDirective("",!0),kt=classDirective("Odd",0),Nt=classDirective("Even",1),Dt=ngDirective({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),Lt=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],Mt={},Ft={blur:!0,focus:!0};forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=directiveNormalize("ng-"+e);Mt[t]=["$parse","$rootScope",function(n,i){return{restrict:"A",compile:function(r,o){var a=n(o[t]);return function(t,n){n.on(e,function(n){var r=function(){a(t,{$event:n})};Ft[e]&&i.$$phase?t.$evalAsync(r):t.$apply(r)})}}}}]});var jt=["$animate","$compile",function(e,t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,i,r,o,a){var s,l,c;n.$watch(r.ngIf,function(n){n?l||a(function(n,o){l=o,n[n.length++]=t.$$createComment("end ngIf",r.ngIf),s={clone:n},e.enter(n,i.parent(),i)}):(c&&(c.remove(),c=null),l&&(l.$destroy(),l=null),s&&(c=getBlockNodes(s.clone),e.leave(c).done(function(e){!1!==e&&(c=null)}),s=null))})}}}],Bt=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:w.noop,compile:function(i,r){var o=r.ngInclude||r.src,a=r.onload||"",s=r.autoscroll;return function(i,r,l,c,u){var d,p,h,f=0,m=function(){p&&(p.remove(),p=null),d&&(d.$destroy(),d=null),h&&(n.leave(h).done(function(e){!1!==e&&(p=null)}),p=h,h=null)};i.$watch(o,function(o){var l=function(e){!1===e||!isDefined(s)||s&&!i.$eval(s)||t()},p=++f;o?(e(o,!0).then(function(e){if(!i.$$destroyed&&p===f){var t=i.$new();c.template=e;var s=u(t,function(e){m(),n.enter(e,null,r).done(l)});d=t,h=s,d.$emit("$includeContentLoaded",o),i.$eval(a)}},function(){i.$$destroyed||p===f&&(m(),i.$emit("$includeContentError",o))}),i.$emit("$includeContentRequested",o)):(m(),c.template=null)})}}}}],Ht=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,i,r,o){if(g.call(i[0]).match(/SVG/))return i.empty(),void t(jqLiteBuildFragment(o.template,e.document).childNodes)(n,function(e){i.append(e)},{futureParentElement:i});i.html(o.template),t(i.contents())(n)}}}],zt=ngDirective({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),Ut=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,i){var r=n.ngList||", ",o="false"!==n.ngTrim,a=o?O(r):r,s=function(e){if(!isUndefined(e)){var t=[];return e&&forEach(e.split(a),function(e){e&&t.push(o?O(e):e)}),t}};i.$parsers.push(s),i.$formatters.push(function(e){if(T(e))return e.join(r)}),i.$isEmpty=function(e){return!e||!e.length}}}},Vt="ng-valid",Wt="ng-invalid",Gt="ng-pristine",qt="ng-dirty",Yt=minErr("ngModel");NgModelController.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],NgModelController.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var e=this.$$parse(this.$$attr.ngModel+"()"),t=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(t){var n=this.$$parsedNgModel(t);return isFunction(n)&&(n=e(t)),n},this.$$ngModelSet=function(e,n){isFunction(this.$$parsedNgModel(e))?t(e,{$$$p:n}):this.$$parsedNgModelAssign(e,n)}}else if(!this.$$parsedNgModel.assign)throw Yt("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,startingTag(this.$$element))},$render:noop,$isEmpty:function(e){return isUndefined(e)||""===e||null===e||e!==e},$$updateEmptyClasses:function(e){this.$isEmpty(e)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,qt),this.$$animate.addClass(this.$$element,Gt)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Gt),this.$$animate.addClass(this.$$element,qt),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!S(this.$modelValue)){var e=this.$$lastCommittedViewValue,t=this.$$rawModelValue,n=this.$valid,i=this.$modelValue,r=this.$options.getOption("allowInvalid"),o=this;this.$$runValidators(t,e,function(e){r||n===e||(o.$modelValue=e?t:void 0,o.$modelValue!==i&&o.$$writeModelToScope())})}},$$runValidators:function(e,t,n){function setValidity(e,t){i===r.$$currentValidationRunId&&r.$setValidity(e,t)}function validationDone(e){i===r.$$currentValidationRunId&&n(e)}this.$$currentValidationRunId++;var i=this.$$currentValidationRunId,r=this;return function(){var e=r.$$parserName||"parse";return isUndefined(r.$$parserValid)?(setValidity(e,null),!0):(r.$$parserValid||(forEach(r.$validators,function(e,t){setValidity(t,null)}),forEach(r.$asyncValidators,function(e,t){setValidity(t,null)})),setValidity(e,r.$$parserValid),r.$$parserValid)}()&&function(){var n=!0;return forEach(r.$validators,function(i,r){var o=Boolean(i(e,t));n=n&&o,setValidity(r,o)}),!!n||(forEach(r.$asyncValidators,function(e,t){setValidity(t,null)}),!1)}()?void function(){var n=[],i=!0;forEach(r.$asyncValidators,function(r,o){var a=r(e,t);if(!isPromiseLike(a))throw Yt("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",a);setValidity(o,void 0),n.push(a.then(function(){setValidity(o,!0)},function(){i=!1,setValidity(o,!1)}))}),n.length?r.$$q.all(n).then(function(){validationDone(i)},noop):validationDone(!0)}():void validationDone(!1)},$commitViewValue:function(){var e=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==e||""===e&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(e),this.$$lastCommittedViewValue=e,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){function writeToModelIfNeeded(){n.$modelValue!==r&&n.$$writeModelToScope()}var e=this.$$lastCommittedViewValue,t=e,n=this;if(this.$$parserValid=!isUndefined(t)||void 0,this.$$parserValid)for(var i=0;i<this.$parsers.length;i++)if(t=this.$parsers[i](t),isUndefined(t)){this.$$parserValid=!1;break}S(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var r=this.$modelValue,o=this.$options.getOption("allowInvalid");this.$$rawModelValue=t,o&&(this.$modelValue=t,writeToModelIfNeeded()),this.$$runValidators(t,this.$$lastCommittedViewValue,function(e){o||(n.$modelValue=e?t:void 0,writeToModelIfNeeded())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),forEach(this.$viewChangeListeners,function(e){try{e()}catch(e){this.$$exceptionHandler(e)}},this)},$setViewValue:function(e,t){this.$viewValue=e,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(t)},$$debounceViewValueCommit:function(e){var t=this.$options.getOption("debounce");isNumber(t[e])?t=t[e]:isNumber(t.default)&&(t=t.default),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;t>0?this.$$pendingDebounce=this.$$timeout(function(){n.$commitViewValue()},t):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){n.$commitViewValue()})},$overrideModelOptions:function(e){this.$options=this.$options.createChild(e)}},addSetValidityMethod({clazz:NgModelController,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]}});var Xt,Zt=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:NgModelController,priority:1,compile:function(t){return t.addClass(Gt).addClass("ng-untouched").addClass(Vt),{pre:function(e,t,n,i){var r=i[0],o=i[1]||r.$$parentForm,a=i[2];a&&(r.$options=a.$options),r.$$initGetterSetters(),o.$addControl(r),n.$observe("name",function(e){r.$name!==e&&r.$$parentForm.$$renameControl(r,e)}),e.$on("$destroy",function(){r.$$parentForm.$removeControl(r)})},post:function(t,n,i,r){function setTouched(){o.$setTouched()}var o=r[0];o.$options.getOption("updateOn")&&n.on(o.$options.getOption("updateOn"),function(e){o.$$debounceViewValueCommit(e&&e.type)}),n.on("blur",function(){o.$touched||(e.$$phase?t.$evalAsync(setTouched):t.$apply(setTouched))})}}}}}],Kt=/(\s+|^)default(\s+|$)/;ModelOptions.prototype={getOption:function(e){return this.$$options[e]},createChild:function(e){var t=!1;return e=extend({},e),forEach(e,function(n,i){"$inherit"===n?"*"===i?t=!0:(e[i]=this.$$options[i],"updateOn"===i&&(e.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===i&&(e.updateOnDefault=!1,e[i]=O(n.replace(Kt,function(){return e.updateOnDefault=!0," "})))},this),t&&(delete e["*"],defaults(e,this.$$options)),defaults(e,Xt.$$options),new ModelOptions(e)}},Xt=new ModelOptions({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var Qt=function(){function NgModelOptionsController(e,t){this.$$attrs=e,this.$$scope=t}return NgModelOptionsController.$inject=["$attrs","$scope"],NgModelOptionsController.prototype={$onInit:function(){var e=this.parentCtrl?this.parentCtrl.$options:Xt,t=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=e.createChild(t)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:NgModelOptionsController}},Jt=ngDirective({terminal:!0,priority:1e3}),en=minErr("ngOptions"),tn=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,nn=["$compile","$document","$parse",function(t,n,i){function parseOptionsExpression(e,t,n){function Option(e,t,n,i,r){this.selectValue=e,this.viewValue=t,this.label=n,this.group=i,this.disabled=r}function getOptionValuesKeys(e){var t;if(!a&&isArrayLike(e))t=e;else{t=[];for(var n in e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&t.push(n)}return t}var r=e.match(tn);if(!r)throw en("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,startingTag(t));var o=r[5]||r[7],a=r[6],s=/ as /.test(r[0])&&r[1],l=r[9],c=i(r[2]?r[1]:o),u=s&&i(s),d=u||c,p=l&&i(l),h=l?function(e,t){return p(n,t)}:function(e){return hashKey(e)},f=function(e,t){return h(e,b(e,t))},m=i(r[2]||r[1]),g=i(r[3]||""),v=i(r[4]||""),y=i(r[8]),w={},b=a?function(e,t){return w[a]=t,w[o]=e,w}:function(e){return w[o]=e,w};return{trackBy:l,getTrackByValue:f,getWatchables:i(y,function(e){var t=[];e=e||[];for(var i=getOptionValuesKeys(e),o=i.length,a=0;a<o;a++){var s=e===i?a:i[a],l=e[s],c=b(l,s),u=h(l,c);if(t.push(u),r[2]||r[1]){var d=m(n,c);t.push(d)}if(r[4]){var p=v(n,c);t.push(p)}}return t}),getOptions:function(){for(var e=[],t={},i=y(n)||[],r=getOptionValuesKeys(i),o=r.length,a=0;a<o;a++){var s=i===r?a:r[a],c=i[s],u=b(c,s),p=d(n,u),w=h(p,u),S=m(n,u),T=g(n,u),E=v(n,u),O=new Option(w,p,S,T,E);e.push(O),t[w]=O}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[f(e)]},getViewValueFromOption:function(e){return l?copy(e.viewValue):e.viewValue}}}}}function ngOptionsPostLink(e,i,a,s){function addOptionElement(e,t){var n=r.cloneNode(!1);t.appendChild(n),updateOptionElement(e,n)}function getAndUpdateSelectedOption(e){var t=g.getOptionFromViewValue(e),n=t&&t.element;return n&&!n.selected&&(n.selected=!0),t}function updateOptionElement(e,t){e.element=t,t.disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label),t.value=e.selectValue}function updateOptions(){var e=g&&l.readValue();if(g)for(var t=g.items.length-1;t>=0;t--){var n=g.items[t];jqLiteRemove(isDefined(n.group)?n.element.parentNode:n.element)}g=v.getOptions();var r={};if(g.items.forEach(function(e){var t;isDefined(e.group)?(t=r[e.group],t||(t=o.cloneNode(!1),y.appendChild(t),t.label=null===e.group?"null":e.group,r[e.group]=t),addOptionElement(e,t)):addOptionElement(e,y)}),i[0].appendChild(y),c.$render(),!c.$isEmpty(e)){var a=l.readValue();(v.trackBy||d?equals(e,a):e===a)||(c.$setViewValue(a),c.$render())}}for(var l=s[0],c=s[1],d=a.multiple,p=0,h=i.children(),f=h.length;p<f;p++)if(""===h[p].value){l.hasEmptyOption=!0,l.emptyOption=h.eq(p);break}i.empty();var m=!!l.emptyOption;u(r.cloneNode(!1)).val("?");var g,v=parseOptionsExpression(a.ngOptions,i,e),y=n[0].createDocumentFragment();l.generateUnknownOptionValue=function(e){return"?"},d?(l.writeValue=function(e){if(g){var t=e&&e.map(getAndUpdateSelectedOption)||[];g.items.forEach(function(e){e.element.selected&&!includes(t,e)&&(e.element.selected=!1)})}},l.readValue=function(){var e=i.val()||[],t=[];return forEach(e,function(e){var n=g.selectValueMap[e];n&&!n.disabled&&t.push(g.getViewValueFromOption(n))}),t},v.trackBy&&e.$watchCollection(function(){if(T(c.$viewValue))return c.$viewValue.map(function(e){return v.getTrackByValue(e)})},function(){c.$render()})):(l.writeValue=function(e){if(g){var t=i[0].options[i[0].selectedIndex],n=g.getOptionFromViewValue(e);t&&t.removeAttribute("selected"),n?(i[0].value!==n.selectValue&&(l.removeUnknownOption(),i[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):l.selectUnknownOrEmptyOption(e)}},l.readValue=function(){var e=g.selectValueMap[i.val()];return e&&!e.disabled?(l.unselectEmptyOption(),l.removeUnknownOption(),g.getViewValueFromOption(e)):null},v.trackBy&&e.$watch(function(){return v.getTrackByValue(c.$viewValue)},function(){c.$render()})),m&&(t(l.emptyOption)(e),i.prepend(l.emptyOption),l.emptyOption[0].nodeType===D?(l.hasEmptyOption=!1,l.registerOption=function(e,t){""===t.val()&&(l.hasEmptyOption=!0,l.emptyOption=t,l.emptyOption.removeClass("ng-scope"),c.$render(),t.on("$destroy",function(){var e=l.$isEmptyOptionSelected();l.hasEmptyOption=!1,l.emptyOption=void 0,e&&c.$render()}))}):l.emptyOption.removeClass("ng-scope")),e.$watchCollection(v.getWatchables,updateOptions)}var r=e.document.createElement("option"),o=e.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(e,t,n,i){i[0].registerOption=noop},post:ngOptionsPostLink}}}],rn=["$locale","$interpolate","$log",function(e,t,n){var i=/{}/g,r=/^when(Minus)?(.+)$/;return{link:function(a,s,l){function updateElementText(e){s.text(e||"")}var c,u=l.count,d=l.$attr.when&&s.attr(l.$attr.when),p=l.offset||0,h=a.$eval(d)||{},f={},m=t.startSymbol(),g=t.endSymbol(),v=m+u+"-"+p+g,y=w.noop;forEach(l,function(e,t){var n=r.exec(t);if(n){var i=(n[1]?"-":"")+o(n[2]);h[i]=s.attr(l.$attr[t])}}),forEach(h,function(e,n){f[n]=t(e.replace(i,v))}),a.$watch(u,function(t){var i=parseFloat(t),r=S(i);if(r||i in h||(i=e.pluralCat(i-p)),!(i===c||r&&S(c))){y();var o=f[i];isUndefined(o)?(null!=t&&n.debug("ngPluralize: no rule defined for '"+i+"' in "+d),y=noop,updateElementText()):y=a.$watch(o,updateElementText),c=i}})}}}],on=["$parse","$animate","$compile",function(e,t,n){var i=minErr("ngRepeat"),o=function(e,t,n,i,r,o,a){e[n]=i,r&&(e[r]=o),e.$index=t,e.$first=0===t,e.$last=t===a-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0==(1&t))},a=function(e){return e.clone[0]},s=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(l,c){var u=c.ngRepeat,d=n.$$createComment("end ngRepeat",u),p=u.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw i("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",u);var h=p[1],f=p[2],m=p[3],g=p[4];if(!(p=h.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw i("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",h);var v=p[3]||p[1],y=p[2];if(m&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(m)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(m)))throw i("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",m);var w,b,S,T,E={$id:hashKey};return g?w=e(g):(S=function(e,t){return hashKey(t)},T=function(e){return e}),function(e,n,l,c,p){w&&(b=function(t,n,i){return y&&(E[y]=t),E[v]=n,E.$index=i,w(e,E)});var h=createMap();e.$watchCollection(f,function(l){var c,f,g,w,E,O,I,x,C,$,_,A,R=n[0],P=createMap();if(m&&(e[m]=l),isArrayLike(l))C=l,x=b||S;else{x=b||T,C=[];for(var k in l)r.call(l,k)&&"$"!==k.charAt(0)&&C.push(k)}for(w=C.length,_=new Array(w),c=0;c<w;c++)if(E=l===C?c:C[c],O=l[E],I=x(E,O,c),h[I])$=h[I],delete h[I],P[I]=$,_[c]=$;else{if(P[I])throw forEach(_,function(e){e&&e.scope&&(h[e.id]=e)}),i("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",u,I,O);_[c]={id:I,scope:void 0,clone:void 0},P[I]=!0}for(var N in h){if($=h[N],A=getBlockNodes($.clone),t.leave(A),A[0].parentNode)for(c=0,f=A.length;c<f;c++)A[c].$$NG_REMOVED=!0;$.scope.$destroy()}for(c=0;c<w;c++)if(E=l===C?c:C[c],O=l[E],$=_[c],$.scope){g=R;do{g=g.nextSibling}while(g&&g.$$NG_REMOVED);a($)!==g&&t.move(getBlockNodes($.clone),null,R),R=s($),o($.scope,c,v,O,y,E,w)}else p(function(e,n){$.scope=n;var i=d.cloneNode(!1);e[e.length++]=i,t.enter(e,null,R),R=i,$.clone=e,P[$.id]=$,o($.scope,c,v,O,y,E,w)});h=P})}}}}],an=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,i){t.$watch(i.ngShow,function(t){e[t?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],sn=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,i){t.$watch(i.ngHide,function(t){e[t?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],ln=ngDirective(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&forEach(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),cn=["$animate","$compile",function(e,t){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,i,r,o){var a=r.ngSwitch||r.on,s=[],l=[],c=[],u=[],d=function(e,t){return function(n){!1!==n&&e.splice(t,1)}};n.$watch(a,function(n){for(var i,r;c.length;)e.cancel(c.pop());for(i=0,r=u.length;i<r;++i){var a=getBlockNodes(l[i].clone);u[i].$destroy();(c[i]=e.leave(a)).done(d(c,i))}l.length=0,u.length=0,(s=o.cases["!"+n]||o.cases["?"])&&forEach(s,function(n){n.transclude(function(i,r){u.push(r);var o=n.element;i[i.length++]=t.$$createComment("end ngSwitchWhen");var a={clone:i};l.push(a),e.enter(i,o.parent(),o)})})})}}}],un=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,r){forEach(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(e,t,n){return n[t-1]!==e}),function(e){i.cases["!"+e]=i.cases["!"+e]||[],i.cases["!"+e].push({transclude:r,element:t})})}}),dn=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:t})}}),pn=minErr("ngTransclude"),hn=["$compile",function(e){return{restrict:"EAC",terminal:!0,compile:function(t){var n=e(t.contents());return t.empty(),function(e,t,i,r,o){function ngTranscludeCloneAttachFn(e,n){e.length&&notWhitespace(e)?t.append(e):(useFallbackContent(),n.$destroy())}function useFallbackContent(){n(e,function(e){t.append(e)})}function notWhitespace(e){for(var t=0,n=e.length;t<n;t++){var i=e[t];if(i.nodeType!==N||i.nodeValue.trim())return!0}}if(!o)throw pn("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag(t));i.ngTransclude===i.$attr.ngTransclude&&(i.ngTransclude="");var a=i.ngTransclude||i.ngTranscludeSlot;o(ngTranscludeCloneAttachFn,null,a),a&&!o.isSlotFilled(a)&&useFallbackContent()}}}}],fn=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"===n.type){var i=n.id,r=t[0].text;e.put(i,r)}}}}],mn={$setViewValue:noop,$render:noop},gn=["$element","$scope",function(t,n){function scheduleRender(){o||(o=!0,n.$$postDigest(function(){o=!1,i.ngModelCtrl.$render()}))}function scheduleViewValueUpdate(e){a||(a=!0,n.$$postDigest(function(){n.$$destroyed||(a=!1,i.ngModelCtrl.$setViewValue(i.readValue()),e&&i.ngModelCtrl.$render())}))}var i=this,r=new ne;i.selectValueMap={},i.ngModelCtrl=mn,i.multiple=!1,i.unknownOption=u(e.document.createElement("option")),i.hasEmptyOption=!1,i.emptyOption=void 0,i.renderUnknownOption=function(e){var n=i.generateUnknownOptionValue(e);i.unknownOption.val(n),t.prepend(i.unknownOption),setOptionSelectedStatus(i.unknownOption,!0),t.val(n)},i.updateUnknownOption=function(e){var n=i.generateUnknownOptionValue(e);i.unknownOption.val(n),setOptionSelectedStatus(i.unknownOption,!0),t.val(n)},i.generateUnknownOptionValue=function(e){return"? "+hashKey(e)+" ?"},i.removeUnknownOption=function(){i.unknownOption.parent()&&i.unknownOption.remove()},i.selectEmptyOption=function(){i.emptyOption&&(t.val(""),setOptionSelectedStatus(i.emptyOption,!0))},i.unselectEmptyOption=function(){i.hasEmptyOption&&setOptionSelectedStatus(i.emptyOption,!1)},n.$on("$destroy",function(){i.renderUnknownOption=noop}),i.readValue=function(){var e=t.val(),n=e in i.selectValueMap?i.selectValueMap[e]:e;return i.hasOption(n)?n:null},i.writeValue=function(e){var n=t[0].options[t[0].selectedIndex];if(n&&setOptionSelectedStatus(u(n),!1),i.hasOption(e)){i.removeUnknownOption();var r=hashKey(e);t.val(r in i.selectValueMap?r:e);var o=t[0].options[t[0].selectedIndex];setOptionSelectedStatus(u(o),!0)}else i.selectUnknownOrEmptyOption(e)},i.addOption=function(e,t){if(t[0].nodeType!==D){assertNotHasOwnProperty(e,'"option value"'),""===e&&(i.hasEmptyOption=!0,i.emptyOption=t);var n=r.get(e)||0;r.set(e,n+1),scheduleRender()}},i.removeOption=function(e){var t=r.get(e);t&&(1===t?(r.delete(e),""===e&&(i.hasEmptyOption=!1,i.emptyOption=void 0)):r.set(e,t-1))},i.hasOption=function(e){return!!r.get(e)},i.$hasEmptyOption=function(){return i.hasEmptyOption},i.$isUnknownOptionSelected=function(){return t[0].options[0]===i.unknownOption[0]},i.$isEmptyOptionSelected=function(){return i.hasEmptyOption&&t[0].options[t[0].selectedIndex]===i.emptyOption[0]},i.selectUnknownOrEmptyOption=function(e){null==e&&i.emptyOption?(i.removeUnknownOption(),i.selectEmptyOption()):i.unknownOption.parent().length?i.updateUnknownOption(e):i.renderUnknownOption(e)};var o=!1,a=!1;i.registerOption=function(e,t,n,r,o){if(n.$attr.ngValue){var a,s=NaN;n.$observe("value",function(e){var n,r=t.prop("selected");isDefined(s)&&(i.removeOption(a),delete i.selectValueMap[s],n=!0),s=hashKey(e),a=e,i.selectValueMap[s]=e,i.addOption(e,t),t.attr("value",s),n&&r&&scheduleViewValueUpdate()})}else r?n.$observe("value",function(e){i.readValue();var n,r=t.prop("selected");isDefined(a)&&(i.removeOption(a),n=!0),a=e,i.addOption(e,t),n&&r&&scheduleViewValueUpdate()}):o?e.$watch(o,function(e,r){n.$set("value",e);var o=t.prop("selected");r!==e&&i.removeOption(r),i.addOption(e,t),r&&o&&scheduleViewValueUpdate()}):i.addOption(n.value,t);n.$observe("disabled",function(e){("true"===e||e&&t.prop("selected"))&&(i.multiple?scheduleViewValueUpdate(!0):(i.ngModelCtrl.$setViewValue(null),i.ngModelCtrl.$render()))}),t.on("$destroy",function(){var e=i.readValue(),t=n.value;i.removeOption(t),scheduleRender(),(i.multiple&&e&&-1!==e.indexOf(t)||e===t)&&scheduleViewValueUpdate(!0)})}}],vn=function(){function selectPreLink(e,t,n,i){var r=i[0],o=i[1];if(!o)return void(r.registerOption=noop);if(r.ngModelCtrl=o,t.on("change",function(){r.removeUnknownOption(),e.$apply(function(){o.$setViewValue(r.readValue())})}),n.multiple){r.multiple=!0,r.readValue=function(){var e=[];return forEach(t.find("option"),function(t){if(t.selected&&!t.disabled){var n=t.value;e.push(n in r.selectValueMap?r.selectValueMap[n]:n)}}),e},r.writeValue=function(e){forEach(t.find("option"),function(t){var n=!!e&&(includes(e,t.value)||includes(e,r.selectValueMap[t.value]));n!==t.selected&&setOptionSelectedStatus(u(t),n)})};var a,s=NaN;e.$watch(function(){s!==o.$viewValue||equals(a,o.$viewValue)||(a=shallowCopy(o.$viewValue),o.$render()),s=o.$viewValue}),o.$isEmpty=function(e){return!e||0===e.length}}}function selectPostLink(e,t,n,i){var r=i[1];if(r){var o=i[0];r.$render=function(){o.writeValue(r.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:gn,priority:1,link:{pre:selectPreLink,post:selectPostLink}}},yn=["$interpolate",function(e){return{restrict:"E",priority:100,compile:function(t,n){var i,r;return isDefined(n.ngValue)||(isDefined(n.value)?i=e(n.value,!0):(r=e(t.text(),!0))||n.$set("value",t.text())),function(e,t,n){var o=t.parent(),a=o.data("$selectController")||o.parent().data("$selectController");a&&a.registerOption(e,t,n,i,r)}}}}],wn=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){i&&(n.required=!0,i.$validators.required=function(e,t){return!n.required||!i.$isEmpty(t)},n.$observe("required",function(){i.$validate()}))}}},bn=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r,o=n.ngPattern||n.pattern;n.$observe("pattern",function(e){if(isString(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw minErr("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",o,e,startingTag(t));r=e||void 0,i.$validate()}),i.$validators.pattern=function(e,t){return i.$isEmpty(t)||isUndefined(r)||r.test(t)}}}}},Sn=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r=-1;n.$observe("maxlength",function(e){var t=toInt(e);r=S(t)?-1:t,i.$validate()}),i.$validators.maxlength=function(e,t){return r<0||i.$isEmpty(t)||t.length<=r}}}}},Tn=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,i){if(i){var r=0;n.$observe("minlength",function(e){r=toInt(e)||0,i.$validate()}),i.$validators.minlength=function(e,t){return i.$isEmpty(t)||t.length>=r}}}}};if(e.angular.bootstrap)return void(e.console&&console.log("WARNING: Tried to load angular more than once."));!function(){var t;if(!P){var n=C();d=isUndefined(n)?e.jQuery:n?e[n]:void 0,d&&d.fn.on?(u=d,extend(d.fn,{scope:K.scope,isolateScope:K.isolateScope,controller:K.controller,injector:K.injector,inheritedData:K.inheritedData}),t=d.cleanData,d.cleanData=function(e){for(var n,i,r=0;null!=(i=e[r]);r++)(n=d._data(i,"events"))&&n.$destroy&&d(i).triggerHandler("$destroy");t(e)}):u=JQLite,w.element=u,P=!0}}(),function(t){extend(t,{errorHandlingConfig:errorHandlingConfig,bootstrap:bootstrap,copy:copy,extend:extend,merge:merge,equals:equals,element:u,forEach:forEach,injector:createInjector,noop:noop,bind:bind,toJson:toJson,fromJson:fromJson,identity:identity,isUndefined:isUndefined,isDefined:isDefined,isString:isString,isFunction:isFunction,isObject:isObject,isNumber:isNumber,isElement:isElement,isArray:T,version:F,isDate:isDate,lowercase:o,uppercase:a,callbacks:{$$counter:0},getTestability:getTestability,reloadWithDebugInfo:reloadWithDebugInfo,$$minErr:minErr,$$csp:x,$$encodeUriSegment:encodeUriSegment,$$encodeUriQuery:encodeUriQuery,$$stringify:stringify}),p=setupModuleLoader(e),p("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:$$SanitizeUriProvider}),e.provider("$compile",$CompileProvider).directive({a:at,input:It,textarea:It,form:dt,script:fn,select:vn,option:yn,ngBind:$t,ngBindHtml:At,ngBindTemplate:_t,ngClass:Pt,ngClassEven:Nt,ngClassOdd:kt,ngCloak:Dt,ngController:Lt,ngForm:pt,ngHide:sn,ngIf:jt,ngInclude:Bt,ngInit:zt,ngNonBindable:Jt,ngPluralize:rn,ngRepeat:on,ngShow:an,ngStyle:ln,ngSwitch:cn,ngSwitchWhen:un,ngSwitchDefault:dn,ngOptions:nn,ngTransclude:hn,ngModel:Zt,ngList:Ut,ngChange:Rt,pattern:bn,ngPattern:bn,required:wn,ngRequired:wn,minlength:Tn,ngMinlength:Tn,maxlength:Sn,ngMaxlength:Sn,ngValue:Ct,ngModelOptions:Qt}).directive({ngInclude:Ht}).directive(st).directive(Mt),e.provider({$anchorScroll:$AnchorScrollProvider,$animate:fe,$animateCss:ve,$$animateJs:pe,$$animateQueue:he,$$AnimateRunner:ge,$$animateAsyncRun:me,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$$isDocumentHidden:$$IsDocumentHiddenProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$$forceReflow:Oe,$interpolate:$InterpolateProvider,$interval:$IntervalProvider,$http:$HttpProvider,$httpParamSerializer:$HttpParamSerializerProvider,$httpParamSerializerJQLike:$HttpParamSerializerJQLikeProvider,$httpBackend:$HttpBackendProvider,$xhrFactory:$xhrFactoryProvider,$jsonpCallbacks:Pe,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$$q:$$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$templateCache:$TemplateCacheProvider,$templateRequest:$TemplateRequestProvider,$$testability:$$TestabilityProvider,$timeout:$TimeoutProvider,$window:$WindowProvider,$$rAF:$$RAFProvider,$$jqLite:$$jqLiteProvider,$$Map:ie,$$cookieReader:$$CookieReaderProvider})}]).info({angularVersion:"1.6.6"})}(w),w.module("ngLocale",[],["$provide",function(e){function getDecimals(e){e+="";var t=e.indexOf(".");return-1==t?0:e.length-t-1}function getVF(e,t){var n=t;void 0===n&&(n=Math.min(getDecimals(e),3));var i=Math.pow(10,n);return{v:n,f:(e*i|0)%i}}var t={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,n){var i=0|e,r=getVF(e,n);return 1==i&&0==r.v?t.ONE:t.OTHER}})}]),u(function(){angularInit(e.document,bootstrap)})}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>')},function(e,t,n){n(48),e.exports="ngSanitize"},function(e,t){!function(e,t){"use strict";function $SanitizeProvider(){function toMap(e,t){var n,i={},r=e.split(",");for(n=0;n<r.length;n++)i[t?a(r[n]):r[n]]=!0;return i}function htmlParserImpl(e,t){null===e||void 0===e?e="":"string"!=typeof e&&(e=""+e);var n=$(e);if(!n)return"";var i=5;do{if(0===i)throw d("uinput","Failed to sanitize html because the input is unstable");i--,e=n.innerHTML,n=$(e)}while(e!==n.innerHTML);for(var r=n.firstChild;r;){switch(r.nodeType){case 1:t.start(r.nodeName.toLowerCase(),attrToMap(r.attributes));break;case 3:t.chars(r.textContent)}var o;if(!((o=r.firstChild)||(1===r.nodeType&&t.end(r.nodeName.toLowerCase()),o=getNonDescendant("nextSibling",r))))for(;null==o&&(r=getNonDescendant("parentNode",r))!==n;)o=getNonDescendant("nextSibling",r),1===r.nodeType&&t.end(r.nodeName.toLowerCase());r=o}for(;r=n.firstChild;)n.removeChild(r)}function attrToMap(e){for(var t={},n=0,i=e.length;n<i;n++){var r=e[n];t[r.name]=r.value}return t}function encodeEntities(e){return e.replace(/&/g,"&amp;").replace(h,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(f,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function htmlSanitizeWriterImpl(e,t){var i=!1,o=n(e,e.push);return{start:function(e,n){e=a(e),!i&&T[e]&&(i=e),i||!0!==E[e]||(o("<"),o(e),r(n,function(n,i){var r=a(i),s="img"===e&&"src"===r||"background"===r;!0!==C[r]||!0===O[r]&&!t(n,s)||(o(" "),o(i),o('="'),o(encodeEntities(n)),o('"'))}),o(">"))},end:function(e){e=a(e),i||!0!==E[e]||!0===m[e]||(o("</"),o(e),o(">")),e==i&&(i=!1)},chars:function(e){i||o(encodeEntities(e))}}}function stripCustomNsAttrs(t){for(;t;){if(t.nodeType===e.Node.ELEMENT_NODE)for(var n=t.attributes,i=0,r=n.length;i<r;i++){var o=n[i],a=o.name.toLowerCase();"xmlns:ns1"!==a&&0!==a.lastIndexOf("ns1:",0)||(t.removeAttributeNode(o),i--,r--)}var s=t.firstChild;s&&stripCustomNsAttrs(s),t=getNonDescendant("nextSibling",t)}}function getNonDescendant(e,t){var n=t[e];if(n&&l.call(t,n))throw d("elclob","Failed to sanitize html because the element is clobbered: {0}",t.outerHTML||t.outerText);return n}var p=!1;this.$get=["$$sanitizeUri",function(e){return p&&i(E,S),function(t){var n=[];return c(t,u(n,function(t,n){return!/^unsafe:/.test(e(t,n))})),n.join("")}}],this.enableSvg=function(e){return o(e)?(p=e,this):p},n=t.bind,i=t.extend,r=t.forEach,o=t.isDefined,a=t.lowercase,s=t.noop,c=htmlParserImpl,u=htmlSanitizeWriterImpl,l=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))};var h=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=/([^#-~ |!])/g,m=toMap("area,br,col,hr,img,wbr"),g=toMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),v=toMap("rp,rt"),y=i({},v,g),w=i({},g,toMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),b=i({},v,toMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),S=toMap("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),T=toMap("script,style"),E=i({},m,w,b,y),O=toMap("background,cite,href,longdesc,src,xlink:href"),I=toMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),x=toMap("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),C=i({},O,x,I),$=function(e,t){function getInertBodyElement_XHR(t){t="<remove></remove>"+t;try{t=encodeURI(t)}catch(e){return}var n=new e.XMLHttpRequest;n.responseType="document",n.open("GET","data:text/html;charset=utf-8,"+t,!1),n.send(null);var i=n.response.body;return i.firstChild.remove(),i}function getInertBodyElement_DOMParser(t){t="<remove></remove>"+t;try{var n=(new e.DOMParser).parseFromString(t,"text/html").body;return n.firstChild.remove(),n}catch(e){return}}function getInertBodyElement_InertDocument(e){return i.innerHTML=e,t.documentMode&&stripCustomNsAttrs(i),i}var n;if(!t||!t.implementation)throw d("noinert","Can't create an inert html document");n=t.implementation.createHTMLDocument("inert");var i=(n.documentElement||n.getDocumentElement()).querySelector("body");return i.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',i.querySelector("svg")?(i.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',i.querySelector("svg img")?getInertBodyElement_DOMParser:getInertBodyElement_InertDocument):getInertBodyElement_XHR}(e,e.document)}function sanitizeText(e){var t=[];return u(t,s).chars(e),t.join("")}var n,i,r,o,a,s,l,c,u,d=t.$$minErr("$sanitize");t.module("ngSanitize",[]).provider("$sanitize",$SanitizeProvider).info({angularVersion:"1.6.6"}),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,i=/^mailto:/i,r=t.$$minErr("linky"),o=t.isDefined,a=t.isFunction,s=t.isObject,l=t.isString;return function(t,c,u){function addText(e){e&&g.push(sanitizeText(e))}if(null==t||""===t)return t;if(!l(t))throw r("notstring","Expected string but received: {0}",t);for(var d,p,h,f=a(u)?u:s(u)?function(){return u}:function(){return{}},m=t,g=[];d=m.match(n);)p=d[0],d[2]||d[4]||(p=(d[3]?"http://":"mailto:")+p),h=d.index,addText(m.substr(0,h)),function(e,t){var n,i=f(e);g.push("<a ");for(n in i)g.push(n+'="'+i[n]+'" ');!o(c)||"target"in i||g.push('target="',c,'" '),g.push('href="',e.replace(/"/g,"&quot;"),'">'),addText(t),g.push("</a>")}(p,d[0].replace(i,"")),m=m.substring(h+d[0].length);return addText(m),e(g.join(""))}}])}(window,window.angular)},function(e,t){!function(e,t){"use strict";function assertArg(e,t,n){if(!e)throw R("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function mergeClasses(e,t){return e||t?e?t?(m(e)&&(e=e.join(" ")),m(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function packageStyles(e){var t={};return e&&(e.to||e.from)&&(t.to=e.to,t.from=e.from),t}function pendClasses(e,t,n){var i="";return e=m(e)?e:e&&b(e)&&e.length?e.split(/\s+/):[],f(e,function(e,r){e&&e.length>0&&(i+=r>0?" ":"",i+=n?t+e:e+t)}),i}function removeFromArray(e,t){var n=e.indexOf(t);t>=0&&e.splice(n,1)}function stripCommentsFromElement(e){if(e instanceof T)switch(e.length){case 0:return e;case 1:if(e[0].nodeType===a)return e;break;default:return T(extractElementNode(e))}if(e.nodeType===a)return T(e)}function extractElementNode(e){if(!e[0])return e;for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===a)return n}}function $$addClass(e,t,n){f(t,function(t){e.addClass(t,n)})}function $$removeClass(e,t,n){f(t,function(t){e.removeClass(t,n)})}function applyAnimationClassesFactory(e){return function(t,n){n.addClass&&($$addClass(e,t,n.addClass),n.addClass=null),n.removeClass&&($$removeClass(e,t,n.removeClass),n.removeClass=null)}}function prepareAnimationOptions(e){if(e=e||{},!e.$$prepared){var t=e.domOperation||E;e.domOperation=function(){e.$$domOperationFired=!0,t(),t=E},e.$$prepared=!0}return e}function applyAnimationStyles(e,t){applyAnimationFromStyles(e,t),applyAnimationToStyles(e,t)}function applyAnimationFromStyles(e,t){t.from&&(e.css(t.from),t.from=null)}function applyAnimationToStyles(e,t){t.to&&(e.css(t.to),t.to=null)}function mergeAnimationDetails(e,t,n){var i=t.options||{},r=n.options||{},o=(i.addClass||"")+" "+(r.addClass||""),a=(i.removeClass||"")+" "+(r.removeClass||""),s=resolveElementClasses(e.attr("class"),o,a);r.preparationClasses&&(i.preparationClasses=concatWithSpace(r.preparationClasses,i.preparationClasses),delete r.preparationClasses);var l=i.domOperation!==E?i.domOperation:null;return h(i,r),l&&(i.domOperation=l),s.addClass?i.addClass=s.addClass:i.addClass=null,s.removeClass?i.removeClass=s.removeClass:i.removeClass=null,t.addClass=i.addClass,t.removeClass=i.removeClass,i}function resolveElementClasses(e,t,n){function splitClassesToLookup(e){b(e)&&(e=e.split(" "));var t={};return f(e,function(e){e.length&&(t[e]=!0)}),t}var i={};e=splitClassesToLookup(e),t=splitClassesToLookup(t),f(t,function(e,t){i[t]=1}),n=splitClassesToLookup(n),f(n,function(e,t){i[t]=1===i[t]?null:-1});var r={addClass:"",removeClass:""};return f(i,function(t,n){var i,o;1===t?(i="addClass",o=!e[n]||e[n+l]):-1===t&&(i="removeClass",o=e[n]||e[n+s]),o&&(r[i].length&&(r[i]+=" "),r[i]+=n)}),r}function getDomNode(e){return e instanceof T?e[0]:e}function applyGeneratedPreparationClasses(e,t,n){var i="";t&&(i=pendClasses(t,c,!0)),n.addClass&&(i=concatWithSpace(i,pendClasses(n.addClass,s))),n.removeClass&&(i=concatWithSpace(i,pendClasses(n.removeClass,l))),i.length&&(n.preparationClasses=i,e.addClass(i))}function clearGeneratedClasses(e,t){t.preparationClasses&&(e.removeClass(t.preparationClasses),t.preparationClasses=null),t.activeClasses&&(e.removeClass(t.activeClasses),t.activeClasses=null)}function blockTransitions(e,t){var n=t?"-"+t+"s":"";return applyInlineStyle(e,[_,n]),[_,n]}function blockKeyframeAnimations(e,t){var n=t?"paused":"",i=r+x;return applyInlineStyle(e,[i,n]),[i,n]}function applyInlineStyle(e,t){var n=t[0],i=t[1];e.style[n]=i}function concatWithSpace(e,t){return e?t?e+" "+t:e:t}function getCssKeyframeDurationStyle(e){return[$,e+"s"]}function getCssDelayStyle(e,t){return[t?C:_,e+"s"]}function computeCssStyles(e,t,n){var i=Object.create(null),r=e.getComputedStyle(t)||{};return f(n,function(e,t){var n=r[e];if(n){var o=n.charAt(0);("-"===o||"+"===o||o>=0)&&(n=parseMaxTime(n)),0===n&&(n=null),i[t]=n}}),i}function parseMaxTime(e){var t=0,n=e.split(/\s*,\s*/);return f(n,function(e){"s"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e=parseFloat(e)||0,t=t?Math.max(e,t):e}),t}function truthyTimingValue(e){return 0===e||null!=e}function getCssTransitionDurationStyle(e,t){var i=n,r=e+"s";return t?i+=O:r+=" linear all",[i,r]}function createLocalCacheLookup(){var e=Object.create(null);return{flush:function(){e=Object.create(null)},count:function(t){var n=e[t];return n?n.total:0},get:function(t){var n=e[t];return n&&n.value},put:function(t,n){e[t]?e[t].total++:e[t]={total:1,value:n}}}}function registerRestorableStyles(e,t,n){f(n,function(n){e[n]=g(e[n])?e[n]:t.style.getPropertyValue(n)})}var n,i,r,o,a=1,s="-add",l="-remove",c="ng-",u="ng-animate",d="$$ngAnimateChildren";void 0===e.ontransitionend&&void 0!==e.onwebkittransitionend?("-webkit-",n="WebkitTransition",i="webkitTransitionEnd transitionend"):(n="transition",i="transitionend"),void 0===e.onanimationend&&void 0!==e.onwebkitanimationend?("-webkit-",r="WebkitAnimation",o="webkitAnimationEnd animationend"):(r="animation",o="animationend");var p,h,f,m,g,v,y,w,b,S,T,E,O="Duration",I="TimingFunction",x="PlayState",C=r+"Delay",$=r+O,_=n+"Delay",A=n+O,R=t.$$minErr("ng"),P=["$$rAF",function(e){function scheduler(e){t=t.concat(e),nextTick()}function nextTick(){if(t.length){for(var i=t.shift(),r=0;r<i.length;r++)i[r]();n||e(function(){n||nextTick()})}}var t,n;return t=scheduler.queue=[],scheduler.waitUntilQuiet=function(t){n&&n(),n=e(function(){n=null,t(),nextTick()})},scheduler}],k=["$interpolate",function(e){return{link:function(t,n,i){function setData(e){e="on"===e||"true"===e,n.data(d,e)}var r=i.ngAnimateChildren;b(r)&&0===r.length?n.data(d,!0):(setData(e(r)(t)),i.$observe("ngAnimateChildren",setData))}}}],N="$$animateCss",D=1e3,L=3,M=1.5,F={transitionDuration:A,transitionDelay:_,transitionProperty:n+"Property",animationDuration:$,animationDelay:C,animationIterationCount:r+"IterationCount"},j={transitionDuration:A,transitionDelay:_,animationDuration:$,animationDelay:C},B=["$animateProvider",function(e){var t=createLocalCacheLookup(),a=createLocalCacheLookup();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(e,u,d,h,g,v,y,w){function gcsHashFn(e,t){var n="$$ngAnimateParentKey",i=e.parentNode;return(i[n]||(i[n]=++S))+"-"+e.getAttribute("class")+"-"+t}function computeCachedCssStyles(n,i,r,o){var a=t.get(r);return a||(a=computeCssStyles(e,n,o),"infinite"===a.animationIterationCount&&(a.animationIterationCount=1)),t.put(r,a),a}function computeCachedCssStaggerStyles(n,i,r,o){var s;if(t.count(r)>0&&!(s=a.get(r))){var l=pendClasses(i,"-stagger");u.addClass(n,l),s=computeCssStyles(e,n,o),s.animationDuration=Math.max(s.animationDuration,0),s.transitionDuration=Math.max(s.transitionDuration,0),u.removeClass(n,l),a.put(r,s)}return s||{}}function waitUntilQuiet(e){T.push(e),y.waitUntilQuiet(function(){t.flush(),a.flush();for(var e=g(),n=0;n<T.length;n++)T[n](e);T.length=0})}function computeTimings(e,t,n){var i=computeCachedCssStyles(e,t,n,F),r=i.animationDelay,o=i.transitionDelay;return i.maxDelay=r&&o?Math.max(r,o):r||o,i.maxDuration=Math.max(i.animationDuration*i.animationIterationCount,i.transitionDuration),i}var b=applyAnimationClassesFactory(u),S=0,T=[];return function(e,a){function endFn(){close()}function cancelFn(){close(!0)}function close(t){if(!(T||x&&O)){T=!0,O=!1,g.$$skipPreparationClasses||u.removeClass(e,q),u.removeClass(e,X),blockKeyframeAnimations(S,!1),blockTransitions(S,!1),f(F,function(e){S.style[e[0]]=""}),b(e,g),applyAnimationStyles(e,g),Object.keys(y).length&&f(y,function(e,t){e?S.style.setProperty(t,e):S.style.removeProperty(t)}),g.onDone&&g.onDone(),z&&z.length&&e.off(z.join(" "),onAnimationProgress);var n=e.data(N);n&&(h.cancel(n[0].timer),e.removeData(N)),C&&C.complete(!t)}}function applyBlocking(e){le.blockTransition&&blockTransitions(S,e),le.blockKeyframeAnimation&&blockKeyframeAnimations(S,!!e)}function closeAndReturnNoopAnimator(){return C=new d({end:endFn,cancel:cancelFn}),waitUntilQuiet(E),close(),{$$willAnimate:!1,start:function(){return C},end:endFn}}function onAnimationProgress(e){e.stopPropagation();var t=e.originalEvent||e,n=t.$manualTimeStamp||Date.now(),i=parseFloat(t.elapsedTime.toFixed(L));Math.max(n-k,0)>=A&&i>=R&&(x=!0,close())}function start(){function triggerAnimationStart(){if(!T){if(applyBlocking(!1),f(F,function(e){var t=e[0],n=e[1];S.style[t]=n}),b(e,g),u.addClass(e,X),le.recalculateTimingStyles){if(Y=S.getAttribute("class")+" "+q,K=gcsHashFn(S,Y),ae=computeTimings(S,Y,K),se=ae.maxDelay,_=Math.max(se,0),0===(R=ae.maxDuration))return void close();le.hasTransitions=ae.transitionDuration>0,le.hasAnimations=ae.animationDuration>0}if(le.applyAnimationDelay&&(se="boolean"!=typeof g.delay&&truthyTimingValue(g.delay)?parseFloat(g.delay):se,_=Math.max(se,0),ae.animationDelay=se,ce=getCssDelayStyle(se,!0),F.push(ce),S.style[ce[0]]=ce[1]),A=_*D,P=R*D,g.easing){var t,a=g.easing;le.hasTransitions&&(t=n+I,F.push([t,a]),S.style[t]=a),le.hasAnimations&&(t=r+I,F.push([t,a]),S.style[t]=a)}ae.transitionDuration&&z.push(i),ae.animationDuration&&z.push(o),k=Date.now();var s=A+M*P,l=k+s,c=e.data(N)||[],d=!0;if(c.length){var p=c[0];d=l>p.expectedEndTime,d?h.cancel(p.timer):c.push(close)}if(d){var m=h(onAnimationExpired,s,!1);c[0]={timer:m,expectedEndTime:l},c.push(close),e.data(N,c)}z.length&&e.on(z.join(" "),onAnimationProgress),g.to&&(g.cleanupStyles&&registerRestorableStyles(y,S,Object.keys(g.to)),applyAnimationToStyles(e,g))}}function onAnimationExpired(){var t=e.data(N);if(t){for(var n=1;n<t.length;n++)t[n]();e.removeData(N)}}if(!T){if(!S.parentNode)return void close();var t=function(e){if(x)O&&e&&(O=!1,close());else if(O=!e,ae.animationDuration){var t=blockKeyframeAnimations(S,O);O?F.push(t):removeFromArray(F,t)}},a=re>0&&(ae.transitionDuration&&0===Q.transitionDuration||ae.animationDuration&&0===Q.animationDuration)&&Math.max(Q.animationDelay,Q.transitionDelay);a?h(triggerAnimationStart,Math.floor(a*re*D),!1):triggerAnimationStart(),$.resume=function(){t(!0)},$.pause=function(){t(!1)}}}var g=a||{};g.$$prepared||(g=prepareAnimationOptions(p(g)));var y={},S=getDomNode(e);if(!S||!S.parentNode||!w.enabled())return closeAndReturnNoopAnimator();var T,O,x,C,$,_,A,R,P,k,F=[],B=e.attr("class"),H=packageStyles(g),z=[];if(0===g.duration||!v.animations&&!v.transitions)return closeAndReturnNoopAnimator();var U=g.event&&m(g.event)?g.event.join(" "):g.event,V=U&&g.structural,W="",G="";V?W=pendClasses(U,c,!0):U&&(W=U),g.addClass&&(G+=pendClasses(g.addClass,s)),g.removeClass&&(G.length&&(G+=" "),G+=pendClasses(g.removeClass,l)),g.applyClassesEarly&&G.length&&b(e,g);var q=[W,G].join(" ").trim(),Y=B+" "+q,X=pendClasses(q,"-active"),Z=H.to&&Object.keys(H.to).length>0;if(!((g.keyframeStyle||"").length>0||Z||q))return closeAndReturnNoopAnimator();var K,Q;if(g.stagger>0){var J=parseFloat(g.stagger);Q={transitionDelay:J,animationDelay:J,transitionDuration:0,animationDuration:0}}else K=gcsHashFn(S,Y),Q=computeCachedCssStaggerStyles(S,q,K,j);g.$$skipPreparationClasses||u.addClass(e,q);var ee;if(g.transitionStyle){var te=[n,g.transitionStyle];applyInlineStyle(S,te),F.push(te)}if(g.duration>=0){ee=S.style[n].length>0;var ne=getCssTransitionDurationStyle(g.duration,ee);applyInlineStyle(S,ne),F.push(ne)}if(g.keyframeStyle){var ie=[r,g.keyframeStyle];applyInlineStyle(S,ie),F.push(ie)}var re=Q?g.staggerIndex>=0?g.staggerIndex:t.count(K):0,oe=0===re;oe&&!g.skipBlocking&&blockTransitions(S,9999);var ae=computeTimings(S,Y,K),se=ae.maxDelay;_=Math.max(se,0),R=ae.maxDuration;var le={};if(le.hasTransitions=ae.transitionDuration>0,le.hasAnimations=ae.animationDuration>0,le.hasTransitionAll=le.hasTransitions&&"all"===ae.transitionProperty,le.applyTransitionDuration=Z&&(le.hasTransitions&&!le.hasTransitionAll||le.hasAnimations&&!le.hasTransitions),le.applyAnimationDuration=g.duration&&le.hasAnimations,le.applyTransitionDelay=truthyTimingValue(g.delay)&&(le.applyTransitionDuration||le.hasTransitions),le.applyAnimationDelay=truthyTimingValue(g.delay)&&le.hasAnimations,le.recalculateTimingStyles=G.length>0,(le.applyTransitionDuration||le.applyAnimationDuration)&&(R=g.duration?parseFloat(g.duration):R,le.applyTransitionDuration&&(le.hasTransitions=!0,ae.transitionDuration=R,ee=S.style[n+"Property"].length>0,F.push(getCssTransitionDurationStyle(R,ee))),le.applyAnimationDuration&&(le.hasAnimations=!0,ae.animationDuration=R,F.push(getCssKeyframeDurationStyle(R)))),0===R&&!le.recalculateTimingStyles)return closeAndReturnNoopAnimator();if(null!=g.delay){var ce;"boolean"!=typeof g.delay&&(ce=parseFloat(g.delay),_=Math.max(ce,0)),le.applyTransitionDelay&&F.push(getCssDelayStyle(ce)),le.applyAnimationDelay&&F.push(getCssDelayStyle(ce,!0))}return null==g.duration&&ae.transitionDuration>0&&(le.recalculateTimingStyles=le.recalculateTimingStyles||oe),A=_*D,P=R*D,g.skipBlocking||(le.blockTransition=ae.transitionDuration>0,le.blockKeyframeAnimation=ae.animationDuration>0&&Q.animationDelay>0&&0===Q.animationDuration),g.from&&(g.cleanupStyles&&registerRestorableStyles(y,S,Object.keys(g.from)),applyAnimationFromStyles(e,g)),le.blockTransition||le.blockKeyframeAnimation?applyBlocking(R):g.skipBlocking||blockTransitions(S,!1),{$$willAnimate:!0,end:endFn,start:function(){if(!T)return $={end:endFn,cancel:cancelFn,resume:null,pause:null},C=new d($),waitUntilQuiet(start),C}}}}]}],H=["$$animationProvider",function(e){function isDocumentFragment(e){return e.parentNode&&11===e.parentNode.nodeType}e.drivers.push("$$animateCssDriver");var t="ng-animate-shim",n="ng-anchor-out";this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(e,i,r,o,a,s,l){function filterCssClasses(e){return e.replace(/\bng-\S+\b/g,"")}function getUniqueValues(e,t){return b(e)&&(e=e.split(" ")),b(t)&&(t=t.split(" ")),e.filter(function(e){return-1===t.indexOf(e)}).join(" ")}function prepareAnchoredAnimation(i,o,a){function calculateAnchorStyles(e){var t={},n=getDomNode(e).getBoundingClientRect();return f(["width","height","top","left"],function(e){var i=n[e];switch(e){case"top":i+=c.scrollTop;break;case"left":i+=c.scrollLeft}t[e]=Math.floor(i)+"px"}),t}function getClassVal(e){return e.attr("class")||""}function prepareInAnimation(){var t=filterCssClasses(getClassVal(a)),i=getUniqueValues(t,l),r=getUniqueValues(l,t),o=e(s,{to:calculateAnchorStyles(a),addClass:"ng-anchor-in "+i,removeClass:n+" "+r,delay:!0});return o.$$willAnimate?o:null}function end(){s.remove(),o.removeClass(t),a.removeClass(t)}var s=T(getDomNode(o).cloneNode(!0)),l=filterCssClasses(getClassVal(s));o.addClass(t),a.addClass(t),s.addClass("ng-anchor"),d.append(s);var u,p=function(){var t=e(s,{addClass:n,delay:!0,from:calculateAnchorStyles(o)});return t.$$willAnimate?t:null}();if(!p&&!(u=prepareInAnimation()))return end();var h=p||u;return{start:function(){function endFn(){t&&t.end()}var e,t=h.start();return t.done(function(){if(t=null,!u&&(u=prepareInAnimation()))return t=u.start(),t.done(function(){t=null,end(),e.complete()}),t;end(),e.complete()}),e=new r({end:endFn,cancel:endFn})}}}function prepareFromToAnchorAnimation(e,t,n,i){var o=prepareRegularAnimation(e),a=prepareRegularAnimation(t),s=[];if(f(i,function(e){var t=e.out,i=e.in,r=prepareAnchoredAnimation(n,t,i);r&&s.push(r)}),o||a||0!==s.length)return{start:function(){function endFn(){f(e,function(e){e.end()})}var e=[];o&&e.push(o.start()),a&&e.push(a.start()),f(s,function(t){e.push(t.start())});var t=new r({end:endFn,cancel:endFn});return r.all(e,function(e){t.complete(e)}),t}}}function prepareRegularAnimation(t){var n=t.element,i=t.options||{};t.structural&&(i.event=t.event,i.structural=!0,i.applyClassesEarly=!0,"leave"===t.event&&(i.onDone=i.domOperation)),i.preparationClasses&&(i.event=concatWithSpace(i.event,i.preparationClasses));var r=e(n,i);return r.$$willAnimate?r:null}if(!a.animations&&!a.transitions)return E;var c=l[0].body,u=getDomNode(o),d=T(isDocumentFragment(u)||c.contains(u)?u:c);return function(e){return e.from&&e.to?prepareFromToAnchorAnimation(e.from,e.to,e.classes,e.anchors):prepareRegularAnimation(e)}}]}],z=["$animateProvider",function(e){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(t,n,i){function lookupAnimations(n){n=m(n)?n:n.split(" ");for(var i=[],r={},o=0;o<n.length;o++){var a=n[o],s=e.$$registeredAnimations[a];s&&!r[a]&&(i.push(t.get(s)),r[a]=!0)}return i}var r=applyAnimationClassesFactory(i);return function(e,t,i,o){function applyOptions(){o.domOperation(),r(e,o)}function close(){a=!0,applyOptions(),applyAnimationStyles(e,o)}function executeAnimationFn(e,t,i,r,o){var a;switch(i){case"animate":a=[t,r.from,r.to,o];break;case"setClass":a=[t,c,u,o];break;case"addClass":a=[t,c,o];break;case"removeClass":a=[t,u,o];break;default:a=[t,o]}a.push(r);var s=e.apply(e,a);if(s)if(y(s.start)&&(s=s.start()),s instanceof n)s.done(o);else if(y(s))return s;return E}function groupEventedAnimations(e,t,i,r,o){var a=[];return f(r,function(r){var s=r[o];s&&a.push(function(){var r,o,a=!1,l=function(e){a||(a=!0,(o||E)(e),r.complete(!e))};return r=new n({end:function(){l()},cancel:function(){l(!0)}}),o=executeAnimationFn(s,e,t,i,function(e){l(!1===e)}),r})}),a}function packageAnimations(e,t,i,r,o){var a=groupEventedAnimations(e,t,i,r,o);if(0===a.length){var s,l;"beforeSetClass"===o?(s=groupEventedAnimations(e,"removeClass",i,r,"beforeRemoveClass"),l=groupEventedAnimations(e,"addClass",i,r,"beforeAddClass")):"setClass"===o&&(s=groupEventedAnimations(e,"removeClass",i,r,"removeClass"),l=groupEventedAnimations(e,"addClass",i,r,"addClass")),s&&(a=a.concat(s)),l&&(a=a.concat(l))}if(0!==a.length)return function(e){var t=[];return a.length&&f(a,function(e){t.push(e())}),t.length?n.all(t,e):e(),function(e){f(t,function(t){e?t.cancel():t.end()})}}}var a=!1;3===arguments.length&&w(i)&&(o=i,i=null),o=prepareAnimationOptions(o),i||(i=e.attr("class")||"",o.addClass&&(i+=" "+o.addClass),o.removeClass&&(i+=" "+o.removeClass));var s,l,c=o.addClass,u=o.removeClass,d=lookupAnimations(i);if(d.length){var p,h;"leave"===t?(h="leave",p="afterLeave"):(h="before"+t.charAt(0).toUpperCase()+t.substr(1),p=t),"enter"!==t&&"move"!==t&&(s=packageAnimations(e,t,o,d,h)),l=packageAnimations(e,t,o,d,p)}if(s||l){var m;return{$$willAnimate:!0,end:function(){return m?m.end():(close(),m=new n,m.complete(!0)),m},start:function(){function onComplete(e){close(e),m.complete(e)}function endAnimations(t){a||((e||E)(t),onComplete(t))}if(m)return m;m=new n;var e,t=[];return s&&t.push(function(t){e=s(t)}),t.length?t.push(function(e){applyOptions(),e(!0)}):applyOptions(),l&&t.push(function(t){e=l(t)}),m.setHost({end:function(){endAnimations()},cancel:function(){endAnimations(!0)}}),n.chain(t,onComplete),m}}}}}]}],U=["$$animationProvider",function(e){e.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(e,t){function prepareAnimation(t){var n=t.element,i=t.event,r=t.options,o=t.classes;return e(n,i,o,r)}return function(e){if(e.from&&e.to){var n=prepareAnimation(e.from),i=prepareAnimation(e.to);if(!n&&!i)return;return{start:function(){function endFnFactory(){return function(){f(e,function(e){e.end()})}}function done(e){r.complete(e)}var e=[];n&&e.push(n.start()),i&&e.push(i.start()),t.all(e,done);var r=new t({end:endFnFactory(),cancel:endFnFactory()});return r}}}return prepareAnimation(e)}}]}],V="data-ng-animate",W="$ngAnimatePin",G=["$animateProvider",function(t){function makeTruthyCssClassMap(e){if(!e)return null;var t=e.split(r),n=Object.create(null);return f(t,function(e){n[e]=!0}),n}function hasMatchingClasses(e,t){if(e&&t){var n=makeTruthyCssClassMap(t);return e.split(r).some(function(e){return n[e]})}}function isAllowed(e,t,n){return o[e].some(function(e){return e(t,n)})}function hasAnimationClasses(e,t){var n=(e.addClass||"").length>0,i=(e.removeClass||"").length>0;return t?n&&i:n||i}var n=1,i=2,r=" ",o=this.rules={skip:[],cancel:[],join:[]};o.join.push(function(e,t){return!e.structural&&hasAnimationClasses(e)}),o.skip.push(function(e,t){return!e.structural&&!hasAnimationClasses(e)}),o.skip.push(function(e,t){return"leave"===t.event&&e.structural}),o.skip.push(function(e,t){return t.structural&&t.state===i&&!e.structural}),o.cancel.push(function(e,t){return t.structural&&e.structural}),o.cancel.push(function(e,t){return t.state===i&&e.structural}),o.cancel.push(function(e,t){if(t.structural)return!1;var n=e.addClass,i=e.removeClass,r=t.addClass,o=t.removeClass;return!(S(n)&&S(i)||S(r)&&S(o))&&(hasMatchingClasses(n,o)||hasMatchingClasses(i,r))}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function(r,o,s,l,c,u,y,E,O,I,x){function postDigestTaskFactory(){var e=!1;return function(t){e?t():o.$$postDigest(function(){e=!0,t()})}}function normalizeAnimationDetails(e,t){return mergeAnimationDetails(e,t,{})}function findCallbacks(e,t,n){var i=[],r=R[n];return r&&f(r,function(r){F.call(r.node,t)?i.push(r.callback):"leave"===n&&F.call(r.node,e)&&i.push(r.callback)}),i}function filterFromRegistry(e,t,n){var i=extractElementNode(t);return e.filter(function(e){return!(e.node===i&&(!n||e.callback===n))})}function cleanupEventListeners(e,t){"close"!==e||t.parentNode||j.off(t)}function queueAnimation(e,t,a){function notifyProgress(e,t,n,i){g(function(){var e=findCallbacks(d,c,t);e.length?r(function(){f(e,function(e){e(l,n,i)}),cleanupEventListeners(n,c)}):cleanupEventListeners(n,c)}),e.progress(t,n,i)}function close(e){clearGeneratedClasses(l,s),M(l,s),applyAnimationStyles(l,s),s.domOperation(),h.complete(!e)}var s=p(a),l=stripCommentsFromElement(e),c=getDomNode(l),d=c&&c.parentNode;s=prepareAnimationOptions(s);var h=new y,g=postDigestTaskFactory();if(m(s.addClass)&&(s.addClass=s.addClass.join(" ")),s.addClass&&!b(s.addClass)&&(s.addClass=null),m(s.removeClass)&&(s.removeClass=s.removeClass.join(" ")),s.removeClass&&!b(s.removeClass)&&(s.removeClass=null),s.from&&!w(s.from)&&(s.from=null),s.to&&!w(s.to)&&(s.to=null),!(_&&c&&D(c,t,a)&&L(c,s)))return close(),h;var v=["enter","move","leave"].indexOf(t)>=0,S=x(),T=S||$.get(c),E=!T&&C.get(c)||{},O=!!E.state;if(T||O&&E.state===n||(T=!areAnimationsAllowed(c,d,t)),T)return S&&notifyProgress(h,t,"start"),close(),S&&notifyProgress(h,t,"close"),h;v&&closeChildAnimations(c);var I={structural:v,element:l,event:t,addClass:s.addClass,removeClass:s.removeClass,close:close,options:s,runner:h};if(O){if(isAllowed("skip",I,E))return E.state===i?(close(),h):(mergeAnimationDetails(l,E,I),E.runner);if(isAllowed("cancel",I,E))if(E.state===i)E.runner.end();else{if(!E.structural)return mergeAnimationDetails(l,E,I),E.runner;E.close()}else{if(isAllowed("join",I,E)){if(E.state!==i)return applyGeneratedPreparationClasses(l,v?t:null,s),t=I.event=E.event,s=mergeAnimationDetails(l,E,I),E.runner;normalizeAnimationDetails(l,I)}}}else normalizeAnimationDetails(l,I);var A=I.structural;if(A||(A="animate"===I.event&&Object.keys(I.options.to||{}).length>0||hasAnimationClasses(I)),!A)return close(),clearElementAnimationState(c),h;var R=(E.counter||0)+1;return I.counter=R,markElementAnimationState(c,n,I),o.$$postDigest(function(){l=stripCommentsFromElement(e);var n=C.get(c),r=!n;n=n||{};var o=l.parent()||[],a=o.length>0&&("animate"===n.event||n.structural||hasAnimationClasses(n));if(r||n.counter!==R||!a)return r&&(M(l,s),applyAnimationStyles(l,s)),(r||v&&n.event!==t)&&(s.domOperation(),h.end()),void(a||clearElementAnimationState(c));t=!n.structural&&hasAnimationClasses(n,!0)?"setClass":n.event,markElementAnimationState(c,i);var d=u(l,t,n.options);h.setHost(d),notifyProgress(h,t,"start",{}),d.done(function(e){close(!e);var n=C.get(c);n&&n.counter===R&&clearElementAnimationState(c),notifyProgress(h,t,"close",{})})}),h}function closeChildAnimations(e){var t=e.querySelectorAll("["+V+"]");f(t,function(e){var t=parseInt(e.getAttribute(V),10),r=C.get(e);if(r)switch(t){case i:r.runner.end();case n:C.delete(e)}})}function clearElementAnimationState(e){e.removeAttribute(V),C.delete(e)}function areAnimationsAllowed(e,t,n){var i,r=l[0].body,o=getDomNode(s),c=e===r||"HTML"===e.nodeName,u=e===o,p=!1,h=$.get(e),f=T.data(e,W);for(f&&(t=getDomNode(f));t&&(u||(u=t===o),t.nodeType===a);){var m=C.get(t)||{};if(!p){var v=$.get(t);if(!0===v&&!1!==h){h=!0;break}!1===v&&(h=!1),p=m.structural}if(S(i)||!0===i){var y=T.data(t,d);g(y)&&(i=y)}if(p&&!1===i)break;if(c||(c=t===r),c&&u)break;t=u||!(f=T.data(t,W))?t.parentNode:getDomNode(f)}return(!p||i)&&!0!==h&&u&&c}function markElementAnimationState(e,t,n){n=n||{},n.state=t,e.setAttribute(V,t);var i=C.get(e),r=i?h(i,n):n;C.set(e,r)}var C=new c,$=new c,_=null,A=o.$watch(function(){return 0===E.totalPendingRequests},function(e){e&&(A(),o.$$postDigest(function(){o.$$postDigest(function(){null===_&&(_=!0)})}))}),R=Object.create(null),P=t.customFilter(),k=t.classNameFilter(),N=function(){return!0},D=P||N,L=k?function(e,t){var n=[e.getAttribute("class"),t.addClass,t.removeClass].join(" ");return k.test(n)}:N,M=applyAnimationClassesFactory(O),F=e.Node.prototype.contains||function(e){return this===e||!!(16&this.compareDocumentPosition(e))},j={on:function(e,t,n){var i=extractElementNode(t);R[e]=R[e]||[],R[e].push({node:i,callback:n}),T(t).on("$destroy",function(){C.get(i)||j.off(e,t,n)})},off:function(e,t,n){if(1!==arguments.length||b(arguments[0])){var i=R[e];i&&(R[e]=1===arguments.length?null:filterFromRegistry(i,t,n))}else{t=arguments[0];for(var r in R)R[r]=filterFromRegistry(R[r],t)}},pin:function(e,t){assertArg(v(e),"element","not an element"),assertArg(v(t),"parentElement","not an element"),e.data(W,t)},push:function(e,t,n,i){return n=n||{},n.domOperation=i,queueAnimation(e,t,n)},enabled:function(e,t){var n=arguments.length;if(0===n)t=!!_;else{if(v(e)){var i=getDomNode(e);1===n?t=!$.get(i):$.set(i,!t)}else t=_=!!e}return t}};return j}]}],q=["$animateProvider",function(e){function setRunner(e,t){e.data(i,t)}function removeRunner(e){e.removeData(i)}function getRunner(e){return e.data(i)}var t="ng-animate-ref",n=this.drivers=[],i="$$animationRunner";this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler",function(e,i,r,o,a,s){function sortAnimations(e){function processNode(e){if(e.processed)return e;e.processed=!0;var t=e.domNode,r=t.parentNode;i.set(t,e);for(var o;r;){if(o=i.get(r)){o.processed||(o=processNode(o));break}r=r.parentNode}return(o||n).children.push(e),e}var t,n={children:[]},i=new a;for(t=0;t<e.length;t++){var r=e[t];i.set(r.domNode,e[t]={domNode:r.domNode,fn:r.fn,children:[]})}for(t=0;t<e.length;t++)processNode(e[t]);return function(e){var t,n=[],i=[];for(t=0;t<e.children.length;t++)i.push(e.children[t]);var r=i.length,o=0,a=[];for(t=0;t<i.length;t++){var s=i[t];r<=0&&(r=o,o=0,n.push(a),a=[]),a.push(s.fn),s.children.forEach(function(e){o++,i.push(e)}),r--}return a.length&&n.push(a),n}(n)}var l=[],c=applyAnimationClassesFactory(e);return function(a,d,p){function getAnchorNodes(e){var n="["+t+"]",i=e.hasAttribute(t)?[e]:e.querySelectorAll(n),r=[];return f(i,function(e){var n=e.getAttribute(t);n&&n.length&&r.push(e)}),r}function groupAnimations(e){var n=[],i={};f(e,function(e,r){var o=e.element,a=getDomNode(o),s=e.event,l=["enter","move"].indexOf(s)>=0,c=e.structural?getAnchorNodes(a):[];if(c.length){var u=l?"to":"from";f(c,function(e){var n=e.getAttribute(t);i[n]=i[n]||{},i[n][u]={animationID:r,element:T(e)}})}else n.push(e)});var r={},o={};return f(i,function(t,i){var a=t.from,s=t.to;if(!a||!s){var l=a?a.animationID:s.animationID,c=l.toString();return void(r[c]||(r[c]=!0,n.push(e[l])))}var u=e[a.animationID],d=e[s.animationID],p=a.animationID.toString();if(!o[p]){var h=o[p]={structural:!0,beforeStart:function(){u.beforeStart(),d.beforeStart()},close:function(){u.close(),d.close()},classes:cssClassesIntersection(u.classes,d.classes),from:u,to:d,anchors:[]};h.classes.length?n.push(h):(n.push(u),n.push(d))}o[p].anchors.push({out:a.element,in:s.element})}),n}function cssClassesIntersection(e,t){e=e.split(" "),t=t.split(" ");for(var n=[],i=0;i<e.length;i++){var r=e[i];if("ng-"!==r.substring(0,3))for(var o=0;o<t.length;o++)if(r===t[o]){n.push(r);break}}return n.join(" ")}function invokeFirstDriver(e){for(var t=n.length-1;t>=0;t--){var i=n[t],o=r.get(i),a=o(e);if(a)return a}}function beforeStart(){a.addClass(u),v&&e.addClass(a,v),y&&(e.removeClass(a,y),y=null)}function updateAnimationRunners(e,t){function update(e){var n=getRunner(e);n&&n.setHost(t)}e.from&&e.to?(update(e.from.element),update(e.to.element)):update(e.element)}function handleDestroyedElement(){var e=getRunner(a);!e||"leave"===d&&p.$$domOperationFired||e.end()}function close(t){a.off("$destroy",handleDestroyedElement),removeRunner(a),c(a,p),applyAnimationStyles(a,p),p.domOperation(),v&&e.removeClass(a,v),a.removeClass(u),m.complete(!t)}p=prepareAnimationOptions(p);var h=["enter","move","leave"].indexOf(d)>=0,m=new o({end:function(){close()},cancel:function(){close(!0)}});if(!n.length)return close(),m;setRunner(a,m);var g=mergeClasses(a.attr("class"),mergeClasses(p.addClass,p.removeClass)),v=p.tempClasses;v&&(g+=" "+v,p.tempClasses=null);var y;return h&&(y="ng-"+d+"-prepare",e.addClass(a,y)),l.push({element:a,classes:g,event:d,structural:h,options:p,beforeStart:beforeStart,close:close}),a.on("$destroy",handleDestroyedElement),l.length>1?m:(i.$$postDigest(function(){var e=[];f(l,function(t){getRunner(t.element)?e.push(t):t.close()}),l.length=0;var t=groupAnimations(e),n=[];f(t,function(e){n.push({domNode:getDomNode(e.from?e.from.element:e.element),fn:function(){e.beforeStart();var t,n=e.close;if(getRunner(e.anchors?e.from.element||e.to.element:e.element)){var i=invokeFirstDriver(e);i&&(t=i.start)}if(t){var r=t();r.done(function(e){n(!e)}),updateAnimationRunners(e,r)}else n()}})}),s(sortAnimations(n))}),m)}}]}],Y=["$animate","$rootScope",function(e,t){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(t,n,i,r,o){var a,s;t.$watchCollection(i.ngAnimateSwap||i.for,function(i){a&&e.leave(a),s&&(s.$destroy(),s=null),(i||0===i)&&(s=t.$new(),o(s,function(t){a=t,e.enter(t,null,n)}))})}}}];t.module("ngAnimate",[],function(){E=t.noop,p=t.copy,h=t.extend,T=t.element,f=t.forEach,m=t.isArray,b=t.isString,w=t.isObject,S=t.isUndefined,g=t.isDefined,y=t.isFunction,v=t.isElement}).info({angularVersion:"1.6.6"}).directive("ngAnimateSwap",Y).directive("ngAnimateChildren",k).factory("$$rAFScheduler",P).provider("$$animateQueue",G).provider("$$animation",q).provider("$animateCss",B).provider("$$animateCssDriver",H).provider("$$animateJs",z).provider("$$animateJsDriver",U)}(window,window.angular)},function(e,t,n){n(51),e.exports="ngTouch"},function(e,t){!function(e,t){"use strict";function nodeName_(e){return t.lowercase(e.nodeName||e[0]&&e[0].nodeName)}function $TouchProvider(e,n){var r=!1,o=!1;this.ngClickOverrideEnabled=function(a){return t.isDefined(a)?(a&&!o&&(o=!0,i.$$moduleName="ngTouch",n.directive("ngClick",i),e.decorator("ngClickDirective",["$delegate",function(e){if(r)e.shift();else for(var t=e.length-1;t>=0;){if("ngTouch"===e[t].$$moduleName){e.splice(t,1);break}t--}return e}])),r=a,this):r},this.$get=function(){return{ngClickOverrideEnabled:function(){return r}}}}function makeSwipeDirective(e,i,r){n.directive(e,["$parse","$swipe",function(n,o){return function(a,s,l){function validSwipe(e){if(!c)return!1;var t=Math.abs(e.y-c.y),n=(e.x-c.x)*i;return u&&t<75&&n>0&&n>30&&t/n<.3}var c,u,d=n(l[e]),p=["touch"];t.isDefined(l.ngSwipeDisableMouse)||p.push("mouse"),o.bind(s,{start:function(e,t){c=e,u=!0},cancel:function(e){u=!1},end:function(e,t){validSwipe(e)&&a.$apply(function(){s.triggerHandler(r),d(a,{$event:t})})}},p)}}])}var n=t.module("ngTouch",[]);n.info({angularVersion:"1.6.6"}),n.provider("$touch",$TouchProvider),$TouchProvider.$inject=["$provide","$compileProvider"],n.factory("$swipe",[function(){function getCoordinates(e){var t=e.originalEvent||e,n=t.touches&&t.touches.length?t.touches:[t],i=t.changedTouches&&t.changedTouches[0]||n[0];return{x:i.clientX,y:i.clientY}}function getEvents(n,i){var r=[];return t.forEach(n,function(t){var n=e[t][i];n&&r.push(n)}),r.join(" ")}var e={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};return{bind:function(e,t,n){var i,r,o,a,s=!1;n=n||["mouse","touch","pointer"],e.on(getEvents(n,"start"),function(e){o=getCoordinates(e),s=!0,i=0,r=0,a=o,t.start&&t.start(o,e)});var l=getEvents(n,"cancel");l&&e.on(l,function(e){s=!1,t.cancel&&t.cancel(e)}),e.on(getEvents(n,"move"),function(e){if(s&&o){var n=getCoordinates(e);if(i+=Math.abs(n.x-a.x),r+=Math.abs(n.y-a.y),a=n,!(i<10&&r<10))return r>i?(s=!1,void(t.cancel&&t.cancel(e))):(e.preventDefault(),void(t.move&&t.move(n,e)))}}),e.on(getEvents(n,"end"),function(e){s&&(s=!1,t.end&&t.end(getCoordinates(e),e))})}}}]);var i=["$parse","$timeout","$rootElement",function(e,n,i){function hit(e,t,n,i){return Math.abs(e-n)<l&&Math.abs(t-i)<l}function checkAllowableRegions(e,t,n){for(var i=0;i<e.length;i+=2)if(hit(e[i],e[i+1],t,n))return e.splice(i,i+2),!0;return!1}function onClick(e){if(!(Date.now()-r>s)){var t=e.touches&&e.touches.length?e.touches:[e],n=t[0].clientX,i=t[0].clientY;n<1&&i<1||a&&a[0]===n&&a[1]===i||(a&&(a=null),"label"===nodeName_(e.target)&&(a=[n,i]),checkAllowableRegions(o,n,i)||(e.stopPropagation(),e.preventDefault(),e.target&&e.target.blur&&e.target.blur()))}}function onTouchStart(e){var t=e.touches&&e.touches.length?e.touches:[e],i=t[0].clientX,r=t[0].clientY;o.push(i,r),n(function(){for(var e=0;e<o.length;e+=2)if(o[e]===i&&o[e+1]===r)return void o.splice(e,e+2)},s,!1)}function preventGhostClick(e,t){o||(i[0].addEventListener("click",onClick,!0),i[0].addEventListener("touchstart",onTouchStart,!0),o=[]),r=Date.now(),checkAllowableRegions(o,e,t)}var r,o,a,s=2500,l=25,c="ng-click-active";return function(n,i,r){function resetState(){d=!1,i.removeClass(c)}var o,a,s,l,u=e(r.ngClick),d=!1;i.on("touchstart",function(e){d=!0,o=e.target?e.target:e.srcElement,3===o.nodeType&&(o=o.parentNode),i.addClass(c),a=Date.now();var t=e.originalEvent||e,n=t.touches&&t.touches.length?t.touches:[t],r=n[0];s=r.clientX,l=r.clientY}),i.on("touchcancel",function(e){resetState()}),i.on("touchend",function(e){var n=Date.now()-a,c=e.originalEvent||e,u=c.changedTouches&&c.changedTouches.length?c.changedTouches:c.touches&&c.touches.length?c.touches:[c],p=u[0],h=p.clientX,f=p.clientY,m=Math.sqrt(Math.pow(h-s,2)+Math.pow(f-l,2));d&&n<750&&m<12&&(preventGhostClick(h,f),o&&o.blur(),t.isDefined(r.disabled)&&!1!==r.disabled||i.triggerHandler("click",[e])),resetState()}),i.onclick=function(e){},i.on("click",function(e,t){n.$apply(function(){u(n,{$event:t||e})})}),i.on("mousedown",function(e){i.addClass(c)}),i.on("mousemove mouseup",function(e){i.removeClass(c)})}}];makeSwipeDirective("ngSwipeLeft",-1,"swipeleft"),makeSwipeDirective("ngSwipeRight",1,"swiperight")}(window,window.angular)},function(e,t,n){n(53),n(54),n(55),n(56),e.exports={apiService:"ace.apiService",errorService:"ace.errorService",helperService:"ace.helperService",generalFilters:"ace.generalFilters"}},function(e,t){!function(){var e=angular.module("ace.apiService",[]);e.run(["$http","appConfig",function(e,t){e.defaults.headers.common["X-Api-Token"]=t.apiToken}]),e.factory("ApiService",["$q","$http","appConfig",function(e,t,n){var i={},r=function(e){return angular.isArray(e)?e.map(function(e){return e&&e.fields&&angular.forEach(e.fields,function(t,n){(/entity/.test(t.type)||/entity/.test(t.fieldType))&&(t.value=r(t.value)),e.fields[n]=t.value}),e&&e.parents&&(e.parents=r(e.parents)),e}):e};return i.metadata=function(){return e(function(e,i){t.get(n.apiUrl+"/metadata.json",{cache:!0}).then(function(t){e(t.data)}).catch(i)})},i.entitySearch=function(i){var o={q:"*:*",sort:"-<score>",limit:200,include_docs:!1,children:!1,parents:!1};return e(function(e,a){i=angular.extend({},o,i),t.get(n.apiUrl+"/entities/search.json",{params:i,cache:!0}).then(function(t){var n=t.data;n.rows?(n.rows=n.rows.map(function(e){return e.doc}),n.rows=r(n.rows)):n.groups&&(n.groups=n.groups.map(function(e){return e.rows=e.rows.map(function(e){return e.doc}),e.rows=r(e.rows),e})),e(n)}).catch(a)})},i.entitySearchOne=function(e){return i.entitySearch(e).then(function(e){return e.rows.length?e.rows[0]:{}})},i.entityFind=function(i){return e(function(e,o){var a={query:{},children:!1,parents:!1};t.get(n.apiUrl+"/entities/find.json",{params:angular.extend(a,i),cache:!0}).then(function(t){t.data.docs=r(t.data.docs),e(t.data)}).catch(o)})},i.entityById=function(i){return e(function(e,o){var a={ids:[],children:!1,parents:!1};t.get(n.apiUrl+"/entities.json",{params:angular.extend(a,i),cache:!0}).then(function(t){t.data=r(t.data),e(t.data)}).catch(o)})},i.entityByIdOne=function(e){return e.ids=[e.id],e.id=null,i.entityById(e).then(function(e){return e.length?e[0]:{}})},i.getEntityIds=function(e){return e.map(function(e){return e.id})},i.taxonomy=function(i){return e(function(e,r){t.get(n.apiUrl+"/taxonomy.json",{params:{slug:i},cache:!0}).then(function(t){e(t.data)}).catch(r)})},i.socialTwitter=function(i,r){return e(function(e,o){t.get(n.apiUrl+"/social/twitter/get/"+i,{params:r||{},cache:!0}).then(function(t){var n=t.data.map(function(e){return e.text=twttr.txt.autoLink(twttr.txt.htmlEscape(e.text)),e.created_at=Date.parse(e.created_at),e});e(n)}).catch(o)})},i.socialInstagram=function(i,r){return e(function(e,o){t.get(n.apiUrl+"/social/instagram/get/"+i,{params:r||{},cache:!0}).then(function(t){e(t.data)}).catch(o)})},i.shippoQuote=function(i,r){return e(function(e,r){t.post(n.apiUrl+"/shippo/quote",{address:i,parcel:{width:30,height:10,length:20,weight:.5}},{cache:!0}).then(function(t){e(t.data.results)}).catch(r)})},i.stripeCheckout=function(i,r){return e(function(e,o){t.post(n.apiUrl+"/stripe/checkout",{token:i,order:r}).then(function(t){e(t.data)}).catch(o)})},i}])}()},function(e,t){!function(){angular.module("ace.errorService",[]).config(["$provide",function(e){e.decorator("$exceptionHandler",["$delegate",function(e){return function(t,n){e(t,n),"undefined"!=typeof ga&&ga("send","event","AngularJS error",t.message,t.stack,0,!0)}}])}])}()},function(e,t){!function(){angular.module("ace.helperService",[]).factory("HelperService",["$rootScope","$q","$http","$sce","$filter","appConfig",function(e,t,n,i,r,o){var a={};e.$helper=a,a.thumbnailSrc=function(e,t,n,i){if(!e)return"";var r;"string"==typeof t&&(r=t.split(/,|;/),t={},r.forEach(function(e){e=e.split(/_|:/),t[e[0]]=e[1]}));var a=!!e.crops&&e.crops[n];a?(t.x=a[0],t.y=a[1],t.x2=a[2],t.y2=a[3]):i&&(t.g=i),r=[],angular.forEach(t,function(e,t){r.push([t,e].join(":"))});var s=r.join(";");if(/image/.test(e.thumbnailType)){var l=e.fileName;return"svg"===l.split(".").pop().toLowerCase()?[o.assistUrl,o.slug,l].join("/"):[o.assistUrl,o.slug,"transform",s,l].join("/")}if(/video|oembed|proxy/.test(e.thumbnailType)){var c=e.thumbnailUrl.replace(/https?:\/\//,"");return[o.assistUrl,o.slug,"proxy","transform",s,c].join("/")}return""},a.videoOutputUrl=function(e,t){return e.metadata.zencoder.outputs[t].url},a.videoThumbnailUrl=function(e){return e?e.metadata.zencoder.thumbnail.url:""},a.oembedThumbnailUrl=function(e,t){return e?a.proxyThumbnailUrl(e.oembed.thumbnail_url,t):""},a.proxyThumbnailUrl=function(e,t){return a.thumbnailSrc({thumbnailType:"proxy",thumbnailUrl:e},t)};var s=function(e,i){return t(function(t,r){if(!e)return void r("Entity invalid");var a=e.thumbnail||e;if(!a.fileName)return void r("No filename found");var s=a.fileName;n.get(o.assistUrl+"/"+o.slug+"/image/focus-"+i+"?fileName="+s).then(function(e){t(e.data)}).catch(r)})};a.focusPoint=function(e){return s(e,"point")},a.focusRegion=function(e){return s(e,"region")},a.imageRatio=function(e){return e?e.metadata.width/e.metadata.height:0},a.shuffle=function(e){for(var t,n,i=e.length;i;t=Math.floor(Math.random()*i),n=e[--i],e[i]=e[t],e[t]=n);return e},a.randomInt=function(e,t){return Math.floor(Math.random()*(t-e))+e},a.randomIntInclusive=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},a.group=function(e,t){t=t||1/0;var n=[],i={entities:[]};return e.forEach(function(e){(!e.groupBefore||i.entities.length>=t)&&(i={entities:[]}),i.entities.push(e),(!e.groupAfter||i.entities.length>=t)&&(i.ratio=0,i.entities.forEach(function(e){i.ratio+=(e.thumbnail||e).ratio}),i.entities.forEach(function(e){e.groupRatio=(e.thumbnail||e).ratio/i.ratio}),n.push(i))}),n},a.assignGroupIndex=function(e){var t=0;return e.forEach(function(e){e.groupIndex=t,e.groupAfter||t++}),e};var l=function(e,t,n,i){n=n||"",i=i||0;var r=[];return e?(e.terms&&e.terms.forEach(function(e){r.push(e[t]),e.parents&&e.parents.forEach(function(e,n){n<i&&r.push(e[t])})}),r=r.filter(function(e,t,n){return n.indexOf(e)===t}),r=r.map(function(e){return n+e})):r};return a.taxonomyFlattenTitle=function(e,t,n){return l(e,"title",t,n)},a.taxonomyFlattenSlug=function(e,t,n){return l(e,"slug",t,n)},a.altGroup=function(e,t,n){t=t||3,n=n||[2,1,2];var i=[],r=[],o=n[0];return e.forEach(function(a,s){r.push(a),r.length!==o&&s!==e.length-1||(i.push(r),o=n[i.length%t],r=[])}),i},a.testExp=function(e,t){return new RegExp(e).test(t)},a.getAdjacent=function(e,t,n){n=n||"slug";var i={};return e.forEach(function(r,o){t[n]===r[n]&&(i.current=t,i.next=0===o?e[e.length-1]:e[o-1],i.previous=o===e.length-1?e[0]:e[o+1])}),i},a.trustAsHtml=function(e,t){return e?(t&&angular.isArray(t)&&t.forEach(function(t){e=r(t)(e)}),i.trustAsHtml(e)):""},a.videoStyle=function(e,t,n,i){var r,o;return e/t>n/i?(o=t,r=o*(n/i)):(r=e,o=r*(i/n)),{width:r+"px",height:o+"px"}},a}])}()},function(e,t){!function(){var e=angular.module("ace.generalFilters",[]);e.filter("reverse",function(){return function(e,t){for(var n="",i=0;i<e.length;i++)n=e.charAt(i)+n;return t&&(n=n.toUpperCase()),n}}),e.filter("range",function(){return function(e,t){var n=[];for(var i in e)i>t-8&&i<t+6&&n.push(e[i]);return n}}),e.filter("encodeURI",function(){return function(e){return window.encodeURI(e)}}),e.filter("encodeURIComponent",function(){return function(e){return window.encodeURIComponent(e)}}),e.filter("pad",function(){return function(e,t,n){return n=n||"0",t=t||2,e+="",e.length>=t?e:new Array(t-e.length+1).join(n)+e}}),e.filter("if",function(){return function(e,t,n){return e?t:n}}),e.filter("deZero",function(){return function(e){return e+1}}),e.filter("floor",function(){return function(e){return Math.floor(e)}}),e.filter("stripTags",function(){return function(e,t){t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var n=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,i=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return e.replace(i,"").replace(n,function(e,n){return t.indexOf("<"+n.toLowerCase()+">")>-1?e:""})}}),e.filter("truncateWords",function(){return function(e,t,n){n=n||"…";var i=e.split(" ");return i.length<=t?e:i.slice(0,t).join(" ")+n}}),e.filter("scotify",function(){return function(e){var t=String(e);return/^mc(.*)$/i.test(t)&&(t=t.substr(0,1)+'<span class="lowercase">'+t.substr(1,1)+"</span>"+t.substr(2)),t}}),e.filter("spanDescendersInLinks",["$sce",function(e){return function(t){var n=t.match(/(?=<a)[^]+?>(.+?)<\/a>/g);return angular.forEach(n,function(e){var n=e.match(/>(.+)</)[1],i=n.replace(/(g|j|p|q|y)/g,'<span data-content="$1">$1</span>');t=t.replace(n,i)}),e.trustAsHtml(t)}}]),e.filter("pluralize",function(){return function(e){var t=e;return"us"===e.substr(e.length-2)?t=t.substr(0,t.length-2)+"i":"ch"===e.substr(e.length-2)||"x"===e.charAt(e.length-1)||"s"===e.charAt(e.length-1)?t+="es":"y"===e.charAt(e.length-1)&&-1===["a","e","i","o","u"].indexOf(e.charAt(e.length-2))?t=t.substr(0,t.length-1)+"ies":"is"===e.substr(e.length-2)?t=t.substr(0,t.length-2)+"es":t+="s",t}}),e.filter("camelCase",function(){return function(e){return e.replace(/-\w/g,function(e){return e[1].toUpperCase()})}}),e.filter("propInArray",function(){return function(e,t,n){return e.filter(function(e){return-1!==n.indexOf(e[t])})}}),e.filter("plainText",function(){return function(e){return e?(e=e.replace(/<br(\/?)>|<\/p>/gi," ").replace(/\s{2,}/g," "),angular.element("<span>"+e+"</span>").text().trim()):""}}),e.filter("deWidow",function(){return function(e,t,n){if(!e)return"";if(t=t||2,n=n||["p"],/^<(.*)>$/.test(e)){var i=angular.element("<span>"+e+"</span>");return n.forEach(function(e){angular.forEach(i.find(e),function(e){var t=angular.element(e);t.html(t.html().replace(/ ([^ ]*)$/,"&nbsp;$1"))})}),i.html()}var r=e.split(/\s/);if(r.length<t)return e;var o=r.slice(-1)[0];return[r.slice(0,-1).join(" "),o].join(/\w/.test(o)?"&nbsp;":"")}}),e.filter("toTitleCase",function(){return function(e){return e?e.replace(/\w\S*/g,function(e){return/^(and|of)$/i.test(e)?e.toLowerCase():e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}):e}}),e.filter("toFixed",function(){return function(e,t){return t=void 0!==t?t:2,void 0===e?e:("number"!=typeof e&&(e=Number(e)),e.toFixed(t))}}),e.filter("trustAsHtml",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),e.filter("group",["HelperService",function(e){return _.memoize(function(t,n){return e.group(t,n)})}])}()},function(e,t,n){n(58),e.exports="angular-loading-bar"},function(e,t){!function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(e){var t=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(t,n,i,r,o,a){function setComplete(){i.cancel(s),a.complete(),c=0,l=0}function isCached(t){var i,r=n.get("$http"),o=e.defaults;!t.cache&&!o.cache||!1===t.cache||"GET"!==t.method&&"JSONP"!==t.method||(i=angular.isObject(t.cache)?t.cache:angular.isObject(o.cache)?o.cache:r);var a=void 0!==i&&void 0!==i.get(t.url);return void 0!==t.cached&&a!==t.cached?t.cached:(t.cached=a,a)}var s,l=0,c=0,u=a.latencyThreshold;return{request:function(e){return e.ignoreLoadingBar||isCached(e)||(r.$broadcast("cfpLoadingBar:loading",{url:e.url}),0===l&&(s=i(function(){a.start()},u)),l++,a.set(c/l)),e},response:function(e){return e&&e.config?(e.config.ignoreLoadingBar||isCached(e.config)||(c++,r.$broadcast("cfpLoadingBar:loaded",{url:e.config.url,result:e}),c>=l?setComplete():a.set(c/l)),e):(o.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),e)},responseError:function(e){return e&&e.config?(e.config.ignoreLoadingBar||isCached(e.config)||(c++,r.$broadcast("cfpLoadingBar:loaded",{url:e.config.url,result:e}),c>=l?setComplete():a.set(c/l)),t.reject(e)):(o.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),t.reject(e))}}}];e.interceptors.push(t)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(e,t,n,i){function _start(){if(r||(r=e.get("$animate")),n.cancel(a),!d){var o=t[0],c=o.querySelector?o.querySelector(s):t.find(s)[0];c||(c=o.getElementsByTagName("body")[0]);var p=angular.element(c),h=c.lastChild&&angular.element(c.lastChild);i.$broadcast("cfpLoadingBar:started"),d=!0,m&&r.enter(l,p,h),f&&r.enter(u,p,l),_set(g)}}function _set(e){if(d){var t=100*e+"%";c.css("width",t),p=e,h&&(n.cancel(o),o=n(function(){_inc()},250))}}function _inc(){if(!(_status()>=1)){var e=0,t=_status();e=t>=0&&t<.25?(3*Math.random()+3)/100:t>=.25&&t<.65?3*Math.random()/100:t>=.65&&t<.9?2*Math.random()/100:t>=.9&&t<.99?.005:0;_set(_status()+e)}}function _status(){return p}function _completeAnimation(){p=0,d=!1}function _complete(){r||(r=e.get("$animate")),i.$broadcast("cfpLoadingBar:completed"),_set(1),n.cancel(a),a=n(function(){var e=r.leave(l,_completeAnimation);e&&e.then&&e.then(_completeAnimation),r.leave(u)},500)}var r,o,a,s=this.parentSelector,l=angular.element(this.loadingBarTemplate),c=l.find("div").eq(0),u=angular.element(this.spinnerTemplate),d=!1,p=0,h=this.autoIncrement,f=this.includeSpinner,m=this.includeBar,g=this.startSize;return{start:_start,set:_set,status:_status,inc:_inc,complete:_complete,autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}()},function(e,t,n){n(0),n(4),n(2),n(5),n(61),e.exports="hj.gsapifyRouter"},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){!function(){"use strict";angular.module("hj.gsapifyRouter",["ui.router","ngAnimate"]).provider("gsapifyRouter",function(){var e=this;e.transitions={},e.transitions.above={duration:1,ease:"Quart.easeInOut",css:{y:"-100%"}},e.transitions.below={duration:1,ease:"Quart.easeInOut",css:{y:"100%"}},e.transitions.left={duration:1,ease:"Quint.easeInOut",css:{x:"-100%"}},e.transitions.right={duration:1,ease:"Quint.easeInOut",css:{x:"100%"}},e.transitions.fade={duration:.5,css:{opacity:0}},e.transitions.fadeDelayed={duration:.5,delay:.5,css:{opacity:0}},e.transitions.none={duration:0,css:{}},e.defaults={enter:"none",leave:"none"},e.transition=function(t,n){e.transitions[t]=n},e.scrollRecallEvent="leaveSuccess",e.$get=["$rootScope","$state","$document","$injector","$window","$timeout","$q","$log",function(t,n,i,r,o,a,s,l){var c=function(t,n,i,o){var a={transition:e.defaults["in"===o?"enter":"leave"],priority:0};if(t.data&&t.data["gsapifyRouter."+n]&&t.data["gsapifyRouter."+n][i]){var s=t.data["gsapifyRouter."+n][i][o];s&&((angular.isArray(s)||angular.isFunction(s))&&(a=r.invoke(s)),angular.isObject(s)&&(a=angular.extend(a,s),Object.keys(a).forEach(function(e){(angular.isArray(a[e])||angular.isFunction(a[e]))&&(a[e]=r.invoke(a[e]))})),angular.isString(s)&&(a.transition=s))}return a},u=function(t){var n;return angular.isObject(t)&&(n=t),angular.isString(t)&&(n=e.transitions[t],(angular.isArray(n)||angular.isFunction(n))&&(n=r.invoke(n))),n},d=function(e,t){a(t)};return{enter:function(e){function go(){if(!w.css||0===Object.keys(w.css).length||0===y)return void d(e,function(){w.onStart(),d(e,function(){w.onComplete()})});TweenMax.from(e,y,w)}var i=s.defer();e.css("visibility","hidden"),e.removeClass("gsapify-router-init"),e.addClass("gsapify-router-in-setup");var r,o=e.attr("ui-view")||e.attr("data-ui-view"),a=n.current,p=n.previous,h=c(a,o,"enter","in"),f=c(p,o,"leave","in");r=f.priority>h.priority?f:h;var m=r.trigger||c(p,o,"leave","out").trigger,g=u(r.transition);if(!g)return l.error("gsapifyRouter: Invalid transition '"+g+"'");var v=g.name,y=g.duration,w=angular.copy(g);if(v&&e.attr("data-transition",v),w.onStart=function(){e.css("visibility","visible"),e.removeClass("gsapify-router-in-setup"),e.addClass("gsapify-router-in")},w.onComplete=function(){e.addClass("gsapify-router-in-end"),i.resolve({element:e,view:o})},m)var b=t.$on(m,function(){b(),go()});else go();return i.promise},leave:function(e){function go(){if(!w.css||0===Object.keys(w.css).length||0===y)return void d(e,function(){w.onStart(),d(e,function(){w.onComplete()})});TweenMax.to(e,y,w)}var i=s.defer();e.removeClass("gsapify-router-in gsapify-router-in-end"),e.addClass("gsapify-router-out-setup");var r,o=e.attr("ui-view")||e.attr("data-ui-view"),a=n.current,p=n.previous,h=c(p,o,"leave","out"),f=c(a,o,"enter","out");r=f.priority>h.priority?f:h;var m=r.trigger||c(a,o,"enter","in").trigger,g=u(r.transition);if(!g)return l.error("gsapifyRouter: Invalid transition '"+g+"'");var v=g.name,y=g.duration,w=angular.copy(g);if(v&&e.attr("data-transition",v),w.onStart=function(){e.removeClass("gsapify-router-out-setup"),e.addClass("gsapify-router-out")},w.onComplete=function(){e.remove(),i.resolve({element:e,view:o})},m)var b=t.$on(m,function(){b(),go()});else go();return i.promise},transitions:e.transitions,defaults:e.defaults,scrollRecallEvent:e.scrollRecallEvent}}]}).config(["$stateProvider",function(e){e.state("gsapifyRouterBlankState",{})}]).run(["$rootScope","$state","gsapifyRouter","$timeout",function(e,t,n,i){t.history=[],t.previous={},e.$on("$stateChangeSuccess",function(e,n,i,r,o){t.previous=r,t.previousParams=o,t.history.push({name:r.name,params:o})})}]).directive("gsapifyRouter",["$state","$timeout",function(e,t){return{priority:0,restrict:"C",link:function(n,i,r){r.$set("data-state",e.current.name),t(function(){i.addClass("gsapify-router-init")})}}}]).service("scrollRecallService",["$rootScope","$window","$document","$timeout","$state","gsapifyRouter",function(e,t,n,i,r,o){var a={view:null},s=function(){var e={name:r.current.name,params:r.params};return JSON.stringify(e)},l={},c=s();return e.$on("$stateChangeStart",function(){a.view&&(l[c]={x:t.scrollX,y:t.scrollY})}),e.$on("$stateChangeSuccess",function(){a.view&&(c=s())}),e.$on("gsapifyRouter:"+o.scrollRecallEvent,function(e,n){if(a.view){if((n.attr("ui-view")||n.attr("data-ui-view"))===a.view){var i=r.history[r.history.length-2];if(i){var o=JSON.stringify(i);if(l[o]&&c===o)return void t.scrollTo(l[o].x,l[o].y)}t.scrollTo(0,0)}}}),a}]).directive("scrollRecall",["scrollRecallService",function(e){return{priority:0,restrict:"A",link:function(t,n,i){e.view=i.uiView}}}]).animation(".gsapify-router",["$rootScope","gsapifyRouter",function(e,t){return{enter:function(n,i){return"gsapifyRouterBlankState"!==n.attr("data-state")&&(e.$broadcast("gsapifyRouter:enterStart",n),t.enter(n).then(function(t){e.$broadcast("gsapifyRouter:enterSuccess",n,t),i()})),function(e){if(1===angular.version.major&&angular.version.minor<=3)return void(!0===e&&n.remove());!1!==e&&n.remove()}},leave:function(n,i){"gsapifyRouterBlankState"!==n.attr("data-state")&&(e.$broadcast("gsapifyRouter:leaveStart",n),t.leave(n).then(function(t){e.$broadcast("gsapifyRouter:leaveSuccess",n,t),i()}))}}}])}()},function(e,t,n){n(0),n(63),e.exports="duScroll"},function(e,t,n){(function(e){var t=function(e){"use strict";return e<.5?Math.pow(2*e,2)/2:1-Math.pow(2*(1-e),2)/2},n=angular.module("duScroll",["duScroll.scrollspy","duScroll.smoothScroll","duScroll.scrollContainer","duScroll.spyContext","duScroll.scrollHelpers"]).value("duScrollDuration",350).value("duScrollSpyWait",100).value("duScrollSpyRefreshInterval",0).value("duScrollGreedy",!1).value("duScrollOffset",0).value("duScrollEasing",t).value("duScrollCancelOnEvents","scroll mousedown mousewheel touchmove keydown").value("duScrollBottomSpy",!1).value("duScrollActiveClass","active");void 0!==e&&e&&e.exports&&(e.exports=n),angular.module("duScroll.scrollHelpers",["duScroll.requestAnimation"]).run(["$window","$q","cancelAnimation","requestAnimation","duScrollEasing","duScrollDuration","duScrollOffset","duScrollCancelOnEvents",function(e,t,n,i,r,o,a,s){"use strict";var l={},c=function(e){return"undefined"!=typeof HTMLDocument&&e instanceof HTMLDocument||e.nodeType&&e.nodeType===e.DOCUMENT_NODE},u=function(e){return"undefined"!=typeof HTMLElement&&e instanceof HTMLElement||e.nodeType&&e.nodeType===e.ELEMENT_NODE},d=function(e){return u(e)||c(e)?e:e[0]};l.duScrollTo=function(t,n,i,r){var o;if(angular.isElement(t)?o=this.duScrollToElement:angular.isDefined(i)&&(o=this.duScrollToAnimated),o)return o.apply(this,arguments);var a=d(this);if(c(a))return e.scrollTo(t,n);a.scrollLeft=t,a.scrollTop=n};var p,h;l.duScrollToAnimated=function(e,o,a,l){a&&!l&&(l=r);var c=this.duScrollLeft(),u=this.duScrollTop(),d=Math.round(e-c),f=Math.round(o-u),m=null,g=0,v=this,y=function(e){(!e||g&&e.which>0)&&(s&&v.unbind(s,y),n(p),h.reject(),p=null)};if(p&&y(),h=t.defer(),0===a||!d&&!f)return 0===a&&v.duScrollTo(e,o),h.resolve(),h.promise;var w=function(e){null===m&&(m=e),g=e-m;var t=g>=a?1:l(g/a);v.scrollTo(c+Math.ceil(d*t),u+Math.ceil(f*t)),t<1?p=i(w):(s&&v.unbind(s,y),p=null,h.resolve())};return v.duScrollTo(c,u),s&&v.bind(s,y),p=i(w),h.promise},l.duScrollToElement=function(e,t,n,i){var r=d(this);angular.isNumber(t)&&!isNaN(t)||(t=a);var o=this.duScrollTop()+d(e).getBoundingClientRect().top-t;return u(r)&&(o-=r.getBoundingClientRect().top),this.duScrollTo(0,o,n,i)},l.duScrollLeft=function(t,n,i){if(angular.isNumber(t))return this.duScrollTo(t,this.duScrollTop(),n,i);var r=d(this);return c(r)?e.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft:r.scrollLeft},l.duScrollTop=function(t,n,i){if(angular.isNumber(t))return this.duScrollTo(this.duScrollLeft(),t,n,i);var r=d(this);return c(r)?e.scrollY||document.documentElement.scrollTop||document.body.scrollTop:r.scrollTop},l.duScrollToElementAnimated=function(e,t,n,i){return this.duScrollToElement(e,t,n||o,i)},l.duScrollTopAnimated=function(e,t,n){return this.duScrollTop(e,t||o,n)},l.duScrollLeftAnimated=function(e,t,n){return this.duScrollLeft(e,t||o,n)},angular.forEach(l,function(e,t){angular.element.prototype[t]=e;var n=t.replace(/^duScroll/,"scroll");angular.isUndefined(angular.element.prototype[n])&&(angular.element.prototype[n]=e)})}]),angular.module("duScroll.polyfill",[]).factory("polyfill",["$window",function(e){"use strict";var t=["webkit","moz","o","ms"];return function(n,i){if(e[n])return e[n];for(var r,o=n.substr(0,1).toUpperCase()+n.substr(1),a=0;a<t.length;a++)if(r=t[a]+o,e[r])return e[r];return i}}]),angular.module("duScroll.requestAnimation",["duScroll.polyfill"]).factory("requestAnimation",["polyfill","$timeout",function(e,t){"use strict";var n=0;return e("requestAnimationFrame",function(e,i){var r=(new Date).getTime(),o=Math.max(0,16-(r-n)),a=t(function(){e(r+o)},o);return n=r+o,a})}]).factory("cancelAnimation",["polyfill","$timeout",function(e,t){"use strict";return e("cancelAnimationFrame",function(e){t.cancel(e)})}]),angular.module("duScroll.spyAPI",["duScroll.scrollContainerAPI"]).factory("spyAPI",["$rootScope","$timeout","$interval","$window","$document","scrollContainerAPI","duScrollGreedy","duScrollSpyWait","duScrollSpyRefreshInterval","duScrollBottomSpy","duScrollActiveClass",function(e,t,n,i,r,o,a,s,l,c,u){"use strict";var d=function(n){var o=!1,l=!1,d=function(){l=!1;var t,o=n.container,s=o[0],d=0;if("undefined"!=typeof HTMLElement&&s instanceof HTMLElement||s.nodeType&&s.nodeType===s.ELEMENT_NODE)d=s.getBoundingClientRect().top,t=Math.round(s.scrollTop+s.clientHeight)>=s.scrollHeight;else{var p=r[0].body.scrollHeight||r[0].documentElement.scrollHeight;t=Math.round(i.pageYOffset+i.innerHeight)>=p}var h,f,m,g,v,y,w=c&&t?"bottom":"top";for(g=n.spies,f=n.currentlyActive,m=void 0,h=0;h<g.length;h++)v=g[h],(y=v.getTargetPosition())&&v.$element&&(c&&t||y.top+v.offset-d<20&&(a||-1*y.top+d)<y.height)&&(!m||m[w]<y[w])&&(m={spy:v},m[w]=y[w]);m&&(m=m.spy),f===m||a&&!m||(f&&f.$element&&(f.$element.removeClass(u),e.$broadcast("duScrollspy:becameInactive",f.$element,angular.element(f.getTargetElement()))),m&&(m.$element.addClass(u),e.$broadcast("duScrollspy:becameActive",m.$element,angular.element(m.getTargetElement()))),n.currentlyActive=m)};return s?function(){o?l=!0:(d(),o=t(function(){o=!1,l&&d()},s,!1))}:d},p={},h=function(e){var t=e.$id,n={spies:[]};return n.handler=d(n),p[t]=n,e.$on("$destroy",function(){f(e)}),t},f=function(e){var t=e.$id,i=p[t],r=i.container;i.intervalPromise&&n.cancel(i.intervalPromise),r&&r.off("scroll",i.handler),delete p[t]},m=h(e),g=function(e){return p[e.$id]?p[e.$id]:e.$parent?g(e.$parent):p[m]},v=function(e){var t,n,i=e.$scope;if(i)return g(i);for(n in p)if(t=p[n],-1!==t.spies.indexOf(e))return t},y=function(e){for(;e.parentNode;)if((e=e.parentNode)===document)return!0;return!1};return{addSpy:function(e){var t=v(e);t&&(t.spies.push(e),t.container&&y(t.container)||(t.container&&t.container.off("scroll",t.handler),t.container=o.getContainer(e.$scope),l&&!t.intervalPromise&&(t.intervalPromise=n(t.handler,l,0,!1)),t.container.on("scroll",t.handler).triggerHandler("scroll")))},removeSpy:function(t){var n=v(t);t===n.currentlyActive&&(e.$broadcast("duScrollspy:becameInactive",n.currentlyActive.$element),n.currentlyActive=null);var i=n.spies.indexOf(t);-1!==i&&n.spies.splice(i,1),t.$element=null},createContext:h,destroyContext:f,getContextForScope:g}}]),angular.module("duScroll.scrollContainerAPI",[]).factory("scrollContainerAPI",["$document",function(e){"use strict";var t={},n=function(e,n){var i=e.$id;return t[i]=n,i},i=function(e){return t[e.$id]?e.$id:e.$parent?i(e.$parent):void 0};return{getContainerId:i,getContainer:function(n){var r=i(n);return r?t[r]:e},setContainer:n,removeContainer:function(e){var n=i(e);n&&delete t[n]}}}]),angular.module("duScroll.smoothScroll",["duScroll.scrollHelpers","duScroll.scrollContainerAPI"]).directive("duSmoothScroll",["duScrollDuration","duScrollOffset","scrollContainerAPI",function(e,t,n){"use strict";return{link:function(i,r,o){r.on("click",function(r){if(o.href&&-1!==o.href.indexOf("#")||""!==o.duSmoothScroll){var a=o.href?o.href.replace(/.*(?=#[^\s]+$)/,"").substring(1):o.duSmoothScroll,s=document.getElementById(a)||document.getElementsByName(a)[0];if(s&&s.getBoundingClientRect){r.stopPropagation&&r.stopPropagation(),r.preventDefault&&r.preventDefault();var l=o.offset?parseInt(o.offset,10):t,c=o.duration?parseInt(o.duration,10):e;n.getContainer(i).duScrollToElement(angular.element(s),isNaN(l)?0:l,isNaN(c)?0:c)}}})}}}]),angular.module("duScroll.spyContext",["duScroll.spyAPI"]).directive("duSpyContext",["spyAPI",function(e){"use strict";return{restrict:"A",scope:!0,compile:function(t,n,i){return{pre:function(t,n,i,r){e.createContext(t)}}}}}]),angular.module("duScroll.scrollContainer",["duScroll.scrollContainerAPI"]).directive("duScrollContainer",["scrollContainerAPI",function(e){"use strict";return{restrict:"A",scope:!0,compile:function(t,n,i){return{pre:function(t,n,i,r){i.$observe("duScrollContainer",function(i){angular.isString(i)&&(i=document.getElementById(i)),i=angular.isElement(i)?angular.element(i):n,e.setContainer(t,i),t.$on("$destroy",function(){e.removeContainer(t)})})}}}}}]),angular.module("duScroll.scrollspy",["duScroll.spyAPI"]).directive("duScrollspy",["spyAPI","duScrollOffset","$timeout","$rootScope",function(e,t,n,i){"use strict";var r=function(e,t,n,i){angular.isElement(e)?this.target=e:angular.isString(e)&&(this.targetId=e),this.$scope=t,this.$element=n,this.offset=i};return r.prototype.getTargetElement=function(){return!this.target&&this.targetId&&(this.target=document.getElementById(this.targetId)||document.getElementsByName(this.targetId)[0]),this.target},r.prototype.getTargetPosition=function(){var e=this.getTargetElement();if(e)return e.getBoundingClientRect()},r.prototype.flushTargetCache=function(){this.targetId&&(this.target=void 0)},{link:function(o,a,s){var l,c=s.ngHref||s.href;if(c&&-1!==c.indexOf("#")?l=c.replace(/.*(?=#[^\s]+$)/,"").substring(1):s.duScrollspy?l=s.duScrollspy:s.duSmoothScroll&&(l=s.duSmoothScroll),l){var u=n(function(){var n=new r(l,o,a,-(s.offset?parseInt(s.offset,10):t));e.addSpy(n),o.$on("$locationChangeSuccess",n.flushTargetCache.bind(n));var c=i.$on("$stateChangeSuccess",n.flushTargetCache.bind(n));o.$on("$destroy",function(){e.removeSpy(n),c()})},0,!1);o.$on("$destroy",function(){n.cancel(u)})}}}}])}).call(t,n(7)(e))},function(e,t,n){var i=n(65);window&&(window.imagesLoaded=i),n(0),n(67),e.exports="hj.imagesLoaded"},function(e,t,n){var i,r;!function(o,a){"use strict";i=[n(66)],void 0!==(r=function(e){return a(o,e)}.apply(t,i))&&(e.exports=r)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function extend(e,t){for(var n in t)e[n]=t[n];return e}function makeArray(e){var t=[];if(Array.isArray(e))t=e;else if("number"==typeof e.length)for(var n=0;n<e.length;n++)t.push(e[n]);else t.push(e);return t}function ImagesLoaded(e,t,i){if(!(this instanceof ImagesLoaded))return new ImagesLoaded(e,t,i);"string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=makeArray(e),this.options=extend({},this.options),"function"==typeof t?i=t:extend(this.options,t),i&&this.on("always",i),this.getImages(),n&&(this.jqDeferred=new n.Deferred),setTimeout(function(){this.check()}.bind(this))}function LoadingImage(e){this.img=e}function Background(e,t){this.url=e,this.element=t,this.img=new Image}var n=e.jQuery,i=e.console;ImagesLoaded.prototype=Object.create(t.prototype),ImagesLoaded.prototype.options={},ImagesLoaded.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},ImagesLoaded.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&r[t]){for(var n=e.querySelectorAll("img"),i=0;i<n.length;i++){var o=n[i];this.addImage(o)}if("string"==typeof this.options.background){var a=e.querySelectorAll(this.options.background);for(i=0;i<a.length;i++){var s=a[i];this.addElementBackgroundImages(s)}}}};var r={1:!0,9:!0,11:!0};return ImagesLoaded.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var n=/url\((['"])?(.*?)\1\)/gi,i=n.exec(t.backgroundImage);null!==i;){var r=i&&i[2];r&&this.addBackground(r,e),i=n.exec(t.backgroundImage)}},ImagesLoaded.prototype.addImage=function(e){var t=new LoadingImage(e);this.images.push(t)},ImagesLoaded.prototype.addBackground=function(e,t){var n=new Background(e,t);this.images.push(n)},ImagesLoaded.prototype.check=function(){function onProgress(t,n,i){setTimeout(function(){e.progress(t,n,i)})}var e=this;if(this.progressedCount=0,this.hasAnyBroken=!1,!this.images.length)return void this.complete();this.images.forEach(function(e){e.once("progress",onProgress),e.check()})},ImagesLoaded.prototype.progress=function(e,t,n){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&i&&i.log("progress: "+n,e,t)},ImagesLoaded.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},LoadingImage.prototype=Object.create(t.prototype),LoadingImage.prototype.check=function(){if(this.getIsImageComplete())return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src},LoadingImage.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},LoadingImage.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},LoadingImage.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},LoadingImage.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},LoadingImage.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},LoadingImage.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},Background.prototype=Object.create(LoadingImage.prototype),Background.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},Background.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},Background.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},ImagesLoaded.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&(n=t,n.fn.imagesLoaded=function(e,t){return new ImagesLoaded(this,e,t).jqDeferred.promise(n(this))})},ImagesLoaded.makeJQueryPlugin(),ImagesLoaded})},function(e,t,n){var i,r;!function(o,a){i=a,void 0!==(r="function"==typeof i?i.call(t,n,t,e):i)&&(e.exports=r)}("undefined"!=typeof window&&window,function(){"use strict";function EvEmitter(){}var e=EvEmitter.prototype;return e.on=function(e,t){if(e&&t){var n=this._events=this._events||{},i=n[e]=n[e]||[];return-1==i.indexOf(t)&&i.push(t),this}},e.once=function(e,t){if(e&&t){this.on(e,t);var n=this._onceEvents=this._onceEvents||{};return(n[e]=n[e]||{})[t]=!0,this}},e.off=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){var i=n.indexOf(t);return-1!=i&&n.splice(i,1),this}},e.emitEvent=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){n=n.slice(0),t=t||[];for(var i=this._onceEvents&&this._onceEvents[e],r=0;r<n.length;r++){var o=n[r];i&&i[o]&&(this.off(e,o),delete i[o]),o.apply(this,t)}return this}},e.allOff=function(){delete this._events,delete this._onceEvents},EvEmitter})},function(e,t){!function(){"use strict";angular.module("hj.imagesLoaded",[]).config(["$compileProvider",function(e){e.preAssignBindingsEnabled&&e.preAssignBindingsEnabled(!0)}]).directive("imagesLoaded",function(){return{restrict:"AC",scope:{imagesLoaded:"=?",imagesLoadedOptions:"=?",imagesLoadedEvents:"=?",imagesLoadedClass:"=?",imagesLoadedWatch:"=?",imagesLoadedAlways:"&?",imagesLoadedDone:"&?",imagesLoadedFail:"&?",imagesLoadedSelector:"@?"},bindToController:!0,controllerAs:"vm",controller:["$scope","$element","$attrs","$timeout",function(e,t,n,i){var r=this,o=["always","done","fail","progress"],a=r.imagesLoaded||r.imagesLoadedEvents,s=r.imagesLoadedOptions||{},l=r.imagesLoadedClass||"images-loaded",c=t.hasClass(l),u=r.imagesLoadedSelector;t.addClass(l);var d=function(){e.$emit("imagesLoaded:started",t),c&&t.addClass(l);var n=u?t.find(u):t[0],i=imagesLoaded(n,s,function(){e.$emit("imagesLoaded:loaded",t),t.removeClass(l),e.$apply(function(){e.$parent.$imagesLoaded=!0})});o.forEach(function(e){i.on(e,function(){var n=[this,t].concat(Array.prototype.slice.call(arguments));a&&"function"==typeof a[e]&&a[e].apply(this,n),"function"==typeof r["imagesLoaded"+(e[0].toUpperCase()+e.slice(1))]&&r["imagesLoaded"+(e[0].toUpperCase()+e.slice(1))].apply(this,n)})})};r.imagesLoadedWatch?e.$watch("vm.imagesLoadedWatch",function(){d()}):i(d)}]}}),angular.module("angular-images-loaded",["hj.imagesLoaded"])}()},function(e,t,n){n(1)(n(69))},function(e,t){e.exports='/*!\n * ScrollMagic v2.0.5 (2015-04-29)\n * The javascript library for magical scroll interactions.\n * (c) 2015 Jan Paepke (@janpaepke)\n * Project Website: http://scrollmagic.io\n * \n * @version 2.0.5\n * @license Dual licensed under MIT license and GPL.\n * @author Jan Paepke - e-mail@janpaepke.de\n *\n * @file ScrollMagic main library.\n */\n/**\n * @namespace ScrollMagic\n */\n(function (root, factory) {\n\tif (typeof define === \'function\' && define.amd) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine(factory);\n\t} else if (typeof exports === \'object\') {\n\t\t// CommonJS\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// Browser global\n\t\troot.ScrollMagic = factory();\n\t}\n}(this, function () {\n\t"use strict";\n\n\tvar ScrollMagic = function () {\n\t\t_util.log(2, \'(COMPATIBILITY NOTICE) -> As of ScrollMagic 2.0.0 you need to use \\\'new ScrollMagic.Controller()\\\' to create a new controller instance. Use \\\'new ScrollMagic.Scene()\\\' to instance a scene.\');\n\t};\n\n\tScrollMagic.version = "2.0.5";\n\n\t// TODO: temporary workaround for chrome\'s scroll jitter bug\n\twindow.addEventListener("mousewheel", function () {});\n\n\t// global const\n\tvar PIN_SPACER_ATTRIBUTE = "data-scrollmagic-pin-spacer";\n\n\t/**\n\t * The main class that is needed once per scroll container.\n\t *\n\t * @class\n\t *\n\t * @example\n\t * // basic initialization\n\t * var controller = new ScrollMagic.Controller();\n\t *\n\t * // passing options\n\t * var controller = new ScrollMagic.Controller({container: "#myContainer", loglevel: 3});\n\t *\n\t * @param {object} [options] - An object containing one or more options for the controller.\n\t * @param {(string|object)} [options.container=window] - A selector, DOM object that references the main container for scrolling.\n\t * @param {boolean} [options.vertical=true] - Sets the scroll mode to vertical (`true`) or horizontal (`false`) scrolling.\n\t * @param {object} [options.globalSceneOptions={}] - These options will be passed to every Scene that is added to the controller using the addScene method. For more information on Scene options see {@link ScrollMagic.Scene}.\n\t * @param {number} [options.loglevel=2] Loglevel for debugging. Note that logging is disabled in the minified version of ScrollMagic.\n\t ** `0` => silent\n\t ** `1` => errors\n\t ** `2` => errors, warnings\n\t ** `3` => errors, warnings, debuginfo\n\t * @param {boolean} [options.refreshInterval=100] - Some changes don\'t call events by default, like changing the container size or moving a scene trigger element.  \n\t This interval polls these parameters to fire the necessary events.  \n\t If you don\'t use custom containers, trigger elements or have static layouts, where the positions of the trigger elements don\'t change, you can set this to 0 disable interval checking and improve performance.\n\t *\n\t */\n\tScrollMagic.Controller = function (options) {\n/*\n\t * ----------------------------------------------------------------\n\t * settings\n\t * ----------------------------------------------------------------\n\t */\n\t\tvar\n\t\tNAMESPACE = \'ScrollMagic.Controller\',\n\t\t\tSCROLL_DIRECTION_FORWARD = \'FORWARD\',\n\t\t\tSCROLL_DIRECTION_REVERSE = \'REVERSE\',\n\t\t\tSCROLL_DIRECTION_PAUSED = \'PAUSED\',\n\t\t\tDEFAULT_OPTIONS = CONTROLLER_OPTIONS.defaults;\n\n/*\n\t * ----------------------------------------------------------------\n\t * private vars\n\t * ----------------------------------------------------------------\n\t */\n\t\tvar\n\t\tController = this,\n\t\t\t_options = _util.extend({}, DEFAULT_OPTIONS, options),\n\t\t\t_sceneObjects = [],\n\t\t\t_updateScenesOnNextCycle = false,\n\t\t\t// can be boolean (true => all scenes) or an array of scenes to be updated\n\t\t\t_scrollPos = 0,\n\t\t\t_scrollDirection = SCROLL_DIRECTION_PAUSED,\n\t\t\t_isDocument = true,\n\t\t\t_viewPortSize = 0,\n\t\t\t_enabled = true,\n\t\t\t_updateTimeout, _refreshTimeout;\n\n/*\n\t * ----------------------------------------------------------------\n\t * private functions\n\t * ----------------------------------------------------------------\n\t */\n\n\t\t/**\n\t\t * Internal constructor function of the ScrollMagic Controller\n\t\t * @private\n\t\t */\n\t\tvar construct = function () {\n\t\t\tfor (var key in _options) {\n\t\t\t\tif (!DEFAULT_OPTIONS.hasOwnProperty(key)) {\n\t\t\t\t\tlog(2, "WARNING: Unknown option \\"" + key + "\\"");\n\t\t\t\t\tdelete _options[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\t_options.container = _util.get.elements(_options.container)[0];\n\t\t\t// check ScrollContainer\n\t\t\tif (!_options.container) {\n\t\t\t\tlog(1, "ERROR creating object " + NAMESPACE + ": No valid scroll container supplied");\n\t\t\t\tthrow NAMESPACE + " init failed."; // cancel\n\t\t\t}\n\t\t\t_isDocument = _options.container === window || _options.container === document.body || !document.body.contains(_options.container);\n\t\t\t// normalize to window\n\t\t\tif (_isDocument) {\n\t\t\t\t_options.container = window;\n\t\t\t}\n\t\t\t// update container size immediately\n\t\t\t_viewPortSize = getViewportSize();\n\t\t\t// set event handlers\n\t\t\t_options.container.addEventListener("resize", onChange);\n\t\t\t_options.container.addEventListener("scroll", onChange);\n\n\t\t\t_options.refreshInterval = parseInt(_options.refreshInterval) || DEFAULT_OPTIONS.refreshInterval;\n\t\t\tscheduleRefresh();\n\n\t\t\tlog(3, "added new " + NAMESPACE + " controller (v" + ScrollMagic.version + ")");\n\t\t};\n\n\t\t/**\n\t\t * Schedule the next execution of the refresh function\n\t\t * @private\n\t\t */\n\t\tvar scheduleRefresh = function () {\n\t\t\tif (_options.refreshInterval > 0) {\n\t\t\t\t_refreshTimeout = window.setTimeout(refresh, _options.refreshInterval);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Default function to get scroll pos - overwriteable using `Controller.scrollPos(newFunction)`\n\t\t * @private\n\t\t */\n\t\tvar getScrollPos = function () {\n\t\t\treturn _options.vertical ? _util.get.scrollTop(_options.container) : _util.get.scrollLeft(_options.container);\n\t\t};\n\n\t\t/**\n\t\t * Returns the current viewport Size (width vor horizontal, height for vertical)\n\t\t * @private\n\t\t */\n\t\tvar getViewportSize = function () {\n\t\t\treturn _options.vertical ? _util.get.height(_options.container) : _util.get.width(_options.container);\n\t\t};\n\n\t\t/**\n\t\t * Default function to set scroll pos - overwriteable using `Controller.scrollTo(newFunction)`\n\t\t * Make available publicly for pinned mousewheel workaround.\n\t\t * @private\n\t\t */\n\t\tvar setScrollPos = this._setScrollPos = function (pos) {\n\t\t\tif (_options.vertical) {\n\t\t\t\tif (_isDocument) {\n\t\t\t\t\twindow.scrollTo(_util.get.scrollLeft(), pos);\n\t\t\t\t} else {\n\t\t\t\t\t_options.container.scrollTop = pos;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (_isDocument) {\n\t\t\t\t\twindow.scrollTo(pos, _util.get.scrollTop());\n\t\t\t\t} else {\n\t\t\t\t\t_options.container.scrollLeft = pos;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Handle updates in cycles instead of on scroll (performance)\n\t\t * @private\n\t\t */\n\t\tvar updateScenes = function () {\n\t\t\tif (_enabled && _updateScenesOnNextCycle) {\n\t\t\t\t// determine scenes to update\n\t\t\t\tvar scenesToUpdate = _util.type.Array(_updateScenesOnNextCycle) ? _updateScenesOnNextCycle : _sceneObjects.slice(0);\n\t\t\t\t// reset scenes\n\t\t\t\t_updateScenesOnNextCycle = false;\n\t\t\t\tvar oldScrollPos = _scrollPos;\n\t\t\t\t// update scroll pos now instead of onChange, as it might have changed since scheduling (i.e. in-browser smooth scroll)\n\t\t\t\t_scrollPos = Controller.scrollPos();\n\t\t\t\tvar deltaScroll = _scrollPos - oldScrollPos;\n\t\t\t\tif (deltaScroll !== 0) { // scroll position changed?\n\t\t\t\t\t_scrollDirection = (deltaScroll > 0) ? SCROLL_DIRECTION_FORWARD : SCROLL_DIRECTION_REVERSE;\n\t\t\t\t}\n\t\t\t\t// reverse order of scenes if scrolling reverse\n\t\t\t\tif (_scrollDirection === SCROLL_DIRECTION_REVERSE) {\n\t\t\t\t\tscenesToUpdate.reverse();\n\t\t\t\t}\n\t\t\t\t// update scenes\n\t\t\t\tscenesToUpdate.forEach(function (scene, index) {\n\t\t\t\t\tlog(3, "updating Scene " + (index + 1) + "/" + scenesToUpdate.length + " (" + _sceneObjects.length + " total)");\n\t\t\t\t\tscene.update(true);\n\t\t\t\t});\n\t\t\t\tif (scenesToUpdate.length === 0 && _options.loglevel >= 3) {\n\t\t\t\t\tlog(3, "updating 0 Scenes (nothing added to controller)");\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Initializes rAF callback\n\t\t * @private\n\t\t */\n\t\tvar debounceUpdate = function () {\n\t\t\t_updateTimeout = _util.rAF(updateScenes);\n\t\t};\n\n\t\t/**\n\t\t * Handles Container changes\n\t\t * @private\n\t\t */\n\t\tvar onChange = function (e) {\n\t\t\tlog(3, "event fired causing an update:", e.type);\n\t\t\tif (e.type == "resize") {\n\t\t\t\t// resize\n\t\t\t\t_viewPortSize = getViewportSize();\n\t\t\t\t_scrollDirection = SCROLL_DIRECTION_PAUSED;\n\t\t\t}\n\t\t\t// schedule update\n\t\t\tif (_updateScenesOnNextCycle !== true) {\n\t\t\t\t_updateScenesOnNextCycle = true;\n\t\t\t\tdebounceUpdate();\n\t\t\t}\n\t\t};\n\n\t\tvar refresh = function () {\n\t\t\tif (!_isDocument) {\n\t\t\t\t// simulate resize event. Only works for viewport relevant param (performance)\n\t\t\t\tif (_viewPortSize != getViewportSize()) {\n\t\t\t\t\tvar resizeEvent;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tresizeEvent = new Event(\'resize\', {\n\t\t\t\t\t\t\tbubbles: false,\n\t\t\t\t\t\t\tcancelable: false\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (e) { // stupid IE\n\t\t\t\t\t\tresizeEvent = document.createEvent("Event");\n\t\t\t\t\t\tresizeEvent.initEvent("resize", false, false);\n\t\t\t\t\t}\n\t\t\t\t\t_options.container.dispatchEvent(resizeEvent);\n\t\t\t\t}\n\t\t\t}\n\t\t\t_sceneObjects.forEach(function (scene, index) { // refresh all scenes\n\t\t\t\tscene.refresh();\n\t\t\t});\n\t\t\tscheduleRefresh();\n\t\t};\n\n\t\t/**\n\t\t * Send a debug message to the console.\n\t\t * provided publicly with _log for plugins\n\t\t * @private\n\t\t *\n\t\t * @param {number} loglevel - The loglevel required to initiate output for the message.\n\t\t * @param {...mixed} output - One or more variables that should be passed to the console.\n\t\t */\n\t\tvar log = this._log = function (loglevel, output) {\n\t\t\tif (_options.loglevel >= loglevel) {\n\t\t\t\tArray.prototype.splice.call(arguments, 1, 0, "(" + NAMESPACE + ") ->");\n\t\t\t\t_util.log.apply(window, arguments);\n\t\t\t}\n\t\t};\n\t\t// for scenes we have getters for each option, but for the controller we don\'t, so we need to make it available externally for plugins\n\t\tthis._options = _options;\n\n\t\t/**\n\t\t * Sort scenes in ascending order of their start offset.\n\t\t * @private\n\t\t *\n\t\t * @param {array} ScenesArray - an array of ScrollMagic Scenes that should be sorted\n\t\t * @return {array} The sorted array of Scenes.\n\t\t */\n\t\tvar sortScenes = function (ScenesArray) {\n\t\t\tif (ScenesArray.length <= 1) {\n\t\t\t\treturn ScenesArray;\n\t\t\t} else {\n\t\t\t\tvar scenes = ScenesArray.slice(0);\n\t\t\t\tscenes.sort(function (a, b) {\n\t\t\t\t\treturn a.scrollOffset() > b.scrollOffset() ? 1 : -1;\n\t\t\t\t});\n\t\t\t\treturn scenes;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * ----------------------------------------------------------------\n\t\t * public functions\n\t\t * ----------------------------------------------------------------\n\t\t */\n\n\t\t/**\n\t\t * Add one ore more scene(s) to the controller.  \n\t\t * This is the equivalent to `Scene.addTo(controller)`.\n\t\t * @public\n\t\t * @example\n\t\t * // with a previously defined scene\n\t\t * controller.addScene(scene);\n\t\t *\n\t\t * // with a newly created scene.\n\t\t * controller.addScene(new ScrollMagic.Scene({duration : 0}));\n\t\t *\n\t\t * // adding multiple scenes\n\t\t * controller.addScene([scene, scene2, new ScrollMagic.Scene({duration : 0})]);\n\t\t *\n\t\t * @param {(ScrollMagic.Scene|array)} newScene - ScrollMagic Scene or Array of Scenes to be added to the controller.\n\t\t * @return {Controller} Parent object for chaining.\n\t\t */\n\t\tthis.addScene = function (newScene) {\n\t\t\tif (_util.type.Array(newScene)) {\n\t\t\t\tnewScene.forEach(function (scene, index) {\n\t\t\t\t\tController.addScene(scene);\n\t\t\t\t});\n\t\t\t} else if (newScene instanceof ScrollMagic.Scene) {\n\t\t\t\tif (newScene.controller() !== Controller) {\n\t\t\t\t\tnewScene.addTo(Controller);\n\t\t\t\t} else if (_sceneObjects.indexOf(newScene) < 0) {\n\t\t\t\t\t// new scene\n\t\t\t\t\t_sceneObjects.push(newScene); // add to array\n\t\t\t\t\t_sceneObjects = sortScenes(_sceneObjects); // sort\n\t\t\t\t\tnewScene.on("shift.controller_sort", function () { // resort whenever scene moves\n\t\t\t\t\t\t_sceneObjects = sortScenes(_sceneObjects);\n\t\t\t\t\t});\n\t\t\t\t\t// insert Global defaults.\n\t\t\t\t\tfor (var key in _options.globalSceneOptions) {\n\t\t\t\t\t\tif (newScene[key]) {\n\t\t\t\t\t\t\tnewScene[key].call(newScene, _options.globalSceneOptions[key]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlog(3, "adding Scene (now " + _sceneObjects.length + " total)");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlog(1, "ERROR: invalid argument supplied for \'.addScene()\'");\n\t\t\t}\n\t\t\treturn Controller;\n\t\t};\n\n\t\t/**\n\t\t * Remove one ore more scene(s) from the controller.  \n\t\t * This is the equivalent to `Scene.remove()`.\n\t\t * @public\n\t\t * @example\n\t\t * // remove a scene from the controller\n\t\t * controller.removeScene(scene);\n\t\t *\n\t\t * // remove multiple scenes from the controller\n\t\t * controller.removeScene([scene, scene2, scene3]);\n\t\t *\n\t\t * @param {(ScrollMagic.Scene|array)} Scene - ScrollMagic Scene or Array of Scenes to be removed from the controller.\n\t\t * @returns {Controller} Parent object for chaining.\n\t\t */\n\t\tthis.removeScene = function (Scene) {\n\t\t\tif (_util.type.Array(Scene)) {\n\t\t\t\tScene.forEach(function (scene, index) {\n\t\t\t\t\tController.removeScene(scene);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tvar index = _sceneObjects.indexOf(Scene);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tScene.off("shift.controller_sort");\n\t\t\t\t\t_sceneObjects.splice(index, 1);\n\t\t\t\t\tlog(3, "removing Scene (now " + _sceneObjects.length + " left)");\n\t\t\t\t\tScene.remove();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn Controller;\n\t\t};\n\n\t\t/**\n\t\t * Update one ore more scene(s) according to the scroll position of the container.  \n\t\t * This is the equivalent to `Scene.update()`.  \n\t\t * The update method calculates the scene\'s start and end position (based on the trigger element, trigger hook, duration and offset) and checks it against the current scroll position of the container.  \n\t\t * It then updates the current scene state accordingly (or does nothing, if the state is already correct) – Pins will be set to their correct position and tweens will be updated to their correct progress.  \n\t\t * _**Note:** This method gets called constantly whenever Controller detects a change. The only application for you is if you change something outside of the realm of ScrollMagic, like moving the trigger or changing tween parameters._\n\t\t * @public\n\t\t * @example\n\t\t * // update a specific scene on next cycle\n\t\t * controller.updateScene(scene);\n\t\t *\n\t\t * // update a specific scene immediately\n\t\t * controller.updateScene(scene, true);\n\t\t *\n\t\t * // update multiple scenes scene on next cycle\n\t\t * controller.updateScene([scene1, scene2, scene3]);\n\t\t *\n\t\t * @param {ScrollMagic.Scene} Scene - ScrollMagic Scene or Array of Scenes that is/are supposed to be updated.\n\t\t * @param {boolean} [immediately=false] - If `true` the update will be instant, if `false` it will wait until next update cycle.  \n\t\t This is useful when changing multiple properties of the scene - this way it will only be updated once all new properties are set (updateScenes).\n\t\t * @return {Controller} Parent object for chaining.\n\t\t */\n\t\tthis.updateScene = function (Scene, immediately) {\n\t\t\tif (_util.type.Array(Scene)) {\n\t\t\t\tScene.forEach(function (scene, index) {\n\t\t\t\t\tController.updateScene(scene, immediately);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (immediately) {\n\t\t\t\t\tScene.update(true);\n\t\t\t\t} else if (_updateScenesOnNextCycle !== true && Scene instanceof ScrollMagic.Scene) { // if _updateScenesOnNextCycle is true, all connected scenes are already scheduled for update\n\t\t\t\t\t// prep array for next update cycle\n\t\t\t\t\t_updateScenesOnNextCycle = _updateScenesOnNextCycle || [];\n\t\t\t\t\tif (_updateScenesOnNextCycle.indexOf(Scene) == -1) {\n\t\t\t\t\t\t_updateScenesOnNextCycle.push(Scene);\n\t\t\t\t\t}\n\t\t\t\t\t_updateScenesOnNextCycle = sortScenes(_updateScenesOnNextCycle); // sort\n\t\t\t\t\tdebounceUpdate();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn Controller;\n\t\t};\n\n\t\t/**\n\t\t * Updates the controller params and calls updateScene on every scene, that is attached to the controller.  \n\t\t * See `Controller.updateScene()` for more information about what this means.  \n\t\t * In most cases you will not need this function, as it is called constantly, whenever ScrollMagic detects a state change event, like resize or scroll.  \n\t\t * The only application for this method is when ScrollMagic fails to detect these events.  \n\t\t * One application is with some external scroll libraries (like iScroll) that move an internal container to a negative offset instead of actually scrolling. In this case the update on the controller needs to be called whenever the child container\'s position changes.\n\t\t * For this case there will also be the need to provide a custom function to calculate the correct scroll position. See `Controller.scrollPos()` for details.\n\t\t * @public\n\t\t * @example\n\t\t * // update the controller on next cycle (saves performance due to elimination of redundant updates)\n\t\t * controller.update();\n\t\t *\n\t\t * // update the controller immediately\n\t\t * controller.update(true);\n\t\t *\n\t\t * @param {boolean} [immediately=false] - If `true` the update will be instant, if `false` it will wait until next update cycle (better performance)\n\t\t * @return {Controller} Parent object for chaining.\n\t\t */\n\t\tthis.update = function (immediately) {\n\t\t\tonChange({\n\t\t\t\ttype: "resize"\n\t\t\t}); // will update size and set _updateScenesOnNextCycle to true\n\t\t\tif (immediately) {\n\t\t\t\tupdateScenes();\n\t\t\t}\n\t\t\treturn Controller;\n\t\t};\n\n\t\t/**\n\t\t * Scroll to a numeric scroll offset, a DOM element, the start of a scene or provide an alternate method for scrolling.  \n\t\t * For vertical controllers it will change the top scroll offset and for horizontal applications it will change the left offset.\n\t\t * @public\n\t\t *\n\t\t * @since 1.1.0\n\t\t * @example\n\t\t * // scroll to an offset of 100\n\t\t * controller.scrollTo(100);\n\t\t *\n\t\t * // scroll to a DOM element\n\t\t * controller.scrollTo("#anchor");\n\t\t *\n\t\t * // scroll to the beginning of a scene\n\t\t * var scene = new ScrollMagic.Scene({offset: 200});\n\t\t * controller.scrollTo(scene);\n\t\t *\n\t\t * // define a new scroll position modification function (jQuery animate instead of jump)\n\t\t * controller.scrollTo(function (newScrollPos) {\n\t\t *\t$("html, body").animate({scrollTop: newScrollPos});\n\t\t * });\n\t\t * controller.scrollTo(100); // call as usual, but the new function will be used instead\n\t\t *\n\t\t * // define a new scroll function with an additional parameter\n\t\t * controller.scrollTo(function (newScrollPos, message) {\n\t\t *  console.log(message);\n\t\t *\t$(this).animate({scrollTop: newScrollPos});\n\t\t * });\n\t\t * // call as usual, but supply an extra parameter to the defined custom function\n\t\t * controller.scrollTo(100, "my message");\n\t\t *\n\t\t * // define a new scroll function with an additional parameter containing multiple variables\n\t\t * controller.scrollTo(function (newScrollPos, options) {\n\t\t *  someGlobalVar = options.a + options.b;\n\t\t *\t$(this).animate({scrollTop: newScrollPos});\n\t\t * });\n\t\t * // call as usual, but supply an extra parameter containing multiple options\n\t\t * controller.scrollTo(100, {a: 1, b: 2});\n\t\t *\n\t\t * // define a new scroll function with a callback supplied as an additional parameter\n\t\t * controller.scrollTo(function (newScrollPos, callback) {\n\t\t *\t$(this).animate({scrollTop: newScrollPos}, 400, "swing", callback);\n\t\t * });\n\t\t * // call as usual, but supply an extra parameter, which is used as a callback in the previously defined custom scroll function\n\t\t * controller.scrollTo(100, function() {\n\t\t *\tconsole.log("scroll has finished.");\n\t\t * });\n\t\t *\n\t\t * @param {mixed} scrollTarget - The supplied argument can be one of these types:\n\t\t * 1. `number` -> The container will scroll to this new scroll offset.\n\t\t * 2. `string` or `object` -> Can be a selector or a DOM object.  \n\t\t *  The container will scroll to the position of this element.\n\t\t * 3. `ScrollMagic Scene` -> The container will scroll to the start of this scene.\n\t\t * 4. `function` -> This function will be used for future scroll position modifications.  \n\t\t *  This provides a way for you to change the behaviour of scrolling and adding new behaviour like animation. The function receives the new scroll position as a parameter and a reference to the container element using `this`.  \n\t\t *  It may also optionally receive an optional additional parameter (see below)  \n\t\t *  _**NOTE:**  \n\t\t *  All other options will still work as expected, using the new function to scroll._\n\t\t * @param {mixed} [additionalParameter] - If a custom scroll function was defined (see above 4.), you may want to supply additional parameters to it, when calling it. You can do this using this parameter – see examples for details. Please note, that this parameter will have no effect, if you use the default scrolling function.\n\t\t * @returns {Controller} Parent object for chaining.\n\t\t */\n\t\tthis.scrollTo = function (scrollTarget, additionalParameter) {\n\t\t\tif (_util.type.Number(scrollTarget)) { // excecute\n\t\t\t\tsetScrollPos.call(_options.container, scrollTarget, additionalParameter);\n\t\t\t} else if (scrollTarget instanceof ScrollMagic.Scene) { // scroll to scene\n\t\t\t\tif (scrollTarget.controller() === Controller) { // check if the controller is associated with this scene\n\t\t\t\t\tController.scrollTo(scrollTarget.scrollOffset(), additionalParameter);\n\t\t\t\t} else {\n\t\t\t\t\tlog(2, "scrollTo(): The supplied scene does not belong to this controller. Scroll cancelled.", scrollTarget);\n\t\t\t\t}\n\t\t\t} else if (_util.type.Function(scrollTarget)) { // assign new scroll function\n\t\t\t\tsetScrollPos = scrollTarget;\n\t\t\t} else { // scroll to element\n\t\t\t\tvar elem = _util.get.elements(scrollTarget)[0];\n\t\t\t\tif (elem) {\n\t\t\t\t\t// if parent is pin spacer, use spacer position instead so correct start position is returned for pinned elements.\n\t\t\t\t\twhile (elem.parentNode.hasAttribute(PIN_SPACER_ATTRIBUTE)) {\n\t\t\t\t\t\telem = elem.parentNode;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar\n\t\t\t\t\tparam = _options.vertical ? "top" : "left",\n\t\t\t\t\t\t// which param is of interest ?\n\t\t\t\t\t\tcontainerOffset = _util.get.offset(_options.container),\n\t\t\t\t\t\t// container position is needed because element offset is returned in relation to document, not in relation to container.\n\t\t\t\t\t\telementOffset = _util.get.offset(elem);\n\n\t\t\t\t\tif (!_isDocument) { // container is not the document root, so substract scroll Position to get correct trigger element position relative to scrollcontent\n\t\t\t\t\t\tcontainerOffset[param] -= Controller.scrollPos();\n\t\t\t\t\t}\n\n\t\t\t\t\tController.scrollTo(elementOffset[param] - containerOffset[param], additionalParameter);\n\t\t\t\t} else {\n\t\t\t\t\tlog(2, "scrollTo(): The supplied argument is invalid. Scroll cancelled.", scrollTarget);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn Controller;\n\t\t};\n\n\t\t/**\n\t\t * **Get** the current scrollPosition or **Set** a new method to calculate it.  \n\t\t * -> **GET**:\n\t\t * When used as a getter this function will return the current scroll position.  \n\t\t * To get a cached value use Controller.info("scrollPos"), which will be updated in the update cycle.  \n\t\t * For vertical controllers it will return the top scroll offset and for horizontal applications it will return the left offset.\n\t\t *\n\t\t * -> **SET**:\n\t\t * When used as a setter this method prodes a way to permanently overwrite the controller\'s scroll position calculation.  \n\t\t * A typical usecase is when the scroll position is not reflected by the containers scrollTop or scrollLeft values, but for example by the inner offset of a child container.  \n\t\t * Moving a child container inside a parent is a commonly used method for several scrolling frameworks, including iScroll.  \n\t\t * By providing an alternate calculation function you can make sure ScrollMagic receives the correct scroll position.  \n\t\t * Please also bear in mind that your function should return y values for vertical scrolls an x for horizontals.\n\t\t *\n\t\t * To change the current scroll position please use `Controller.scrollTo()`.\n\t\t * @public\n\t\t *\n\t\t * @example\n\t\t * // get the current scroll Position\n\t\t * var scrollPos = controller.scrollPos();\n\t\t *\n\t\t * // set a new scroll position calculation method\n\t\t * controller.scrollPos(function () {\n\t\t *\treturn this.info("vertical") ? -mychildcontainer.y : -mychildcontainer.x\n\t\t * });\n\t\t *\n\t\t * @param {function} [scrollPosMethod] - The function to be used for the scroll position calculation of the container.\n\t\t * @returns {(number|Controller)} Current scroll position or parent object for chaining.\n\t\t */\n\t\tthis.scrollPos = function (scrollPosMethod) {\n\t\t\tif (!arguments.length) { // get\n\t\t\t\treturn getScrollPos.call(Controller);\n\t\t\t} else { // set\n\t\t\t\tif (_util.type.Function(scrollPosMethod)) {\n\t\t\t\t\tgetScrollPos = scrollPosMethod;\n\t\t\t\t} else {\n\t\t\t\t\tlog(2, "Provided value for method \'scrollPos\' is not a function. To change the current scroll position use \'scrollTo()\'.");\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn Controller;\n\t\t};\n\n\t\t/**\n\t\t * **Get** all infos or one in particular about the controller.\n\t\t * @public\n\t\t * @example\n\t\t * // returns the current scroll position (number)\n\t\t * var scrollPos = controller.info("scrollPos");\n\t\t *\n\t\t * // returns all infos as an object\n\t\t * var infos = controller.info();\n\t\t *\n\t\t * @param {string} [about] - If passed only this info will be returned instead of an object containing all.  \n\t\t Valid options are:\n\t\t ** `"size"` => the current viewport size of the container\n\t\t ** `"vertical"` => true if vertical scrolling, otherwise false\n\t\t ** `"scrollPos"` => the current scroll position\n\t\t ** `"scrollDirection"` => the last known direction of the scroll\n\t\t ** `"container"` => the container element\n\t\t ** `"isDocument"` => true if container element is the document.\n\t\t * @returns {(mixed|object)} The requested info(s).\n\t\t */\n\t\tthis.info = function (about) {\n\t\t\tvar values = {\n\t\t\t\tsize: _viewPortSize,\n\t\t\t\t// contains height or width (in regard to orientation);\n\t\t\t\tvertical: _options.vertical,\n\t\t\t\tscrollPos: _scrollPos,\n\t\t\t\tscrollDirection: _scrollDirection,\n\t\t\t\tcontainer: _options.container,\n\t\t\t\tisDocument: _isDocument\n\t\t\t};\n\t\t\tif (!arguments.length) { // get all as an object\n\t\t\t\treturn values;\n\t\t\t} else if (values[about] !== undefined) {\n\t\t\t\treturn values[about];\n\t\t\t} else {\n\t\t\t\tlog(1, "ERROR: option \\"" + about + "\\" is not available");\n\t\t\t\treturn;\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * **Get** or **Set** the current loglevel option value.\n\t\t * @public\n\t\t *\n\t\t * @example\n\t\t * // get the current value\n\t\t * var loglevel = controller.loglevel();\n\t\t *\n\t\t * // set a new value\n\t\t * controller.loglevel(3);\n\t\t *\n\t\t * @param {number} [newLoglevel] - The new loglevel setting of the Controller. `[0-3]`\n\t\t * @returns {(number|Controller)} Current loglevel or parent object for chaining.\n\t\t */\n\t\tthis.loglevel = function (newLoglevel) {\n\t\t\tif (!arguments.length) { // get\n\t\t\t\treturn _options.loglevel;\n\t\t\t} else if (_options.loglevel != newLoglevel) { // set\n\t\t\t\t_options.loglevel = newLoglevel;\n\t\t\t}\n\t\t\treturn Controller;\n\t\t};\n\n\t\t/**\n\t\t * **Get** or **Set** the current enabled state of the controller.  \n\t\t * This can be used to disable all Scenes connected to the controller without destroying or removing them.\n\t\t * @public\n\t\t *\n\t\t * @example\n\t\t * // get the current value\n\t\t * var enabled = controller.enabled();\n\t\t *\n\t\t * // disable the controller\n\t\t * controller.enabled(false);\n\t\t *\n\t\t * @param {boolean} [newState] - The new enabled state of the controller `true` or `false`.\n\t\t * @returns {(boolean|Controller)} Current enabled state or parent object for chaining.\n\t\t */\n\t\tthis.enabled = function (newState) {\n\t\t\tif (!arguments.length) { // get\n\t\t\t\treturn _enabled;\n\t\t\t} else if (_enabled != newState) { // set\n\t\t\t\t_enabled = !! newState;\n\t\t\t\tController.updateScene(_sceneObjects, true);\n\t\t\t}\n\t\t\treturn Controller;\n\t\t};\n\n\t\t/**\n\t\t * Destroy the Controller, all Scenes and everything.\n\t\t * @public\n\t\t *\n\t\t * @example\n\t\t * // without resetting the scenes\n\t\t * controller = controller.destroy();\n\t\t *\n\t\t * // with scene reset\n\t\t * controller = controller.destroy(true);\n\t\t *\n\t\t * @param {boolean} [resetScenes=false] - If `true` the pins and tweens (if existent) of all scenes will be reset.\n\t\t * @returns {null} Null to unset handler variables.\n\t\t */\n\t\tthis.destroy = function (resetScenes) {\n\t\t\twindow.clearTimeout(_refreshTimeout);\n\t\t\tvar i = _sceneObjects.length;\n\t\t\twhile (i--) {\n\t\t\t\t_sceneObjects[i].destroy(resetScenes);\n\t\t\t}\n\t\t\t_options.container.removeEventListener("resize", onChange);\n\t\t\t_options.container.removeEventListener("scroll", onChange);\n\t\t\t_util.cAF(_updateTimeout);\n\t\t\tlog(3, "destroyed " + NAMESPACE + " (reset: " + (resetScenes ? "true" : "false") + ")");\n\t\t\treturn null;\n\t\t};\n\n\t\t// INIT\n\t\tconstruct();\n\t\treturn Controller;\n\t};\n\n\t// store pagewide controller options\n\tvar CONTROLLER_OPTIONS = {\n\t\tdefaults: {\n\t\t\tcontainer: window,\n\t\t\tvertical: true,\n\t\t\tglobalSceneOptions: {},\n\t\t\tloglevel: 2,\n\t\t\trefreshInterval: 100\n\t\t}\n\t};\n/*\n * method used to add an option to ScrollMagic Scenes.\n */\n\tScrollMagic.Controller.addOption = function (name, defaultValue) {\n\t\tCONTROLLER_OPTIONS.defaults[name] = defaultValue;\n\t};\n\t// instance extension function for plugins\n\tScrollMagic.Controller.extend = function (extension) {\n\t\tvar oldClass = this;\n\t\tScrollMagic.Controller = function () {\n\t\t\toldClass.apply(this, arguments);\n\t\t\tthis.$super = _util.extend({}, this); // copy parent state\n\t\t\treturn extension.apply(this, arguments) || this;\n\t\t};\n\t\t_util.extend(ScrollMagic.Controller, oldClass); // copy properties\n\t\tScrollMagic.Controller.prototype = oldClass.prototype; // copy prototype\n\t\tScrollMagic.Controller.prototype.constructor = ScrollMagic.Controller; // restore constructor\n\t};\n\n\n\t/**\n\t * A Scene defines where the controller should react and how.\n\t *\n\t * @class\n\t *\n\t * @example\n\t * // create a standard scene and add it to a controller\n\t * new ScrollMagic.Scene()\n\t *\t\t.addTo(controller);\n\t *\n\t * // create a scene with custom options and assign a handler to it.\n\t * var scene = new ScrollMagic.Scene({\n\t * \t\tduration: 100,\n\t *\t\toffset: 200,\n\t *\t\ttriggerHook: "onEnter",\n\t *\t\treverse: false\n\t * });\n\t *\n\t * @param {object} [options] - Options for the Scene. The options can be updated at any time.  \n\t Instead of setting the options for each scene individually you can also set them globally in the controller as the controllers `globalSceneOptions` option. The object accepts the same properties as the ones below.  \n\t When a scene is added to the controller the options defined using the Scene constructor will be overwritten by those set in `globalSceneOptions`.\n\t * @param {(number|function)} [options.duration=0] - The duration of the scene. \n\t If `0` tweens will auto-play when reaching the scene start point, pins will be pinned indefinetly starting at the start position.  \n\t A function retuning the duration value is also supported. Please see `Scene.duration()` for details.\n\t * @param {number} [options.offset=0] - Offset Value for the Trigger Position. If no triggerElement is defined this will be the scroll distance from the start of the page, after which the scene will start.\n\t * @param {(string|object)} [options.triggerElement=null] - Selector or DOM object that defines the start of the scene. If undefined the scene will start right at the start of the page (unless an offset is set).\n\t * @param {(number|string)} [options.triggerHook="onCenter"] - Can be a number between 0 and 1 defining the position of the trigger Hook in relation to the viewport.  \n\t Can also be defined using a string:\n\t ** `"onEnter"` => `1`\n\t ** `"onCenter"` => `0.5`\n\t ** `"onLeave"` => `0`\n\t * @param {boolean} [options.reverse=true] - Should the scene reverse, when scrolling up?\n\t * @param {number} [options.loglevel=2] - Loglevel for debugging. Note that logging is disabled in the minified version of ScrollMagic.\n\t ** `0` => silent\n\t ** `1` => errors\n\t ** `2` => errors, warnings\n\t ** `3` => errors, warnings, debuginfo\n\t * \n\t */\n\tScrollMagic.Scene = function (options) {\n\n/*\n\t * ----------------------------------------------------------------\n\t * settings\n\t * ----------------------------------------------------------------\n\t */\n\n\t\tvar\n\t\tNAMESPACE = \'ScrollMagic.Scene\',\n\t\t\tSCENE_STATE_BEFORE = \'BEFORE\',\n\t\t\tSCENE_STATE_DURING = \'DURING\',\n\t\t\tSCENE_STATE_AFTER = \'AFTER\',\n\t\t\tDEFAULT_OPTIONS = SCENE_OPTIONS.defaults;\n\n/*\n\t * ----------------------------------------------------------------\n\t * private vars\n\t * ----------------------------------------------------------------\n\t */\n\n\t\tvar\n\t\tScene = this,\n\t\t\t_options = _util.extend({}, DEFAULT_OPTIONS, options),\n\t\t\t_state = SCENE_STATE_BEFORE,\n\t\t\t_progress = 0,\n\t\t\t_scrollOffset = {\n\t\t\t\tstart: 0,\n\t\t\t\tend: 0\n\t\t\t},\n\t\t\t// reflects the controllers\'s scroll position for the start and end of the scene respectively\n\t\t\t_triggerPos = 0,\n\t\t\t_enabled = true,\n\t\t\t_durationUpdateMethod, _controller;\n\n\t\t/**\n\t\t * Internal constructor function of the ScrollMagic Scene\n\t\t * @private\n\t\t */\n\t\tvar construct = function () {\n\t\t\tfor (var key in _options) { // check supplied options\n\t\t\t\tif (!DEFAULT_OPTIONS.hasOwnProperty(key)) {\n\t\t\t\t\tlog(2, "WARNING: Unknown option \\"" + key + "\\"");\n\t\t\t\t\tdelete _options[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\t// add getters/setters for all possible options\n\t\t\tfor (var optionName in DEFAULT_OPTIONS) {\n\t\t\t\taddSceneOption(optionName);\n\t\t\t}\n\t\t\t// validate all options\n\t\t\tvalidateOption();\n\t\t};\n\n/*\n * ----------------------------------------------------------------\n * Event Management\n * ----------------------------------------------------------------\n */\n\n\t\tvar _listeners = {};\n\t\t/**\n\t\t * Scene start event.  \n\t\t * Fires whenever the scroll position its the starting point of the scene.  \n\t\t * It will also fire when scrolling back up going over the start position of the scene. If you want something to happen only when scrolling down/right, use the scrollDirection parameter passed to the callback.\n\t\t *\n\t\t * For details on this event and the order in which it is fired, please review the {@link Scene.progress} method.\n\t\t *\n\t\t * @event ScrollMagic.Scene#start\n\t\t *\n\t\t * @example\n\t\t * scene.on("start", function (event) {\n\t\t * \tconsole.log("Hit start point of scene.");\n\t\t * });\n\t\t *\n\t\t * @property {object} event - The event Object passed to each callback\n\t\t * @property {string} event.type - The name of the event\n\t\t * @property {Scene} event.target - The Scene object that triggered this event\n\t\t * @property {number} event.progress - Reflects the current progress of the scene\n\t\t * @property {string} event.state - The current state of the scene `"BEFORE"` or `"DURING"`\n\t\t * @property {string} event.scrollDirection - Indicates which way we are scrolling `"PAUSED"`, `"FORWARD"` or `"REVERSE"`\n\t\t */\n\t\t/**\n\t\t * Scene end event.  \n\t\t * Fires whenever the scroll position its the ending point of the scene.  \n\t\t * It will also fire when scrolling back up from after the scene and going over its end position. If you want something to happen only when scrolling down/right, use the scrollDirection parameter passed to the callback.\n\t\t *\n\t\t * For details on this event and the order in which it is fired, please review the {@link Scene.progress} method.\n\t\t *\n\t\t * @event ScrollMagic.Scene#end\n\t\t *\n\t\t * @example\n\t\t * scene.on("end", function (event) {\n\t\t * \tconsole.log("Hit end point of scene.");\n\t\t * });\n\t\t *\n\t\t * @property {object} event - The event Object passed to each callback\n\t\t * @property {string} event.type - The name of the event\n\t\t * @property {Scene} event.target - The Scene object that triggered this event\n\t\t * @property {number} event.progress - Reflects the current progress of the scene\n\t\t * @property {string} event.state - The current state of the scene `"DURING"` or `"AFTER"`\n\t\t * @property {string} event.scrollDirection - Indicates which way we are scrolling `"PAUSED"`, `"FORWARD"` or `"REVERSE"`\n\t\t */\n\t\t/**\n\t\t * Scene enter event.  \n\t\t * Fires whenever the scene enters the "DURING" state.  \n\t\t * Keep in mind that it doesn\'t matter if the scene plays forward or backward: This event always fires when the scene enters its active scroll timeframe, regardless of the scroll-direction.\n\t\t *\n\t\t * For details on this event and the order in which it is fired, please review the {@link Scene.progress} method.\n\t\t *\n\t\t * @event ScrollMagic.Scene#enter\n\t\t *\n\t\t * @example\n\t\t * scene.on("enter", function (event) {\n\t\t * \tconsole.log("Scene entered.");\n\t\t * });\n\t\t *\n\t\t * @property {object} event - The event Object passed to each callback\n\t\t * @property {string} event.type - The name of the event\n\t\t * @property {Scene} event.target - The Scene object that triggered this event\n\t\t * @property {number} event.progress - Reflects the current progress of the scene\n\t\t * @property {string} event.state - The current state of the scene - always `"DURING"`\n\t\t * @property {string} event.scrollDirection - Indicates which way we are scrolling `"PAUSED"`, `"FORWARD"` or `"REVERSE"`\n\t\t */\n\t\t/**\n\t\t * Scene leave event.  \n\t\t * Fires whenever the scene\'s state goes from "DURING" to either "BEFORE" or "AFTER".  \n\t\t * Keep in mind that it doesn\'t matter if the scene plays forward or backward: This event always fires when the scene leaves its active scroll timeframe, regardless of the scroll-direction.\n\t\t *\n\t\t * For details on this event and the order in which it is fired, please review the {@link Scene.progress} method.\n\t\t *\n\t\t * @event ScrollMagic.Scene#leave\n\t\t *\n\t\t * @example\n\t\t * scene.on("leave", function (event) {\n\t\t * \tconsole.log("Scene left.");\n\t\t * });\n\t\t *\n\t\t * @property {object} event - The event Object passed to each callback\n\t\t * @property {string} event.type - The name of the event\n\t\t * @property {Scene} event.target - The Scene object that triggered this event\n\t\t * @property {number} event.progress - Reflects the current progress of the scene\n\t\t * @property {string} event.state - The current state of the scene `"BEFORE"` or `"AFTER"`\n\t\t * @property {string} event.scrollDirection - Indicates which way we are scrolling `"PAUSED"`, `"FORWARD"` or `"REVERSE"`\n\t\t */\n\t\t/**\n\t\t * Scene update event.  \n\t\t * Fires whenever the scene is updated (but not necessarily changes the progress).\n\t\t *\n\t\t * @event ScrollMagic.Scene#update\n\t\t *\n\t\t * @example\n\t\t * scene.on("update", function (event) {\n\t\t * \tconsole.log("Scene updated.");\n\t\t * });\n\t\t *\n\t\t * @property {object} event - The event Object passed to each callback\n\t\t * @property {string} event.type - The name of the event\n\t\t * @property {Scene} event.target - The Scene object that triggered this event\n\t\t * @property {number} event.startPos - The starting position of the scene (in relation to the conainer)\n\t\t * @property {number} event.endPos - The ending position of the scene (in relation to the conainer)\n\t\t * @property {number} event.scrollPos - The current scroll position of the container\n\t\t */\n\t\t/**\n\t\t * Scene progress event.  \n\t\t * Fires whenever the progress of the scene changes.\n\t\t *\n\t\t * For details on this event and the order in which it is fired, please review the {@link Scene.progress} method.\n\t\t *\n\t\t * @event ScrollMagic.Scene#progress\n\t\t *\n\t\t * @example\n\t\t * scene.on("progress", function (event) {\n\t\t * \tconsole.log("Scene progress changed to " + event.progress);\n\t\t * });\n\t\t *\n\t\t * @property {object} event - The event Object passed to each callback\n\t\t * @property {string} event.type - The name of the event\n\t\t * @property {Scene} event.target - The Scene object that triggered this event\n\t\t * @property {number} event.progress - Reflects the current progress of the scene\n\t\t * @property {string} event.state - The current state of the scene `"BEFORE"`, `"DURING"` or `"AFTER"`\n\t\t * @property {string} event.scrollDirection - Indicates which way we are scrolling `"PAUSED"`, `"FORWARD"` or `"REVERSE"`\n\t\t */\n\t\t/**\n\t\t * Scene change event.  \n\t\t * Fires whenvever a property of the scene is changed.\n\t\t *\n\t\t * @event ScrollMagic.Scene#change\n\t\t *\n\t\t * @example\n\t\t * scene.on("change", function (event) {\n\t\t * \tconsole.log("Scene Property \\"" + event.what + "\\" changed to " + event.newval);\n\t\t * });\n\t\t *\n\t\t * @property {object} event - The event Object passed to each callback\n\t\t * @property {string} event.type - The name of the event\n\t\t * @property {Scene} event.target - The Scene object that triggered this event\n\t\t * @property {string} event.what - Indicates what value has been changed\n\t\t * @property {mixed} event.newval - The new value of the changed property\n\t\t */\n\t\t/**\n\t\t * Scene shift event.  \n\t\t * Fires whenvever the start or end **scroll offset** of the scene change.\n\t\t * This happens explicitely, when one of these values change: `offset`, `duration` or `triggerHook`.\n\t\t * It will fire implicitly when the `triggerElement` changes, if the new element has a different position (most cases).\n\t\t * It will also fire implicitly when the size of the container changes and the triggerHook is anything other than `onLeave`.\n\t\t *\n\t\t * @event ScrollMagic.Scene#shift\n\t\t * @since 1.1.0\n\t\t *\n\t\t * @example\n\t\t * scene.on("shift", function (event) {\n\t\t * \tconsole.log("Scene moved, because the " + event.reason + " has changed.)");\n\t\t * });\n\t\t *\n\t\t * @property {object} event - The event Object passed to each callback\n\t\t * @property {string} event.type - The name of the event\n\t\t * @property {Scene} event.target - The Scene object that triggered this event\n\t\t * @property {string} event.reason - Indicates why the scene has shifted\n\t\t */\n\t\t/**\n\t\t * Scene destroy event.  \n\t\t * Fires whenvever the scene is destroyed.\n\t\t * This can be used to tidy up custom behaviour used in events.\n\t\t *\n\t\t * @event ScrollMagic.Scene#destroy\n\t\t * @since 1.1.0\n\t\t *\n\t\t * @example\n\t\t * scene.on("enter", function (event) {\n\t\t *        // add custom action\n\t\t *        $("#my-elem").left("200");\n\t\t *      })\n\t\t *      .on("destroy", function (event) {\n\t\t *        // reset my element to start position\n\t\t *        if (event.reset) {\n\t\t *          $("#my-elem").left("0");\n\t\t *        }\n\t\t *      });\n\t\t *\n\t\t * @property {object} event - The event Object passed to each callback\n\t\t * @property {string} event.type - The name of the event\n\t\t * @property {Scene} event.target - The Scene object that triggered this event\n\t\t * @property {boolean} event.reset - Indicates if the destroy method was called with reset `true` or `false`.\n\t\t */\n\t\t/**\n\t\t * Scene add event.  \n\t\t * Fires when the scene is added to a controller.\n\t\t * This is mostly used by plugins to know that change might be due.\n\t\t *\n\t\t * @event ScrollMagic.Scene#add\n\t\t * @since 2.0.0\n\t\t *\n\t\t * @example\n\t\t * scene.on("add", function (event) {\n\t\t * \tconsole.log(\'Scene was added to a new controller.\');\n\t\t * });\n\t\t *\n\t\t * @property {object} event - The event Object passed to each callback\n\t\t * @property {string} event.type - The name of the event\n\t\t * @property {Scene} event.target - The Scene object that triggered this event\n\t\t * @property {boolean} event.controller - The controller object the scene was added to.\n\t\t */\n\t\t/**\n\t\t * Scene remove event.  \n\t\t * Fires when the scene is removed from a controller.\n\t\t * This is mostly used by plugins to know that change might be due.\n\t\t *\n\t\t * @event ScrollMagic.Scene#remove\n\t\t * @since 2.0.0\n\t\t *\n\t\t * @example\n\t\t * scene.on("remove", function (event) {\n\t\t * \tconsole.log(\'Scene was removed from its controller.\');\n\t\t * });\n\t\t *\n\t\t * @property {object} event - The event Object passed to each callback\n\t\t * @property {string} event.type - The name of the event\n\t\t * @property {Scene} event.target - The Scene object that triggered this event\n\t\t */\n\n\t\t/**\n\t\t * Add one ore more event listener.  \n\t\t * The callback function will be fired at the respective event, and an object containing relevant data will be passed to the callback.\n\t\t * @method ScrollMagic.Scene#on\n\t\t *\n\t\t * @example\n\t\t * function callback (event) {\n\t\t * \t\tconsole.log("Event fired! (" + event.type + ")");\n\t\t * }\n\t\t * // add listeners\n\t\t * scene.on("change update progress start end enter leave", callback);\n\t\t *\n\t\t * @param {string} names - The name or names of the event the callback should be attached to.\n\t\t * @param {function} callback - A function that should be executed, when the event is dispatched. An event object will be passed to the callback.\n\t\t * @returns {Scene} Parent object for chaining.\n\t\t */\n\t\tthis.on = function (names, callback) {\n\t\t\tif (_util.type.Function(callback)) {\n\t\t\t\tnames = names.trim().split(\' \');\n\t\t\t\tnames.forEach(function (fullname) {\n\t\t\t\t\tvar\n\t\t\t\t\tnameparts = fullname.split(\'.\'),\n\t\t\t\t\t\teventname = nameparts[0],\n\t\t\t\t\t\tnamespace = nameparts[1];\n\t\t\t\t\tif (eventname != "*") { // disallow wildcards\n\t\t\t\t\t\tif (!_listeners[eventname]) {\n\t\t\t\t\t\t\t_listeners[eventname] = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_listeners[eventname].push({\n\t\t\t\t\t\t\tnamespace: namespace || \'\',\n\t\t\t\t\t\t\tcallback: callback\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tlog(1, "ERROR when calling \'.on()\': Supplied callback for \'" + names + "\' is not a valid function!");\n\t\t\t}\n\t\t\treturn Scene;\n\t\t};\n\n\t\t/**\n\t\t * Remove one or more event listener.\n\t\t * @method ScrollMagic.Scene#off\n\t\t *\n\t\t * @example\n\t\t * function callback (event) {\n\t\t * \t\tconsole.log("Event fired! (" + event.type + ")");\n\t\t * }\n\t\t * // add listeners\n\t\t * scene.on("change update", callback);\n\t\t * // remove listeners\n\t\t * scene.off("change update", callback);\n\t\t *\n\t\t * @param {string} names - The name or names of the event that should be removed.\n\t\t * @param {function} [callback] - A specific callback function that should be removed. If none is passed all callbacks to the event listener will be removed.\n\t\t * @returns {Scene} Parent object for chaining.\n\t\t */\n\t\tthis.off = function (names, callback) {\n\t\t\tif (!names) {\n\t\t\t\tlog(1, "ERROR: Invalid event name supplied.");\n\t\t\t\treturn Scene;\n\t\t\t}\n\t\t\tnames = names.trim().split(\' \');\n\t\t\tnames.forEach(function (fullname, key) {\n\t\t\t\tvar\n\t\t\t\tnameparts = fullname.split(\'.\'),\n\t\t\t\t\teventname = nameparts[0],\n\t\t\t\t\tnamespace = nameparts[1] || \'\',\n\t\t\t\t\tremoveList = eventname === \'*\' ? Object.keys(_listeners) : [eventname];\n\t\t\t\tremoveList.forEach(function (remove) {\n\t\t\t\t\tvar\n\t\t\t\t\tlist = _listeners[remove] || [],\n\t\t\t\t\t\ti = list.length;\n\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\tvar listener = list[i];\n\t\t\t\t\t\tif (listener && (namespace === listener.namespace || namespace === \'*\') && (!callback || callback == listener.callback)) {\n\t\t\t\t\t\t\tlist.splice(i, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!list.length) {\n\t\t\t\t\t\tdelete _listeners[remove];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn Scene;\n\t\t};\n\n\t\t/**\n\t\t * Trigger an event.\n\t\t * @method ScrollMagic.Scene#trigger\n\t\t *\n\t\t * @example\n\t\t * this.trigger("change");\n\t\t *\n\t\t * @param {string} name - The name of the event that should be triggered.\n\t\t * @param {object} [vars] - An object containing info that should be passed to the callback.\n\t\t * @returns {Scene} Parent object for chaining.\n\t\t */\n\t\tthis.trigger = function (name, vars) {\n\t\t\tif (name) {\n\t\t\t\tvar\n\t\t\t\tnameparts = name.trim().split(\'.\'),\n\t\t\t\t\teventname = nameparts[0],\n\t\t\t\t\tnamespace = nameparts[1],\n\t\t\t\t\tlisteners = _listeners[eventname];\n\t\t\t\tlog(3, \'event fired:\', eventname, vars ? "->" : \'\', vars || \'\');\n\t\t\t\tif (listeners) {\n\t\t\t\t\tlisteners.forEach(function (listener, key) {\n\t\t\t\t\t\tif (!namespace || namespace === listener.namespace) {\n\t\t\t\t\t\t\tlistener.callback.call(Scene, new ScrollMagic.Event(eventname, listener.namespace, Scene, vars));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlog(1, "ERROR: Invalid event name supplied.");\n\t\t\t}\n\t\t\treturn Scene;\n\t\t};\n\n\t\t// set event listeners\n\t\tScene.on("change.internal", function (e) {\n\t\t\tif (e.what !== "loglevel" && e.what !== "tweenChanges") { // no need for a scene update scene with these options...\n\t\t\t\tif (e.what === "triggerElement") {\n\t\t\t\t\tupdateTriggerElementPosition();\n\t\t\t\t} else if (e.what === "reverse") { // the only property left that may have an impact on the current scene state. Everything else is handled by the shift event.\n\t\t\t\t\tScene.update();\n\t\t\t\t}\n\t\t\t}\n\t\t}).on("shift.internal", function (e) {\n\t\t\tupdateScrollOffset();\n\t\t\tScene.update(); // update scene to reflect new position\n\t\t});\n\n\t\t/**\n\t\t * Send a debug message to the console.\n\t\t * @private\n\t\t * but provided publicly with _log for plugins\n\t\t *\n\t\t * @param {number} loglevel - The loglevel required to initiate output for the message.\n\t\t * @param {...mixed} output - One or more variables that should be passed to the console.\n\t\t */\n\t\tvar log = this._log = function (loglevel, output) {\n\t\t\tif (_options.loglevel >= loglevel) {\n\t\t\t\tArray.prototype.splice.call(arguments, 1, 0, "(" + NAMESPACE + ") ->");\n\t\t\t\t_util.log.apply(window, arguments);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Add the scene to a controller.  \n\t\t * This is the equivalent to `Controller.addScene(scene)`.\n\t\t * @method ScrollMagic.Scene#addTo\n\t\t *\n\t\t * @example\n\t\t * // add a scene to a ScrollMagic Controller\n\t\t * scene.addTo(controller);\n\t\t *\n\t\t * @param {ScrollMagic.Controller} controller - The controller to which the scene should be added.\n\t\t * @returns {Scene} Parent object for chaining.\n\t\t */\n\t\tthis.addTo = function (controller) {\n\t\t\tif (!(controller instanceof ScrollMagic.Controller)) {\n\t\t\t\tlog(1, "ERROR: supplied argument of \'addTo()\' is not a valid ScrollMagic Controller");\n\t\t\t} else if (_controller != controller) {\n\t\t\t\t// new controller\n\t\t\t\tif (_controller) { // was associated to a different controller before, so remove it...\n\t\t\t\t\t_controller.removeScene(Scene);\n\t\t\t\t}\n\t\t\t\t_controller = controller;\n\t\t\t\tvalidateOption();\n\t\t\t\tupdateDuration(true);\n\t\t\t\tupdateTriggerElementPosition(true);\n\t\t\t\tupdateScrollOffset();\n\t\t\t\t_controller.info("container").addEventListener(\'resize\', onContainerResize);\n\t\t\t\tcontroller.addScene(Scene);\n\t\t\t\tScene.trigger("add", {\n\t\t\t\t\tcontroller: _controller\n\t\t\t\t});\n\t\t\t\tlog(3, "added " + NAMESPACE + " to controller");\n\t\t\t\tScene.update();\n\t\t\t}\n\t\t\treturn Scene;\n\t\t};\n\n\t\t/**\n\t\t * **Get** or **Set** the current enabled state of the scene.  \n\t\t * This can be used to disable this scene without removing or destroying it.\n\t\t * @method ScrollMagic.Scene#enabled\n\t\t *\n\t\t * @example\n\t\t * // get the current value\n\t\t * var enabled = scene.enabled();\n\t\t *\n\t\t * // disable the scene\n\t\t * scene.enabled(false);\n\t\t *\n\t\t * @param {boolean} [newState] - The new enabled state of the scene `true` or `false`.\n\t\t * @returns {(boolean|Scene)} Current enabled state or parent object for chaining.\n\t\t */\n\t\tthis.enabled = function (newState) {\n\t\t\tif (!arguments.length) { // get\n\t\t\t\treturn _enabled;\n\t\t\t} else if (_enabled != newState) { // set\n\t\t\t\t_enabled = !! newState;\n\t\t\t\tScene.update(true);\n\t\t\t}\n\t\t\treturn Scene;\n\t\t};\n\n\t\t/**\n\t\t * Remove the scene from the controller.  \n\t\t * This is the equivalent to `Controller.removeScene(scene)`.\n\t\t * The scene will not be updated anymore until you readd it to a controller.\n\t\t * To remove the pin or the tween you need to call removeTween() or removePin() respectively.\n\t\t * @method ScrollMagic.Scene#remove\n\t\t * @example\n\t\t * // remove the scene from its controller\n\t\t * scene.remove();\n\t\t *\n\t\t * @returns {Scene} Parent object for chaining.\n\t\t */\n\t\tthis.remove = function () {\n\t\t\tif (_controller) {\n\t\t\t\t_controller.info("container").removeEventListener(\'resize\', onContainerResize);\n\t\t\t\tvar tmpParent = _controller;\n\t\t\t\t_controller = undefined;\n\t\t\t\ttmpParent.removeScene(Scene);\n\t\t\t\tScene.trigger("remove");\n\t\t\t\tlog(3, "removed " + NAMESPACE + " from controller");\n\t\t\t}\n\t\t\treturn Scene;\n\t\t};\n\n\t\t/**\n\t\t * Destroy the scene and everything.\n\t\t * @method ScrollMagic.Scene#destroy\n\t\t * @example\n\t\t * // destroy the scene without resetting the pin and tween to their initial positions\n\t\t * scene = scene.destroy();\n\t\t *\n\t\t * // destroy the scene and reset the pin and tween\n\t\t * scene = scene.destroy(true);\n\t\t *\n\t\t * @param {boolean} [reset=false] - If `true` the pin and tween (if existent) will be reset.\n\t\t * @returns {null} Null to unset handler variables.\n\t\t */\n\t\tthis.destroy = function (reset) {\n\t\t\tScene.trigger("destroy", {\n\t\t\t\treset: reset\n\t\t\t});\n\t\t\tScene.remove();\n\t\t\tScene.off("*.*");\n\t\t\tlog(3, "destroyed " + NAMESPACE + " (reset: " + (reset ? "true" : "false") + ")");\n\t\t\treturn null;\n\t\t};\n\n\n\t\t/**\n\t\t * Updates the Scene to reflect the current state.  \n\t\t * This is the equivalent to `Controller.updateScene(scene, immediately)`.  \n\t\t * The update method calculates the scene\'s start and end position (based on the trigger element, trigger hook, duration and offset) and checks it against the current scroll position of the container.  \n\t\t * It then updates the current scene state accordingly (or does nothing, if the state is already correct) – Pins will be set to their correct position and tweens will be updated to their correct progress.\n\t\t * This means an update doesn\'t necessarily result in a progress change. The `progress` event will be fired if the progress has indeed changed between this update and the last.  \n\t\t * _**NOTE:** This method gets called constantly whenever ScrollMagic detects a change. The only application for you is if you change something outside of the realm of ScrollMagic, like moving the trigger or changing tween parameters._\n\t\t * @method ScrollMagic.Scene#update\n\t\t * @example\n\t\t * // update the scene on next tick\n\t\t * scene.update();\n\t\t *\n\t\t * // update the scene immediately\n\t\t * scene.update(true);\n\t\t *\n\t\t * @fires Scene.update\n\t\t *\n\t\t * @param {boolean} [immediately=false] - If `true` the update will be instant, if `false` it will wait until next update cycle (better performance).\n\t\t * @returns {Scene} Parent object for chaining.\n\t\t */\n\t\tthis.update = function (immediately) {\n\t\t\tif (_controller) {\n\t\t\t\tif (immediately) {\n\t\t\t\t\tif (_controller.enabled() && _enabled) {\n\t\t\t\t\t\tvar\n\t\t\t\t\t\tscrollPos = _controller.info("scrollPos"),\n\t\t\t\t\t\t\tnewProgress;\n\n\t\t\t\t\t\tif (_options.duration > 0) {\n\t\t\t\t\t\t\tnewProgress = (scrollPos - _scrollOffset.start) / (_scrollOffset.end - _scrollOffset.start);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewProgress = scrollPos >= _scrollOffset.start ? 1 : 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tScene.trigger("update", {\n\t\t\t\t\t\t\tstartPos: _scrollOffset.start,\n\t\t\t\t\t\t\tendPos: _scrollOffset.end,\n\t\t\t\t\t\t\tscrollPos: scrollPos\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tScene.progress(newProgress);\n\t\t\t\t\t} else if (_pin && _state === SCENE_STATE_DURING) {\n\t\t\t\t\t\tupdatePinState(true); // unpin in position\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t_controller.updateScene(Scene, false);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn Scene;\n\t\t};\n\n\t\t/**\n\t\t * Updates dynamic scene variables like the trigger element position or the duration.\n\t\t * This method is automatically called in regular intervals from the controller. See {@link ScrollMagic.Controller} option `refreshInterval`.\n\t\t * \n\t\t * You can call it to minimize lag, for example when you intentionally change the position of the triggerElement.\n\t\t * If you don\'t it will simply be updated in the next refresh interval of the container, which is usually sufficient.\n\t\t *\n\t\t * @method ScrollMagic.Scene#refresh\n\t\t * @since 1.1.0\n\t\t * @example\n\t\t * scene = new ScrollMagic.Scene({triggerElement: "#trigger"});\n\t\t * \n\t\t * // change the position of the trigger\n\t\t * $("#trigger").css("top", 500);\n\t\t * // immediately let the scene know of this change\n\t\t * scene.refresh();\n\t\t *\n\t\t * @fires {@link Scene.shift}, if the trigger element position or the duration changed\n\t\t * @fires {@link Scene.change}, if the duration changed\n\t\t *\n\t\t * @returns {Scene} Parent object for chaining.\n\t\t */\n\t\tthis.refresh = function () {\n\t\t\tupdateDuration();\n\t\t\tupdateTriggerElementPosition();\n\t\t\t// update trigger element position\n\t\t\treturn Scene;\n\t\t};\n\n\t\t/**\n\t\t * **Get** or **Set** the scene\'s progress.  \n\t\t * Usually it shouldn\'t be necessary to use this as a setter, as it is set automatically by scene.update().  \n\t\t * The order in which the events are fired depends on the duration of the scene:\n\t\t *  1. Scenes with `duration == 0`:  \n\t\t *  Scenes that have no duration by definition have no ending. Thus the `end` event will never be fired.  \n\t\t *  When the trigger position of the scene is passed the events are always fired in this order:  \n\t\t *  `enter`, `start`, `progress` when scrolling forward  \n\t\t *  and  \n\t\t *  `progress`, `start`, `leave` when scrolling in reverse\n\t\t *  2. Scenes with `duration > 0`:  \n\t\t *  Scenes with a set duration have a defined start and end point.  \n\t\t *  When scrolling past the start position of the scene it will fire these events in this order:  \n\t\t *  `enter`, `start`, `progress`  \n\t\t *  When continuing to scroll and passing the end point it will fire these events:  \n\t\t *  `progress`, `end`, `leave`  \n\t\t *  When reversing through the end point these events are fired:  \n\t\t *  `enter`, `end`, `progress`  \n\t\t *  And when continuing to scroll past the start position in reverse it will fire:  \n\t\t *  `progress`, `start`, `leave`  \n\t\t *  In between start and end the `progress` event will be called constantly, whenever the progress changes.\n\t\t * \n\t\t * In short:  \n\t\t * `enter` events will always trigger **before** the progress update and `leave` envents will trigger **after** the progress update.  \n\t\t * `start` and `end` will always trigger at their respective position.\n\t\t * \n\t\t * Please review the event descriptions for details on the events and the event object that is passed to the callback.\n\t\t * \n\t\t * @method ScrollMagic.Scene#progress\n\t\t * @example\n\t\t * // get the current scene progress\n\t\t * var progress = scene.progress();\n\t\t *\n\t\t * // set new scene progress\n\t\t * scene.progress(0.3);\n\t\t *\n\t\t * @fires {@link Scene.enter}, when used as setter\n\t\t * @fires {@link Scene.start}, when used as setter\n\t\t * @fires {@link Scene.progress}, when used as setter\n\t\t * @fires {@link Scene.end}, when used as setter\n\t\t * @fires {@link Scene.leave}, when used as setter\n\t\t *\n\t\t * @param {number} [progress] - The new progress value of the scene `[0-1]`.\n\t\t * @returns {number} `get` -  Current scene progress.\n\t\t * @returns {Scene} `set` -  Parent object for chaining.\n\t\t */\n\t\tthis.progress = function (progress) {\n\t\t\tif (!arguments.length) { // get\n\t\t\t\treturn _progress;\n\t\t\t} else { // set\n\t\t\t\tvar\n\t\t\t\tdoUpdate = false,\n\t\t\t\t\toldState = _state,\n\t\t\t\t\tscrollDirection = _controller ? _controller.info("scrollDirection") : \'PAUSED\',\n\t\t\t\t\treverseOrForward = _options.reverse || progress >= _progress;\n\t\t\t\tif (_options.duration === 0) {\n\t\t\t\t\t// zero duration scenes\n\t\t\t\t\tdoUpdate = _progress != progress;\n\t\t\t\t\t_progress = progress < 1 && reverseOrForward ? 0 : 1;\n\t\t\t\t\t_state = _progress === 0 ? SCENE_STATE_BEFORE : SCENE_STATE_DURING;\n\t\t\t\t} else {\n\t\t\t\t\t// scenes with start and end\n\t\t\t\t\tif (progress < 0 && _state !== SCENE_STATE_BEFORE && reverseOrForward) {\n\t\t\t\t\t\t// go back to initial state\n\t\t\t\t\t\t_progress = 0;\n\t\t\t\t\t\t_state = SCENE_STATE_BEFORE;\n\t\t\t\t\t\tdoUpdate = true;\n\t\t\t\t\t} else if (progress >= 0 && progress < 1 && reverseOrForward) {\n\t\t\t\t\t\t_progress = progress;\n\t\t\t\t\t\t_state = SCENE_STATE_DURING;\n\t\t\t\t\t\tdoUpdate = true;\n\t\t\t\t\t} else if (progress >= 1 && _state !== SCENE_STATE_AFTER) {\n\t\t\t\t\t\t_progress = 1;\n\t\t\t\t\t\t_state = SCENE_STATE_AFTER;\n\t\t\t\t\t\tdoUpdate = true;\n\t\t\t\t\t} else if (_state === SCENE_STATE_DURING && !reverseOrForward) {\n\t\t\t\t\t\tupdatePinState(); // in case we scrolled backwards mid-scene and reverse is disabled => update the pin position, so it doesn\'t move back as well.\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (doUpdate) {\n\t\t\t\t\t// fire events\n\t\t\t\t\tvar\n\t\t\t\t\teventVars = {\n\t\t\t\t\t\tprogress: _progress,\n\t\t\t\t\t\tstate: _state,\n\t\t\t\t\t\tscrollDirection: scrollDirection\n\t\t\t\t\t},\n\t\t\t\t\t\tstateChanged = _state != oldState;\n\n\t\t\t\t\tvar trigger = function (eventName) { // tmp helper to simplify code\n\t\t\t\t\t\tScene.trigger(eventName, eventVars);\n\t\t\t\t\t};\n\n\t\t\t\t\tif (stateChanged) { // enter events\n\t\t\t\t\t\tif (oldState !== SCENE_STATE_DURING) {\n\t\t\t\t\t\t\ttrigger("enter");\n\t\t\t\t\t\t\ttrigger(oldState === SCENE_STATE_BEFORE ? "start" : "end");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ttrigger("progress");\n\t\t\t\t\tif (stateChanged) { // leave events\n\t\t\t\t\t\tif (_state !== SCENE_STATE_DURING) {\n\t\t\t\t\t\t\ttrigger(_state === SCENE_STATE_BEFORE ? "start" : "end");\n\t\t\t\t\t\t\ttrigger("leave");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn Scene;\n\t\t\t}\n\t\t};\n\n\n\t\t/**\n\t\t * Update the start and end scrollOffset of the container.\n\t\t * The positions reflect what the controller\'s scroll position will be at the start and end respectively.\n\t\t * Is called, when:\n\t\t *   - Scene event "change" is called with: offset, triggerHook, duration \n\t\t *   - scroll container event "resize" is called\n\t\t *   - the position of the triggerElement changes\n\t\t *   - the controller changes -> addTo()\n\t\t * @private\n\t\t */\n\t\tvar updateScrollOffset = function () {\n\t\t\t_scrollOffset = {\n\t\t\t\tstart: _triggerPos + _options.offset\n\t\t\t};\n\t\t\tif (_controller && _options.triggerElement) {\n\t\t\t\t// take away triggerHook portion to get relative to top\n\t\t\t\t_scrollOffset.start -= _controller.info("size") * _options.triggerHook;\n\t\t\t}\n\t\t\t_scrollOffset.end = _scrollOffset.start + _options.duration;\n\t\t};\n\n\t\t/**\n\t\t * Updates the duration if set to a dynamic function.\n\t\t * This method is called when the scene is added to a controller and in regular intervals from the controller through scene.refresh().\n\t\t * \n\t\t * @fires {@link Scene.change}, if the duration changed\n\t\t * @fires {@link Scene.shift}, if the duration changed\n\t\t *\n\t\t * @param {boolean} [suppressEvents=false] - If true the shift event will be suppressed.\n\t\t * @private\n\t\t */\n\t\tvar updateDuration = function (suppressEvents) {\n\t\t\t// update duration\n\t\t\tif (_durationUpdateMethod) {\n\t\t\t\tvar varname = "duration";\n\t\t\t\tif (changeOption(varname, _durationUpdateMethod.call(Scene)) && !suppressEvents) { // set\n\t\t\t\t\tScene.trigger("change", {\n\t\t\t\t\t\twhat: varname,\n\t\t\t\t\t\tnewval: _options[varname]\n\t\t\t\t\t});\n\t\t\t\t\tScene.trigger("shift", {\n\t\t\t\t\t\treason: varname\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Updates the position of the triggerElement, if present.\n\t\t * This method is called ...\n\t\t *  - ... when the triggerElement is changed\n\t\t *  - ... when the scene is added to a (new) controller\n\t\t *  - ... in regular intervals from the controller through scene.refresh().\n\t\t * \n\t\t * @fires {@link Scene.shift}, if the position changed\n\t\t *\n\t\t * @param {boolean} [suppressEvents=false] - If true the shift event will be suppressed.\n\t\t * @private\n\t\t */\n\t\tvar updateTriggerElementPosition = function (suppressEvents) {\n\t\t\tvar\n\t\t\telementPos = 0,\n\t\t\t\ttelem = _options.triggerElement;\n\t\t\tif (_controller && telem) {\n\t\t\t\tvar\n\t\t\t\tcontrollerInfo = _controller.info(),\n\t\t\t\t\tcontainerOffset = _util.get.offset(controllerInfo.container),\n\t\t\t\t\t// container position is needed because element offset is returned in relation to document, not in relation to container.\n\t\t\t\t\tparam = controllerInfo.vertical ? "top" : "left"; // which param is of interest ?\n\t\t\t\t// if parent is spacer, use spacer position instead so correct start position is returned for pinned elements.\n\t\t\t\twhile (telem.parentNode.hasAttribute(PIN_SPACER_ATTRIBUTE)) {\n\t\t\t\t\ttelem = telem.parentNode;\n\t\t\t\t}\n\n\t\t\t\tvar elementOffset = _util.get.offset(telem);\n\n\t\t\t\tif (!controllerInfo.isDocument) { // container is not the document root, so substract scroll Position to get correct trigger element position relative to scrollcontent\n\t\t\t\t\tcontainerOffset[param] -= _controller.scrollPos();\n\t\t\t\t}\n\n\t\t\t\telementPos = elementOffset[param] - containerOffset[param];\n\t\t\t}\n\t\t\tvar changed = elementPos != _triggerPos;\n\t\t\t_triggerPos = elementPos;\n\t\t\tif (changed && !suppressEvents) {\n\t\t\t\tScene.trigger("shift", {\n\t\t\t\t\treason: "triggerElementPosition"\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Trigger a shift event, when the container is resized and the triggerHook is > 1.\n\t\t * @private\n\t\t */\n\t\tvar onContainerResize = function (e) {\n\t\t\tif (_options.triggerHook > 0) {\n\t\t\t\tScene.trigger("shift", {\n\t\t\t\t\treason: "containerResize"\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tvar _validate = _util.extend(SCENE_OPTIONS.validate, {\n\t\t\t// validation for duration handled internally for reference to private var _durationMethod\n\t\t\tduration: function (val) {\n\t\t\t\tif (_util.type.String(val) && val.match(/^(\\.|\\d)*\\d+%$/)) {\n\t\t\t\t\t// percentage value\n\t\t\t\t\tvar perc = parseFloat(val) / 100;\n\t\t\t\t\tval = function () {\n\t\t\t\t\t\treturn _controller ? _controller.info("size") * perc : 0;\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (_util.type.Function(val)) {\n\t\t\t\t\t// function\n\t\t\t\t\t_durationUpdateMethod = val;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tval = parseFloat(_durationUpdateMethod());\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tval = -1; // will cause error below\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// val has to be float\n\t\t\t\tval = parseFloat(val);\n\t\t\t\tif (!_util.type.Number(val) || val < 0) {\n\t\t\t\t\tif (_durationUpdateMethod) {\n\t\t\t\t\t\t_durationUpdateMethod = undefined;\n\t\t\t\t\t\tthrow ["Invalid return value of supplied function for option \\"duration\\":", val];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow ["Invalid value for option \\"duration\\":", val];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn val;\n\t\t\t}\n\t\t});\n\n\t\t/**\n\t\t * Checks the validity of a specific or all options and reset to default if neccessary.\n\t\t * @private\n\t\t */\n\t\tvar validateOption = function (check) {\n\t\t\tcheck = arguments.length ? [check] : Object.keys(_validate);\n\t\t\tcheck.forEach(function (optionName, key) {\n\t\t\t\tvar value;\n\t\t\t\tif (_validate[optionName]) { // there is a validation method for this option\n\t\t\t\t\ttry { // validate value\n\t\t\t\t\t\tvalue = _validate[optionName](_options[optionName]);\n\t\t\t\t\t} catch (e) { // validation failed -> reset to default\n\t\t\t\t\t\tvalue = DEFAULT_OPTIONS[optionName];\n\t\t\t\t\t\tvar logMSG = _util.type.String(e) ? [e] : e;\n\t\t\t\t\t\tif (_util.type.Array(logMSG)) {\n\t\t\t\t\t\t\tlogMSG[0] = "ERROR: " + logMSG[0];\n\t\t\t\t\t\t\tlogMSG.unshift(1); // loglevel 1 for error msg\n\t\t\t\t\t\t\tlog.apply(this, logMSG);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlog(1, "ERROR: Problem executing validation callback for option \'" + optionName + "\':", e.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t} finally {\n\t\t\t\t\t\t_options[optionName] = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Helper used by the setter/getters for scene options\n\t\t * @private\n\t\t */\n\t\tvar changeOption = function (varname, newval) {\n\t\t\tvar\n\t\t\tchanged = false,\n\t\t\t\toldval = _options[varname];\n\t\t\tif (_options[varname] != newval) {\n\t\t\t\t_options[varname] = newval;\n\t\t\t\tvalidateOption(varname); // resets to default if necessary\n\t\t\t\tchanged = oldval != _options[varname];\n\t\t\t}\n\t\t\treturn changed;\n\t\t};\n\n\t\t// generate getters/setters for all options\n\t\tvar addSceneOption = function (optionName) {\n\t\t\tif (!Scene[optionName]) {\n\t\t\t\tScene[optionName] = function (newVal) {\n\t\t\t\t\tif (!arguments.length) { // get\n\t\t\t\t\t\treturn _options[optionName];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (optionName === "duration") { // new duration is set, so any previously set function must be unset\n\t\t\t\t\t\t\t_durationUpdateMethod = undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (changeOption(optionName, newVal)) { // set\n\t\t\t\t\t\t\tScene.trigger("change", {\n\t\t\t\t\t\t\t\twhat: optionName,\n\t\t\t\t\t\t\t\tnewval: _options[optionName]\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (SCENE_OPTIONS.shifts.indexOf(optionName) > -1) {\n\t\t\t\t\t\t\t\tScene.trigger("shift", {\n\t\t\t\t\t\t\t\t\treason: optionName\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn Scene;\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * **Get** or **Set** the duration option value.\n\t\t * As a setter it also accepts a function returning a numeric value.  \n\t\t * This is particularly useful for responsive setups.\n\t\t *\n\t\t * The duration is updated using the supplied function every time `Scene.refresh()` is called, which happens periodically from the controller (see ScrollMagic.Controller option `refreshInterval`).  \n\t\t * _**NOTE:** Be aware that it\'s an easy way to kill performance, if you supply a function that has high CPU demand.  \n\t\t * Even for size and position calculations it is recommended to use a variable to cache the value. (see example)  \n\t\t * This counts double if you use the same function for multiple scenes._\n\t\t *\n\t\t * @method ScrollMagic.Scene#duration\n\t\t * @example\n\t\t * // get the current duration value\n\t\t * var duration = scene.duration();\n\t\t *\n\t\t * // set a new duration\n\t\t * scene.duration(300);\n\t\t *\n\t\t * // use a function to automatically adjust the duration to the window height.\n\t\t * var durationValueCache;\n\t\t * function getDuration () {\n\t\t *   return durationValueCache;\n\t\t * }\n\t\t * function updateDuration (e) {\n\t\t *   durationValueCache = window.innerHeight;\n\t\t * }\n\t\t * $(window).on("resize", updateDuration); // update the duration when the window size changes\n\t\t * $(window).triggerHandler("resize"); // set to initial value\n\t\t * scene.duration(getDuration); // supply duration method\n\t\t *\n\t\t * @fires {@link Scene.change}, when used as setter\n\t\t * @fires {@link Scene.shift}, when used as setter\n\t\t * @param {(number|function)} [newDuration] - The new duration of the scene.\n\t\t * @returns {number} `get` -  Current scene duration.\n\t\t * @returns {Scene} `set` -  Parent object for chaining.\n\t\t */\n\n\t\t/**\n\t\t * **Get** or **Set** the offset option value.\n\t\t * @method ScrollMagic.Scene#offset\n\t\t * @example\n\t\t * // get the current offset\n\t\t * var offset = scene.offset();\n\t\t *\n\t\t * // set a new offset\n\t\t * scene.offset(100);\n\t\t *\n\t\t * @fires {@link Scene.change}, when used as setter\n\t\t * @fires {@link Scene.shift}, when used as setter\n\t\t * @param {number} [newOffset] - The new offset of the scene.\n\t\t * @returns {number} `get` -  Current scene offset.\n\t\t * @returns {Scene} `set` -  Parent object for chaining.\n\t\t */\n\n\t\t/**\n\t\t * **Get** or **Set** the triggerElement option value.\n\t\t * Does **not** fire `Scene.shift`, because changing the trigger Element doesn\'t necessarily mean the start position changes. This will be determined in `Scene.refresh()`, which is automatically triggered.\n\t\t * @method ScrollMagic.Scene#triggerElement\n\t\t * @example\n\t\t * // get the current triggerElement\n\t\t * var triggerElement = scene.triggerElement();\n\t\t *\n\t\t * // set a new triggerElement using a selector\n\t\t * scene.triggerElement("#trigger");\n\t\t * // set a new triggerElement using a DOM object\n\t\t * scene.triggerElement(document.getElementById("trigger"));\n\t\t *\n\t\t * @fires {@link Scene.change}, when used as setter\n\t\t * @param {(string|object)} [newTriggerElement] - The new trigger element for the scene.\n\t\t * @returns {(string|object)} `get` -  Current triggerElement.\n\t\t * @returns {Scene} `set` -  Parent object for chaining.\n\t\t */\n\n\t\t/**\n\t\t * **Get** or **Set** the triggerHook option value.\n\t\t * @method ScrollMagic.Scene#triggerHook\n\t\t * @example\n\t\t * // get the current triggerHook value\n\t\t * var triggerHook = scene.triggerHook();\n\t\t *\n\t\t * // set a new triggerHook using a string\n\t\t * scene.triggerHook("onLeave");\n\t\t * // set a new triggerHook using a number\n\t\t * scene.triggerHook(0.7);\n\t\t *\n\t\t * @fires {@link Scene.change}, when used as setter\n\t\t * @fires {@link Scene.shift}, when used as setter\n\t\t * @param {(number|string)} [newTriggerHook] - The new triggerHook of the scene. See {@link Scene} parameter description for value options.\n\t\t * @returns {number} `get` -  Current triggerHook (ALWAYS numerical).\n\t\t * @returns {Scene} `set` -  Parent object for chaining.\n\t\t */\n\n\t\t/**\n\t\t * **Get** or **Set** the reverse option value.\n\t\t * @method ScrollMagic.Scene#reverse\n\t\t * @example\n\t\t * // get the current reverse option\n\t\t * var reverse = scene.reverse();\n\t\t *\n\t\t * // set new reverse option\n\t\t * scene.reverse(false);\n\t\t *\n\t\t * @fires {@link Scene.change}, when used as setter\n\t\t * @param {boolean} [newReverse] - The new reverse setting of the scene.\n\t\t * @returns {boolean} `get` -  Current reverse option value.\n\t\t * @returns {Scene} `set` -  Parent object for chaining.\n\t\t */\n\n\t\t/**\n\t\t * **Get** or **Set** the loglevel option value.\n\t\t * @method ScrollMagic.Scene#loglevel\n\t\t * @example\n\t\t * // get the current loglevel\n\t\t * var loglevel = scene.loglevel();\n\t\t *\n\t\t * // set new loglevel\n\t\t * scene.loglevel(3);\n\t\t *\n\t\t * @fires {@link Scene.change}, when used as setter\n\t\t * @param {number} [newLoglevel] - The new loglevel setting of the scene. `[0-3]`\n\t\t * @returns {number} `get` -  Current loglevel.\n\t\t * @returns {Scene} `set` -  Parent object for chaining.\n\t\t */\n\n\t\t/**\n\t\t * **Get** the associated controller.\n\t\t * @method ScrollMagic.Scene#controller\n\t\t * @example\n\t\t * // get the controller of a scene\n\t\t * var controller = scene.controller();\n\t\t *\n\t\t * @returns {ScrollMagic.Controller} Parent controller or `undefined`\n\t\t */\n\t\tthis.controller = function () {\n\t\t\treturn _controller;\n\t\t};\n\n\t\t/**\n\t\t * **Get** the current state.\n\t\t * @method ScrollMagic.Scene#state\n\t\t * @example\n\t\t * // get the current state\n\t\t * var state = scene.state();\n\t\t *\n\t\t * @returns {string} `"BEFORE"`, `"DURING"` or `"AFTER"`\n\t\t */\n\t\tthis.state = function () {\n\t\t\treturn _state;\n\t\t};\n\n\t\t/**\n\t\t * **Get** the current scroll offset for the start of the scene.  \n\t\t * Mind, that the scrollOffset is related to the size of the container, if `triggerHook` is bigger than `0` (or `"onLeave"`).  \n\t\t * This means, that resizing the container or changing the `triggerHook` will influence the scene\'s start offset.\n\t\t * @method ScrollMagic.Scene#scrollOffset\n\t\t * @example\n\t\t * // get the current scroll offset for the start and end of the scene.\n\t\t * var start = scene.scrollOffset();\n\t\t * var end = scene.scrollOffset() + scene.duration();\n\t\t * console.log("the scene starts at", start, "and ends at", end);\n\t\t *\n\t\t * @returns {number} The scroll offset (of the container) at which the scene will trigger. Y value for vertical and X value for horizontal scrolls.\n\t\t */\n\t\tthis.scrollOffset = function () {\n\t\t\treturn _scrollOffset.start;\n\t\t};\n\n\t\t/**\n\t\t * **Get** the trigger position of the scene (including the value of the `offset` option).  \n\t\t * @method ScrollMagic.Scene#triggerPosition\n\t\t * @example\n\t\t * // get the scene\'s trigger position\n\t\t * var triggerPosition = scene.triggerPosition();\n\t\t *\n\t\t * @returns {number} Start position of the scene. Top position value for vertical and left position value for horizontal scrolls.\n\t\t */\n\t\tthis.triggerPosition = function () {\n\t\t\tvar pos = _options.offset; // the offset is the basis\n\t\t\tif (_controller) {\n\t\t\t\t// get the trigger position\n\t\t\t\tif (_options.triggerElement) {\n\t\t\t\t\t// Element as trigger\n\t\t\t\t\tpos += _triggerPos;\n\t\t\t\t} else {\n\t\t\t\t\t// return the height of the triggerHook to start at the beginning\n\t\t\t\t\tpos += _controller.info("size") * Scene.triggerHook();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn pos;\n\t\t};\n\n\t\tvar\n\t\t_pin, _pinOptions;\n\n\t\tScene.on("shift.internal", function (e) {\n\t\t\tvar durationChanged = e.reason === "duration";\n\t\t\tif ((_state === SCENE_STATE_AFTER && durationChanged) || (_state === SCENE_STATE_DURING && _options.duration === 0)) {\n\t\t\t\t// if [duration changed after a scene (inside scene progress updates pin position)] or [duration is 0, we are in pin phase and some other value changed].\n\t\t\t\tupdatePinState();\n\t\t\t}\n\t\t\tif (durationChanged) {\n\t\t\t\tupdatePinDimensions();\n\t\t\t}\n\t\t}).on("progress.internal", function (e) {\n\t\t\tupdatePinState();\n\t\t}).on("add.internal", function (e) {\n\t\t\tupdatePinDimensions();\n\t\t}).on("destroy.internal", function (e) {\n\t\t\tScene.removePin(e.reset);\n\t\t});\n\t\t/**\n\t\t * Update the pin state.\n\t\t * @private\n\t\t */\n\t\tvar updatePinState = function (forceUnpin) {\n\t\t\tif (_pin && _controller) {\n\t\t\t\tvar\n\t\t\t\tcontainerInfo = _controller.info(),\n\t\t\t\t\tpinTarget = _pinOptions.spacer.firstChild; // may be pin element or another spacer, if cascading pins\n\t\t\t\tif (!forceUnpin && _state === SCENE_STATE_DURING) { // during scene or if duration is 0 and we are past the trigger\n\t\t\t\t\t// pinned state\n\t\t\t\t\tif (_util.css(pinTarget, "position") != "fixed") {\n\t\t\t\t\t\t// change state before updating pin spacer (position changes due to fixed collapsing might occur.)\n\t\t\t\t\t\t_util.css(pinTarget, {\n\t\t\t\t\t\t\t"position": "fixed"\n\t\t\t\t\t\t});\n\t\t\t\t\t\t// update pin spacer\n\t\t\t\t\t\tupdatePinDimensions();\n\t\t\t\t\t}\n\n\t\t\t\t\tvar\n\t\t\t\t\tfixedPos = _util.get.offset(_pinOptions.spacer, true),\n\t\t\t\t\t\t// get viewport position of spacer\n\t\t\t\t\t\tscrollDistance = _options.reverse || _options.duration === 0 ? containerInfo.scrollPos - _scrollOffset.start // quicker\n\t\t\t\t\t\t: Math.round(_progress * _options.duration * 10) / 10; // if no reverse and during pin the position needs to be recalculated using the progress\n\t\t\t\t\t// add scrollDistance\n\t\t\t\t\tfixedPos[containerInfo.vertical ? "top" : "left"] += scrollDistance;\n\n\t\t\t\t\t// set new values\n\t\t\t\t\t_util.css(_pinOptions.spacer.firstChild, {\n\t\t\t\t\t\ttop: fixedPos.top,\n\t\t\t\t\t\tleft: fixedPos.left\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// unpinned state\n\t\t\t\t\tvar\n\t\t\t\t\tnewCSS = {\n\t\t\t\t\t\tposition: _pinOptions.inFlow ? "relative" : "absolute",\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\tleft: 0\n\t\t\t\t\t},\n\t\t\t\t\t\tchange = _util.css(pinTarget, "position") != newCSS.position;\n\n\t\t\t\t\tif (!_pinOptions.pushFollowers) {\n\t\t\t\t\t\tnewCSS[containerInfo.vertical ? "top" : "left"] = _options.duration * _progress;\n\t\t\t\t\t} else if (_options.duration > 0) { // only concerns scenes with duration\n\t\t\t\t\t\tif (_state === SCENE_STATE_AFTER && parseFloat(_util.css(_pinOptions.spacer, "padding-top")) === 0) {\n\t\t\t\t\t\t\tchange = true; // if in after state but havent updated spacer yet (jumped past pin)\n\t\t\t\t\t\t} else if (_state === SCENE_STATE_BEFORE && parseFloat(_util.css(_pinOptions.spacer, "padding-bottom")) === 0) { // before\n\t\t\t\t\t\t\tchange = true; // jumped past fixed state upward direction\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// set new values\n\t\t\t\t\t_util.css(pinTarget, newCSS);\n\t\t\t\t\tif (change) {\n\t\t\t\t\t\t// update pin spacer if state changed\n\t\t\t\t\t\tupdatePinDimensions();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Update the pin spacer and/or element size.\n\t\t * The size of the spacer needs to be updated whenever the duration of the scene changes, if it is to push down following elements.\n\t\t * @private\n\t\t */\n\t\tvar updatePinDimensions = function () {\n\t\t\tif (_pin && _controller && _pinOptions.inFlow) { // no spacerresize, if original position is absolute\n\t\t\t\tvar\n\t\t\t\tafter = (_state === SCENE_STATE_AFTER),\n\t\t\t\t\tbefore = (_state === SCENE_STATE_BEFORE),\n\t\t\t\t\tduring = (_state === SCENE_STATE_DURING),\n\t\t\t\t\tvertical = _controller.info("vertical"),\n\t\t\t\t\tpinTarget = _pinOptions.spacer.firstChild,\n\t\t\t\t\t// usually the pined element but can also be another spacer (cascaded pins)\n\t\t\t\t\tmarginCollapse = _util.isMarginCollapseType(_util.css(_pinOptions.spacer, "display")),\n\t\t\t\t\tcss = {};\n\n\t\t\t\t// set new size\n\t\t\t\t// if relsize: spacer -> pin | else: pin -> spacer\n\t\t\t\tif (_pinOptions.relSize.width || _pinOptions.relSize.autoFullWidth) {\n\t\t\t\t\tif (during) {\n\t\t\t\t\t\t_util.css(_pin, {\n\t\t\t\t\t\t\t"width": _util.get.width(_pinOptions.spacer)\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_util.css(_pin, {\n\t\t\t\t\t\t\t"width": "100%"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// minwidth is needed for cascaded pins.\n\t\t\t\t\tcss["min-width"] = _util.get.width(vertical ? _pin : pinTarget, true, true);\n\t\t\t\t\tcss.width = during ? css["min-width"] : "auto";\n\t\t\t\t}\n\t\t\t\tif (_pinOptions.relSize.height) {\n\t\t\t\t\tif (during) {\n\t\t\t\t\t\t// the only padding the spacer should ever include is the duration (if pushFollowers = true), so we need to substract that.\n\t\t\t\t\t\t_util.css(_pin, {\n\t\t\t\t\t\t\t"height": _util.get.height(_pinOptions.spacer) - (_pinOptions.pushFollowers ? _options.duration : 0)\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_util.css(_pin, {\n\t\t\t\t\t\t\t"height": "100%"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// margin is only included if it\'s a cascaded pin to resolve an IE9 bug\n\t\t\t\t\tcss["min-height"] = _util.get.height(vertical ? pinTarget : _pin, true, !marginCollapse); // needed for cascading pins\n\t\t\t\t\tcss.height = during ? css["min-height"] : "auto";\n\t\t\t\t}\n\n\t\t\t\t// add space for duration if pushFollowers is true\n\t\t\t\tif (_pinOptions.pushFollowers) {\n\t\t\t\t\tcss["padding" + (vertical ? "Top" : "Left")] = _options.duration * _progress;\n\t\t\t\t\tcss["padding" + (vertical ? "Bottom" : "Right")] = _options.duration * (1 - _progress);\n\t\t\t\t}\n\t\t\t\t_util.css(_pinOptions.spacer, css);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Updates the Pin state (in certain scenarios)\n\t\t * If the controller container is not the document and we are mid-pin-phase scrolling or resizing the main document can result to wrong pin positions.\n\t\t * So this function is called on resize and scroll of the document.\n\t\t * @private\n\t\t */\n\t\tvar updatePinInContainer = function () {\n\t\t\tif (_controller && _pin && _state === SCENE_STATE_DURING && !_controller.info("isDocument")) {\n\t\t\t\tupdatePinState();\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Updates the Pin spacer size state (in certain scenarios)\n\t\t * If container is resized during pin and relatively sized the size of the pin might need to be updated...\n\t\t * So this function is called on resize of the container.\n\t\t * @private\n\t\t */\n\t\tvar updateRelativePinSpacer = function () {\n\t\t\tif (_controller && _pin && // well, duh\n\t\t\t_state === SCENE_STATE_DURING && // element in pinned state?\n\t\t\t( // is width or height relatively sized, but not in relation to body? then we need to recalc.\n\t\t\t((_pinOptions.relSize.width || _pinOptions.relSize.autoFullWidth) && _util.get.width(window) != _util.get.width(_pinOptions.spacer.parentNode)) || (_pinOptions.relSize.height && _util.get.height(window) != _util.get.height(_pinOptions.spacer.parentNode)))) {\n\t\t\t\tupdatePinDimensions();\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Is called, when the mousewhel is used while over a pinned element inside a div container.\n\t\t * If the scene is in fixed state scroll events would be counted towards the body. This forwards the event to the scroll container.\n\t\t * @private\n\t\t */\n\t\tvar onMousewheelOverPin = function (e) {\n\t\t\tif (_controller && _pin && _state === SCENE_STATE_DURING && !_controller.info("isDocument")) { // in pin state\n\t\t\t\te.preventDefault();\n\t\t\t\t_controller._setScrollPos(_controller.info("scrollPos") - ((e.wheelDelta || e[_controller.info("vertical") ? "wheelDeltaY" : "wheelDeltaX"]) / 3 || -e.detail * 30));\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Pin an element for the duration of the tween.  \n\t\t * If the scene duration is 0 the element will only be unpinned, if the user scrolls back past the start position.  \n\t\t * Make sure only one pin is applied to an element at the same time.\n\t\t * An element can be pinned multiple times, but only successively.\n\t\t * _**NOTE:** The option `pushFollowers` has no effect, when the scene duration is 0._\n\t\t * @method ScrollMagic.Scene#setPin\n\t\t * @example\n\t\t * // pin element and push all following elements down by the amount of the pin duration.\n\t\t * scene.setPin("#pin");\n\t\t *\n\t\t * // pin element and keeping all following elements in their place. The pinned element will move past them.\n\t\t * scene.setPin("#pin", {pushFollowers: false});\n\t\t *\n\t\t * @param {(string|object)} element - A Selector targeting an element or a DOM object that is supposed to be pinned.\n\t\t * @param {object} [settings] - settings for the pin\n\t\t * @param {boolean} [settings.pushFollowers=true] - If `true` following elements will be "pushed" down for the duration of the pin, if `false` the pinned element will just scroll past them.  \n\t\t Ignored, when duration is `0`.\n\t\t * @param {string} [settings.spacerClass="scrollmagic-pin-spacer"] - Classname of the pin spacer element, which is used to replace the element.\n\t\t *\n\t\t * @returns {Scene} Parent object for chaining.\n\t\t */\n\t\tthis.setPin = function (element, settings) {\n\t\t\tvar\n\t\t\tdefaultSettings = {\n\t\t\t\tpushFollowers: true,\n\t\t\t\tspacerClass: "scrollmagic-pin-spacer"\n\t\t\t};\n\t\t\tsettings = _util.extend({}, defaultSettings, settings);\n\n\t\t\t// validate Element\n\t\t\telement = _util.get.elements(element)[0];\n\t\t\tif (!element) {\n\t\t\t\tlog(1, "ERROR calling method \'setPin()\': Invalid pin element supplied.");\n\t\t\t\treturn Scene; // cancel\n\t\t\t} else if (_util.css(element, "position") === "fixed") {\n\t\t\t\tlog(1, "ERROR calling method \'setPin()\': Pin does not work with elements that are positioned \'fixed\'.");\n\t\t\t\treturn Scene; // cancel\n\t\t\t}\n\n\t\t\tif (_pin) { // preexisting pin?\n\t\t\t\tif (_pin === element) {\n\t\t\t\t\t// same pin we already have -> do nothing\n\t\t\t\t\treturn Scene; // cancel\n\t\t\t\t} else {\n\t\t\t\t\t// kill old pin\n\t\t\t\t\tScene.removePin();\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t_pin = element;\n\n\t\t\tvar\n\t\t\tparentDisplay = _pin.parentNode.style.display,\n\t\t\t\tboundsParams = ["top", "left", "bottom", "right", "margin", "marginLeft", "marginRight", "marginTop", "marginBottom"];\n\n\t\t\t_pin.parentNode.style.display = \'none\'; // hack start to force css to return stylesheet values instead of calculated px values.\n\t\t\tvar\n\t\t\tinFlow = _util.css(_pin, "position") != "absolute",\n\t\t\t\tpinCSS = _util.css(_pin, boundsParams.concat(["display"])),\n\t\t\t\tsizeCSS = _util.css(_pin, ["width", "height"]);\n\t\t\t_pin.parentNode.style.display = parentDisplay; // hack end.\n\t\t\tif (!inFlow && settings.pushFollowers) {\n\t\t\t\tlog(2, "WARNING: If the pinned element is positioned absolutely pushFollowers will be disabled.");\n\t\t\t\tsettings.pushFollowers = false;\n\t\t\t}\n\t\t\twindow.setTimeout(function () { // wait until all finished, because with responsive duration it will only be set after scene is added to controller\n\t\t\t\tif (_pin && _options.duration === 0 && settings.pushFollowers) {\n\t\t\t\t\tlog(2, "WARNING: pushFollowers =", true, "has no effect, when scene duration is 0.");\n\t\t\t\t}\n\t\t\t}, 0);\n\n\t\t\t// create spacer and insert\n\t\t\tvar\n\t\t\tspacer = _pin.parentNode.insertBefore(document.createElement(\'div\'), _pin),\n\t\t\t\tspacerCSS = _util.extend(pinCSS, {\n\t\t\t\t\tposition: inFlow ? "relative" : "absolute",\n\t\t\t\t\tboxSizing: "content-box",\n\t\t\t\t\tmozBoxSizing: "content-box",\n\t\t\t\t\twebkitBoxSizing: "content-box"\n\t\t\t\t});\n\n\t\t\tif (!inFlow) { // copy size if positioned absolutely, to work for bottom/right positioned elements.\n\t\t\t\t_util.extend(spacerCSS, _util.css(_pin, ["width", "height"]));\n\t\t\t}\n\n\t\t\t_util.css(spacer, spacerCSS);\n\t\t\tspacer.setAttribute(PIN_SPACER_ATTRIBUTE, "");\n\t\t\t_util.addClass(spacer, settings.spacerClass);\n\n\t\t\t// set the pin Options\n\t\t\t_pinOptions = {\n\t\t\t\tspacer: spacer,\n\t\t\t\trelSize: { // save if size is defined using % values. if so, handle spacer resize differently...\n\t\t\t\t\twidth: sizeCSS.width.slice(-1) === "%",\n\t\t\t\t\theight: sizeCSS.height.slice(-1) === "%",\n\t\t\t\t\tautoFullWidth: sizeCSS.width === "auto" && inFlow && _util.isMarginCollapseType(pinCSS.display)\n\t\t\t\t},\n\t\t\t\tpushFollowers: settings.pushFollowers,\n\t\t\t\tinFlow: inFlow,\n\t\t\t\t// stores if the element takes up space in the document flow\n\t\t\t};\n\n\t\t\tif (!_pin.___origStyle) {\n\t\t\t\t_pin.___origStyle = {};\n\t\t\t\tvar\n\t\t\t\tpinInlineCSS = _pin.style,\n\t\t\t\t\tcopyStyles = boundsParams.concat(["width", "height", "position", "boxSizing", "mozBoxSizing", "webkitBoxSizing"]);\n\t\t\t\tcopyStyles.forEach(function (val) {\n\t\t\t\t\t_pin.___origStyle[val] = pinInlineCSS[val] || "";\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// if relative size, transfer it to spacer and make pin calculate it...\n\t\t\tif (_pinOptions.relSize.width) {\n\t\t\t\t_util.css(spacer, {\n\t\t\t\t\twidth: sizeCSS.width\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (_pinOptions.relSize.height) {\n\t\t\t\t_util.css(spacer, {\n\t\t\t\t\theight: sizeCSS.height\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// now place the pin element inside the spacer\t\n\t\t\tspacer.appendChild(_pin);\n\t\t\t// and set new css\n\t\t\t_util.css(_pin, {\n\t\t\t\tposition: inFlow ? "relative" : "absolute",\n\t\t\t\tmargin: "auto",\n\t\t\t\ttop: "auto",\n\t\t\t\tleft: "auto",\n\t\t\t\tbottom: "auto",\n\t\t\t\tright: "auto"\n\t\t\t});\n\n\t\t\tif (_pinOptions.relSize.width || _pinOptions.relSize.autoFullWidth) {\n\t\t\t\t_util.css(_pin, {\n\t\t\t\t\tboxSizing: "border-box",\n\t\t\t\t\tmozBoxSizing: "border-box",\n\t\t\t\t\twebkitBoxSizing: "border-box"\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// add listener to document to update pin position in case controller is not the document.\n\t\t\twindow.addEventListener(\'scroll\', updatePinInContainer);\n\t\t\twindow.addEventListener(\'resize\', updatePinInContainer);\n\t\t\twindow.addEventListener(\'resize\', updateRelativePinSpacer);\n\t\t\t// add mousewheel listener to catch scrolls over fixed elements\n\t\t\t_pin.addEventListener("mousewheel", onMousewheelOverPin);\n\t\t\t_pin.addEventListener("DOMMouseScroll", onMousewheelOverPin);\n\n\t\t\tlog(3, "added pin");\n\n\t\t\t// finally update the pin to init\n\t\t\tupdatePinState();\n\n\t\t\treturn Scene;\n\t\t};\n\n\t\t/**\n\t\t * Remove the pin from the scene.\n\t\t * @method ScrollMagic.Scene#removePin\n\t\t * @example\n\t\t * // remove the pin from the scene without resetting it (the spacer is not removed)\n\t\t * scene.removePin();\n\t\t *\n\t\t * // remove the pin from the scene and reset the pin element to its initial position (spacer is removed)\n\t\t * scene.removePin(true);\n\t\t *\n\t\t * @param {boolean} [reset=false] - If `false` the spacer will not be removed and the element\'s position will not be reset.\n\t\t * @returns {Scene} Parent object for chaining.\n\t\t */\n\t\tthis.removePin = function (reset) {\n\t\t\tif (_pin) {\n\t\t\t\tif (_state === SCENE_STATE_DURING) {\n\t\t\t\t\tupdatePinState(true); // force unpin at position\n\t\t\t\t}\n\t\t\t\tif (reset || !_controller) { // if there\'s no controller no progress was made anyway...\n\t\t\t\t\tvar pinTarget = _pinOptions.spacer.firstChild; // usually the pin element, but may be another spacer (cascaded pins)...\n\t\t\t\t\tif (pinTarget.hasAttribute(PIN_SPACER_ATTRIBUTE)) { // copy margins to child spacer\n\t\t\t\t\t\tvar\n\t\t\t\t\t\tstyle = _pinOptions.spacer.style,\n\t\t\t\t\t\t\tvalues = ["margin", "marginLeft", "marginRight", "marginTop", "marginBottom"];\n\t\t\t\t\t\tmargins = {};\n\t\t\t\t\t\tvalues.forEach(function (val) {\n\t\t\t\t\t\t\tmargins[val] = style[val] || "";\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_util.css(pinTarget, margins);\n\t\t\t\t\t}\n\t\t\t\t\t_pinOptions.spacer.parentNode.insertBefore(pinTarget, _pinOptions.spacer);\n\t\t\t\t\t_pinOptions.spacer.parentNode.removeChild(_pinOptions.spacer);\n\t\t\t\t\tif (!_pin.parentNode.hasAttribute(PIN_SPACER_ATTRIBUTE)) { // if it\'s the last pin for this element -> restore inline styles\n\t\t\t\t\t\t// TODO: only correctly set for first pin (when cascading) - how to fix?\n\t\t\t\t\t\t_util.css(_pin, _pin.___origStyle);\n\t\t\t\t\t\tdelete _pin.___origStyle;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\twindow.removeEventListener(\'scroll\', updatePinInContainer);\n\t\t\t\twindow.removeEventListener(\'resize\', updatePinInContainer);\n\t\t\t\twindow.removeEventListener(\'resize\', updateRelativePinSpacer);\n\t\t\t\t_pin.removeEventListener("mousewheel", onMousewheelOverPin);\n\t\t\t\t_pin.removeEventListener("DOMMouseScroll", onMousewheelOverPin);\n\t\t\t\t_pin = undefined;\n\t\t\t\tlog(3, "removed pin (reset: " + (reset ? "true" : "false") + ")");\n\t\t\t}\n\t\t\treturn Scene;\n\t\t};\n\n\n\t\tvar\n\t\t_cssClasses, _cssClassElems = [];\n\n\t\tScene.on("destroy.internal", function (e) {\n\t\t\tScene.removeClassToggle(e.reset);\n\t\t});\n\t\t/**\n\t\t * Define a css class modification while the scene is active.  \n\t\t * When the scene triggers the classes will be added to the supplied element and removed, when the scene is over.\n\t\t * If the scene duration is 0 the classes will only be removed if the user scrolls back past the start position.\n\t\t * @method ScrollMagic.Scene#setClassToggle\n\t\t * @example\n\t\t * // add the class \'myclass\' to the element with the id \'my-elem\' for the duration of the scene\n\t\t * scene.setClassToggle("#my-elem", "myclass");\n\t\t *\n\t\t * // add multiple classes to multiple elements defined by the selector \'.classChange\'\n\t\t * scene.setClassToggle(".classChange", "class1 class2 class3");\n\t\t *\n\t\t * @param {(string|object)} element - A Selector targeting one or more elements or a DOM object that is supposed to be modified.\n\t\t * @param {string} classes - One or more Classnames (separated by space) that should be added to the element during the scene.\n\t\t *\n\t\t * @returns {Scene} Parent object for chaining.\n\t\t */\n\t\tthis.setClassToggle = function (element, classes) {\n\t\t\tvar elems = _util.get.elements(element);\n\t\t\tif (elems.length === 0 || !_util.type.String(classes)) {\n\t\t\t\tlog(1, "ERROR calling method \'setClassToggle()\': Invalid " + (elems.length === 0 ? "element" : "classes") + " supplied.");\n\t\t\t\treturn Scene;\n\t\t\t}\n\t\t\tif (_cssClassElems.length > 0) {\n\t\t\t\t// remove old ones\n\t\t\t\tScene.removeClassToggle();\n\t\t\t}\n\t\t\t_cssClasses = classes;\n\t\t\t_cssClassElems = elems;\n\t\t\tScene.on("enter.internal_class leave.internal_class", function (e) {\n\t\t\t\tvar toggle = e.type === "enter" ? _util.addClass : _util.removeClass;\n\t\t\t\t_cssClassElems.forEach(function (elem, key) {\n\t\t\t\t\ttoggle(elem, _cssClasses);\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn Scene;\n\t\t};\n\n\t\t/**\n\t\t * Remove the class binding from the scene.\n\t\t * @method ScrollMagic.Scene#removeClassToggle\n\t\t * @example\n\t\t * // remove class binding from the scene without reset\n\t\t * scene.removeClassToggle();\n\t\t *\n\t\t * // remove class binding and remove the changes it caused\n\t\t * scene.removeClassToggle(true);\n\t\t *\n\t\t * @param {boolean} [reset=false] - If `false` and the classes are currently active, they will remain on the element. If `true` they will be removed.\n\t\t * @returns {Scene} Parent object for chaining.\n\t\t */\n\t\tthis.removeClassToggle = function (reset) {\n\t\t\tif (reset) {\n\t\t\t\t_cssClassElems.forEach(function (elem, key) {\n\t\t\t\t\t_util.removeClass(elem, _cssClasses);\n\t\t\t\t});\n\t\t\t}\n\t\t\tScene.off("start.internal_class end.internal_class");\n\t\t\t_cssClasses = undefined;\n\t\t\t_cssClassElems = [];\n\t\t\treturn Scene;\n\t\t};\n\n\t\t// INIT\n\t\tconstruct();\n\t\treturn Scene;\n\t};\n\n\t// store pagewide scene options\n\tvar SCENE_OPTIONS = {\n\t\tdefaults: {\n\t\t\tduration: 0,\n\t\t\toffset: 0,\n\t\t\ttriggerElement: undefined,\n\t\t\ttriggerHook: 0.5,\n\t\t\treverse: true,\n\t\t\tloglevel: 2\n\t\t},\n\t\tvalidate: {\n\t\t\toffset: function (val) {\n\t\t\t\tval = parseFloat(val);\n\t\t\t\tif (!_util.type.Number(val)) {\n\t\t\t\t\tthrow ["Invalid value for option \\"offset\\":", val];\n\t\t\t\t}\n\t\t\t\treturn val;\n\t\t\t},\n\t\t\ttriggerElement: function (val) {\n\t\t\t\tval = val || undefined;\n\t\t\t\tif (val) {\n\t\t\t\t\tvar elem = _util.get.elements(val)[0];\n\t\t\t\t\tif (elem) {\n\t\t\t\t\t\tval = elem;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow ["Element defined in option \\"triggerElement\\" was not found:", val];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn val;\n\t\t\t},\n\t\t\ttriggerHook: function (val) {\n\t\t\t\tvar translate = {\n\t\t\t\t\t"onCenter": 0.5,\n\t\t\t\t\t"onEnter": 1,\n\t\t\t\t\t"onLeave": 0\n\t\t\t\t};\n\t\t\t\tif (_util.type.Number(val)) {\n\t\t\t\t\tval = Math.max(0, Math.min(parseFloat(val), 1)); //  make sure its betweeen 0 and 1\n\t\t\t\t} else if (val in translate) {\n\t\t\t\t\tval = translate[val];\n\t\t\t\t} else {\n\t\t\t\t\tthrow ["Invalid value for option \\"triggerHook\\": ", val];\n\t\t\t\t}\n\t\t\t\treturn val;\n\t\t\t},\n\t\t\treverse: function (val) {\n\t\t\t\treturn !!val; // force boolean\n\t\t\t},\n\t\t\tloglevel: function (val) {\n\t\t\t\tval = parseInt(val);\n\t\t\t\tif (!_util.type.Number(val) || val < 0 || val > 3) {\n\t\t\t\t\tthrow ["Invalid value for option \\"loglevel\\":", val];\n\t\t\t\t}\n\t\t\t\treturn val;\n\t\t\t}\n\t\t},\n\t\t// holder for  validation methods. duration validation is handled in \'getters-setters.js\'\n\t\tshifts: ["duration", "offset", "triggerHook"],\n\t\t// list of options that trigger a `shift` event\n\t};\n/*\n * method used to add an option to ScrollMagic Scenes.\n * TODO: DOC (private for dev)\n */\n\tScrollMagic.Scene.addOption = function (name, defaultValue, validationCallback, shifts) {\n\t\tif (!(name in SCENE_OPTIONS.defaults)) {\n\t\t\tSCENE_OPTIONS.defaults[name] = defaultValue;\n\t\t\tSCENE_OPTIONS.validate[name] = validationCallback;\n\t\t\tif (shifts) {\n\t\t\t\tSCENE_OPTIONS.shifts.push(name);\n\t\t\t}\n\t\t} else {\n\t\t\tScrollMagic._util.log(1, "[static] ScrollMagic.Scene -> Cannot add Scene option \'" + name + "\', because it already exists.");\n\t\t}\n\t};\n\t// instance extension function for plugins\n\t// TODO: DOC (private for dev)\n\tScrollMagic.Scene.extend = function (extension) {\n\t\tvar oldClass = this;\n\t\tScrollMagic.Scene = function () {\n\t\t\toldClass.apply(this, arguments);\n\t\t\tthis.$super = _util.extend({}, this); // copy parent state\n\t\t\treturn extension.apply(this, arguments) || this;\n\t\t};\n\t\t_util.extend(ScrollMagic.Scene, oldClass); // copy properties\n\t\tScrollMagic.Scene.prototype = oldClass.prototype; // copy prototype\n\t\tScrollMagic.Scene.prototype.constructor = ScrollMagic.Scene; // restore constructor\n\t};\n\n\n\t/**\n\t * TODO: DOCS (private for dev)\n\t * @class\n\t * @private\n\t */\n\n\tScrollMagic.Event = function (type, namespace, target, vars) {\n\t\tvars = vars || {};\n\t\tfor (var key in vars) {\n\t\t\tthis[key] = vars[key];\n\t\t}\n\t\tthis.type = type;\n\t\tthis.target = this.currentTarget = target;\n\t\tthis.namespace = namespace || \'\';\n\t\tthis.timeStamp = this.timestamp = Date.now();\n\t\treturn this;\n\t};\n\n/*\n * TODO: DOCS (private for dev)\n */\n\n\tvar _util = ScrollMagic._util = (function (window) {\n\t\tvar U = {},\n\t\t\ti;\n\n\t\t/**\n\t\t * ------------------------------\n\t\t * internal helpers\n\t\t * ------------------------------\n\t\t */\n\n\t\t// parse float and fall back to 0.\n\t\tvar floatval = function (number) {\n\t\t\treturn parseFloat(number) || 0;\n\t\t};\n\t\t// get current style IE safe (otherwise IE would return calculated values for \'auto\')\n\t\tvar _getComputedStyle = function (elem) {\n\t\t\treturn elem.currentStyle ? elem.currentStyle : window.getComputedStyle(elem);\n\t\t};\n\n\t\t// get element dimension (width or height)\n\t\tvar _dimension = function (which, elem, outer, includeMargin) {\n\t\t\telem = (elem === document) ? window : elem;\n\t\t\tif (elem === window) {\n\t\t\t\tincludeMargin = false;\n\t\t\t} else if (!_type.DomElement(elem)) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\twhich = which.charAt(0).toUpperCase() + which.substr(1).toLowerCase();\n\t\t\tvar dimension = (outer ? elem[\'offset\' + which] || elem[\'outer\' + which] : elem[\'client\' + which] || elem[\'inner\' + which]) || 0;\n\t\t\tif (outer && includeMargin) {\n\t\t\t\tvar style = _getComputedStyle(elem);\n\t\t\t\tdimension += which === \'Height\' ? floatval(style.marginTop) + floatval(style.marginBottom) : floatval(style.marginLeft) + floatval(style.marginRight);\n\t\t\t}\n\t\t\treturn dimension;\n\t\t};\n\t\t// converts \'margin-top\' into \'marginTop\'\n\t\tvar _camelCase = function (str) {\n\t\t\treturn str.replace(/^[^a-z]+([a-z])/g, \'$1\').replace(/-([a-z])/g, function (g) {\n\t\t\t\treturn g[1].toUpperCase();\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * ------------------------------\n\t\t * external helpers\n\t\t * ------------------------------\n\t\t */\n\n\t\t// extend obj – same as jQuery.extend({}, objA, objB)\n\t\tU.extend = function (obj) {\n\t\t\tobj = obj || {};\n\t\t\tfor (i = 1; i < arguments.length; i++) {\n\t\t\t\tif (!arguments[i]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tfor (var key in arguments[i]) {\n\t\t\t\t\tif (arguments[i].hasOwnProperty(key)) {\n\t\t\t\t\t\tobj[key] = arguments[i][key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn obj;\n\t\t};\n\n\t\t// check if a css display type results in margin-collapse or not\n\t\tU.isMarginCollapseType = function (str) {\n\t\t\treturn ["block", "flex", "list-item", "table", "-webkit-box"].indexOf(str) > -1;\n\t\t};\n\n\t\t// implementation of requestAnimationFrame\n\t\t// based on https://gist.github.com/paulirish/1579671\n\t\tvar\n\t\tlastTime = 0,\n\t\t\tvendors = [\'ms\', \'moz\', \'webkit\', \'o\'];\n\t\tvar _requestAnimationFrame = window.requestAnimationFrame;\n\t\tvar _cancelAnimationFrame = window.cancelAnimationFrame;\n\t\t// try vendor prefixes if the above doesn\'t work\n\t\tfor (i = 0; !_requestAnimationFrame && i < vendors.length; ++i) {\n\t\t\t_requestAnimationFrame = window[vendors[i] + \'RequestAnimationFrame\'];\n\t\t\t_cancelAnimationFrame = window[vendors[i] + \'CancelAnimationFrame\'] || window[vendors[i] + \'CancelRequestAnimationFrame\'];\n\t\t}\n\n\t\t// fallbacks\n\t\tif (!_requestAnimationFrame) {\n\t\t\t_requestAnimationFrame = function (callback) {\n\t\t\t\tvar\n\t\t\t\tcurrTime = new Date().getTime(),\n\t\t\t\t\ttimeToCall = Math.max(0, 16 - (currTime - lastTime)),\n\t\t\t\t\tid = window.setTimeout(function () {\n\t\t\t\t\t\tcallback(currTime + timeToCall);\n\t\t\t\t\t}, timeToCall);\n\t\t\t\tlastTime = currTime + timeToCall;\n\t\t\t\treturn id;\n\t\t\t};\n\t\t}\n\t\tif (!_cancelAnimationFrame) {\n\t\t\t_cancelAnimationFrame = function (id) {\n\t\t\t\twindow.clearTimeout(id);\n\t\t\t};\n\t\t}\n\t\tU.rAF = _requestAnimationFrame.bind(window);\n\t\tU.cAF = _cancelAnimationFrame.bind(window);\n\n\t\tvar\n\t\tloglevels = ["error", "warn", "log"],\n\t\t\tconsole = window.console || {};\n\n\t\tconsole.log = console.log ||\n\t\tfunction () {}; // no console log, well - do nothing then...\n\t\t// make sure methods for all levels exist.\n\t\tfor (i = 0; i < loglevels.length; i++) {\n\t\t\tvar method = loglevels[i];\n\t\t\tif (!console[method]) {\n\t\t\t\tconsole[method] = console.log; // prefer .log over nothing\n\t\t\t}\n\t\t}\n\t\tU.log = function (loglevel) {\n\t\t\tif (loglevel > loglevels.length || loglevel <= 0) loglevel = loglevels.length;\n\t\t\tvar now = new Date(),\n\t\t\t\ttime = ("0" + now.getHours()).slice(-2) + ":" + ("0" + now.getMinutes()).slice(-2) + ":" + ("0" + now.getSeconds()).slice(-2) + ":" + ("00" + now.getMilliseconds()).slice(-3),\n\t\t\t\tmethod = loglevels[loglevel - 1],\n\t\t\t\targs = Array.prototype.splice.call(arguments, 1),\n\t\t\t\tfunc = Function.prototype.bind.call(console[method], console);\n\t\t\targs.unshift(time);\n\t\t\tfunc.apply(console, args);\n\t\t};\n\n\t\t/**\n\t\t * ------------------------------\n\t\t * type testing\n\t\t * ------------------------------\n\t\t */\n\n\t\tvar _type = U.type = function (v) {\n\t\t\treturn Object.prototype.toString.call(v).replace(/^\\[object (.+)\\]$/, "$1").toLowerCase();\n\t\t};\n\t\t_type.String = function (v) {\n\t\t\treturn _type(v) === \'string\';\n\t\t};\n\t\t_type.Function = function (v) {\n\t\t\treturn _type(v) === \'function\';\n\t\t};\n\t\t_type.Array = function (v) {\n\t\t\treturn Array.isArray(v);\n\t\t};\n\t\t_type.Number = function (v) {\n\t\t\treturn !_type.Array(v) && (v - parseFloat(v) + 1) >= 0;\n\t\t};\n\t\t_type.DomElement = function (o) {\n\t\t\treturn (\n\t\t\ttypeof HTMLElement === "object" ? o instanceof HTMLElement : //DOM2\n\t\t\to && typeof o === "object" && o !== null && o.nodeType === 1 && typeof o.nodeName === "string");\n\t\t};\n\n\t\t/**\n\t\t * ------------------------------\n\t\t * DOM Element info\n\t\t * ------------------------------\n\t\t */\n\t\t// always returns a list of matching DOM elements, from a selector, a DOM element or an list of elements or even an array of selectors\n\t\tvar _get = U.get = {};\n\t\t_get.elements = function (selector) {\n\t\t\tvar arr = [];\n\t\t\tif (_type.String(selector)) {\n\t\t\t\ttry {\n\t\t\t\t\tselector = document.querySelectorAll(selector);\n\t\t\t\t} catch (e) { // invalid selector\n\t\t\t\t\treturn arr;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (_type(selector) === \'nodelist\' || _type.Array(selector)) {\n\t\t\t\tfor (var i = 0, ref = arr.length = selector.length; i < ref; i++) { // list of elements\n\t\t\t\t\tvar elem = selector[i];\n\t\t\t\t\tarr[i] = _type.DomElement(elem) ? elem : _get.elements(elem); // if not an element, try to resolve recursively\n\t\t\t\t}\n\t\t\t} else if (_type.DomElement(selector) || selector === document || selector === window) {\n\t\t\t\tarr = [selector]; // only the element\n\t\t\t}\n\t\t\treturn arr;\n\t\t};\n\t\t// get scroll top value\n\t\t_get.scrollTop = function (elem) {\n\t\t\treturn (elem && typeof elem.scrollTop === \'number\') ? elem.scrollTop : window.pageYOffset || 0;\n\t\t};\n\t\t// get scroll left value\n\t\t_get.scrollLeft = function (elem) {\n\t\t\treturn (elem && typeof elem.scrollLeft === \'number\') ? elem.scrollLeft : window.pageXOffset || 0;\n\t\t};\n\t\t// get element height\n\t\t_get.width = function (elem, outer, includeMargin) {\n\t\t\treturn _dimension(\'width\', elem, outer, includeMargin);\n\t\t};\n\t\t// get element width\n\t\t_get.height = function (elem, outer, includeMargin) {\n\t\t\treturn _dimension(\'height\', elem, outer, includeMargin);\n\t\t};\n\n\t\t// get element position (optionally relative to viewport)\n\t\t_get.offset = function (elem, relativeToViewport) {\n\t\t\tvar offset = {\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0\n\t\t\t};\n\t\t\tif (elem && elem.getBoundingClientRect) { // check if available\n\t\t\t\tvar rect = elem.getBoundingClientRect();\n\t\t\t\toffset.top = rect.top;\n\t\t\t\toffset.left = rect.left;\n\t\t\t\tif (!relativeToViewport) { // clientRect is by default relative to viewport...\n\t\t\t\t\toffset.top += _get.scrollTop();\n\t\t\t\t\toffset.left += _get.scrollLeft();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn offset;\n\t\t};\n\n\t\t/**\n\t\t * ------------------------------\n\t\t * DOM Element manipulation\n\t\t * ------------------------------\n\t\t */\n\n\t\tU.addClass = function (elem, classname) {\n\t\t\tif (classname) {\n\t\t\t\tif (elem.classList) elem.classList.add(classname);\n\t\t\t\telse elem.className += \' \' + classname;\n\t\t\t}\n\t\t};\n\t\tU.removeClass = function (elem, classname) {\n\t\t\tif (classname) {\n\t\t\t\tif (elem.classList) elem.classList.remove(classname);\n\t\t\t\telse elem.className = elem.className.replace(new RegExp(\'(^|\\\\b)\' + classname.split(\' \').join(\'|\') + \'(\\\\b|$)\', \'gi\'), \' \');\n\t\t\t}\n\t\t};\n\t\t// if options is string -> returns css value\n\t\t// if options is array -> returns object with css value pairs\n\t\t// if options is object -> set new css values\n\t\tU.css = function (elem, options) {\n\t\t\tif (_type.String(options)) {\n\t\t\t\treturn _getComputedStyle(elem)[_camelCase(options)];\n\t\t\t} else if (_type.Array(options)) {\n\t\t\t\tvar\n\t\t\t\tobj = {},\n\t\t\t\t\tstyle = _getComputedStyle(elem);\n\t\t\t\toptions.forEach(function (option, key) {\n\t\t\t\t\tobj[option] = style[_camelCase(option)];\n\t\t\t\t});\n\t\t\t\treturn obj;\n\t\t\t} else {\n\t\t\t\tfor (var option in options) {\n\t\t\t\t\tvar val = options[option];\n\t\t\t\t\tif (val == parseFloat(val)) { // assume pixel for seemingly numerical values\n\t\t\t\t\t\tval += \'px\';\n\t\t\t\t\t}\n\t\t\t\t\telem.style[_camelCase(option)] = val;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\treturn U;\n\t}(window || {}));\n\n\tScrollMagic.Scene.prototype.addIndicators = function () {\n\t\tScrollMagic._util.log(1, \'(ScrollMagic.Scene) -> ERROR calling addIndicators() due to missing Plugin \\\'debug.addIndicators\\\'. Please make sure to include plugins/debug.addIndicators.js\');\n\t\treturn this;\n\t}\n\tScrollMagic.Scene.prototype.removeIndicators = function () {\n\t\tScrollMagic._util.log(1, \'(ScrollMagic.Scene) -> ERROR calling removeIndicators() due to missing Plugin \\\'debug.addIndicators\\\'. Please make sure to include plugins/debug.addIndicators.js\');\n\t\treturn this;\n\t}\n\tScrollMagic.Scene.prototype.setTween = function () {\n\t\tScrollMagic._util.log(1, \'(ScrollMagic.Scene) -> ERROR calling setTween() due to missing Plugin \\\'animation.gsap\\\'. Please make sure to include plugins/animation.gsap.js\');\n\t\treturn this;\n\t}\n\tScrollMagic.Scene.prototype.removeTween = function () {\n\t\tScrollMagic._util.log(1, \'(ScrollMagic.Scene) -> ERROR calling removeTween() due to missing Plugin \\\'animation.gsap\\\'. Please make sure to include plugins/animation.gsap.js\');\n\t\treturn this;\n\t}\n\tScrollMagic.Scene.prototype.setVelocity = function () {\n\t\tScrollMagic._util.log(1, \'(ScrollMagic.Scene) -> ERROR calling setVelocity() due to missing Plugin \\\'animation.velocity\\\'. Please make sure to include plugins/animation.velocity.js\');\n\t\treturn this;\n\t}\n\tScrollMagic.Scene.prototype.removeVelocity = function () {\n\t\tScrollMagic._util.log(1, \'(ScrollMagic.Scene) -> ERROR calling removeVelocity() due to missing Plugin \\\'animation.velocity\\\'. Please make sure to include plugins/animation.velocity.js\');\n\t\treturn this;\n\t}\n\n\treturn ScrollMagic;\n}));'},function(e,t,n){n(1)(n(71))},function(e,t){e.exports='/*!\n * ScrollMagic v2.0.5 (2015-04-29)\n * The javascript library for magical scroll interactions.\n * (c) 2015 Jan Paepke (@janpaepke)\n * Project Website: http://scrollmagic.io\n * \n * @version 2.0.5\n * @license Dual licensed under MIT license and GPL.\n * @author Jan Paepke - e-mail@janpaepke.de\n *\n * @file ScrollMagic GSAP Animation Plugin.\n *\n * requires: GSAP ~1.14\n * Powered by the Greensock Animation Platform (GSAP): http://www.greensock.com/js\n * Greensock License info at http://www.greensock.com/licensing/\n */\n/**\n * This plugin is meant to be used in conjunction with the Greensock Animation Plattform.  \n * It offers an easy API to trigger Tweens or synchronize them to the scrollbar movement.\n *\n * Both the `lite` and the `max` versions of the GSAP library are supported.  \n * The most basic requirement is `TweenLite`.\n * \n * To have access to this extension, please include `plugins/animation.gsap.js`.\n * @requires {@link http://greensock.com/gsap|GSAP ~1.14.x}\n * @mixin animation.GSAP\n */\n(function (root, factory) {\n\tif (typeof define === \'function\' && define.amd) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine([\'ScrollMagic\', \'TweenMax\', \'TimelineMax\'], factory);\n\t} else if (typeof exports === \'object\') {\n\t\t// CommonJS\n\t\t// Loads whole gsap package onto global scope.\n\t\trequire(\'gsap\');\n\t\tfactory(require(\'scrollmagic\'), TweenMax, TimelineMax);\n\t} else {\n\t\t// Browser globals\n\t\tfactory(root.ScrollMagic || (root.jQuery && root.jQuery.ScrollMagic), root.TweenMax || root.TweenLite, root.TimelineMax || root.TimelineLite);\n\t}\n}(this, function (ScrollMagic, Tween, Timeline) {\n\t"use strict";\n\tvar NAMESPACE = "animation.gsap";\n\n\tvar\n\tconsole = window.console || {},\n\t\terr = Function.prototype.bind.call(console.error || console.log ||\n\t\tfunction () {}, console);\n\tif (!ScrollMagic) {\n\t\terr("(" + NAMESPACE + ") -> ERROR: The ScrollMagic main module could not be found. Please make sure it\'s loaded before this plugin or use an asynchronous loader like requirejs.");\n\t}\n\tif (!Tween) {\n\t\terr("(" + NAMESPACE + ") -> ERROR: TweenLite or TweenMax could not be found. Please make sure GSAP is loaded before ScrollMagic or use an asynchronous loader like requirejs.");\n\t}\n\n/*\n\t * ----------------------------------------------------------------\n\t * Extensions for Scene\n\t * ----------------------------------------------------------------\n\t */\n\t/**\n\t * Every instance of ScrollMagic.Scene now accepts an additional option.  \n\t * See {@link ScrollMagic.Scene} for a complete list of the standard options.\n\t * @memberof! animation.GSAP#\n\t * @method new ScrollMagic.Scene(options)\n\t * @example\n\t * var scene = new ScrollMagic.Scene({tweenChanges: true});\n\t *\n\t * @param {object} [options] - Options for the Scene. The options can be updated at any time.\n\t * @param {boolean} [options.tweenChanges=false] - Tweens Animation to the progress target instead of setting it.  \n\t Does not affect animations where duration is `0`.\n\t */\n\t/**\n\t * **Get** or **Set** the tweenChanges option value.  \n\t * This only affects scenes with a duration. If `tweenChanges` is `true`, the progress update when scrolling will not be immediate, but instead the animation will smoothly animate to the target state.  \n\t * For a better understanding, try enabling and disabling this option in the [Scene Manipulation Example](../examples/basic/scene_manipulation.html).\n\t * @memberof! animation.GSAP#\n\t * @method Scene.tweenChanges\n\t * \n\t * @example\n\t * // get the current tweenChanges option\n\t * var tweenChanges = scene.tweenChanges();\n\t *\n\t * // set new tweenChanges option\n\t * scene.tweenChanges(true);\n\t *\n\t * @fires {@link Scene.change}, when used as setter\n\t * @param {boolean} [newTweenChanges] - The new tweenChanges setting of the scene.\n\t * @returns {boolean} `get` -  Current tweenChanges option value.\n\t * @returns {Scene} `set` -  Parent object for chaining.\n\t */\n\t// add option (TODO: DOC (private for dev))\n\tScrollMagic.Scene.addOption("tweenChanges", // name\n\tfalse, // default\n\n\n\tfunction (val) { // validation callback\n\t\treturn !!val;\n\t});\n\t// extend scene\n\tScrollMagic.Scene.extend(function () {\n\t\tvar Scene = this,\n\t\t\t_tween;\n\n\t\tvar log = function () {\n\t\t\tif (Scene._log) { // not available, when main source minified\n\t\t\t\tArray.prototype.splice.call(arguments, 1, 0, "(" + NAMESPACE + ")", "->");\n\t\t\t\tScene._log.apply(this, arguments);\n\t\t\t}\n\t\t};\n\n\t\t// set listeners\n\t\tScene.on("progress.plugin_gsap", function () {\n\t\t\tupdateTweenProgress();\n\t\t});\n\t\tScene.on("destroy.plugin_gsap", function (e) {\n\t\t\tScene.removeTween(e.reset);\n\t\t});\n\n\t\t/**\n\t\t * Update the tween progress to current position.\n\t\t * @private\n\t\t */\n\t\tvar updateTweenProgress = function () {\n\t\t\tif (_tween) {\n\t\t\t\tvar\n\t\t\t\tprogress = Scene.progress(),\n\t\t\t\t\tstate = Scene.state();\n\t\t\t\tif (_tween.repeat && _tween.repeat() === -1) {\n\t\t\t\t\t// infinite loop, so not in relation to progress\n\t\t\t\t\tif (state === \'DURING\' && _tween.paused()) {\n\t\t\t\t\t\t_tween.play();\n\t\t\t\t\t} else if (state !== \'DURING\' && !_tween.paused()) {\n\t\t\t\t\t\t_tween.pause();\n\t\t\t\t\t}\n\t\t\t\t} else if (progress != _tween.progress()) { // do we even need to update the progress?\n\t\t\t\t\t// no infinite loop - so should we just play or go to a specific point in time?\n\t\t\t\t\tif (Scene.duration() === 0) {\n\t\t\t\t\t\t// play the animation\n\t\t\t\t\t\tif (progress > 0) { // play from 0 to 1\n\t\t\t\t\t\t\t_tween.play();\n\t\t\t\t\t\t} else { // play from 1 to 0\n\t\t\t\t\t\t\t_tween.reverse();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// go to a specific point in time\n\t\t\t\t\t\tif (Scene.tweenChanges() && _tween.tweenTo) {\n\t\t\t\t\t\t\t// go smooth\n\t\t\t\t\t\t\t_tween.tweenTo(progress * _tween.duration());\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// just hard set it\n\t\t\t\t\t\t\t_tween.progress(progress).pause();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Add a tween to the scene.  \n\t\t * If you want to add multiple tweens, add them into a GSAP Timeline object and supply it instead (see example below).  \n\t\t * \n\t\t * If the scene has a duration, the tween\'s duration will be projected to the scroll distance of the scene, meaning its progress will be synced to scrollbar movement.  \n\t\t * For a scene with a duration of `0`, the tween will be triggered when scrolling forward past the scene\'s trigger position and reversed, when scrolling back.  \n\t\t * To gain better understanding, check out the [Simple Tweening example](../examples/basic/simple_tweening.html).\n\t\t *\n\t\t * Instead of supplying a tween this method can also be used as a shorthand for `TweenMax.to()` (see example below).\n\t\t * @memberof! animation.GSAP#\n\t\t *\n\t\t * @example\n\t\t * // add a single tween directly\n\t\t * scene.setTween(TweenMax.to("obj"), 1, {x: 100});\n\t\t *\n\t\t * // add a single tween via variable\n\t\t * var tween = TweenMax.to("obj"), 1, {x: 100};\n\t\t * scene.setTween(tween);\n\t\t *\n\t\t * // add multiple tweens, wrapped in a timeline.\n\t\t * var timeline = new TimelineMax();\n\t\t * var tween1 = TweenMax.from("obj1", 1, {x: 100});\n\t\t * var tween2 = TweenMax.to("obj2", 1, {y: 100});\n\t\t * timeline\n\t\t *\t\t.add(tween1)\n\t\t *\t\t.add(tween2);\n\t\t * scene.addTween(timeline);\n\t\t *\n\t\t * // short hand to add a TweenMax.to() tween\n\t\t * scene.setTween("obj3", 0.5, {y: 100});\n\t\t *\n\t\t * // short hand to add a TweenMax.to() tween for 1 second\n\t\t * // this is useful, when the scene has a duration and the tween duration isn\'t important anyway\n\t\t * scene.setTween("obj3", {y: 100});\n\t\t *\n\t\t * @param {(object|string)} TweenObject - A TweenMax, TweenLite, TimelineMax or TimelineLite object that should be animated in the scene. Can also be a Dom Element or Selector, when using direct tween definition (see examples).\n\t\t * @param {(number|object)} duration - A duration for the tween, or tween parameters. If an object containing parameters are supplied, a default duration of 1 will be used.\n\t\t * @param {object} params - The parameters for the tween\n\t\t * @returns {Scene} Parent object for chaining.\n\t\t */\n\t\tScene.setTween = function (TweenObject, duration, params) {\n\t\t\tvar newTween;\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tif (arguments.length < 3) {\n\t\t\t\t\tparams = duration;\n\t\t\t\t\tduration = 1;\n\t\t\t\t}\n\t\t\t\tTweenObject = Tween.to(TweenObject, duration, params);\n\t\t\t}\n\t\t\ttry {\n\t\t\t\t// wrap Tween into a Timeline Object if available to include delay and repeats in the duration and standardize methods.\n\t\t\t\tif (Timeline) {\n\t\t\t\t\tnewTween = new Timeline({\n\t\t\t\t\t\tsmoothChildTiming: true\n\t\t\t\t\t}).add(TweenObject);\n\t\t\t\t} else {\n\t\t\t\t\tnewTween = TweenObject;\n\t\t\t\t}\n\t\t\t\tnewTween.pause();\n\t\t\t} catch (e) {\n\t\t\t\tlog(1, "ERROR calling method \'setTween()\': Supplied argument is not a valid TweenObject");\n\t\t\t\treturn Scene;\n\t\t\t}\n\t\t\tif (_tween) { // kill old tween?\n\t\t\t\tScene.removeTween();\n\t\t\t}\n\t\t\t_tween = newTween;\n\n\t\t\t// some properties need to be transferred it to the wrapper, otherwise they would get lost.\n\t\t\tif (TweenObject.repeat && TweenObject.repeat() === -1) { // TweenMax or TimelineMax Object?\n\t\t\t\t_tween.repeat(-1);\n\t\t\t\t_tween.yoyo(TweenObject.yoyo());\n\t\t\t}\n\t\t\t// Some tween validations and debugging helpers\n\t\t\tif (Scene.tweenChanges() && !_tween.tweenTo) {\n\t\t\t\tlog(2, "WARNING: tweenChanges will only work if the TimelineMax object is available for ScrollMagic.");\n\t\t\t}\n\n\t\t\t// check if there are position tweens defined for the trigger and warn about it :)\n\t\t\tif (_tween && Scene.controller() && Scene.triggerElement() && Scene.loglevel() >= 2) { // controller is needed to know scroll direction.\n\t\t\t\tvar\n\t\t\t\ttriggerTweens = Tween.getTweensOf(Scene.triggerElement()),\n\t\t\t\t\tvertical = Scene.controller().info("vertical");\n\t\t\t\ttriggerTweens.forEach(function (value, index) {\n\t\t\t\t\tvar\n\t\t\t\t\ttweenvars = value.vars.css || value.vars,\n\t\t\t\t\t\tcondition = vertical ? (tweenvars.top !== undefined || tweenvars.bottom !== undefined) : (tweenvars.left !== undefined || tweenvars.right !== undefined);\n\t\t\t\t\tif (condition) {\n\t\t\t\t\t\tlog(2, "WARNING: Tweening the position of the trigger element affects the scene timing and should be avoided!");\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// warn about tween overwrites, when an element is tweened multiple times\n\t\t\tif (parseFloat(TweenLite.version) >= 1.14) { // onOverwrite only present since GSAP v1.14.0\n\t\t\t\tvar\n\t\t\t\tlist = _tween.getChildren ? _tween.getChildren(true, true, false) : [_tween],\n\t\t\t\t\t// get all nested tween objects\n\t\t\t\t\tnewCallback = function () {\n\t\t\t\t\t\tlog(2, "WARNING: tween was overwritten by another. To learn how to avoid this issue see here: https://github.com/janpaepke/ScrollMagic/wiki/WARNING:-tween-was-overwritten-by-another");\n\t\t\t\t\t};\n\t\t\t\tfor (var i = 0, thisTween, oldCallback; i < list.length; i++) { /*jshint loopfunc: true */\n\t\t\t\t\tthisTween = list[i];\n\t\t\t\t\tif (oldCallback !== newCallback) { // if tweens is added more than once\n\t\t\t\t\t\toldCallback = thisTween.vars.onOverwrite;\n\t\t\t\t\t\tthisTween.vars.onOverwrite = function () {\n\t\t\t\t\t\t\tif (oldCallback) {\n\t\t\t\t\t\t\t\toldCallback.apply(this, arguments);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tnewCallback.apply(this, arguments);\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tlog(3, "added tween");\n\n\t\t\tupdateTweenProgress();\n\t\t\treturn Scene;\n\t\t};\n\n\t\t/**\n\t\t * Remove the tween from the scene.  \n\t\t * This will terminate the control of the Scene over the tween.\n\t\t *\n\t\t * Using the reset option you can decide if the tween should remain in the current state or be rewound to set the target elements back to the state they were in before the tween was added to the scene.\n\t\t * @memberof! animation.GSAP#\n\t\t *\n\t\t * @example\n\t\t * // remove the tween from the scene without resetting it\n\t\t * scene.removeTween();\n\t\t *\n\t\t * // remove the tween from the scene and reset it to initial position\n\t\t * scene.removeTween(true);\n\t\t *\n\t\t * @param {boolean} [reset=false] - If `true` the tween will be reset to its initial values.\n\t\t * @returns {Scene} Parent object for chaining.\n\t\t */\n\t\tScene.removeTween = function (reset) {\n\t\t\tif (_tween) {\n\t\t\t\tif (reset) {\n\t\t\t\t\t_tween.progress(0).pause();\n\t\t\t\t}\n\t\t\t\t_tween.kill();\n\t\t\t\t_tween = undefined;\n\t\t\t\tlog(3, "removed tween (reset: " + (reset ? "true" : "false") + ")");\n\t\t\t}\n\t\t\treturn Scene;\n\t\t};\n\n\t});\n}));'},function(e,t,n){n(1)(n(73))},function(e,t){e.exports='/*!\n * ScrollMagic v2.0.5 (2015-04-29)\n * The javascript library for magical scroll interactions.\n * (c) 2015 Jan Paepke (@janpaepke)\n * Project Website: http://scrollmagic.io\n * \n * @version 2.0.5\n * @license Dual licensed under MIT license and GPL.\n * @author Jan Paepke - e-mail@janpaepke.de\n *\n * @file Debug Extension for ScrollMagic.\n */\n/**\n * This plugin was formerly known as the ScrollMagic debug extension.\n *\n * It enables you to add visual indicators to your page, to be able to see exactly when a scene is triggered.\n *\n * To have access to this extension, please include `plugins/debug.addIndicators.js`.\n * @mixin debug.addIndicators\n */\n(function (root, factory) {\n\tif (typeof define === \'function\' && define.amd) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine([\'ScrollMagic\'], factory);\n\t} else if (typeof exports === \'object\') {\n\t\t// CommonJS\n\t\tfactory(require(\'scrollmagic\'));\n\t} else {\n\t\t// no browser global export needed, just execute\n\t\tfactory(root.ScrollMagic || (root.jQuery && root.jQuery.ScrollMagic));\n\t}\n}(this, function (ScrollMagic) {\n\t"use strict";\n\tvar NAMESPACE = "debug.addIndicators";\n\n\tvar\n\tconsole = window.console || {},\n\t\terr = Function.prototype.bind.call(console.error || console.log ||\n\t\tfunction () {}, console);\n\tif (!ScrollMagic) {\n\t\terr("(" + NAMESPACE + ") -> ERROR: The ScrollMagic main module could not be found. Please make sure it\'s loaded before this plugin or use an asynchronous loader like requirejs.");\n\t}\n\n\t// plugin settings\n\tvar\n\tFONT_SIZE = "0.85em",\n\t\tZINDEX = "9999",\n\t\tEDGE_OFFSET = 15; // minimum edge distance, added to indentation\n\n\t// overall vars\n\tvar\n\t_util = ScrollMagic._util,\n\t\t_autoindex = 0;\n\n\n\n\tScrollMagic.Scene.extend(function () {\n\t\tvar\n\t\tScene = this,\n\t\t\t_indicator;\n\n\t\tvar log = function () {\n\t\t\tif (Scene._log) { // not available, when main source minified\n\t\t\t\tArray.prototype.splice.call(arguments, 1, 0, "(" + NAMESPACE + ")", "->");\n\t\t\t\tScene._log.apply(this, arguments);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Add visual indicators for a ScrollMagic.Scene.  \n\t\t * @memberof! debug.addIndicators#\n\t\t *\n\t\t * @example\n\t\t * // add basic indicators\n\t\t * scene.addIndicators()\n\t\t *\n\t\t * // passing options\n\t\t * scene.addIndicators({name: "pin scene", colorEnd: "#FFFFFF"});\n\t\t *\n\t\t * @param {object} [options] - An object containing one or more options for the indicators.\n\t\t * @param {(string|object)} [options.parent=undefined] - A selector, DOM Object or a jQuery object that the indicators should be added to.  \n\t\t If undefined, the controller\'s container will be used.\n\t\t * @param {number} [options.name=""] - This string will be displayed at the start and end indicators of the scene for identification purposes. If no name is supplied an automatic index will be used.\n\t\t * @param {number} [options.indent=0] - Additional position offset for the indicators (useful, when having multiple scenes starting at the same position).\n\t\t * @param {string} [options.colorStart=green] - CSS color definition for the start indicator.\n\t\t * @param {string} [options.colorEnd=red] - CSS color definition for the end indicator.\n\t\t * @param {string} [options.colorTrigger=blue] - CSS color definition for the trigger indicator.\n\t\t */\n\t\tScene.addIndicators = function (options) {\n\t\t\tif (!_indicator) {\n\t\t\t\tvar\n\t\t\t\tDEFAULT_OPTIONS = {\n\t\t\t\t\tname: "",\n\t\t\t\t\tindent: 0,\n\t\t\t\t\tparent: undefined,\n\t\t\t\t\tcolorStart: "green",\n\t\t\t\t\tcolorEnd: "red",\n\t\t\t\t\tcolorTrigger: "blue",\n\t\t\t\t};\n\n\t\t\t\toptions = _util.extend({}, DEFAULT_OPTIONS, options);\n\n\t\t\t\t_autoindex++;\n\t\t\t\t_indicator = new Indicator(Scene, options);\n\n\t\t\t\tScene.on("add.plugin_addIndicators", _indicator.add);\n\t\t\t\tScene.on("remove.plugin_addIndicators", _indicator.remove);\n\t\t\t\tScene.on("destroy.plugin_addIndicators", Scene.removeIndicators);\n\n\t\t\t\t// it the scene already has a controller we can start right away.\n\t\t\t\tif (Scene.controller()) {\n\t\t\t\t\t_indicator.add();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn Scene;\n\t\t};\n\n\t\t/**\n\t\t * Removes visual indicators from a ScrollMagic.Scene.\n\t\t * @memberof! debug.addIndicators#\n\t\t *\n\t\t * @example\n\t\t * // remove previously added indicators\n\t\t * scene.removeIndicators()\n\t\t *\n\t\t */\n\t\tScene.removeIndicators = function () {\n\t\t\tif (_indicator) {\n\t\t\t\t_indicator.remove();\n\t\t\t\tthis.off("*.plugin_addIndicators");\n\t\t\t\t_indicator = undefined;\n\t\t\t}\n\t\t\treturn Scene;\n\t\t};\n\n\t});\n\n\n/*\n\t * ----------------------------------------------------------------\n\t * Extension for controller to store and update related indicators\n\t * ----------------------------------------------------------------\n\t */\n\t// add option to globally auto-add indicators to scenes\n\t/**\n\t * Every ScrollMagic.Controller instance now accepts an additional option.  \n\t * See {@link ScrollMagic.Controller} for a complete list of the standard options.\n\t * @memberof! debug.addIndicators#\n\t * @method new ScrollMagic.Controller(options)\n\t * @example\n\t * // make a controller and add indicators to all scenes attached\n\t * var controller = new ScrollMagic.Controller({addIndicators: true});\n\t * // this scene will automatically have indicators added to it\n\t * new ScrollMagic.Scene()\n\t *                .addTo(controller);\n\t *\n\t * @param {object} [options] - Options for the Controller.\n\t * @param {boolean} [options.addIndicators=false] - If set to `true` every scene that is added to the controller will automatically get indicators added to it.\n\t */\n\tScrollMagic.Controller.addOption("addIndicators", false);\n\t// extend Controller\n\tScrollMagic.Controller.extend(function () {\n\t\tvar\n\t\tController = this,\n\t\t\t_info = Controller.info(),\n\t\t\t_container = _info.container,\n\t\t\t_isDocument = _info.isDocument,\n\t\t\t_vertical = _info.vertical,\n\t\t\t_indicators = { // container for all indicators and methods\n\t\t\t\tgroups: []\n\t\t\t};\n\n\t\tvar log = function () {\n\t\t\tif (Controller._log) { // not available, when main source minified\n\t\t\t\tArray.prototype.splice.call(arguments, 1, 0, "(" + NAMESPACE + ")", "->");\n\t\t\t\tController._log.apply(this, arguments);\n\t\t\t}\n\t\t};\n\t\tif (Controller._indicators) {\n\t\t\tlog(2, "WARNING: Scene already has a property \'_indicators\', which will be overwritten by plugin.");\n\t\t}\n\n\t\t// add indicators container\n\t\tthis._indicators = _indicators;\n/*\n\t\t\tneeded updates:\n\t\t\t+++++++++++++++\n\t\t\tstart/end position on scene shift (handled in Indicator class)\n\t\t\ttrigger parameters on triggerHook value change (handled in Indicator class)\n\t\t\tbounds position on container scroll or resize (to keep alignment to bottom/right)\n\t\t\ttrigger position on container resize, window resize (if container isn\'t document) and window scroll (if container isn\'t document)\n\t\t*/\n\n\t\t// event handler for when associated bounds markers need to be repositioned\n\t\tvar handleBoundsPositionChange = function () {\n\t\t\t_indicators.updateBoundsPositions();\n\t\t};\n\n\t\t// event handler for when associated trigger groups need to be repositioned\n\t\tvar handleTriggerPositionChange = function () {\n\t\t\t_indicators.updateTriggerGroupPositions();\n\t\t};\n\n\t\t_container.addEventListener("resize", handleTriggerPositionChange);\n\t\tif (!_isDocument) {\n\t\t\twindow.addEventListener("resize", handleTriggerPositionChange);\n\t\t\twindow.addEventListener("scroll", handleTriggerPositionChange);\n\t\t}\n\t\t// update all related bounds containers\n\t\t_container.addEventListener("resize", handleBoundsPositionChange);\n\t\t_container.addEventListener("scroll", handleBoundsPositionChange);\n\n\n\t\t// updates the position of the bounds container to aligned to the right for vertical containers and to the bottom for horizontal\n\t\tthis._indicators.updateBoundsPositions = function (specificIndicator) {\n\t\t\tvar // constant for all bounds\n\t\t\tgroups = specificIndicator ? [_util.extend({}, specificIndicator.triggerGroup, {\n\t\t\t\tmembers: [specificIndicator]\n\t\t\t})] : // create a group with only one element\n\t\t\t_indicators.groups,\n\t\t\t\t// use all\n\t\t\t\tg = groups.length,\n\t\t\t\tcss = {},\n\t\t\t\tparamPos = _vertical ? "left" : "top",\n\t\t\t\tparamDimension = _vertical ? "width" : "height",\n\t\t\t\tedge = _vertical ? _util.get.scrollLeft(_container) + _util.get.width(_container) - EDGE_OFFSET : _util.get.scrollTop(_container) + _util.get.height(_container) - EDGE_OFFSET,\n\t\t\t\tb, triggerSize, group;\n\t\t\twhile (g--) { // group loop\n\t\t\t\tgroup = groups[g];\n\t\t\t\tb = group.members.length;\n\t\t\t\ttriggerSize = _util.get[paramDimension](group.element.firstChild);\n\t\t\t\twhile (b--) { // indicators loop\n\t\t\t\t\tcss[paramPos] = edge - triggerSize;\n\t\t\t\t\t_util.css(group.members[b].bounds, css);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// updates the positions of all trigger groups attached to a controller or a specific one, if provided\n\t\tthis._indicators.updateTriggerGroupPositions = function (specificGroup) {\n\t\t\tvar // constant vars\n\t\t\tgroups = specificGroup ? [specificGroup] : _indicators.groups,\n\t\t\t\ti = groups.length,\n\t\t\t\tcontainer = _isDocument ? document.body : _container,\n\t\t\t\tcontainerOffset = _isDocument ? {\n\t\t\t\t\ttop: 0,\n\t\t\t\t\tleft: 0\n\t\t\t\t} : _util.get.offset(container, true),\n\t\t\t\tedge = _vertical ? _util.get.width(_container) - EDGE_OFFSET : _util.get.height(_container) - EDGE_OFFSET,\n\t\t\t\tparamDimension = _vertical ? "width" : "height",\n\t\t\t\tparamTransform = _vertical ? "Y" : "X";\n\t\t\tvar // changing vars\n\t\t\tgroup, elem, pos, elemSize, transform;\n\t\t\twhile (i--) {\n\t\t\t\tgroup = groups[i];\n\t\t\t\telem = group.element;\n\t\t\t\tpos = group.triggerHook * Controller.info("size");\n\t\t\t\telemSize = _util.get[paramDimension](elem.firstChild.firstChild);\n\t\t\t\ttransform = pos > elemSize ? "translate" + paramTransform + "(-100%)" : "";\n\n\t\t\t\t_util.css(elem, {\n\t\t\t\t\ttop: containerOffset.top + (_vertical ? pos : edge - group.members[0].options.indent),\n\t\t\t\t\tleft: containerOffset.left + (_vertical ? edge - group.members[0].options.indent : pos)\n\t\t\t\t});\n\t\t\t\t_util.css(elem.firstChild.firstChild, {\n\t\t\t\t\t"-ms-transform": transform,\n\t\t\t\t\t"-webkit-transform": transform,\n\t\t\t\t\t"transform": transform\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\t// updates the label for the group to contain the name, if it only has one member\n\t\tthis._indicators.updateTriggerGroupLabel = function (group) {\n\t\t\tvar\n\t\t\ttext = "trigger" + (group.members.length > 1 ? "" : " " + group.members[0].options.name),\n\t\t\t\telem = group.element.firstChild.firstChild,\n\t\t\t\tdoUpdate = elem.textContent !== text;\n\t\t\tif (doUpdate) {\n\t\t\t\telem.textContent = text;\n\t\t\t\tif (_vertical) { // bounds position is dependent on text length, so update\n\t\t\t\t\t_indicators.updateBoundsPositions();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// add indicators if global option is set\n\t\tthis.addScene = function (newScene) {\n\n\t\t\tif (this._options.addIndicators && newScene instanceof ScrollMagic.Scene && newScene.controller() === Controller) {\n\t\t\t\tnewScene.addIndicators();\n\t\t\t}\n\t\t\t// call original destroy method\n\t\t\tthis.$super.addScene.apply(this, arguments);\n\t\t};\n\n\t\t// remove all previously set listeners on destroy\n\t\tthis.destroy = function () {\n\t\t\t_container.removeEventListener("resize", handleTriggerPositionChange);\n\t\t\tif (!_isDocument) {\n\t\t\t\twindow.removeEventListener("resize", handleTriggerPositionChange);\n\t\t\t\twindow.removeEventListener("scroll", handleTriggerPositionChange);\n\t\t\t}\n\t\t\t_container.removeEventListener("resize", handleBoundsPositionChange);\n\t\t\t_container.removeEventListener("scroll", handleBoundsPositionChange);\n\t\t\t// call original destroy method\n\t\t\tthis.$super.destroy.apply(this, arguments);\n\t\t};\n\t\treturn Controller;\n\n\t});\n\n/*\n\t * ----------------------------------------------------------------\n\t * Internal class for the construction of Indicators\n\t * ----------------------------------------------------------------\n\t */\n\tvar Indicator = function (Scene, options) {\n\t\tvar\n\t\tIndicator = this,\n\t\t\t_elemBounds = TPL.bounds(),\n\t\t\t_elemStart = TPL.start(options.colorStart),\n\t\t\t_elemEnd = TPL.end(options.colorEnd),\n\t\t\t_boundsContainer = options.parent && _util.get.elements(options.parent)[0],\n\t\t\t_vertical, _ctrl;\n\n\t\tvar log = function () {\n\t\t\tif (Scene._log) { // not available, when main source minified\n\t\t\t\tArray.prototype.splice.call(arguments, 1, 0, "(" + NAMESPACE + ")", "->");\n\t\t\t\tScene._log.apply(this, arguments);\n\t\t\t}\n\t\t};\n\n\t\toptions.name = options.name || _autoindex;\n\n\t\t// prepare bounds elements\n\t\t_elemStart.firstChild.textContent += " " + options.name;\n\t\t_elemEnd.textContent += " " + options.name;\n\t\t_elemBounds.appendChild(_elemStart);\n\t\t_elemBounds.appendChild(_elemEnd);\n\n\t\t// set public variables\n\t\tIndicator.options = options;\n\t\tIndicator.bounds = _elemBounds;\n\t\t// will be set later\n\t\tIndicator.triggerGroup = undefined;\n\n\t\t// add indicators to DOM\n\t\tthis.add = function () {\n\t\t\t_ctrl = Scene.controller();\n\t\t\t_vertical = _ctrl.info("vertical");\n\n\t\t\tvar isDocument = _ctrl.info("isDocument");\n\n\t\t\tif (!_boundsContainer) {\n\t\t\t\t// no parent supplied or doesnt exist\n\t\t\t\t_boundsContainer = isDocument ? document.body : _ctrl.info("container"); // check if window/document (then use body)\n\t\t\t}\n\t\t\tif (!isDocument && _util.css(_boundsContainer, "position") === \'static\') {\n\t\t\t\t// position mode needed for correct positioning of indicators\n\t\t\t\t_util.css(_boundsContainer, {\n\t\t\t\t\tposition: "relative"\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// add listeners for updates\n\t\t\tScene.on("change.plugin_addIndicators", handleTriggerParamsChange);\n\t\t\tScene.on("shift.plugin_addIndicators", handleBoundsParamsChange);\n\n\t\t\t// updates trigger & bounds (will add elements if needed)\n\t\t\tupdateTriggerGroup();\n\t\t\tupdateBounds();\n\n\t\t\tsetTimeout(function () { // do after all execution is finished otherwise sometimes size calculations are off\n\t\t\t\t_ctrl._indicators.updateBoundsPositions(Indicator);\n\t\t\t}, 0);\n\n\t\t\tlog(3, "added indicators");\n\t\t};\n\n\t\t// remove indicators from DOM\n\t\tthis.remove = function () {\n\t\t\tif (Indicator.triggerGroup) { // if not set there\'s nothing to remove\n\t\t\t\tScene.off("change.plugin_addIndicators", handleTriggerParamsChange);\n\t\t\t\tScene.off("shift.plugin_addIndicators", handleBoundsParamsChange);\n\n\t\t\t\tif (Indicator.triggerGroup.members.length > 1) {\n\t\t\t\t\t// just remove from memberlist of old group\n\t\t\t\t\tvar group = Indicator.triggerGroup;\n\t\t\t\t\tgroup.members.splice(group.members.indexOf(Indicator), 1);\n\t\t\t\t\t_ctrl._indicators.updateTriggerGroupLabel(group);\n\t\t\t\t\t_ctrl._indicators.updateTriggerGroupPositions(group);\n\t\t\t\t\tIndicator.triggerGroup = undefined;\n\t\t\t\t} else {\n\t\t\t\t\t// remove complete group\n\t\t\t\t\tremoveTriggerGroup();\n\t\t\t\t}\n\t\t\t\tremoveBounds();\n\n\t\t\t\tlog(3, "removed indicators");\n\t\t\t}\n\t\t};\n\n/*\n\t\t * ----------------------------------------------------------------\n\t\t * internal Event Handlers\n\t\t * ----------------------------------------------------------------\n\t\t */\n\n\t\t// event handler for when bounds params change\n\t\tvar handleBoundsParamsChange = function () {\n\t\t\tupdateBounds();\n\t\t};\n\n\t\t// event handler for when trigger params change\n\t\tvar handleTriggerParamsChange = function (e) {\n\t\t\tif (e.what === "triggerHook") {\n\t\t\t\tupdateTriggerGroup();\n\t\t\t}\n\t\t};\n\n/*\n\t\t * ----------------------------------------------------------------\n\t\t * Bounds (start / stop) management\n\t\t * ----------------------------------------------------------------\n\t\t */\n\n\t\t// adds an new bounds elements to the array and to the DOM\n\t\tvar addBounds = function () {\n\t\t\tvar v = _ctrl.info("vertical");\n\t\t\t// apply stuff we didn\'t know before...\n\t\t\t_util.css(_elemStart.firstChild, {\n\t\t\t\t"border-bottom-width": v ? 1 : 0,\n\t\t\t\t"border-right-width": v ? 0 : 1,\n\t\t\t\t"bottom": v ? -1 : options.indent,\n\t\t\t\t"right": v ? options.indent : -1,\n\t\t\t\t"padding": v ? "0 8px" : "2px 4px",\n\t\t\t});\n\t\t\t_util.css(_elemEnd, {\n\t\t\t\t"border-top-width": v ? 1 : 0,\n\t\t\t\t"border-left-width": v ? 0 : 1,\n\t\t\t\t"top": v ? "100%" : "",\n\t\t\t\t"right": v ? options.indent : "",\n\t\t\t\t"bottom": v ? "" : options.indent,\n\t\t\t\t"left": v ? "" : "100%",\n\t\t\t\t"padding": v ? "0 8px" : "2px 4px"\n\t\t\t});\n\t\t\t// append\n\t\t\t_boundsContainer.appendChild(_elemBounds);\n\t\t};\n\n\t\t// remove bounds from list and DOM\n\t\tvar removeBounds = function () {\n\t\t\t_elemBounds.parentNode.removeChild(_elemBounds);\n\t\t};\n\n\t\t// update the start and end positions of the scene\n\t\tvar updateBounds = function () {\n\t\t\tif (_elemBounds.parentNode !== _boundsContainer) {\n\t\t\t\taddBounds(); // Add Bounds elements (start/end)\n\t\t\t}\n\t\t\tvar css = {};\n\t\t\tcss[_vertical ? "top" : "left"] = Scene.triggerPosition();\n\t\t\tcss[_vertical ? "height" : "width"] = Scene.duration();\n\t\t\t_util.css(_elemBounds, css);\n\t\t\t_util.css(_elemEnd, {\n\t\t\t\tdisplay: Scene.duration() > 0 ? "" : "none"\n\t\t\t});\n\t\t};\n\n/*\n\t\t * ----------------------------------------------------------------\n\t\t * trigger and trigger group management\n\t\t * ----------------------------------------------------------------\n\t\t */\n\n\t\t// adds an new trigger group to the array and to the DOM\n\t\tvar addTriggerGroup = function () {\n\t\t\tvar triggerElem = TPL.trigger(options.colorTrigger); // new trigger element\n\t\t\tvar css = {};\n\t\t\tcss[_vertical ? "right" : "bottom"] = 0;\n\t\t\tcss[_vertical ? "border-top-width" : "border-left-width"] = 1;\n\t\t\t_util.css(triggerElem.firstChild, css);\n\t\t\t_util.css(triggerElem.firstChild.firstChild, {\n\t\t\t\tpadding: _vertical ? "0 8px 3px 8px" : "3px 4px"\n\t\t\t});\n\t\t\tdocument.body.appendChild(triggerElem); // directly add to body\n\t\t\tvar newGroup = {\n\t\t\t\ttriggerHook: Scene.triggerHook(),\n\t\t\t\telement: triggerElem,\n\t\t\t\tmembers: [Indicator]\n\t\t\t};\n\t\t\t_ctrl._indicators.groups.push(newGroup);\n\t\t\tIndicator.triggerGroup = newGroup;\n\t\t\t// update right away\n\t\t\t_ctrl._indicators.updateTriggerGroupLabel(newGroup);\n\t\t\t_ctrl._indicators.updateTriggerGroupPositions(newGroup);\n\t\t};\n\n\t\tvar removeTriggerGroup = function () {\n\t\t\t_ctrl._indicators.groups.splice(_ctrl._indicators.groups.indexOf(Indicator.triggerGroup), 1);\n\t\t\tIndicator.triggerGroup.element.parentNode.removeChild(Indicator.triggerGroup.element);\n\t\t\tIndicator.triggerGroup = undefined;\n\t\t};\n\n\t\t// updates the trigger group -> either join existing or add new one\n/*\t\n\t\t * Logic:\n\t\t * 1 if a trigger group exist, check if it\'s in sync with Scene settings – if so, nothing else needs to happen\n\t\t * 2 try to find an existing one that matches Scene parameters\n\t\t * \t 2.1 If a match is found check if already assigned to an existing group\n\t\t *\t\t\t If so:\n\t\t *       A: it was the last member of existing group -> kill whole group\n\t\t *       B: the existing group has other members -> just remove from member list\n\t\t *\t 2.2 Assign to matching group\n\t\t * 3 if no new match could be found, check if assigned to existing group\n\t\t *   A: yes, and it\'s the only member -> just update parameters and positions and keep using this group\n\t\t *   B: yes but there are other members -> remove from member list and create a new one\n\t\t *   C: no, so create a new one\n\t\t */\n\t\tvar updateTriggerGroup = function () {\n\t\t\tvar\n\t\t\ttriggerHook = Scene.triggerHook(),\n\t\t\t\tcloseEnough = 0.0001;\n\n\t\t\t// Have a group, check if it still matches\n\t\t\tif (Indicator.triggerGroup) {\n\t\t\t\tif (Math.abs(Indicator.triggerGroup.triggerHook - triggerHook) < closeEnough) {\n\t\t\t\t\t// _util.log(0, "trigger", options.name, "->", "no need to change, still in sync");\n\t\t\t\t\treturn; // all good\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Don\'t have a group, check if a matching one exists\n\t\t\t// _util.log(0, "trigger", options.name, "->", "out of sync!");\n\t\t\tvar\n\t\t\tgroups = _ctrl._indicators.groups,\n\t\t\t\tgroup, i = groups.length;\n\t\t\twhile (i--) {\n\t\t\t\tgroup = groups[i];\n\t\t\t\tif (Math.abs(group.triggerHook - triggerHook) < closeEnough) {\n\t\t\t\t\t// found a match!\n\t\t\t\t\t// _util.log(0, "trigger", options.name, "->", "found match");\n\t\t\t\t\tif (Indicator.triggerGroup) { // do I have an old group that is out of sync?\n\t\t\t\t\t\tif (Indicator.triggerGroup.members.length === 1) { // is it the only remaining group?\n\t\t\t\t\t\t\t// _util.log(0, "trigger", options.name, "->", "kill");\n\t\t\t\t\t\t\t// was the last member, remove the whole group\n\t\t\t\t\t\t\tremoveTriggerGroup();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tIndicator.triggerGroup.members.splice(Indicator.triggerGroup.members.indexOf(Indicator), 1); // just remove from memberlist of old group\n\t\t\t\t\t\t\t_ctrl._indicators.updateTriggerGroupLabel(Indicator.triggerGroup);\n\t\t\t\t\t\t\t_ctrl._indicators.updateTriggerGroupPositions(Indicator.triggerGroup);\n\t\t\t\t\t\t\t// _util.log(0, "trigger", options.name, "->", "removing from previous member list");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// join new group\n\t\t\t\t\tgroup.members.push(Indicator);\n\t\t\t\t\tIndicator.triggerGroup = group;\n\t\t\t\t\t_ctrl._indicators.updateTriggerGroupLabel(group);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// at this point I am obviously out of sync and don\'t match any other group\n\t\t\tif (Indicator.triggerGroup) {\n\t\t\t\tif (Indicator.triggerGroup.members.length === 1) {\n\t\t\t\t\t// _util.log(0, "trigger", options.name, "->", "updating existing");\n\t\t\t\t\t// out of sync but i\'m the only member => just change and update\n\t\t\t\t\tIndicator.triggerGroup.triggerHook = triggerHook;\n\t\t\t\t\t_ctrl._indicators.updateTriggerGroupPositions(Indicator.triggerGroup);\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\t// _util.log(0, "trigger", options.name, "->", "removing from previous member list");\n\t\t\t\t\tIndicator.triggerGroup.members.splice(Indicator.triggerGroup.members.indexOf(Indicator), 1); // just remove from memberlist of old group\n\t\t\t\t\t_ctrl._indicators.updateTriggerGroupLabel(Indicator.triggerGroup);\n\t\t\t\t\t_ctrl._indicators.updateTriggerGroupPositions(Indicator.triggerGroup);\n\t\t\t\t\tIndicator.triggerGroup = undefined; // need a brand new group...\n\t\t\t\t}\n\t\t\t}\n\t\t\t// _util.log(0, "trigger", options.name, "->", "add a new one");\n\t\t\t// did not find any match, make new trigger group\n\t\t\taddTriggerGroup();\n\t\t};\n\t};\n\n/*\n\t * ----------------------------------------------------------------\n\t * Templates for the indicators\n\t * ----------------------------------------------------------------\n\t */\n\tvar TPL = {\n\t\tstart: function (color) {\n\t\t\t// inner element (for bottom offset -1, while keeping top position 0)\n\t\t\tvar inner = document.createElement("div");\n\t\t\tinner.textContent = "start";\n\t\t\t_util.css(inner, {\n\t\t\t\tposition: "absolute",\n\t\t\t\toverflow: "visible",\n\t\t\t\t"border-width": 0,\n\t\t\t\t"border-style": "solid",\n\t\t\t\tcolor: color,\n\t\t\t\t"border-color": color\n\t\t\t});\n\t\t\tvar e = document.createElement(\'div\');\n\t\t\t// wrapper\n\t\t\t_util.css(e, {\n\t\t\t\tposition: "absolute",\n\t\t\t\toverflow: "visible",\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0\n\t\t\t});\n\t\t\te.appendChild(inner);\n\t\t\treturn e;\n\t\t},\n\t\tend: function (color) {\n\t\t\tvar e = document.createElement(\'div\');\n\t\t\te.textContent = "end";\n\t\t\t_util.css(e, {\n\t\t\t\tposition: "absolute",\n\t\t\t\toverflow: "visible",\n\t\t\t\t"border-width": 0,\n\t\t\t\t"border-style": "solid",\n\t\t\t\tcolor: color,\n\t\t\t\t"border-color": color\n\t\t\t});\n\t\t\treturn e;\n\t\t},\n\t\tbounds: function () {\n\t\t\tvar e = document.createElement(\'div\');\n\t\t\t_util.css(e, {\n\t\t\t\tposition: "absolute",\n\t\t\t\toverflow: "visible",\n\t\t\t\t"white-space": "nowrap",\n\t\t\t\t"pointer-events": "none",\n\t\t\t\t"font-size": FONT_SIZE\n\t\t\t});\n\t\t\te.style.zIndex = ZINDEX;\n\t\t\treturn e;\n\t\t},\n\t\ttrigger: function (color) {\n\t\t\t// inner to be above or below line but keep position\n\t\t\tvar inner = document.createElement(\'div\');\n\t\t\tinner.textContent = "trigger";\n\t\t\t_util.css(inner, {\n\t\t\t\tposition: "relative",\n\t\t\t});\n\t\t\t// inner wrapper for right: 0 and main element has no size\n\t\t\tvar w = document.createElement(\'div\');\n\t\t\t_util.css(w, {\n\t\t\t\tposition: "absolute",\n\t\t\t\toverflow: "visible",\n\t\t\t\t"border-width": 0,\n\t\t\t\t"border-style": "solid",\n\t\t\t\tcolor: color,\n\t\t\t\t"border-color": color\n\t\t\t});\n\t\t\tw.appendChild(inner);\n\t\t\t// wrapper\n\t\t\tvar e = document.createElement(\'div\');\n\t\t\t_util.css(e, {\n\t\t\t\tposition: "fixed",\n\t\t\t\toverflow: "visible",\n\t\t\t\t"white-space": "nowrap",\n\t\t\t\t"pointer-events": "none",\n\t\t\t\t"font-size": FONT_SIZE\n\t\t\t});\n\t\t\te.style.zIndex = ZINDEX;\n\t\t\te.appendChild(w);\n\t\t\treturn e;\n\t\t},\n\t};\n\n}));'},function(e,t,n){n(75),e.exports="hj.scrollMagic"},function(e,t){!function(){angular.module("hj.scrollMagic",[]).config(["$compileProvider",function(e){e.preAssignBindingsEnabled&&e.preAssignBindingsEnabled(!0)}]).provider("scrollMagic",function(){var e=this;e.addIndicators=!1,e.$get=["$rootScope",function(t){return{addIndicators:e.addIndicators}}]}).service("ScrollMagicService",["$document","scrollMagic",function(e,t){var n={};n.controller=new ScrollMagic.Controller;var i={},r={},o=function(e){var t=Array.prototype.slice.call(arguments,1);t.push(e),r[e].forEach(function(e){e.apply(null,t)}),r[e]=[]};return n.onSceneAdded=function(e,t){if(i[e])return void t(i[e],e);r[e]||(r[e]=[]),r[e].push(t)},n.getSceneIds=function(e){var t=Object.keys(i)[0]||0;return"[object Array]"===Object.prototype.toString.call(e)?e:e&&e.length?[e]:[t]},n.getScene=function(e){return e=e||n.getSceneIds(e)[0],i[e]},n.setScene=function(e,t){i[e]=t,r[e]&&o(e,t)},n.destroyScene=function(e){n.controller.removeScene(i[e]),i[e].destroy(),delete r[e],delete i[e]},n.getTargetElement=function(t,n){return n?"string"==typeof n?"parent"===n?t.parent()[0]:e.querySelector(n):n:t[0]},n}]).directive("smScene",["scrollMagic","ScrollMagicService",function(e,t){return{restrict:"AE",scope:{smScene:"=",sceneId:"=",triggerElement:"=",duration:"=",offset:"=",triggerHook:"=",onEnter:"&",onLeave:"&"},bindToController:!0,controllerAs:"vm",controller:["$scope","$element","$attrs","$document","$timeout",function(n,i,r,o,a){var s,l=this,c=t.getSceneIds(l.smScene||l.sceneId||r.smScene)[0];t.getScene(c)&&t.destroyScene(c);var u=function(){var r,o=l.triggerElement?l.triggerElement:i[0];"string"==typeof l.offset&&(r=o.clientHeight*(parseFloat(l.offset)/100)),"number"==typeof l.offset&&(r=l.offset),"function"==typeof l.offset&&(r=l.offset()),"function"==typeof l.duration&&(l.duration=l.duration.bind(null,c,o,r,l.triggerHook)),s=new ScrollMagic.Scene({triggerElement:o,duration:void 0!==l.duration?l.duration:0,offset:void 0!==r?r:0,triggerHook:void 0!==l.triggerHook?l.triggerHook:.5}),l.onEnter&&s.on("enter",function(e){var t={$event:e};n.$apply(function(){l.onEnter(t)})}),l.onLeave&&s.on("leave",function(e){var t={$event:e};n.$apply(function(){l.onLeave(t)})}),e.addIndicators&&s.addIndicators({name:c}),s.addTo(t.controller),t.setScene(c,s)};l.$onDestroy=function(){s.destroy()},a(u)}]}}]).directive("smPin",["ScrollMagicService",function(e){return{restrict:"AE",scope:{smPin:"=",sceneId:"=",targetElement:"="},bindToController:!0,controllerAs:"vm",controller:["$scope","$element","$attrs",function(t,n,i){var r=this;e.getSceneIds(r.smPin||r.sceneId||i.smPin).forEach(function(t){var i=function(t,i){t.setPin(e.getTargetElement(n,r.targetElement))};e.onSceneAdded(t,i)})}]}}]).directive("smClassToggle",["ScrollMagicService",function(e){return{restrict:"AE",scope:{smClassToggle:"=",sceneId:"=",classes:"=",targetElement:"="},bindToController:!0,controllerAs:"vm",controller:["$scope","$element","$attrs",function(t,n,i){var r=this;e.getSceneIds(r.smClassToggle||r.sceneId||i.smClassToggle).forEach(function(t,i){var o=r.classes;"[object Array]"===Object.prototype.toString.call(o)&&(o=o[i]);var a=function(t,i){t.setClassToggle(e.getTargetElement(n,r.targetElement),o)};e.onSceneAdded(t,a)})}]}}]).directive("smTween",["ScrollMagicService",function(e){return{restrict:"AE",scope:{smTween:"=",sceneId:"=",duration:"=",vars:"=",fromVars:"=",toVars:"=",targetElement:"="},bindToController:!0,controllerAs:"vm",controller:["$scope","$element","$attrs",function(t,n,i){var r=this,o=e.getSceneIds(r.smTween||r.sceneId||i.smTween)[0],a=r.duration,s=angular.copy(r.fromVars),l=angular.copy(r.toVars||r.vars),c=s&&l?"fromTo":s?"from":"to",u=function(t,i){t.timeline||(t.timeline=new TimelineMax);var o=TweenMax[c](e.getTargetElement(n,r.targetElement),a||1,s||l,l);t.timeline.add([o],"normal"),t.setTween(t.timeline)};e.onSceneAdded(o,u)}]}}])}()},function(e,t,n){var i,r,o;!function(){!function(n,a){"use strict";r=[],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(0,function(){"use strict";function checkHacks(n,i,r,o){"content"===r&&o.indexOf("viewport-units-buggyfill")>-1&&o.replace(t,"").split(";").forEach(function(t){var r=t.split(":");if(2===r.length){var o=r[0].trim();if("viewport-units-buggyfill"!==o){var a=r[1].trim();if(n.push([i,o,a]),e.test(a)){var s=a.replace(e,"-webkit-calc(");n.push([i,o,s])}}}})}var e=/calc\(/g,t=/["']/g,n=window.navigator.userAgent,i=/MSIE [0-9]\./i.test(n);return i||(i=!!navigator.userAgent.match(/MSIE 10\.|Trident.*rv[ :]*1[01]\.| Edge\/1\d\./)),{required:function(e){return e.isMobileSafari||i},initialize:function(){},initializeEvents:function(e,t,n){e.force||i&&!e._listeningToResize&&(window.addEventListener("resize",n,!0),e._listeningToResize=!0)},findDeclarations:function(e,t,n,i){null!==n&&checkHacks(e,t,n,i)},overwriteDeclaration:function(e,t,n){return i&&"filter"===t&&(n=n.replace(/px/g,"")),n}}})}()},function(e,t,n){var i,r,o;!function(){!function(n,a){"use strict";r=[],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(0,function(){"use strict";function debounce(e,t){var n;return function(){var i=this,r=arguments,o=function(){e.apply(i,r)};clearTimeout(n),n=setTimeout(o,t)}}function inIframe(){try{return window.self!==window.top}catch(e){return!0}}function initialize(t){if(!r){if(!0===t&&(t={force:!0}),e=t||{},e.isMobileSafari=p,e.isBadStockAndroid=h,!e.ignoreVmax||e.force||u||(c=!1),u||!e.force&&!p&&!c&&!h&&!d&&(!e.hacks||!e.hacks.required(e)))return window.console&&u&&console.info("viewport-units-buggyfill requires a proper CSSOM and basic viewport unit support, which are not available in IE8 and below"),{init:function(){}};window.dispatchEvent(new f("viewport-units-buggyfill-init")),e.hacks&&e.hacks.initialize(e),r=!0,i=document.createElement("style"),i.id="patched-viewport",document[e.appendToBody?"body":"head"].appendChild(i),importCrossOriginLinks(function(){var t=debounce(refresh,e.refreshDebounceWait||100);window.addEventListener("orientationchange",t,!0),window.addEventListener("pageshow",t,!0),(e.force||c||inIframe())&&(window.addEventListener("resize",t,!0),e._listeningToResize=!0),e.hacks&&e.hacks.initializeEvents(e,refresh,t),refresh()})}}function updateStyles(){i.textContent=getReplacedViewportUnits(),i.parentNode.appendChild(i),window.dispatchEvent(new f("viewport-units-buggyfill-style"))}function refresh(){r&&(findProperties(),setTimeout(function(){updateStyles()},1))}function processStylesheet(e){try{if(!e.cssRules)return}catch(e){if("SecurityError"!==e.name)throw e;return}for(var t=[],n=0;n<e.cssRules.length;n++){var i=e.cssRules[n];t.push(i)}return t}function findProperties(){return n=[],l.call(document.styleSheets,function(e){var t=processStylesheet(e);t&&"patched-viewport"!==e.ownerNode.id&&"ignore"!==e.ownerNode.getAttribute("data-viewport-units-buggyfill")&&(e.media&&e.media.mediaText&&window.matchMedia&&!window.matchMedia(e.media.mediaText).matches||l.call(t,findDeclarations))}),n}function findDeclarations(t){if(7===t.type){var i;try{i=t.cssText}catch(e){return}return a.lastIndex=0,void(a.test(i)&&!s.test(i)&&(n.push([t,null,i]),e.hacks&&e.hacks.findDeclarations(n,t,null,i)))}if(!t.style){if(!t.cssRules)return;return void l.call(t.cssRules,function(e){findDeclarations(e)})}l.call(t.style,function(i){var r=t.style.getPropertyValue(i);t.style.getPropertyPriority(i)&&(r+=" !important"),a.lastIndex=0,a.test(r)&&(n.push([t,i,r]),e.hacks&&e.hacks.findDeclarations(n,t,i,r))})}function getReplacedViewportUnits(){t=getViewport();var e,i,r=[],o=[];return n.forEach(function(t){var n=overwriteDeclaration.apply(null,t),a=n.selector.length?n.selector.join(" {\n")+" {\n":"",s=new Array(n.selector.length+1).join("\n}");if(!a||a!==e)return o.length&&(r.push(e+o.join("\n")+i),o.length=0),void(a?(e=a,i=s,o.push(n.content)):(r.push(n.content),e=null,i=null));a&&!e&&(e=a,i=s),o.push(n.content)}),o.length&&r.push(e+o.join("\n")+i),d&&r.push("* { content: normal !important; }"),r.join("\n\n")}function overwriteDeclaration(t,n,i){var r,o=[];r=i.replace(a,replaceValues),e.hacks&&(r=e.hacks.overwriteDeclaration(t,n,r)),n&&(o.push(t.selectorText),r=n+": "+r+";");for(var s=t.parentRule;s;)s.media?o.unshift("@media "+s.media.mediaText):s.conditionText&&o.unshift("@supports "+s.conditionText),s=s.parentRule;return{selector:o,content:r}}function replaceValues(e,n,i){var r=t[i];return parseFloat(n)/100*r+"px"}function getViewport(){var e=window.innerHeight,t=window.innerWidth;return{vh:e,vw:t,vmax:Math.max(t,e),vmin:Math.min(t,e)}}function importCrossOriginLinks(e){var t=0,n=function(){--t||e()};l.call(document.styleSheets,function(e){e.href&&origin(e.href)!==origin(location.href)&&"ignore"!==e.ownerNode.getAttribute("data-viewport-units-buggyfill")&&(t++,convertLinkToStyle(e.ownerNode,n))}),t||e()}function origin(e){return e.slice(0,e.indexOf("/",e.indexOf("://")+3))}function convertLinkToStyle(e,t){getCors(e.href,function(){var n=document.createElement("style");n.media=e.media,n.setAttribute("data-href",e.href),n.textContent=this.responseText,e.parentNode.replaceChild(n,e),t()},t)}function getCors(e,t,n){var i=new XMLHttpRequest;if("withCredentials"in i)i.open("GET",e,!0);else{if("undefined"==typeof XDomainRequest)throw new Error("cross-domain XHR not supported");i=new XDomainRequest,i.open("GET",e)}return i.onload=t,i.onerror=n,i.send(),i}var e,t,n,i,r=!1,o=window.navigator.userAgent,a=/([+-]?[0-9.]+)(vh|vw|vmin|vmax)/g,s=/(https?:)?\/\//,l=[].forEach,c=/MSIE [0-9]\./i.test(o),u=/MSIE [0-8]\./i.test(o),d=o.indexOf("Opera Mini")>-1,p=/(iPhone|iPod|iPad).+AppleWebKit/i.test(o)&&function(){var e=o.match(/OS (\d)/);return e&&e.length>1&&parseInt(e[1])<10}(),h=function(){return o.indexOf(" Android ")>-1&&(o.indexOf("Version/")>-1&&parseFloat((o.match("Android ([0-9.]+)")||[])[1])<=4.4)}();c||(c=!!navigator.userAgent.match(/MSIE 10\.|Trident.*rv[ :]*1[01]\.| Edge\/1\d\./));try{new f("test")}catch(e){var f=function(e,t){var n;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},n=document.createEvent("CustomEvent"),n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n};f.prototype=window.Event.prototype,window.CustomEvent=f}return{version:"0.6.1",findProperties:findProperties,getCss:getReplacedViewportUnits,init:initialize,refresh:refresh}})}()},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(79),a=n(81),s=n(86),l=n(87),c=n(88),u=n(89),d=n(92),p=n(93),h=r.a.module("app.common",[o.a.name,a.a.name,s.a.name,l.a.name,c.a.name,u.a.name,d.a.name,p.a.name]);t.a=h},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(8),a=(n.n(o),window.OpenSeadragon);t.a=r.a.module("hj.openSeadragon",[]).directive("hjOpenSeadragon",["$window","$document",function(e,t){return{restrict:"AE",scope:{tileSources:"=",options:"=?"},link:function(e,t,n){var i={element:t[0],tileSources:e.tileSources,prefixUrl:""},o=r.a.extend(i,e.options),s=function(){var t=a(o);["open","tile-loaded","tile-drawn"].forEach(function(n){t.addHandler(n,function(t){e.$emit("hjOpenSeadragon:"+n,t)})})};e.$watch("tileSources",function(e){e&&(o.tileSources=e,s())})}}}])},function(e,t){e.exports='var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};//! openseadragon 2.1.0\n//! Built on 2016-02-18\n//! Git commit: v2.1.0-114-f1cdf90\n//! http://openseadragon.github.io\n//! License: http://openseadragon.github.io/license/\n/*\n * OpenSeadragon\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *//*\n * Portions of this source file taken from jQuery:\n *\n * Copyright 2011 John Resig\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * "Software"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n *//*\n * Portions of this source file taken from mattsnider.com:\n *\n * Copyright (c) 2006-2013 Matt Snider\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the "Software"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included\n * in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n * IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n * CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT\n * OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR\n * THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n *//**\n * @version  openseadragon 2.1.0\n *\n * @file\n * <h2><strong>OpenSeadragon - Javascript Deep Zooming</strong></h2>\n * <p>\n * OpenSeadragon provides an html interface for creating\n * deep zoom user interfaces.  The simplest examples include deep\n * zoom for large resolution images, and complex examples include\n * zoomable map interfaces driven by SVG files.\n * </p>\n *\n *//**\n * @module OpenSeadragon\n *\n *//**\n * @namespace OpenSeadragon\n *\n * @classdesc The root namespace for OpenSeadragon.  All utility methods\n * and classes are defined on or below this namespace.\n *\n */// Typedefs\n/**\n  * All required and optional settings for instantiating a new instance of an OpenSeadragon image viewer.\n  *\n  * @typedef {Object} Options\n  * @memberof OpenSeadragon\n  *\n  * @property {String} id\n  *     Id of the element to append the viewer\'s container element to. If not provided, the \'element\' property must be provided.\n  *     If both the element and id properties are specified, the viewer is appended to the element provided in the element property.\n  *\n  * @property {Element} element\n  *     The element to append the viewer\'s container element to. If not provided, the \'id\' property must be provided.\n  *     If both the element and id properties are specified, the viewer is appended to the element provided in the element property.\n  *\n  * @property {Array|String|Function|Object} [tileSources=null]\n  *     Tile source(s) to open initially. This is a complex parameter; see\n  *     {@link OpenSeadragon.Viewer#open} for details.\n  *\n  * @property {Number} [tabIndex=0]\n  *     Tabbing order index to assign to the viewer element. Positive values are selected in increasing order. When tabIndex is 0\n  *     source order is used. A negative value omits the viewer from the tabbing order.\n  *\n  * @property {Array} overlays Array of objects defining permanent overlays of\n  *     the viewer. The overlays added via this option and later removed with\n  *     {@link OpenSeadragon.Viewer#removeOverlay} will be added back when a new\n  *     image is opened.\n  *     To add overlays which can be definitively removed, one must use\n  *     {@link OpenSeadragon.Viewer#addOverlay}\n  *     If displaying a sequence of images, the overlays can be associated\n  *     with a specific page by passing the overlays array to the page\'s\n  *     tile source configuration.\n  *     Expected properties:\n  *     * x, y, (or px, py for pixel coordinates) to define the location.\n  *     * width, height in point if using x,y or in pixels if using px,py. If width\n  *       and height are specified, the overlay size is adjusted when zooming,\n  *       otherwise the size stays the size of the content (or the size defined by CSS).\n  *     * className to associate a class to the overlay\n  *     * id to set the overlay element. If an element with this id already exists,\n  *       it is reused, otherwise it is created. If not specified, a new element is\n  *       created.\n  *     * placement a string to define the relative position to the viewport.\n  *       Only used if no width and height are specified. Default: \'TOP_LEFT\'.\n  *       See {@link OpenSeadragon.OverlayPlacement} for possible values.\n  *\n  * @property {String} [xmlPath=null]\n  *     <strong>DEPRECATED</strong>. A relative path to load a DZI file from the server.\n  *     Prefer the newer Options.tileSources.\n  *\n  * @property {String} [prefixUrl=\'/images/\']\n  *     Prepends the prefixUrl to navImages paths, which is very useful\n  *     since the default paths are rarely useful for production\n  *     environments.\n  *\n  * @property {OpenSeadragon.NavImages} [navImages]\n  *     An object with a property for each button or other built-in navigation\n  *     control, eg the current \'zoomIn\', \'zoomOut\', \'home\', and \'fullpage\'.\n  *     Each of those in turn provides an image path for each state of the button\n  *     or navigation control, eg \'REST\', \'GROUP\', \'HOVER\', \'PRESS\'. Finally the\n  *     image paths, by default assume there is a folder on the servers root path\n  *     called \'/images\', eg \'/images/zoomin_rest.png\'.  If you need to adjust\n  *     these paths, prefer setting the option.prefixUrl rather than overriding\n  *     every image path directly through this setting.\n  *\n  * @property {Boolean} [debugMode=false]\n  *     TODO: provide an in-screen panel providing event detail feedback.\n  *\n  * @property {String} [debugGridColor=\'#437AB2\']\n  *\n  * @property {Number} [blendTime=0]\n  *     Specifies the duration of animation as higher or lower level tiles are\n  *     replacing the existing tile.\n  *\n  * @property {Boolean} [alwaysBlend=false]\n  *     Forces the tile to always blend.  By default the tiles skip blending\n  *     when the blendTime is surpassed and the current animation frame would\n  *     not complete the blend.\n  *\n  * @property {Boolean} [autoHideControls=true]\n  *     If the user stops interacting with the viewport, fade the navigation\n  *     controls.  Useful for presentation since the controls are by default\n  *     floated on top of the image the user is viewing.\n  *\n  * @property {Boolean} [immediateRender=false]\n  *     Render the best closest level first, ignoring the lowering levels which\n  *     provide the effect of very blurry to sharp. It is recommended to change\n  *     setting to true for mobile devices.\n  *\n  * @property {Number} [defaultZoomLevel=0]\n  *     Zoom level to use when image is first opened or the home button is clicked.\n  *     If 0, adjusts to fit viewer.\n  *\n  * @property {Number} [opacity=1]\n  *     Default opacity of the tiled images (1=opaque, 0=transparent)\n  *\n  * @property {String} [compositeOperation=null]\n  *     Valid values are \'source-over\', \'source-atop\', \'source-in\', \'source-out\',\n  *     \'destination-over\', \'destination-atop\', \'destination-in\',\n  *     \'destination-out\', \'lighter\', \'copy\' or \'xor\'\n  *\n  * @property {String|CanvasGradient|CanvasPattern|Function} [placeholderFillStyle=null]\n  *     Draws a colored rectangle behind the tile if it is not loaded yet.\n  *     You can pass a CSS color value like "#FF8800".\n  *     When passing a function the tiledImage and canvas context are available as argument which is useful when you draw a gradient or pattern.\n  *\n  * @property {Number} [degrees=0]\n  *     Initial rotation.\n  *\n  * @property {Number} [minZoomLevel=null]\n  *\n  * @property {Number} [maxZoomLevel=null]\n  *\n  * @property {Boolean} [homeFillsViewer=false]\n  *     Make the \'home\' button fill the viewer and clip the image, instead\n  *     of fitting the image to the viewer and letterboxing.\n  *\n  * @property {Boolean} [panHorizontal=true]\n  *     Allow horizontal pan.\n  *\n  * @property {Boolean} [panVertical=true]\n  *     Allow vertical pan.\n  *\n  * @property {Boolean} [constrainDuringPan=false]\n  *\n  * @property {Boolean} [wrapHorizontal=false]\n  *     Set to true to force the image to wrap horizontally within the viewport.\n  *     Useful for maps or images representing the surface of a sphere or cylinder.\n  *\n  * @property {Boolean} [wrapVertical=false]\n  *     Set to true to force the image to wrap vertically within the viewport.\n  *     Useful for maps or images representing the surface of a sphere or cylinder.\n  *\n  * @property {Number} [minZoomImageRatio=0.9]\n  *     The minimum percentage ( expressed as a number between 0 and 1 ) of\n  *     the viewport height or width at which the zoom out will be constrained.\n  *     Setting it to 0, for example will allow you to zoom out infinity.\n  *\n  * @property {Number} [maxZoomPixelRatio=1.1]\n  *     The maximum ratio to allow a zoom-in to affect the highest level pixel\n  *     ratio. This can be set to Infinity to allow \'infinite\' zooming into the\n  *     image though it is less effective visually if the HTML5 Canvas is not\n  *     availble on the viewing device.\n  *\n  * @property {Number} [smoothTileEdgesMinZoom=1.1]\n  *     A zoom percentage ( where 1 is 100% ) of the highest resolution level.\n  *     When zoomed in beyond this value alternative compositing will be used to\n  *     smooth out the edges between tiles. This will have a performance impact.\n  *\n  * @property {Boolean} [autoResize=true]\n  *     Set to false to prevent polling for viewer size changes. Useful for providing custom resize behavior.\n  *\n  * @property {Boolean} [preserveImageSizeOnResize=false]\n  *     Set to true to have the image size preserved when the viewer is resized. This requires autoResize=true (default).\n  *\n  * @property {Number} [minScrollDeltaTime=50]\n  *     Number of milliseconds between canvas-scroll events. This value helps normalize the rate of canvas-scroll\n  *     events between different devices, causing the faster devices to slow down enough to make the zoom control\n  *     more manageable.\n  *\n  * @property {Number} [pixelsPerWheelLine=40]\n  *     For pixel-resolution scrolling devices, the number of pixels equal to one scroll line.\n  *\n  * @property {Number} [visibilityRatio=0.5]\n  *     The percentage ( as a number from 0 to 1 ) of the source image which\n  *     must be kept within the viewport.  If the image is dragged beyond that\n  *     limit, it will \'bounce\' back until the minimum visibility ratio is\n  *     achieved.  Setting this to 0 and wrapHorizontal ( or wrapVertical ) to\n  *     true will provide the effect of an infinitely scrolling viewport.\n  *\n  * @property {Object} [viewportMargins={}]\n  *     Pushes the "home" region in from the sides by the specified amounts.\n  *     Possible subproperties (Numbers, in screen coordinates): left, top, right, bottom.\n  *\n  * @property {Number} [imageLoaderLimit=0]\n  *     The maximum number of image requests to make concurrently. By default\n  *     it is set to 0 allowing the browser to make the maximum number of\n  *     image requests in parallel as allowed by the browsers policy.\n  *\n  * @property {Number} [clickTimeThreshold=300]\n  *      The number of milliseconds within which a pointer down-up event combination\n  *      will be treated as a click gesture.\n  *\n  * @property {Number} [clickDistThreshold=5]\n  *      The maximum distance allowed between a pointer down event and a pointer up event\n  *      to be treated as a click gesture.\n  *\n  * @property {Number} [dblClickTimeThreshold=300]\n  *      The number of milliseconds within which two pointer down-up event combinations\n  *      will be treated as a double-click gesture.\n  *\n  * @property {Number} [dblClickDistThreshold=20]\n  *      The maximum distance allowed between two pointer click events\n  *      to be treated as a double-click gesture.\n  *\n  * @property {Number} [springStiffness=6.5]\n  *\n  * @property {Number} [animationTime=1.2]\n  *     Specifies the animation duration per each {@link OpenSeadragon.Spring}\n  *     which occur when the image is dragged or zoomed.\n  *\n  * @property {OpenSeadragon.GestureSettings} [gestureSettingsMouse]\n  *     Settings for gestures generated by a mouse pointer device. (See {@link OpenSeadragon.GestureSettings})\n  * @property {Boolean} [gestureSettingsMouse.scrollToZoom=true] - Zoom on scroll gesture\n  * @property {Boolean} [gestureSettingsMouse.clickToZoom=true] - Zoom on click gesture\n  * @property {Boolean} [gestureSettingsMouse.dblClickToZoom=false] - Zoom on double-click gesture. Note: If set to true\n  *     then clickToZoom should be set to false to prevent multiple zooms.\n  * @property {Boolean} [gestureSettingsMouse.pinchToZoom=false] - Zoom on pinch gesture\n  * @property {Boolean} [gestureSettingsMouse.flickEnabled=false] - Enable flick gesture\n  * @property {Number} [gestureSettingsMouse.flickMinSpeed=120] - If flickEnabled is true, the minimum speed to initiate a flick gesture (pixels-per-second)\n  * @property {Number} [gestureSettingsMouse.flickMomentum=0.25] - If flickEnabled is true, the momentum factor for the flick gesture\n  * @property {Boolean} [gestureSettingsMouse.pinchRotate=false] - If pinchRotate is true, the user will have the ability to rotate the image using their fingers.\n  *\n  * @property {OpenSeadragon.GestureSettings} [gestureSettingsTouch]\n  *     Settings for gestures generated by a touch pointer device. (See {@link OpenSeadragon.GestureSettings})\n  * @property {Boolean} [gestureSettingsTouch.scrollToZoom=false] - Zoom on scroll gesture\n  * @property {Boolean} [gestureSettingsTouch.clickToZoom=false] - Zoom on click gesture\n  * @property {Boolean} [gestureSettingsTouch.dblClickToZoom=true] - Zoom on double-click gesture. Note: If set to true\n  *     then clickToZoom should be set to false to prevent multiple zooms.\n  * @property {Boolean} [gestureSettingsTouch.pinchToZoom=true] - Zoom on pinch gesture\n  * @property {Boolean} [gestureSettingsTouch.flickEnabled=true] - Enable flick gesture\n  * @property {Number} [gestureSettingsTouch.flickMinSpeed=120] - If flickEnabled is true, the minimum speed to initiate a flick gesture (pixels-per-second)\n  * @property {Number} [gestureSettingsTouch.flickMomentum=0.25] - If flickEnabled is true, the momentum factor for the flick gesture\n  * @property {Boolean} [gestureSettingsTouch.pinchRotate=false] - If pinchRotate is true, the user will have the ability to rotate the image using their fingers.\n  *\n  * @property {OpenSeadragon.GestureSettings} [gestureSettingsPen]\n  *     Settings for gestures generated by a pen pointer device. (See {@link OpenSeadragon.GestureSettings})\n  * @property {Boolean} [gestureSettingsPen.scrollToZoom=false] - Zoom on scroll gesture\n  * @property {Boolean} [gestureSettingsPen.clickToZoom=true] - Zoom on click gesture\n  * @property {Boolean} [gestureSettingsPen.dblClickToZoom=false] - Zoom on double-click gesture. Note: If set to true\n  *     then clickToZoom should be set to false to prevent multiple zooms.\n  * @property {Boolean} [gestureSettingsPen.pinchToZoom=false] - Zoom on pinch gesture\n  * @property {Boolean} [gestureSettingsPen.flickEnabled=false] - Enable flick gesture\n  * @property {Number} [gestureSettingsPen.flickMinSpeed=120] - If flickEnabled is true, the minimum speed to initiate a flick gesture (pixels-per-second)\n  * @property {Number} [gestureSettingsPen.flickMomentum=0.25] - If flickEnabled is true, the momentum factor for the flick gesture\n  * @property {Boolean} [gestureSettingsPen.pinchRotate=false] - If pinchRotate is true, the user will have the ability to rotate the image using their fingers.\n  *\n  * @property {OpenSeadragon.GestureSettings} [gestureSettingsUnknown]\n  *     Settings for gestures generated by unknown pointer devices. (See {@link OpenSeadragon.GestureSettings})\n  * @property {Boolean} [gestureSettingsUnknown.scrollToZoom=true] - Zoom on scroll gesture\n  * @property {Boolean} [gestureSettingsUnknown.clickToZoom=false] - Zoom on click gesture\n  * @property {Boolean} [gestureSettingsUnknown.dblClickToZoom=true] - Zoom on double-click gesture. Note: If set to true\n  *     then clickToZoom should be set to false to prevent multiple zooms.\n  * @property {Boolean} [gestureSettingsUnknown.pinchToZoom=true] - Zoom on pinch gesture\n  * @property {Boolean} [gestureSettingsUnknown.flickEnabled=true] - Enable flick gesture\n  * @property {Number} [gestureSettingsUnknown.flickMinSpeed=120] - If flickEnabled is true, the minimum speed to initiate a flick gesture (pixels-per-second)\n  * @property {Number} [gestureSettingsUnknown.flickMomentum=0.25] - If flickEnabled is true, the momentum factor for the flick gesture\n  * @property {Boolean} [gestureSettingsUnknown.pinchRotate=false] - If pinchRotate is true, the user will have the ability to rotate the image using their fingers.\n  *\n  * @property {Number} [zoomPerClick=2.0]\n  *     The "zoom distance" per mouse click or touch tap. <em><strong>Note:</strong> Setting this to 1.0 effectively disables the click-to-zoom feature (also see gestureSettings[Mouse|Touch|Pen].clickToZoom/dblClickToZoom).</em>\n  *\n  * @property {Number} [zoomPerScroll=1.2]\n  *     The "zoom distance" per mouse scroll or touch pinch. <em><strong>Note:</strong> Setting this to 1.0 effectively disables the mouse-wheel zoom feature (also see gestureSettings[Mouse|Touch|Pen].scrollToZoom}).</em>\n  *\n  * @property {Number} [zoomPerSecond=1.0]\n  *     The number of seconds to animate a single zoom event over.\n  *\n  * @property {Boolean} [showNavigator=false]\n  *     Set to true to make the navigator minimap appear.\n  *\n  * @property {String} [navigatorId=navigator-GENERATED DATE]\n  *     The ID of a div to hold the navigator minimap.\n  *     If an ID is specified, the navigatorPosition, navigatorSizeRatio, navigatorMaintainSizeRatio, and navigatorTop|Left|Height|Width options will be ignored.\n  *     If an ID is not specified, a div element will be generated and placed on top of the main image.\n  *\n  * @property {String} [navigatorPosition=\'TOP_RIGHT\']\n  *     Valid values are \'TOP_LEFT\', \'TOP_RIGHT\', \'BOTTOM_LEFT\', \'BOTTOM_RIGHT\', or \'ABSOLUTE\'.<br>\n  *     If \'ABSOLUTE\' is specified, then navigatorTop|Left|Height|Width determines the size and position of the navigator minimap in the viewer, and navigatorSizeRatio and navigatorMaintainSizeRatio are ignored.<br>\n  *     For \'TOP_LEFT\', \'TOP_RIGHT\', \'BOTTOM_LEFT\', and \'BOTTOM_RIGHT\', the navigatorSizeRatio or navigatorHeight|Width values determine the size of the navigator minimap.\n  *\n  * @property {Number} [navigatorSizeRatio=0.2]\n  *     Ratio of navigator size to viewer size. Ignored if navigatorHeight|Width are specified.\n  *\n  * @property {Boolean} [navigatorMaintainSizeRatio=false]\n  *     If true, the navigator minimap is resized (using navigatorSizeRatio) when the viewer size changes.\n  *\n  * @property {Number|String} [navigatorTop=null]\n  *     Specifies the location of the navigator minimap (see navigatorPosition).\n  *\n  * @property {Number|String} [navigatorLeft=null]\n  *     Specifies the location of the navigator minimap (see navigatorPosition).\n  *\n  * @property {Number|String} [navigatorHeight=null]\n  *     Specifies the size of the navigator minimap (see navigatorPosition).\n  *     If specified, navigatorSizeRatio and navigatorMaintainSizeRatio are ignored.\n  *\n  * @property {Number|String} [navigatorWidth=null]\n  *     Specifies the size of the navigator minimap (see navigatorPosition).\n  *     If specified, navigatorSizeRatio and navigatorMaintainSizeRatio are ignored.\n  *\n  * @property {Boolean} [navigatorAutoResize=true]\n  *     Set to false to prevent polling for navigator size changes. Useful for providing custom resize behavior.\n  *     Setting to false can also improve performance when the navigator is configured to a fixed size.\n  *\n  * @property {Boolean} [navigatorRotate=true]\n  *     If true, the navigator will be rotated together with the viewer.\n  *\n  * @property {Number} [controlsFadeDelay=2000]\n  *     The number of milliseconds to wait once the user has stopped interacting\n  *     with the interface before begining to fade the controls. Assumes\n  *     showNavigationControl and autoHideControls are both true.\n  *\n  * @property {Number} [controlsFadeLength=1500]\n  *     The number of milliseconds to animate the controls fading out.\n  *\n  * @property {Number} [maxImageCacheCount=200]\n  *     The max number of images we should keep in memory (per drawer).\n  *\n  * @property {Number} [timeout=30000]\n  *\n  * @property {Boolean} [useCanvas=true]\n  *     Set to false to not use an HTML canvas element for image rendering even if canvas is supported.\n  *\n  * @property {Number} [minPixelRatio=0.5]\n  *     The higher the minPixelRatio, the lower the quality of the image that\n  *     is considered sufficient to stop rendering a given zoom level.  For\n  *     example, if you are targeting mobile devices with less bandwith you may\n  *     try setting this to 1.5 or higher.\n  *\n  * @property {Boolean} [mouseNavEnabled=true]\n  *     Is the user able to interact with the image via mouse or touch. Default\n  *     interactions include draging the image in a plane, and zooming in toward\n  *     and away from the image.\n  *\n  * @property {Boolean} [showNavigationControl=true]\n  *     Set to false to prevent the appearance of the default navigation controls.<br>\n  *     Note that if set to false, the customs buttons set by the options\n  *     zoomInButton, zoomOutButton etc, are rendered inactive.\n  *\n  * @property {OpenSeadragon.ControlAnchor} [navigationControlAnchor=TOP_LEFT]\n  *     Placement of the default navigation controls.\n  *     To set the placement of the sequence controls, see the\n  *     sequenceControlAnchor option.\n  *\n  * @property {Boolean} [showZoomControl=true]\n  *     If true then + and - buttons to zoom in and out are displayed.<br>\n  *     Note: {@link OpenSeadragon.Options.showNavigationControl} is overriding\n  *     this setting when set to false.\n  *\n  * @property {Boolean} [showHomeControl=true]\n  *     If true then the \'Go home\' button is displayed to go back to the original\n  *     zoom and pan.<br>\n  *     Note: {@link OpenSeadragon.Options.showNavigationControl} is overriding\n  *     this setting when set to false.\n  *\n  * @property {Boolean} [showFullPageControl=true]\n  *     If true then the \'Toggle full page\' button is displayed to switch\n  *     between full page and normal mode.<br>\n  *     Note: {@link OpenSeadragon.Options.showNavigationControl} is overriding\n  *     this setting when set to false.\n  *\n  * @property {Boolean} [showRotationControl=false]\n  *     If true then the rotate left/right controls will be displayed as part of the\n  *     standard controls. This is also subject to the browser support for rotate\n  *     (e.g. viewer.drawer.canRotate()).<br>\n  *     Note: {@link OpenSeadragon.Options.showNavigationControl} is overriding\n  *     this setting when set to false.\n  *\n  * @property {Boolean} [showSequenceControl=true]\n  *     If sequenceMode is true, then provide buttons for navigating forward and\n  *     backward through the images.\n  *\n  * @property {OpenSeadragon.ControlAnchor} [sequenceControlAnchor=TOP_LEFT]\n  *     Placement of the default sequence controls.\n  *\n  * @property {Boolean} [navPrevNextWrap=false]\n  *     If true then the \'previous\' button will wrap to the last image when\n  *     viewing the first image and the \'next\' button will wrap to the first\n  *     image when viewing the last image.\n  *\n  * @property {String} zoomInButton\n  *     Set the id of the custom \'Zoom in\' button to use.\n  *     This is useful to have a custom button anywhere in the web page.<br>\n  *     To only change the button images, consider using\n  *     {@link OpenSeadragon.Options.navImages}\n  *\n  * @property {String} zoomOutButton\n  *     Set the id of the custom \'Zoom out\' button to use.\n  *     This is useful to have a custom button anywhere in the web page.<br>\n  *     To only change the button images, consider using\n  *     {@link OpenSeadragon.Options.navImages}\n  *\n  * @property {String} homeButton\n  *     Set the id of the custom \'Go home\' button to use.\n  *     This is useful to have a custom button anywhere in the web page.<br>\n  *     To only change the button images, consider using\n  *     {@link OpenSeadragon.Options.navImages}\n  *\n  * @property {String} fullPageButton\n  *     Set the id of the custom \'Toggle full page\' button to use.\n  *     This is useful to have a custom button anywhere in the web page.<br>\n  *     To only change the button images, consider using\n  *     {@link OpenSeadragon.Options.navImages}\n  *\n  * @property {String} rotateLeftButton\n  *     Set the id of the custom \'Rotate left\' button to use.\n  *     This is useful to have a custom button anywhere in the web page.<br>\n  *     To only change the button images, consider using\n  *     {@link OpenSeadragon.Options.navImages}\n  *\n  * @property {String} rotateRightButton\n  *     Set the id of the custom \'Rotate right\' button to use.\n  *     This is useful to have a custom button anywhere in the web page.<br>\n  *     To only change the button images, consider using\n  *     {@link OpenSeadragon.Options.navImages}\n  *\n  * @property {String} previousButton\n  *     Set the id of the custom \'Previous page\' button to use.\n  *     This is useful to have a custom button anywhere in the web page.<br>\n  *     To only change the button images, consider using\n  *     {@link OpenSeadragon.Options.navImages}\n  *\n  * @property {String} nextButton\n  *     Set the id of the custom \'Next page\' button to use.\n  *     This is useful to have a custom button anywhere in the web page.<br>\n  *     To only change the button images, consider using\n  *     {@link OpenSeadragon.Options.navImages}\n  *\n  * @property {Boolean} [sequenceMode=false]\n  *     Set to true to have the viewer treat your tilesources as a sequence of images to\n  *     be opened one at a time rather than all at once.\n  *\n  * @property {Number} [initialPage=0]\n  *     If sequenceMode is true, display this page initially.\n  *\n  * @property {Boolean} [preserveViewport=false]\n  *     If sequenceMode is true, then normally navigating through each image resets the\n  *     viewport to \'home\' position.  If preserveViewport is set to true, then the viewport\n  *     position is preserved when navigating between images in the sequence.\n  *\n  * @property {Boolean} [preserveOverlays=false]\n  *     If sequenceMode is true, then normally navigating through each image\n  *     resets the overlays.\n  *     If preserveOverlays is set to true, then the overlays added with {@link OpenSeadragon.Viewer#addOverlay}\n  *     are preserved when navigating between images in the sequence.\n  *     Note: setting preserveOverlays overrides any overlays specified in the global\n  *     "overlays" option for the Viewer. It\'s also not compatible with specifying\n  *     per-tileSource overlays via the options, as those overlays will persist\n  *     even after the tileSource is closed.\n  *\n  * @property {Boolean} [showReferenceStrip=false]\n  *     If sequenceMode is true, then display a scrolling strip of image thumbnails for\n  *     navigating through the images.\n  *\n  * @property {String} [referenceStripScroll=\'horizontal\']\n  *\n  * @property {Element} [referenceStripElement=null]\n  *\n  * @property {Number} [referenceStripHeight=null]\n  *\n  * @property {Number} [referenceStripWidth=null]\n  *\n  * @property {String} [referenceStripPosition=\'BOTTOM_LEFT\']\n  *\n  * @property {Number} [referenceStripSizeRatio=0.2]\n  *\n  * @property {Boolean} [collectionMode=false]\n  *     Set to true to have the viewer arrange your TiledImages in a grid or line.\n  *\n  * @property {Number} [collectionRows=3]\n  *     If collectionMode is true, specifies how many rows the grid should have. Use 1 to make a line.\n  *     If collectionLayout is \'vertical\', specifies how many columns instead.\n  *\n  * @property {Number} [collectionColumns=0]\n  *     If collectionMode is true, specifies how many columns the grid should have. Use 1 to make a line.\n  *     If collectionLayout is \'vertical\', specifies how many rows instead. Ignored if collectionRows is not set to a falsy value.\n  *\n  * @property {String} [collectionLayout=\'horizontal\']\n  *     If collectionMode is true, specifies whether to arrange vertically or horizontally.\n  *\n  * @property {Number} [collectionTileSize=800]\n  *     If collectionMode is true, specifies the size, in viewport coordinates, for each TiledImage to fit into.\n  *     The TiledImage will be centered within a square of the specified size.\n  *\n  * @property {Number} [collectionTileMargin=80]\n  *     If collectionMode is true, specifies the margin, in viewport coordinates, between each TiledImage.\n  *\n  * @property {String|Boolean} [crossOriginPolicy=false]\n  *     Valid values are \'Anonymous\', \'use-credentials\', and false. If false, canvas requests will\n  *     not use CORS, and the canvas will be tainted.\n  *\n  * @property {Boolean} [ajaxWithCredentials=false]\n  *     Whether to set the withCredentials XHR flag for AJAX requests (when loading tile sources).\n  *     Note that this can be overridden at the {@link OpenSeadragon.TileSource} level.\n  *\n  *//**\n  * Settings for gestures generated by a pointer device.\n  *\n  * @typedef {Object} GestureSettings\n  * @memberof OpenSeadragon\n  *\n  * @property {Boolean} scrollToZoom\n  *     Set to false to disable zooming on scroll gestures.\n  *\n  * @property {Boolean} clickToZoom\n  *     Set to false to disable zooming on click gestures.\n  *\n  * @property {Boolean} dblClickToZoom\n  *     Set to false to disable zooming on double-click gestures. Note: If set to true\n  *     then clickToZoom should be set to false to prevent multiple zooms.\n  *\n  * @property {Boolean} pinchToZoom\n  *     Set to false to disable zooming on pinch gestures.\n  *\n  * @property {Boolean} flickEnabled\n  *     Set to false to disable the kinetic panning effect (flick) at the end of a drag gesture.\n  *\n  * @property {Number} flickMinSpeed\n  *     If flickEnabled is true, the minimum speed (in pixels-per-second) required to cause the kinetic panning effect (flick) at the end of a drag gesture.\n  *\n  * @property {Number} flickMomentum\n  *     If flickEnabled is true, a constant multiplied by the velocity to determine the distance of the kinetic panning effect (flick) at the end of a drag gesture.\n  *     A larger value will make the flick feel "lighter", while a smaller value will make the flick feel "heavier".\n  *     Note: springStiffness and animationTime also affect the "spring" used to stop the flick animation.\n  *\n  *//**\n  * The names for the image resources used for the image navigation buttons.\n  *\n  * @typedef {Object} NavImages\n  * @memberof OpenSeadragon\n  *\n  * @property {Object} zoomIn - Images for the zoom-in button.\n  * @property {String} zoomIn.REST\n  * @property {String} zoomIn.GROUP\n  * @property {String} zoomIn.HOVER\n  * @property {String} zoomIn.DOWN\n  *\n  * @property {Object} zoomOut - Images for the zoom-out button.\n  * @property {String} zoomOut.REST\n  * @property {String} zoomOut.GROUP\n  * @property {String} zoomOut.HOVER\n  * @property {String} zoomOut.DOWN\n  *\n  * @property {Object} home - Images for the home button.\n  * @property {String} home.REST\n  * @property {String} home.GROUP\n  * @property {String} home.HOVER\n  * @property {String} home.DOWN\n  *\n  * @property {Object} fullpage - Images for the full-page button.\n  * @property {String} fullpage.REST\n  * @property {String} fullpage.GROUP\n  * @property {String} fullpage.HOVER\n  * @property {String} fullpage.DOWN\n  *\n  * @property {Object} rotateleft - Images for the rotate left button.\n  * @property {String} rotateleft.REST\n  * @property {String} rotateleft.GROUP\n  * @property {String} rotateleft.HOVER\n  * @property {String} rotateleft.DOWN\n  *\n  * @property {Object} rotateright - Images for the rotate right button.\n  * @property {String} rotateright.REST\n  * @property {String} rotateright.GROUP\n  * @property {String} rotateright.HOVER\n  * @property {String} rotateright.DOWN\n  *\n  * @property {Object} previous - Images for the previous button.\n  * @property {String} previous.REST\n  * @property {String} previous.GROUP\n  * @property {String} previous.HOVER\n  * @property {String} previous.DOWN\n  *\n  * @property {Object} next - Images for the next button.\n  * @property {String} next.REST\n  * @property {String} next.GROUP\n  * @property {String} next.HOVER\n  * @property {String} next.DOWN\n  *\n  *//**\n  * This function serves as a single point of instantiation for an {@link OpenSeadragon.Viewer}, including all\n  * combinations of out-of-the-box configurable features.\n  *\n  * @function OpenSeadragon\n  * @memberof module:OpenSeadragon\n  * @param {OpenSeadragon.Options} options - Viewer options.\n  * @returns {OpenSeadragon.Viewer}\n  */window.OpenSeadragon=window.OpenSeadragon||function(options){return new OpenSeadragon.Viewer(options);};if(typeof define===\'function\'&&define.amd){define(function(){return window.OpenSeadragon;});}(function($){/**\n     * The OpenSeadragon version.\n     *\n     * @member {Object} OpenSeadragon.version\n     * @property {String} versionStr - The version number as a string (\'major.minor.revision\').\n     * @property {Number} major - The major version number.\n     * @property {Number} minor - The minor version number.\n     * @property {Number} revision - The revision number.\n     * @since 1.0.0\n     */$.version={versionStr:\'2.1.0\',major:parseInt(\'2\',10),minor:parseInt(\'1\',10),revision:parseInt(\'0\',10)};/**\n     * Taken from jquery 1.6.1\n     * [[Class]] -> type pairs\n     * @private\n     */var class2type={\'[object Boolean]\':\'boolean\',\'[object Number]\':\'number\',\'[object String]\':\'string\',\'[object Function]\':\'function\',\'[object Array]\':\'array\',\'[object Date]\':\'date\',\'[object RegExp]\':\'regexp\',\'[object Object]\':\'object\'},// Save a reference to some core methods\ntoString=Object.prototype.toString,hasOwn=Object.prototype.hasOwnProperty;/**\n     * Taken from jQuery 1.6.1\n     * @function isFunction\n     * @memberof OpenSeadragon\n     * @see {@link http://www.jquery.com/ jQuery}\n     */$.isFunction=function(obj){return $.type(obj)==="function";};/**\n     * Taken from jQuery 1.6.1\n     * @function isArray\n     * @memberof OpenSeadragon\n     * @see {@link http://www.jquery.com/ jQuery}\n     */$.isArray=Array.isArray||function(obj){return $.type(obj)==="array";};/**\n     * A crude way of determining if an object is a window.\n     * Taken from jQuery 1.6.1\n     * @function isWindow\n     * @memberof OpenSeadragon\n     * @see {@link http://www.jquery.com/ jQuery}\n     */$.isWindow=function(obj){return obj&&(typeof obj===\'undefined\'?\'undefined\':_typeof(obj))==="object"&&"setInterval"in obj;};/**\n     * Taken from jQuery 1.6.1\n     * @function type\n     * @memberof OpenSeadragon\n     * @see {@link http://www.jquery.com/ jQuery}\n     */$.type=function(obj){return obj===null||obj===undefined?String(obj):class2type[toString.call(obj)]||"object";};/**\n     * Taken from jQuery 1.6.1\n     * @function isPlainObject\n     * @memberof OpenSeadragon\n     * @see {@link http://www.jquery.com/ jQuery}\n     */$.isPlainObject=function(obj){// Must be an Object.\n// Because of IE, we also have to check the presence of the constructor property.\n// Make sure that DOM nodes and window objects don\'t pass through, as well\nif(!obj||OpenSeadragon.type(obj)!=="object"||obj.nodeType||$.isWindow(obj)){return false;}// Not own constructor property must be Object\nif(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false;}// Own properties are enumerated firstly, so to speed up,\n// if last one is own, then all properties are own.\nvar lastKey;for(var key in obj){lastKey=key;}return lastKey===undefined||hasOwn.call(obj,lastKey);};/**\n     * Taken from jQuery 1.6.1\n     * @function isEmptyObject\n     * @memberof OpenSeadragon\n     * @see {@link http://www.jquery.com/ jQuery}\n     */$.isEmptyObject=function(obj){for(var name in obj){return false;}return true;};/**\n     * True if the browser supports the HTML5 canvas element\n     * @member {Boolean} supportsCanvas\n     * @memberof OpenSeadragon\n     */$.supportsCanvas=function(){var canvasElement=document.createElement(\'canvas\');return!!($.isFunction(canvasElement.getContext)&&canvasElement.getContext(\'2d\'));}();/**\n     * Test whether the submitted canvas is tainted or not.\n     * @argument {Canvas} canvas The canvas to test.\n     * @returns {Boolean} True if the canvas is tainted.\n     */$.isCanvasTainted=function(canvas){var isTainted=false;try{// We test if the canvas is tainted by retrieving data from it.\n// An exception will be raised if the canvas is tainted.\nvar data=canvas.getContext(\'2d\').getImageData(0,0,1,1);}catch(e){isTainted=true;}return isTainted;};/**\n     * A ratio comparing the device screen\'s pixel density to the canvas\'s backing store pixel density. Defaults to 1 if canvas isn\'t supported by the browser.\n     * @member {Number} pixelDensityRatio\n     * @memberof OpenSeadragon\n     */$.pixelDensityRatio=function(){if($.supportsCanvas){var context=document.createElement(\'canvas\').getContext(\'2d\');var devicePixelRatio=window.devicePixelRatio||1;var backingStoreRatio=context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||context.backingStorePixelRatio||1;return devicePixelRatio/backingStoreRatio;}else{return 1;}}();})(OpenSeadragon);/**\n *  This closure defines all static methods available to the OpenSeadragon\n *  namespace.  Many, if not most, are taked directly from jQuery for use\n *  to simplify and reduce common programming patterns.  More static methods\n *  from jQuery may eventually make their way into this though we are\n *  attempting to avoid an explicit dependency on jQuery only because\n *  OpenSeadragon is a broadly useful code base and would be made less broad\n *  by requiring jQuery fully.\n *\n *  Some static methods have also been refactored from the original OpenSeadragon\n *  project.\n */(function($){/**\n     * Taken from jQuery 1.6.1\n     * @function extend\n     * @memberof OpenSeadragon\n     * @see {@link http://www.jquery.com/ jQuery}\n     */$.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},length=arguments.length,deep=false,i=1;// Handle a deep copy situation\nif(typeof target==="boolean"){deep=target;target=arguments[1]||{};// skip the boolean and the target\ni=2;}// Handle case when target is a string or something (possible in deep copy)\nif((typeof target===\'undefined\'?\'undefined\':_typeof(target))!=="object"&&!OpenSeadragon.isFunction(target)){target={};}// extend jQuery itself if only one argument is passed\nif(length===i){target=this;--i;}for(;i<length;i++){// Only deal with non-null/undefined values\noptions=arguments[i];if(options!==null||options!==undefined){// Extend the base object\nfor(name in options){src=target[name];copy=options[name];// Prevent never-ending loop\nif(target===copy){continue;}// Recurse if we\'re merging plain objects or arrays\nif(deep&&copy&&(OpenSeadragon.isPlainObject(copy)||(copyIsArray=OpenSeadragon.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&OpenSeadragon.isArray(src)?src:[];}else{clone=src&&OpenSeadragon.isPlainObject(src)?src:{};}// Never move original objects, clone them\ntarget[name]=OpenSeadragon.extend(deep,clone,copy);// Don\'t bring in undefined values\n}else if(copy!==undefined){target[name]=copy;}}}}// Return the modified object\nreturn target;};$.extend($,/** @lends OpenSeadragon */{/**\n         * The default values for the optional settings documented at {@link OpenSeadragon.Options}.\n         * @static\n         * @type {Object}\n         */DEFAULT_SETTINGS:{//DATA SOURCE DETAILS\nxmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:false,ajaxWithCredentials:false,//PAN AND ZOOM SETTINGS AND CONSTRAINTS\npanHorizontal:true,panVertical:true,constrainDuringPan:false,wrapHorizontal:false,wrapVertical:false,visibilityRatio:0.5,//-> how much of the viewer can be negative space\nminPixelRatio:0.5,//->closer to 0 draws tiles meant for a higher zoom at this zoom\ndefaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:false,//UI RESPONSIVENESS AND FEEL\nclickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{scrollToZoom:true,clickToZoom:true,dblClickToZoom:false,pinchToZoom:false,flickEnabled:false,flickMinSpeed:120,flickMomentum:0.25,pinchRotate:false},gestureSettingsTouch:{scrollToZoom:false,clickToZoom:false,dblClickToZoom:true,pinchToZoom:true,flickEnabled:true,flickMinSpeed:120,flickMomentum:0.25,pinchRotate:false},gestureSettingsPen:{scrollToZoom:false,clickToZoom:true,dblClickToZoom:false,pinchToZoom:false,flickEnabled:false,flickMinSpeed:120,flickMomentum:0.25,pinchRotate:false},gestureSettingsUnknown:{scrollToZoom:false,clickToZoom:false,dblClickToZoom:true,pinchToZoom:true,flickEnabled:true,flickMinSpeed:120,flickMomentum:0.25,pinchRotate:false},zoomPerClick:2,zoomPerScroll:1.2,zoomPerSecond:1.0,blendTime:0,alwaysBlend:false,autoHideControls:true,immediateRender:false,minZoomImageRatio:0.9,//-> closer to 0 allows zoom out to infinity\nmaxZoomPixelRatio:1.1,//-> higher allows \'over zoom\' into pixels\nsmoothTileEdgesMinZoom:1.1,//-> higher than maxZoomPixelRatio disables it\npixelsPerWheelLine:40,autoResize:true,preserveImageSizeOnResize:false,// requires autoResize=true\nminScrollDeltaTime:50,//DEFAULT CONTROL SETTINGS\nshowSequenceControl:true,//SEQUENCE\nsequenceControlAnchor:null,//SEQUENCE\npreserveViewport:false,//SEQUENCE\npreserveOverlays:false,//SEQUENCE\nnavPrevNextWrap:false,//SEQUENCE\nshowNavigationControl:true,//ZOOM/HOME/FULL/ROTATION\nnavigationControlAnchor:null,//ZOOM/HOME/FULL/ROTATION\nshowZoomControl:true,//ZOOM\nshowHomeControl:true,//HOME\nshowFullPageControl:true,//FULL\nshowRotationControl:false,//ROTATION\ncontrolsFadeDelay:2000,//ZOOM/HOME/FULL/SEQUENCE\ncontrolsFadeLength:1500,//ZOOM/HOME/FULL/SEQUENCE\nmouseNavEnabled:true,//GENERAL MOUSE INTERACTIVITY\n//VIEWPORT NAVIGATOR SETTINGS\nshowNavigator:false,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:0.2,navigatorMaintainSizeRatio:false,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:true,navigatorRotate:true,// INITIAL ROTATION\ndegrees:0,// APPEARANCE\nopacity:1,compositeOperation:null,placeholderFillStyle:null,//REFERENCE STRIP SETTINGS\nshowReferenceStrip:false,referenceStripScroll:\'horizontal\',referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:\'BOTTOM_LEFT\',referenceStripSizeRatio:0.2,//COLLECTION VISUALIZATION SETTINGS\ncollectionRows:3,//or columns depending on layout\ncollectionColumns:0,//columns in horizontal layout, rows in vertical layout\ncollectionLayout:\'horizontal\',//vertical\ncollectionMode:false,collectionTileSize:800,collectionTileMargin:80,//PERFORMANCE SETTINGS\nimageLoaderLimit:0,maxImageCacheCount:200,timeout:30000,useCanvas:true,// Use canvas element for drawing if available\n//INTERFACE RESOURCE SETTINGS\nprefixUrl:"/images/",navImages:{zoomIn:{REST:\'zoomin_rest.png\',GROUP:\'zoomin_grouphover.png\',HOVER:\'zoomin_hover.png\',DOWN:\'zoomin_pressed.png\'},zoomOut:{REST:\'zoomout_rest.png\',GROUP:\'zoomout_grouphover.png\',HOVER:\'zoomout_hover.png\',DOWN:\'zoomout_pressed.png\'},home:{REST:\'home_rest.png\',GROUP:\'home_grouphover.png\',HOVER:\'home_hover.png\',DOWN:\'home_pressed.png\'},fullpage:{REST:\'fullpage_rest.png\',GROUP:\'fullpage_grouphover.png\',HOVER:\'fullpage_hover.png\',DOWN:\'fullpage_pressed.png\'},rotateleft:{REST:\'rotateleft_rest.png\',GROUP:\'rotateleft_grouphover.png\',HOVER:\'rotateleft_hover.png\',DOWN:\'rotateleft_pressed.png\'},rotateright:{REST:\'rotateright_rest.png\',GROUP:\'rotateright_grouphover.png\',HOVER:\'rotateright_hover.png\',DOWN:\'rotateright_pressed.png\'},previous:{REST:\'previous_rest.png\',GROUP:\'previous_grouphover.png\',HOVER:\'previous_hover.png\',DOWN:\'previous_pressed.png\'},next:{REST:\'next_rest.png\',GROUP:\'next_grouphover.png\',HOVER:\'next_hover.png\',DOWN:\'next_pressed.png\'}},//DEVELOPER SETTINGS\ndebugMode:false,debugGridColor:\'#437AB2\'},/**\n         * TODO: get rid of this.  I can\'t see how it\'s required at all.  Looks\n         *       like an early legacy code artifact.\n         * @static\n         * @ignore\n         */SIGNAL:"----seadragon----",/**\n         * Returns a function which invokes the method as if it were a method belonging to the object.\n         * @function\n         * @param {Object} object\n         * @param {Function} method\n         * @returns {Function}\n         */delegate:function delegate(object,method){return function(){var args=arguments;if(args===undefined){args=[];}return method.apply(object,args);};},/**\n         * An enumeration of Browser vendors.\n         * @static\n         * @type {Object}\n         * @property {Number} UNKNOWN\n         * @property {Number} IE\n         * @property {Number} FIREFOX\n         * @property {Number} SAFARI\n         * @property {Number} CHROME\n         * @property {Number} OPERA\n         */BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5},/**\n         * Returns a DOM Element for the given id or element.\n         * @function\n         * @param {String|Element} element Accepts an id or element.\n         * @returns {Element} The element with the given id, null, or the element itself.\n         */getElement:function getElement(element){if(typeof element=="string"){element=document.getElementById(element);}return element;},/**\n         * Determines the position of the upper-left corner of the element.\n         * @function\n         * @param {Element|String} element - the elemenet we want the position for.\n         * @returns {OpenSeadragon.Point} - the position of the upper left corner of the element.\n         */getElementPosition:function getElementPosition(element){var result=new $.Point(),isFixed,offsetParent;element=$.getElement(element);isFixed=$.getElementStyle(element).position=="fixed";offsetParent=getOffsetParent(element,isFixed);while(offsetParent){result.x+=element.offsetLeft;result.y+=element.offsetTop;if(isFixed){result=result.plus($.getPageScroll());}element=offsetParent;isFixed=$.getElementStyle(element).position=="fixed";offsetParent=getOffsetParent(element,isFixed);}return result;},/**\n         * Determines the position of the upper-left corner of the element adjusted for current page and/or element scroll.\n         * @function\n         * @param {Element|String} element - the element we want the position for.\n         * @returns {OpenSeadragon.Point} - the position of the upper left corner of the element adjusted for current page and/or element scroll.\n         */getElementOffset:function getElementOffset(element){element=$.getElement(element);var doc=element&&element.ownerDocument,docElement,win,boundingRect={top:0,left:0};if(!doc){return new $.Point();}docElement=doc.documentElement;if(_typeof(element.getBoundingClientRect)!==(typeof undefined===\'undefined\'?\'undefined\':_typeof(undefined))){boundingRect=element.getBoundingClientRect();}win=doc==doc.window?doc:doc.nodeType===9?doc.defaultView||doc.parentWindow:false;return new $.Point(boundingRect.left+(win.pageXOffset||docElement.scrollLeft)-(docElement.clientLeft||0),boundingRect.top+(win.pageYOffset||docElement.scrollTop)-(docElement.clientTop||0));},/**\n         * Determines the height and width of the given element.\n         * @function\n         * @param {Element|String} element\n         * @returns {OpenSeadragon.Point}\n         */getElementSize:function getElementSize(element){element=$.getElement(element);return new $.Point(element.clientWidth,element.clientHeight);},/**\n         * Returns the CSSStyle object for the given element.\n         * @function\n         * @param {Element|String} element\n         * @returns {CSSStyle}\n         */getElementStyle:document.documentElement.currentStyle?function(element){element=$.getElement(element);return element.currentStyle;}:function(element){element=$.getElement(element);return window.getComputedStyle(element,"");},/**\n         * Determines if a point is within the bounding rectangle of the given element (hit-test).\n         * @function\n         * @param {Element|String} element\n         * @param {OpenSeadragon.Point} point\n         * @returns {Boolean}\n         */pointInElement:function pointInElement(element,point){element=$.getElement(element);var offset=$.getElementOffset(element),size=$.getElementSize(element);return point.x>=offset.x&&point.x<offset.x+size.x&&point.y<offset.y+size.y&&point.y>=offset.y;},/**\n         * Gets the latest event, really only useful internally since its\n         * specific to IE behavior.\n         * @function\n         * @param {Event} [event]\n         * @returns {Event}\n         * @deprecated For internal use only\n         * @private\n         */getEvent:function getEvent(event){if(event){$.getEvent=function(event){return event;};}else{$.getEvent=function(){return window.event;};}return $.getEvent(event);},/**\n         * Gets the position of the mouse on the screen for a given event.\n         * @function\n         * @param {Event} [event]\n         * @returns {OpenSeadragon.Point}\n         */getMousePosition:function getMousePosition(event){if(typeof event.pageX=="number"){$.getMousePosition=function(event){var result=new $.Point();event=$.getEvent(event);result.x=event.pageX;result.y=event.pageY;return result;};}else if(typeof event.clientX=="number"){$.getMousePosition=function(event){var result=new $.Point();event=$.getEvent(event);result.x=event.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;result.y=event.clientY+document.body.scrollTop+document.documentElement.scrollTop;return result;};}else{throw new Error("Unknown event mouse position, no known technique.");}return $.getMousePosition(event);},/**\n         * Determines the page\'s current scroll position.\n         * @function\n         * @returns {OpenSeadragon.Point}\n         */getPageScroll:function getPageScroll(){var docElement=document.documentElement||{},body=document.body||{};if(typeof window.pageXOffset=="number"){$.getPageScroll=function(){return new $.Point(window.pageXOffset,window.pageYOffset);};}else if(body.scrollLeft||body.scrollTop){$.getPageScroll=function(){return new $.Point(document.body.scrollLeft,document.body.scrollTop);};}else if(docElement.scrollLeft||docElement.scrollTop){$.getPageScroll=function(){return new $.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop);};}else{// We can\'t reassign the function yet, as there was no scroll.\nreturn new $.Point(0,0);}return $.getPageScroll();},/**\n         * Set the page scroll position.\n         * @function\n         * @returns {OpenSeadragon.Point}\n         */setPageScroll:function setPageScroll(scroll){if(typeof window.scrollTo!=="undefined"){$.setPageScroll=function(scroll){window.scrollTo(scroll.x,scroll.y);};}else{var originalScroll=$.getPageScroll();if(originalScroll.x===scroll.x&&originalScroll.y===scroll.y){// We are already correctly positioned and there\n// is no way to detect the correct method.\nreturn;}document.body.scrollLeft=scroll.x;document.body.scrollTop=scroll.y;var currentScroll=$.getPageScroll();if(currentScroll.x!==originalScroll.x&&currentScroll.y!==originalScroll.y){$.setPageScroll=function(scroll){document.body.scrollLeft=scroll.x;document.body.scrollTop=scroll.y;};return;}document.documentElement.scrollLeft=scroll.x;document.documentElement.scrollTop=scroll.y;currentScroll=$.getPageScroll();if(currentScroll.x!==originalScroll.x&&currentScroll.y!==originalScroll.y){$.setPageScroll=function(scroll){document.documentElement.scrollLeft=scroll.x;document.documentElement.scrollTop=scroll.y;};return;}// We can\'t find anything working, so we do nothing.\n$.setPageScroll=function(scroll){};}return $.setPageScroll(scroll);},/**\n         * Determines the size of the browsers window.\n         * @function\n         * @returns {OpenSeadragon.Point}\n         */getWindowSize:function getWindowSize(){var docElement=document.documentElement||{},body=document.body||{};if(typeof window.innerWidth==\'number\'){$.getWindowSize=function(){return new $.Point(window.innerWidth,window.innerHeight);};}else if(docElement.clientWidth||docElement.clientHeight){$.getWindowSize=function(){return new $.Point(document.documentElement.clientWidth,document.documentElement.clientHeight);};}else if(body.clientWidth||body.clientHeight){$.getWindowSize=function(){return new $.Point(document.body.clientWidth,document.body.clientHeight);};}else{throw new Error("Unknown window size, no known technique.");}return $.getWindowSize();},/**\n         * Wraps the given element in a nest of divs so that the element can\n         * be easily centered using CSS tables\n         * @function\n         * @param {Element|String} element\n         * @returns {Element} outermost wrapper element\n         */makeCenteredNode:function makeCenteredNode(element){// Convert a possible ID to an actual HTMLElement\nelement=$.getElement(element);/*\n                CSS tables require you to have a display:table/row/cell hierarchy so we need to create\n                three nested wrapper divs:\n             */var wrappers=[$.makeNeutralElement(\'div\'),$.makeNeutralElement(\'div\'),$.makeNeutralElement(\'div\')];// It feels like we should be able to pass style dicts to makeNeutralElement:\n$.extend(wrappers[0].style,{display:"table",height:"100%",width:"100%"});$.extend(wrappers[1].style,{display:"table-row"});$.extend(wrappers[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"});wrappers[0].appendChild(wrappers[1]);wrappers[1].appendChild(wrappers[2]);wrappers[2].appendChild(element);return wrappers[0];},/**\n         * Creates an easily positionable element of the given type that therefor\n         * serves as an excellent container element.\n         * @function\n         * @param {String} tagName\n         * @returns {Element}\n         */makeNeutralElement:function makeNeutralElement(tagName){var element=document.createElement(tagName),style=element.style;style.background="transparent none";style.border="none";style.margin="0px";style.padding="0px";style.position="static";return element;},/**\n         * Returns the current milliseconds, using Date.now() if available\n         * @function\n         */now:function now(){if(Date.now){$.now=Date.now;}else{$.now=function(){return new Date().getTime();};}return $.now();},/**\n         * Ensures an image is loaded correctly to support alpha transparency.\n         * Generally only IE has issues doing this correctly for formats like\n         * png.\n         * @function\n         * @param {String} src\n         * @returns {Element}\n         */makeTransparentImage:function makeTransparentImage(src){$.makeTransparentImage=function(src){var img=$.makeNeutralElement("img");img.src=src;return img;};if($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<7){$.makeTransparentImage=function(src){var img=$.makeNeutralElement("img"),element=null;element=$.makeNeutralElement("span");element.style.display="inline-block";img.onload=function(){element.style.width=element.style.width||img.width+"px";element.style.height=element.style.height||img.height+"px";img.onload=null;img=null;// to prevent memory leaks in IE\n};img.src=src;element.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\'"+src+"\', sizingMethod=\'scale\')";return element;};}return $.makeTransparentImage(src);},/**\n         * Sets the opacity of the specified element.\n         * @function\n         * @param {Element|String} element\n         * @param {Number} opacity\n         * @param {Boolean} [usesAlpha]\n         */setElementOpacity:function setElementOpacity(element,opacity,usesAlpha){var ieOpacity,ieFilter;element=$.getElement(element);if(usesAlpha&&!$.Browser.alpha){opacity=Math.round(opacity);}if($.Browser.opacity){element.style.opacity=opacity<1?opacity:"";}else{if(opacity<1){ieOpacity=Math.round(100*opacity);ieFilter="alpha(opacity="+ieOpacity+")";element.style.filter=ieFilter;}else{element.style.filter="";}}},/**\n         * Sets the specified element\'s touch-action style attribute to \'none\'.\n         * @function\n         * @param {Element|String} element\n         */setElementTouchActionNone:function setElementTouchActionNone(element){element=$.getElement(element);if(typeof element.style.touchAction!==\'undefined\'){element.style.touchAction=\'none\';}else if(typeof element.style.msTouchAction!==\'undefined\'){element.style.msTouchAction=\'none\';}},/**\n         * Add the specified CSS class to the element if not present.\n         * @function\n         * @param {Element|String} element\n         * @param {String} className\n         */addClass:function addClass(element,className){element=$.getElement(element);if(!element.className){element.className=className;}else if((\' \'+element.className+\' \').indexOf(\' \'+className+\' \')===-1){element.className+=\' \'+className;}},/**\n         * Find the first index at which an element is found in an array or -1\n         * if not present.\n         *\n         * Code taken and adapted from\n         * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf#Compatibility\n         *\n         * @function\n         * @param {Array} array The array from which to find the element\n         * @param {Object} searchElement The element to find\n         * @param {Number} [fromIndex=0] Index to start research.\n         * @returns {Number} The index of the element in the array.\n         */indexOf:function indexOf(array,searchElement,fromIndex){if(Array.prototype.indexOf){this.indexOf=function(array,searchElement,fromIndex){return array.indexOf(searchElement,fromIndex);};}else{this.indexOf=function(array,searchElement,fromIndex){var i,pivot=fromIndex?fromIndex:0,length;if(!array){throw new TypeError();}length=array.length;if(length===0||pivot>=length){return-1;}if(pivot<0){pivot=length-Math.abs(pivot);}for(i=pivot;i<length;i++){if(array[i]===searchElement){return i;}}return-1;};}return this.indexOf(array,searchElement,fromIndex);},/**\n         * Remove the specified CSS class from the element.\n         * @function\n         * @param {Element|String} element\n         * @param {String} className\n         */removeClass:function removeClass(element,className){var oldClasses,newClasses=[],i;element=$.getElement(element);oldClasses=element.className.split(/\\s+/);for(i=0;i<oldClasses.length;i++){if(oldClasses[i]&&oldClasses[i]!==className){newClasses.push(oldClasses[i]);}}element.className=newClasses.join(\' \');},/**\n         * Adds an event listener for the given element, eventName and handler.\n         * @function\n         * @param {Element|String} element\n         * @param {String} eventName\n         * @param {Function} handler\n         * @param {Boolean} [useCapture]\n         */addEvent:function(){if(window.addEventListener){return function(element,eventName,handler,useCapture){element=$.getElement(element);element.addEventListener(eventName,handler,useCapture);};}else if(window.attachEvent){return function(element,eventName,handler,useCapture){element=$.getElement(element);element.attachEvent(\'on\'+eventName,handler);};}else{throw new Error("No known event model.");}}(),/**\n         * Remove a given event listener for the given element, event type and\n         * handler.\n         * @function\n         * @param {Element|String} element\n         * @param {String} eventName\n         * @param {Function} handler\n         * @param {Boolean} [useCapture]\n         */removeEvent:function(){if(window.removeEventListener){return function(element,eventName,handler,useCapture){element=$.getElement(element);element.removeEventListener(eventName,handler,useCapture);};}else if(window.detachEvent){return function(element,eventName,handler,useCapture){element=$.getElement(element);element.detachEvent(\'on\'+eventName,handler);};}else{throw new Error("No known event model.");}}(),/**\n         * Cancels the default browser behavior had the event propagated all\n         * the way up the DOM to the window object.\n         * @function\n         * @param {Event} [event]\n         */cancelEvent:function cancelEvent(event){event=$.getEvent(event);if(event.preventDefault){$.cancelEvent=function(event){// W3C for preventing default\nevent.preventDefault();};}else{$.cancelEvent=function(event){event=$.getEvent(event);// legacy for preventing default\nevent.cancel=true;// IE for preventing default\nevent.returnValue=false;};}$.cancelEvent(event);},/**\n         * Stops the propagation of the event up the DOM.\n         * @function\n         * @param {Event} [event]\n         */stopEvent:function stopEvent(event){event=$.getEvent(event);if(event.stopPropagation){// W3C for stopping propagation\n$.stopEvent=function(event){event.stopPropagation();};}else{// IE for stopping propagation\n$.stopEvent=function(event){event=$.getEvent(event);event.cancelBubble=true;};}$.stopEvent(event);},/**\n         * Similar to OpenSeadragon.delegate, but it does not immediately call\n         * the method on the object, returning a function which can be called\n         * repeatedly to delegate the method. It also allows additonal arguments\n         * to be passed during construction which will be added during each\n         * invocation, and each invocation can add additional arguments as well.\n         *\n         * @function\n         * @param {Object} object\n         * @param {Function} method\n         * @param [args] any additional arguments are passed as arguments to the\n         *  created callback\n         * @returns {Function}\n         */createCallback:function createCallback(object,method){//TODO: This pattern is painful to use and debug.  It\'s much cleaner\n//      to use pinning plus anonymous functions.  Get rid of this\n//      pattern!\nvar initialArgs=[],i;for(i=2;i<arguments.length;i++){initialArgs.push(arguments[i]);}return function(){var args=initialArgs.concat([]),i;for(i=0;i<arguments.length;i++){args.push(arguments[i]);}return method.apply(object,args);};},/**\n         * Retreives the value of a url parameter from the window.location string.\n         * @function\n         * @param {String} key\n         * @returns {String} The value of the url parameter or null if no param matches.\n         */getUrlParameter:function getUrlParameter(key){var value=URLPARAMS[key];return value?value:null;},/**\n         * Retrieves the protocol used by the url. The url can either be absolute\n         * or relative.\n         * @function\n         * @private\n         * @param {String} url The url to retrieve the protocol from.\n         * @return {String} The protocol (http:, https:, file:, ftp: ...)\n         */getUrlProtocol:function getUrlProtocol(url){var match=url.match(/^([a-z]+:)\\/\\//i);if(match===null){// Relative URL, retrive the protocol from window.location\nreturn window.location.protocol;}return match[1].toLowerCase();},/**\n         * Create an XHR object\n         * @private\n         * @param {type} [local] If set to true, the XHR will be file: protocol\n         * compatible if possible (but may raise a warning in the browser).\n         * @returns {XMLHttpRequest}\n         */createAjaxRequest:function createAjaxRequest(local){// IE11 does not support window.ActiveXObject so we just try to\n// create one to see if it is supported.\n// See: http://msdn.microsoft.com/en-us/library/ie/dn423948%28v=vs.85%29.aspx\nvar supportActiveX;try{/* global ActiveXObject:true */supportActiveX=!!new ActiveXObject("Microsoft.XMLHTTP");}catch(e){supportActiveX=false;}if(supportActiveX){if(window.XMLHttpRequest){$.createAjaxRequest=function(local){if(local){return new ActiveXObject("Microsoft.XMLHTTP");}return new XMLHttpRequest();};}else{$.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP");};}}else if(window.XMLHttpRequest){$.createAjaxRequest=function(){return new XMLHttpRequest();};}else{throw new Error("Browser doesn\'t support XMLHttpRequest.");}return $.createAjaxRequest(local);},/**\n         * Makes an AJAX request.\n         * @param {Object} options\n         * @param {String} options.url - the url to request\n         * @param {Function} options.success - a function to call on a successful response\n         * @param {Function} options.error - a function to call on when an error occurs\n         * @param {Boolean} [options.withCredentials=false] - whether to set the XHR\'s withCredentials\n         * @throws {Error}\n         */makeAjaxRequest:function makeAjaxRequest(url,onSuccess,onError){var withCredentials;// Note that our preferred API is that you pass in a single object; the named\n// arguments are for legacy support.\nif($.isPlainObject(url)){onSuccess=url.success;onError=url.error;withCredentials=url.withCredentials;url=url.url;}var protocol=$.getUrlProtocol(url);var request=$.createAjaxRequest(protocol==="file:");if(!$.isFunction(onSuccess)){throw new Error("makeAjaxRequest requires a success callback");}request.onreadystatechange=function(){// 4 = DONE (https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest#Properties)\nif(request.readyState==4){request.onreadystatechange=function(){};// With protocols other than http/https, the status is 200\n// on Firefox and 0 on other browsers\nif(request.status===200||request.status===0&&protocol!=="http:"&&protocol!=="https:"){onSuccess(request);}else{$.console.log("AJAX request returned %d: %s",request.status,url);if($.isFunction(onError)){onError(request);}}}};if(withCredentials){request.withCredentials=true;}try{request.open("GET",url,true);request.send(null);}catch(e){var msg=e.message;/*\n                    IE < 10 does not support CORS and an XHR request to a different origin will fail as soon\n                    as send() is called. This is particularly easy to miss during development and appear in\n                    production if you use a CDN or domain sharding and the security policy is likely to break\n                    exception handlers since any attempt to access a property of the request object will\n                    raise an access denied TypeError inside the catch block.\n\n                    To be friendlier, we\'ll check for this specific error and add a documentation pointer\n                    to point developers in the right direction. We test the exception number because IE\'s\n                    error messages are localized.\n                */var oldIE=$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<10;if(oldIE&&typeof e.number!="undefined"&&e.number==-2147024891){msg+="\\nSee http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx#xdomain";}$.console.log("%s while making AJAX request: %s",e.name,msg);request.onreadystatechange=function(){};if(window.XDomainRequest){// IE9 or IE8 might as well try to use XDomainRequest\nvar xdr=new XDomainRequest();if(xdr){xdr.onload=function(e){if($.isFunction(onSuccess)){onSuccess({// Faking an xhr object\nresponseText:xdr.responseText,status:200,// XDomainRequest doesn\'t support status codes, so we just fake one! :/\nstatusText:\'OK\'});}};xdr.onerror=function(e){if($.isFunction(onError)){onError({// Faking an xhr object\nresponseText:xdr.responseText,status:444,// 444 No Response\nstatusText:\'An error happened. Due to an XDomainRequest deficiency we can not extract any information about this error. Upgrade your browser.\'});}};try{xdr.open(\'GET\',url);xdr.send();}catch(e2){if($.isFunction(onError)){onError(request,e);}}}}else{if($.isFunction(onError)){onError(request,e);}}}},/**\n         * Taken from jQuery 1.6.1\n         * @function\n         * @param {Object} options\n         * @param {String} options.url\n         * @param {Function} options.callback\n         * @param {String} [options.param=\'callback\'] The name of the url parameter\n         *      to request the jsonp provider with.\n         * @param {String} [options.callbackName=] The name of the callback to\n         *      request the jsonp provider with.\n         */jsonp:function jsonp(options){var script,url=options.url,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement,jsonpCallback=options.callbackName||\'openseadragon\'+$.now(),previous=window[jsonpCallback],replace="$1"+jsonpCallback+"$2",callbackParam=options.param||\'callback\',callback=options.callback;url=url.replace(/(\\=)\\?(&|$)|\\?\\?/i,replace);// Add callback manually\nurl+=(/\\?/.test(url)?"&":"?")+callbackParam+"="+jsonpCallback;// Install callback\nwindow[jsonpCallback]=function(response){if(!previous){try{delete window[jsonpCallback];}catch(e){//swallow\n}}else{window[jsonpCallback]=previous;}if(callback&&$.isFunction(callback)){callback(response);}};script=document.createElement("script");//TODO: having an issue with async info requests\nif(undefined!==options.async||false!==options.async){script.async="async";}if(options.scriptCharset){script.charset=options.scriptCharset;}script.src=url;// Attach handlers for all browsers\nscript.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState)){// Handle memory leak in IE\nscript.onload=script.onreadystatechange=null;// Remove the script\nif(head&&script.parentNode){head.removeChild(script);}// Dereference the script\nscript=undefined;}};// Use insertBefore instead of appendChild  to circumvent an IE6 bug.\n// This arises when a base node is used (#2709 and #4378).\nhead.insertBefore(script,head.firstChild);},/**\n         * Fully deprecated. Will throw an error.\n         * @function\n         * @deprecated use {@link OpenSeadragon.Viewer#open}\n         */createFromDZI:function createFromDZI(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open.";},/**\n         * Parses an XML string into a DOM Document.\n         * @function\n         * @param {String} string\n         * @returns {Document}\n         */parseXml:function parseXml(string){if(window.DOMParser){$.parseXml=function(string){var xmlDoc=null,parser;parser=new DOMParser();xmlDoc=parser.parseFromString(string,"text/xml");return xmlDoc;};}else if(window.ActiveXObject){$.parseXml=function(string){var xmlDoc=null;xmlDoc=new ActiveXObject("Microsoft.XMLDOM");xmlDoc.async=false;xmlDoc.loadXML(string);return xmlDoc;};}else{throw new Error("Browser doesn\'t support XML DOM.");}return $.parseXml(string);},/**\n         * Parses a JSON string into a Javascript object.\n         * @function\n         * @param {String} string\n         * @returns {Object}\n         */parseJSON:function parseJSON(string){if(window.JSON&&window.JSON.parse){$.parseJSON=window.JSON.parse;}else{// Should only be used by IE8 in non standards mode\n$.parseJSON=function(string){/*jshint evil:true*/return eval(\'(\'+string+\')\');};}return $.parseJSON(string);},/**\n         * Reports whether the image format is supported for tiling in this\n         * version.\n         * @function\n         * @param {String} [extension]\n         * @returns {Boolean}\n         */imageFormatSupported:function imageFormatSupported(extension){extension=extension?extension:"";return!!FILEFORMATS[extension.toLowerCase()];}});/**\n     * The current browser vendor, version, and related information regarding detected features.\n     * @member {Object} Browser\n     * @memberof OpenSeadragon\n     * @static\n     * @type {Object}\n     * @property {OpenSeadragon.BROWSERS} vendor - One of the {@link OpenSeadragon.BROWSERS} enumeration values.\n     * @property {Number} version\n     * @property {Boolean} alpha - Does the browser support image alpha transparency.\n     */$.Browser={vendor:$.BROWSERS.UNKNOWN,version:0,alpha:true};var FILEFORMATS={"bmp":false,"jpeg":true,"jpg":true,"png":true,"tif":false,"wdp":false},URLPARAMS={};(function(){//A small auto-executing routine to determine the browser vendor,\n//version and supporting feature sets.\nvar app=navigator.appName,ver=navigator.appVersion,ua=navigator.userAgent,regex;//console.error( \'appName: \' + navigator.appName );\n//console.error( \'appVersion: \' + navigator.appVersion );\n//console.error( \'userAgent: \' + navigator.userAgent );\nswitch(navigator.appName){case"Microsoft Internet Explorer":if(!!window.attachEvent&&!!window.ActiveXObject){$.Browser.vendor=$.BROWSERS.IE;$.Browser.version=parseFloat(ua.substring(ua.indexOf("MSIE")+5,ua.indexOf(";",ua.indexOf("MSIE"))));}break;case"Netscape":if(!!window.addEventListener){if(ua.indexOf("Firefox")>=0){$.Browser.vendor=$.BROWSERS.FIREFOX;$.Browser.version=parseFloat(ua.substring(ua.indexOf("Firefox")+8));}else if(ua.indexOf("Safari")>=0){$.Browser.vendor=ua.indexOf("Chrome")>=0?$.BROWSERS.CHROME:$.BROWSERS.SAFARI;$.Browser.version=parseFloat(ua.substring(ua.substring(0,ua.indexOf("Safari")).lastIndexOf("/")+1,ua.indexOf("Safari")));}else{regex=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");if(regex.exec(ua)!==null){$.Browser.vendor=$.BROWSERS.IE;$.Browser.version=parseFloat(RegExp.$1);}}}break;case"Opera":$.Browser.vendor=$.BROWSERS.OPERA;$.Browser.version=parseFloat(ver);break;}// ignore \'?\' portion of query string\nvar query=window.location.search.substring(1),parts=query.split(\'&\'),part,sep,i;for(i=0;i<parts.length;i++){part=parts[i];sep=part.indexOf(\'=\');if(sep>0){URLPARAMS[part.substring(0,sep)]=decodeURIComponent(part.substring(sep+1));}}//determine if this browser supports image alpha transparency\n$.Browser.alpha=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9||$.Browser.vendor==$.BROWSERS.CHROME&&$.Browser.version<2);//determine if this browser supports element.style.opacity\n$.Browser.opacity=!($.Browser.vendor==$.BROWSERS.IE&&$.Browser.version<9);})();//TODO: $.console is often used inside a try/catch block which generally\n//      prevents allowings errors to occur with detection until a debugger\n//      is attached.  Although I\'ve been guilty of the same anti-pattern\n//      I eventually was convinced that errors should naturally propogate in\n//      all but the most special cases.\n/**\n     * A convenient alias for console when available, and a simple null\n     * function when console is unavailable.\n     * @static\n     * @private\n     */var nullfunction=function nullfunction(msg){//document.location.hash = msg;\n};$.console=window.console||{log:nullfunction,debug:nullfunction,info:nullfunction,warn:nullfunction,error:nullfunction,assert:nullfunction};// Adding support for HTML5\'s requestAnimationFrame as suggested by acdha.\n// Implementation taken from matt synder\'s post here:\n// http://mattsnider.com/cross-browser-and-legacy-supported-requestframeanimation/\n(function(w){// most browsers have an implementation\nvar requestAnimationFrame=w.requestAnimationFrame||w.mozRequestAnimationFrame||w.webkitRequestAnimationFrame||w.msRequestAnimationFrame;var cancelAnimationFrame=w.cancelAnimationFrame||w.mozCancelAnimationFrame||w.webkitCancelAnimationFrame||w.msCancelAnimationFrame;// polyfill, when necessary\nif(requestAnimationFrame&&cancelAnimationFrame){// We can\'t assign these window methods directly to $ because they\n// expect their "this" to be "window", so we call them in wrappers.\n$.requestAnimationFrame=function(){return requestAnimationFrame.apply(w,arguments);};$.cancelAnimationFrame=function(){return cancelAnimationFrame.apply(w,arguments);};}else{var aAnimQueue=[],processing=[],iRequestId=0,iIntervalId;// create a mock requestAnimationFrame function\n$.requestAnimationFrame=function(callback){aAnimQueue.push([++iRequestId,callback]);if(!iIntervalId){iIntervalId=setInterval(function(){if(aAnimQueue.length){var time=$.now();// Process all of the currently outstanding frame\n// requests, but none that get added during the\n// processing.\n// Swap the arrays so we don\'t have to create a new\n// array every frame.\nvar temp=processing;processing=aAnimQueue;aAnimQueue=temp;while(processing.length){processing.shift()[1](time);}}else{// don\'t continue the interval, if unnecessary\nclearInterval(iIntervalId);iIntervalId=undefined;}},1000/50);// estimating support for 50 frames per second\n}return iRequestId;};// create a mock cancelAnimationFrame function\n$.cancelAnimationFrame=function(requestId){// find the request ID and remove it\nvar i,j;for(i=0,j=aAnimQueue.length;i<j;i+=1){if(aAnimQueue[i][0]===requestId){aAnimQueue.splice(i,1);return;}}// If it\'s not in the queue, it may be in the set we\'re currently\n// processing (if cancelAnimationFrame is called from within a\n// requestAnimationFrame callback).\nfor(i=0,j=processing.length;i<j;i+=1){if(processing[i][0]===requestId){processing.splice(i,1);return;}}};}})(window);/**\n     * @private\n     * @inner\n     * @function\n     * @param {Element} element\n     * @param {Boolean} [isFixed]\n     * @returns {Element}\n     */function getOffsetParent(element,isFixed){if(isFixed&&element!=document.body){return document.body;}else{return element.offsetParent;}}/**\n     * @private\n     * @inner\n     * @function\n     * @param {XMLHttpRequest} xhr\n     * @param {String} tilesUrl\n     * @deprecated\n     */function processDZIResponse(xhr,tilesUrl){var status,statusText,doc=null;if(!xhr){throw new Error($.getString("Errors.Security"));}else if(xhr.status!==200&&xhr.status!==0){status=xhr.status;statusText=status==404?"Not Found":xhr.statusText;throw new Error($.getString("Errors.Status",status,statusText));}if(xhr.responseXML&&xhr.responseXML.documentElement){doc=xhr.responseXML;}else if(xhr.responseText){doc=$.parseXml(xhr.responseText);}return processDZIXml(doc,tilesUrl);}/**\n     * @private\n     * @inner\n     * @function\n     * @param {Document} xmlDoc\n     * @param {String} tilesUrl\n     * @deprecated\n     */function processDZIXml(xmlDoc,tilesUrl){if(!xmlDoc||!xmlDoc.documentElement){throw new Error($.getString("Errors.Xml"));}var root=xmlDoc.documentElement,rootName=root.tagName;if(rootName=="Image"){try{return processDZI(root,tilesUrl);}catch(e){throw e instanceof Error?e:new Error($.getString("Errors.Dzi"));}}else if(rootName=="Collection"){throw new Error($.getString("Errors.Dzc"));}else if(rootName=="Error"){return $._processDZIError(root);}throw new Error($.getString("Errors.Dzi"));}/**\n     * @private\n     * @inner\n     * @function\n     * @param {Element} imageNode\n     * @param {String} tilesUrl\n     * @deprecated\n     */function processDZI(imageNode,tilesUrl){var fileFormat=imageNode.getAttribute("Format"),sizeNode=imageNode.getElementsByTagName("Size")[0],dispRectNodes=imageNode.getElementsByTagName("DisplayRect"),width=parseInt(sizeNode.getAttribute("Width"),10),height=parseInt(sizeNode.getAttribute("Height"),10),tileSize=parseInt(imageNode.getAttribute("TileSize"),10),tileOverlap=parseInt(imageNode.getAttribute("Overlap"),10),dispRects=[],dispRectNode,rectNode,i;if(!$.imageFormatSupported(fileFormat)){throw new Error($.getString("Errors.ImageFormat",fileFormat.toUpperCase()));}for(i=0;i<dispRectNodes.length;i++){dispRectNode=dispRectNodes[i];rectNode=dispRectNode.getElementsByTagName("Rect")[0];dispRects.push(new $.DisplayRect(parseInt(rectNode.getAttribute("X"),10),parseInt(rectNode.getAttribute("Y"),10),parseInt(rectNode.getAttribute("Width"),10),parseInt(rectNode.getAttribute("Height"),10),0,// ignore MinLevel attribute, bug in Deep Zoom Composer\nparseInt(dispRectNode.getAttribute("MaxLevel"),10)));}return new $.DziTileSource(width,height,tileSize,tileOverlap,tilesUrl,fileFormat,dispRects);}/**\n     * @private\n     * @inner\n     * @function\n     * @param {Element} imageNode\n     * @param {String} tilesUrl\n     * @deprecated\n     */function processDZIJSON(imageData,tilesUrl){var fileFormat=imageData.Format,sizeData=imageData.Size,dispRectData=imageData.DisplayRect||[],width=parseInt(sizeData.Width,10),height=parseInt(sizeData.Height,10),tileSize=parseInt(imageData.TileSize,10),tileOverlap=parseInt(imageData.Overlap,10),dispRects=[],rectData,i;if(!$.imageFormatSupported(fileFormat)){throw new Error($.getString("Errors.ImageFormat",fileFormat.toUpperCase()));}for(i=0;i<dispRectData.length;i++){rectData=dispRectData[i].Rect;dispRects.push(new $.DisplayRect(parseInt(rectData.X,10),parseInt(rectData.Y,10),parseInt(rectData.Width,10),parseInt(rectData.Height,10),0,// ignore MinLevel attribute, bug in Deep Zoom Composer\nparseInt(rectData.MaxLevel,10)));}return new $.DziTileSource(width,height,tileSize,tileOverlap,tilesUrl,fileFormat,dispRects);}/**\n     * @private\n     * @inner\n     * @function\n     * @param {Document} errorNode\n     * @throws {Error}\n     * @deprecated\n     */$._processDZIError=function(errorNode){var messageNode=errorNode.getElementsByTagName("Message")[0],message=messageNode.firstChild.nodeValue;throw new Error(message);};})(OpenSeadragon);/*\n * OpenSeadragon - full-screen support functions\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n     * Determine native full screen support we can get from the browser.\n     * @member fullScreenApi\n     * @memberof OpenSeadragon\n     * @type {object}\n     * @property {Boolean} supportsFullScreen Return true if full screen API is supported.\n     * @property {Function} isFullScreen Return true if currently in full screen mode.\n     * @property {Function} getFullScreenElement Return the element currently in full screen mode.\n     * @property {Function} requestFullScreen Make a request to go in full screen mode.\n     * @property {Function} exitFullScreen Make a request to exit full screen mode.\n     * @property {Function} cancelFullScreen Deprecated, use exitFullScreen instead.\n     * @property {String} fullScreenEventName Event fired when the full screen mode change.\n     * @property {String} fullScreenErrorEventName Event fired when a request to go\n     * in full screen mode failed.\n     */var fullScreenApi={supportsFullScreen:false,isFullScreen:function isFullScreen(){return false;},getFullScreenElement:function getFullScreenElement(){return null;},requestFullScreen:function requestFullScreen(){},exitFullScreen:function exitFullScreen(){},cancelFullScreen:function cancelFullScreen(){},fullScreenEventName:\'\',fullScreenErrorEventName:\'\'};// check for native support\nif(document.exitFullscreen){// W3C standard\nfullScreenApi.supportsFullScreen=true;fullScreenApi.getFullScreenElement=function(){return document.fullscreenElement;};fullScreenApi.requestFullScreen=function(element){return element.requestFullscreen();};fullScreenApi.exitFullScreen=function(){document.exitFullscreen();};fullScreenApi.fullScreenEventName="fullscreenchange";fullScreenApi.fullScreenErrorEventName="fullscreenerror";}else if(document.msExitFullscreen){// IE 11\nfullScreenApi.supportsFullScreen=true;fullScreenApi.getFullScreenElement=function(){return document.msFullscreenElement;};fullScreenApi.requestFullScreen=function(element){return element.msRequestFullscreen();};fullScreenApi.exitFullScreen=function(){document.msExitFullscreen();};fullScreenApi.fullScreenEventName="MSFullscreenChange";fullScreenApi.fullScreenErrorEventName="MSFullscreenError";}else if(document.webkitExitFullscreen){// Recent webkit\nfullScreenApi.supportsFullScreen=true;fullScreenApi.getFullScreenElement=function(){return document.webkitFullscreenElement;};fullScreenApi.requestFullScreen=function(element){return element.webkitRequestFullscreen();};fullScreenApi.exitFullScreen=function(){document.webkitExitFullscreen();};fullScreenApi.fullScreenEventName="webkitfullscreenchange";fullScreenApi.fullScreenErrorEventName="webkitfullscreenerror";}else if(document.webkitCancelFullScreen){// Old webkit\nfullScreenApi.supportsFullScreen=true;fullScreenApi.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement;};fullScreenApi.requestFullScreen=function(element){return element.webkitRequestFullScreen();};fullScreenApi.exitFullScreen=function(){document.webkitCancelFullScreen();};fullScreenApi.fullScreenEventName="webkitfullscreenchange";fullScreenApi.fullScreenErrorEventName="webkitfullscreenerror";}else if(document.mozCancelFullScreen){// Firefox\nfullScreenApi.supportsFullScreen=true;fullScreenApi.getFullScreenElement=function(){return document.mozFullScreenElement;};fullScreenApi.requestFullScreen=function(element){return element.mozRequestFullScreen();};fullScreenApi.exitFullScreen=function(){document.mozCancelFullScreen();};fullScreenApi.fullScreenEventName="mozfullscreenchange";fullScreenApi.fullScreenErrorEventName="mozfullscreenerror";}fullScreenApi.isFullScreen=function(){return fullScreenApi.getFullScreenElement()!==null;};fullScreenApi.cancelFullScreen=function(){$.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead.");fullScreenApi.exitFullScreen();};// export api\n$.extend($,fullScreenApi);})(OpenSeadragon);/*\n * OpenSeadragon - EventSource\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n * Event handler method signature used by all OpenSeadragon events.\n *\n * @callback EventHandler\n * @memberof OpenSeadragon\n * @param {Object} event - See individual events for event-specific properties.\n *//**\n * @class EventSource\n * @classdesc For use by classes which want to support custom, non-browser events.\n *\n * @memberof OpenSeadragon\n */$.EventSource=function(){this.events={};};/** @lends OpenSeadragon.EventSource.prototype */$.EventSource.prototype={// TODO: Add a method \'one\' which automatically unbinds a listener after the first triggered event that matches.\n/**\n     * Add an event handler for a given event.\n     * @function\n     * @param {String} eventName - Name of event to register.\n     * @param {OpenSeadragon.EventHandler} handler - Function to call when event is triggered.\n     * @param {Object} [userData=null] - Arbitrary object to be passed unchanged to the handler.\n     */addHandler:function addHandler(eventName,handler,userData){var events=this.events[eventName];if(!events){this.events[eventName]=events=[];}if(handler&&$.isFunction(handler)){events[events.length]={handler:handler,userData:userData||null};}},/**\n     * Remove a specific event handler for a given event.\n     * @function\n     * @param {String} eventName - Name of event for which the handler is to be removed.\n     * @param {OpenSeadragon.EventHandler} handler - Function to be removed.\n     */removeHandler:function removeHandler(eventName,handler){var events=this.events[eventName],handlers=[],i;if(!events){return;}if($.isArray(events)){for(i=0;i<events.length;i++){if(events[i].handler!==handler){handlers.push(events[i]);}}this.events[eventName]=handlers;}},/**\n     * Remove all event handlers for a given event type. If no type is given all\n     * event handlers for every event type are removed.\n     * @function\n     * @param {String} eventName - Name of event for which all handlers are to be removed.\n     */removeAllHandlers:function removeAllHandlers(eventName){if(eventName){this.events[eventName]=[];}else{for(var eventType in this.events){this.events[eventType]=[];}}},/**\n     * Get a function which iterates the list of all handlers registered for a given event, calling the handler for each.\n     * @function\n     * @param {String} eventName - Name of event to get handlers for.\n     */getHandler:function getHandler(eventName){var events=this.events[eventName];if(!events||!events.length){return null;}events=events.length===1?[events[0]]:Array.apply(null,events);return function(source,args){var i,length=events.length;for(i=0;i<length;i++){if(events[i]){args.eventSource=source;args.userData=events[i].userData;events[i].handler(args);}}};},/**\n     * Trigger an event, optionally passing additional information.\n     * @function\n     * @param {String} eventName - Name of event to register.\n     * @param {Object} eventArgs - Event-specific data.\n     */raiseEvent:function raiseEvent(eventName,eventArgs){//uncomment if you want to get a log of all events\n//$.console.log( eventName );\nvar handler=this.getHandler(eventName);if(handler){if(!eventArgs){eventArgs={};}handler(this,eventArgs);}}};})(OpenSeadragon);/*\n * OpenSeadragon - MouseTracker\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){// All MouseTracker instances\nvar MOUSETRACKERS=[];// dictionary from hash to private properties\nvar THIS={};/**\n     * @class MouseTracker\n     * @classdesc Provides simplified handling of common pointer device (mouse, touch, pen, etc.) gestures\n     *            and keyboard events on a specified element.\n     * @memberof OpenSeadragon\n     * @param {Object} options\n     *      Allows configurable properties to be entirely specified by passing\n     *      an options object to the constructor.  The constructor also supports\n     *      the original positional arguments \'element\', \'clickTimeThreshold\',\n     *      and \'clickDistThreshold\' in that order.\n     * @param {Element|String} options.element\n     *      A reference to an element or an element id for which the pointer/key\n     *      events will be monitored.\n     * @param {Boolean} [options.startDisabled=false]\n     *      If true, event tracking on the element will not start until\n     *      {@link OpenSeadragon.MouseTracker.setTracking|setTracking} is called.\n     * @param {Number} options.clickTimeThreshold\n     *      The number of milliseconds within which a pointer down-up event combination\n     *      will be treated as a click gesture.\n     * @param {Number} options.clickDistThreshold\n     *      The maximum distance allowed between a pointer down event and a pointer up event\n     *      to be treated as a click gesture.\n     * @param {Number} options.dblClickTimeThreshold\n     *      The number of milliseconds within which two pointer down-up event combinations\n     *      will be treated as a double-click gesture.\n     * @param {Number} options.dblClickDistThreshold\n     *      The maximum distance allowed between two pointer click events\n     *      to be treated as a click gesture.\n     * @param {Number} [options.stopDelay=50]\n     *      The number of milliseconds without pointer move before the stop\n     *      event is fired.\n     * @param {OpenSeadragon.EventHandler} [options.enterHandler=null]\n     *      An optional handler for pointer enter.\n     * @param {OpenSeadragon.EventHandler} [options.exitHandler=null]\n     *      An optional handler for pointer exit.\n     * @param {OpenSeadragon.EventHandler} [options.pressHandler=null]\n     *      An optional handler for pointer press.\n     * @param {OpenSeadragon.EventHandler} [options.nonPrimaryPressHandler=null]\n     *      An optional handler for pointer non-primary button press.\n     * @param {OpenSeadragon.EventHandler} [options.releaseHandler=null]\n     *      An optional handler for pointer release.\n     * @param {OpenSeadragon.EventHandler} [options.nonPrimaryReleaseHandler=null]\n     *      An optional handler for pointer non-primary button release.\n     * @param {OpenSeadragon.EventHandler} [options.moveHandler=null]\n     *      An optional handler for pointer move.\n     * @param {OpenSeadragon.EventHandler} [options.scrollHandler=null]\n     *      An optional handler for mouse wheel scroll.\n     * @param {OpenSeadragon.EventHandler} [options.clickHandler=null]\n     *      An optional handler for pointer click.\n     * @param {OpenSeadragon.EventHandler} [options.dblClickHandler=null]\n     *      An optional handler for pointer double-click.\n     * @param {OpenSeadragon.EventHandler} [options.dragHandler=null]\n     *      An optional handler for the drag gesture.\n     * @param {OpenSeadragon.EventHandler} [options.dragEndHandler=null]\n     *      An optional handler for after a drag gesture.\n     * @param {OpenSeadragon.EventHandler} [options.pinchHandler=null]\n     *      An optional handler for the pinch gesture.\n     * @param {OpenSeadragon.EventHandler} [options.keyDownHandler=null]\n     *      An optional handler for keydown.\n     * @param {OpenSeadragon.EventHandler} [options.keyUpHandler=null]\n     *      An optional handler for keyup.\n     * @param {OpenSeadragon.EventHandler} [options.keyHandler=null]\n     *      An optional handler for keypress.\n     * @param {OpenSeadragon.EventHandler} [options.focusHandler=null]\n     *      An optional handler for focus.\n     * @param {OpenSeadragon.EventHandler} [options.blurHandler=null]\n     *      An optional handler for blur.\n     * @param {Object} [options.userData=null]\n     *      Arbitrary object to be passed unchanged to any attached handler methods.\n     */$.MouseTracker=function(options){MOUSETRACKERS.push(this);var args=arguments;if(!$.isPlainObject(options)){options={element:args[0],clickTimeThreshold:args[1],clickDistThreshold:args[2]};}this.hash=Math.random();// An unique hash for this tracker.\n/**\n         * The element for which pointer events are being monitored.\n         * @member {Element} element\n         * @memberof OpenSeadragon.MouseTracker#\n         */this.element=$.getElement(options.element);/**\n         * The number of milliseconds within which a pointer down-up event combination\n         * will be treated as a click gesture.\n         * @member {Number} clickTimeThreshold\n         * @memberof OpenSeadragon.MouseTracker#\n         */this.clickTimeThreshold=options.clickTimeThreshold||$.DEFAULT_SETTINGS.clickTimeThreshold;/**\n         * The maximum distance allowed between a pointer down event and a pointer up event\n         * to be treated as a click gesture.\n         * @member {Number} clickDistThreshold\n         * @memberof OpenSeadragon.MouseTracker#\n         */this.clickDistThreshold=options.clickDistThreshold||$.DEFAULT_SETTINGS.clickDistThreshold;/**\n         * The number of milliseconds within which two pointer down-up event combinations\n         * will be treated as a double-click gesture.\n         * @member {Number} dblClickTimeThreshold\n         * @memberof OpenSeadragon.MouseTracker#\n         */this.dblClickTimeThreshold=options.dblClickTimeThreshold||$.DEFAULT_SETTINGS.dblClickTimeThreshold;/**\n         * The maximum distance allowed between two pointer click events\n         * to be treated as a click gesture.\n         * @member {Number} clickDistThreshold\n         * @memberof OpenSeadragon.MouseTracker#\n         */this.dblClickDistThreshold=options.dblClickDistThreshold||$.DEFAULT_SETTINGS.dblClickDistThreshold;this.userData=options.userData||null;this.stopDelay=options.stopDelay||50;this.enterHandler=options.enterHandler||null;this.exitHandler=options.exitHandler||null;this.pressHandler=options.pressHandler||null;this.nonPrimaryPressHandler=options.nonPrimaryPressHandler||null;this.releaseHandler=options.releaseHandler||null;this.nonPrimaryReleaseHandler=options.nonPrimaryReleaseHandler||null;this.moveHandler=options.moveHandler||null;this.scrollHandler=options.scrollHandler||null;this.clickHandler=options.clickHandler||null;this.dblClickHandler=options.dblClickHandler||null;this.dragHandler=options.dragHandler||null;this.dragEndHandler=options.dragEndHandler||null;this.pinchHandler=options.pinchHandler||null;this.stopHandler=options.stopHandler||null;this.keyDownHandler=options.keyDownHandler||null;this.keyUpHandler=options.keyUpHandler||null;this.keyHandler=options.keyHandler||null;this.focusHandler=options.focusHandler||null;this.blurHandler=options.blurHandler||null;//Store private properties in a scope sealed hash map\nvar _this=this;/**\n         * @private\n         * @property {Boolean} tracking\n         *      Are we currently tracking pointer events for this element.\n         */THIS[this.hash]={click:function click(event){onClick(_this,event);},dblclick:function dblclick(event){onDblClick(_this,event);},keydown:function keydown(event){onKeyDown(_this,event);},keyup:function keyup(event){onKeyUp(_this,event);},keypress:function keypress(event){onKeyPress(_this,event);},focus:function focus(event){onFocus(_this,event);},blur:function blur(event){onBlur(_this,event);},wheel:function wheel(event){onWheel(_this,event);},mousewheel:function mousewheel(event){onMouseWheel(_this,event);},DOMMouseScroll:function DOMMouseScroll(event){onMouseWheel(_this,event);},MozMousePixelScroll:function MozMousePixelScroll(event){onMouseWheel(_this,event);},mouseenter:function mouseenter(event){onMouseEnter(_this,event);},// Used on IE8 only\nmouseleave:function mouseleave(event){onMouseLeave(_this,event);},// Used on IE8 only\nmouseover:function mouseover(event){onMouseOver(_this,event);},mouseout:function mouseout(event){onMouseOut(_this,event);},mousedown:function mousedown(event){onMouseDown(_this,event);},mouseup:function mouseup(event){onMouseUp(_this,event);},mouseupcaptured:function mouseupcaptured(event){onMouseUpCaptured(_this,event);},mousemove:function mousemove(event){onMouseMove(_this,event);},mousemovecaptured:function mousemovecaptured(event){onMouseMoveCaptured(_this,event);},touchstart:function touchstart(event){onTouchStart(_this,event);},touchend:function touchend(event){onTouchEnd(_this,event);},touchendcaptured:function touchendcaptured(event){onTouchEndCaptured(_this,event);},touchmove:function touchmove(event){onTouchMove(_this,event);},touchmovecaptured:function touchmovecaptured(event){onTouchMoveCaptured(_this,event);},touchcancel:function touchcancel(event){onTouchCancel(_this,event);},gesturestart:function gesturestart(event){onGestureStart(_this,event);},gesturechange:function gesturechange(event){onGestureChange(_this,event);},pointerover:function pointerover(event){onPointerOver(_this,event);},MSPointerOver:function MSPointerOver(event){onPointerOver(_this,event);},pointerout:function pointerout(event){onPointerOut(_this,event);},MSPointerOut:function MSPointerOut(event){onPointerOut(_this,event);},pointerdown:function pointerdown(event){onPointerDown(_this,event);},MSPointerDown:function MSPointerDown(event){onPointerDown(_this,event);},pointerup:function pointerup(event){onPointerUp(_this,event);},MSPointerUp:function MSPointerUp(event){onPointerUp(_this,event);},pointermove:function pointermove(event){onPointerMove(_this,event);},MSPointerMove:function MSPointerMove(event){onPointerMove(_this,event);},pointercancel:function pointercancel(event){onPointerCancel(_this,event);},MSPointerCancel:function MSPointerCancel(event){onPointerCancel(_this,event);},pointerupcaptured:function pointerupcaptured(event){onPointerUpCaptured(_this,event);},pointermovecaptured:function pointermovecaptured(event){onPointerMoveCaptured(_this,event);},tracking:false,// Active pointers lists. Array of GesturePointList objects, one for each pointer device type.\n// GesturePointList objects are added each time a pointer is tracked by a new pointer device type (see getActivePointersListByType()).\n// Active pointers are any pointer being tracked for this element which are in the hit-test area\n//     of the element (for hover-capable devices) and/or have contact or a button press initiated in the element.\nactivePointersLists:[],// Tracking for double-click gesture\nlastClickPos:null,dblClickTimeOut:null,// Tracking for pinch gesture\npinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null};if(!options.startDisabled){this.setTracking(true);}};/** @lends OpenSeadragon.MouseTracker.prototype */$.MouseTracker.prototype={/**\n         * Clean up any events or objects created by the tracker.\n         * @function\n         */destroy:function destroy(){var i;stopTracking(this);this.element=null;for(i=0;i<MOUSETRACKERS.length;i++){if(MOUSETRACKERS[i]===this){MOUSETRACKERS.splice(i,1);break;}}THIS[this.hash]=null;delete THIS[this.hash];},/**\n         * Are we currently tracking events on this element.\n         * @deprecated Just use this.tracking\n         * @function\n         * @returns {Boolean} Are we currently tracking events on this element.\n         */isTracking:function isTracking(){return THIS[this.hash].tracking;},/**\n         * Enable or disable whether or not we are tracking events on this element.\n         * @function\n         * @param {Boolean} track True to start tracking, false to stop tracking.\n         * @returns {OpenSeadragon.MouseTracker} Chainable.\n         */setTracking:function setTracking(track){if(track){startTracking(this);}else{stopTracking(this);}//chain\nreturn this;},/**\n         * Returns the {@link OpenSeadragon.MouseTracker.GesturePointList|GesturePointList} for the given pointer device type,\n         * creating and caching a new {@link OpenSeadragon.MouseTracker.GesturePointList|GesturePointList} if one doesn\'t already exist for the type.\n         * @function\n         * @param {String} type - The pointer device type: "mouse", "touch", "pen", etc.\n         * @returns {OpenSeadragon.MouseTracker.GesturePointList}\n         */getActivePointersListByType:function getActivePointersListByType(type){var delegate=THIS[this.hash],i,len=delegate.activePointersLists.length,list;for(i=0;i<len;i++){if(delegate.activePointersLists[i].type===type){return delegate.activePointersLists[i];}}list=new $.MouseTracker.GesturePointList(type);delegate.activePointersLists.push(list);return list;},/**\n         * Returns the total number of pointers currently active on the tracked element.\n         * @function\n         * @returns {Number}\n         */getActivePointerCount:function getActivePointerCount(){var delegate=THIS[this.hash],i,len=delegate.activePointersLists.length,count=0;for(i=0;i<len;i++){count+=delegate.activePointersLists[i].getLength();}return count;},/**\n         * Implement or assign implementation to these handlers during or after\n         * calling the constructor.\n         * @function\n         * @param {Object} event\n         * @param {OpenSeadragon.MouseTracker} event.eventSource\n         *      A reference to the tracker instance.\n         * @param {String} event.pointerType\n         *     "mouse", "touch", "pen", etc.\n         * @param {OpenSeadragon.Point} event.position\n         *      The position of the event relative to the tracked element.\n         * @param {Number} event.buttons\n         *      Current buttons pressed.\n         *      Combination of bit flags 0: none, 1: primary (or touch contact), 2: secondary, 4: aux (often middle), 8: X1 (often back), 16: X2 (often forward), 32: pen eraser.\n         * @param {Number} event.pointers\n         *      Number of pointers (all types) active in the tracked element.\n         * @param {Boolean} event.insideElementPressed\n         *      True if the left mouse button is currently being pressed and was\n         *      initiated inside the tracked element, otherwise false.\n         * @param {Boolean} event.buttonDownAny\n         *      Was the button down anywhere in the screen during the event. <span style="color:red;">Deprecated. Use buttons instead.</span>\n         * @param {Boolean} event.isTouchEvent\n         *      True if the original event is a touch event, otherwise false. <span style="color:red;">Deprecated. Use pointerType and/or originalEvent instead.</span>\n         * @param {Object} event.originalEvent\n         *      The original event object.\n         * @param {Boolean} event.preventDefaultAction\n         *      Set to true to prevent the tracker subscriber from performing its default action (subscriber implementation dependent). Default: false.\n         * @param {Object} event.userData\n         *      Arbitrary user-defined object.\n         */enterHandler:function enterHandler(){},/**\n         * Implement or assign implementation to these handlers during or after\n         * calling the constructor.\n         * @function\n         * @param {Object} event\n         * @param {OpenSeadragon.MouseTracker} event.eventSource\n         *      A reference to the tracker instance.\n         * @param {String} event.pointerType\n         *     "mouse", "touch", "pen", etc.\n         * @param {OpenSeadragon.Point} event.position\n         *      The position of the event relative to the tracked element.\n         * @param {Number} event.buttons\n         *      Current buttons pressed.\n         *      Combination of bit flags 0: none, 1: primary (or touch contact), 2: secondary, 4: aux (often middle), 8: X1 (often back), 16: X2 (often forward), 32: pen eraser.\n         * @param {Number} event.pointers\n         *      Number of pointers (all types) active in the tracked element.\n         * @param {Boolean} event.insideElementPressed\n         *      True if the left mouse button is currently being pressed and was\n         *      initiated inside the tracked element, otherwise false.\n         * @param {Boolean} event.buttonDownAny\n         *      Was the button down anywhere in the screen during the event. <span style="color:red;">Deprecated. Use buttons instead.</span>\n         * @param {Boolean} event.isTouchEvent\n         *      True if the original event is a touch event, otherwise false. <span style="color:red;">Deprecated. Use pointerType and/or originalEvent instead.</span>\n         * @param {Object} event.originalEvent\n         *      The original event object.\n         * @param {Boolean} event.preventDefaultAction\n         *      Set to true to prevent the tracker subscriber from performing its default action (subscriber implementation dependent). Default: false.\n         * @param {Object} event.userData\n         *      Arbitrary user-defined object.\n         */exitHandler:function exitHandler(){},/**\n         * Implement or assign implementation to these handlers during or after\n         * calling the constructor.\n         * @function\n         * @param {Object} event\n         * @param {OpenSeadragon.MouseTracker} event.eventSource\n         *      A reference to the tracker instance.\n         * @param {String} event.pointerType\n         *     "mouse", "touch", "pen", etc.\n         * @param {OpenSeadragon.Point} event.position\n         *      The position of the event relative to the tracked element.\n         * @param {Number} event.buttons\n         *      Current buttons pressed.\n         *      Combination of bit flags 0: none, 1: primary (or touch contact), 2: secondary, 4: aux (often middle), 8: X1 (often back), 16: X2 (often forward), 32: pen eraser.\n         * @param {Boolean} event.isTouchEvent\n         *      True if the original event is a touch event, otherwise false. <span style="color:red;">Deprecated. Use pointerType and/or originalEvent instead.</span>\n         * @param {Object} event.originalEvent\n         *      The original event object.\n         * @param {Boolean} event.preventDefaultAction\n         *      Set to true to prevent the tracker subscriber from performing its default action (subscriber implementation dependent). Default: false.\n         * @param {Object} event.userData\n         *      Arbitrary user-defined object.\n         */pressHandler:function pressHandler(){},/**\n         * Implement or assign implementation to these handlers during or after\n         * calling the constructor.\n         * @function\n         * @param {Object} event\n         * @param {OpenSeadragon.MouseTracker} event.eventSource\n         *      A reference to the tracker instance.\n         * @param {String} event.pointerType\n         *     "mouse", "touch", "pen", etc.\n         * @param {OpenSeadragon.Point} event.position\n         *      The position of the event relative to the tracked element.\n         * @param {Number} event.button\n         *      Button which caused the event.\n         *      -1: none, 0: primary/left, 1: aux/middle, 2: secondary/right, 3: X1/back, 4: X2/forward, 5: pen eraser.\n         * @param {Number} event.buttons\n         *      Current buttons pressed.\n         *      Combination of bit flags 0: none, 1: primary (or touch contact), 2: secondary, 4: aux (often middle), 8: X1 (often back), 16: X2 (often forward), 32: pen eraser.\n         * @param {Boolean} event.isTouchEvent\n         *      True if the original event is a touch event, otherwise false. <span style="color:red;">Deprecated. Use pointerType and/or originalEvent instead.</span>\n         * @param {Object} event.originalEvent\n         *      The original event object.\n         * @param {Boolean} event.preventDefaultAction\n         *      Set to true to prevent the tracker subscriber from performing its default action (subscriber implementation dependent). Default: false.\n         * @param {Object} event.userData\n         *      Arbitrary user-defined object.\n         */nonPrimaryPressHandler:function nonPrimaryPressHandler(){},/**\n         * Implement or assign implementation to these handlers during or after\n         * calling the constructor.\n         * @function\n         * @param {Object} event\n         * @param {OpenSeadragon.MouseTracker} event.eventSource\n         *      A reference to the tracker instance.\n         * @param {String} event.pointerType\n         *     "mouse", "touch", "pen", etc.\n         * @param {OpenSeadragon.Point} event.position\n         *      The position of the event relative to the tracked element.\n         * @param {Number} event.buttons\n         *      Current buttons pressed.\n         *      Combination of bit flags 0: none, 1: primary (or touch contact), 2: secondary, 4: aux (often middle), 8: X1 (often back), 16: X2 (often forward), 32: pen eraser.\n         * @param {Boolean} event.insideElementPressed\n         *      True if the left mouse button is currently being pressed and was\n         *      initiated inside the tracked element, otherwise false.\n         * @param {Boolean} event.insideElementReleased\n         *      True if the cursor inside the tracked element when the button was released.\n         * @param {Boolean} event.isTouchEvent\n         *      True if the original event is a touch event, otherwise false. <span style="color:red;">Deprecated. Use pointerType and/or originalEvent instead.</span>\n         * @param {Object} event.originalEvent\n         *      The original event object.\n         * @param {Boolean} event.preventDefaultAction\n         *      Set to true to prevent the tracker subscriber from performing its default action (subscriber implementation dependent). Default: false.\n         * @param {Object} event.userData\n         *      Arbitrary user-defined object.\n         */releaseHandler:function releaseHandler(){},/**\n         * Implement or assign implementation to these handlers during or after\n         * calling the constructor.\n         * @function\n         * @param {Object} event\n         * @param {OpenSeadragon.MouseTracker} event.eventSource\n         *      A reference to the tracker instance.\n         * @param {String} event.pointerType\n         *     "mouse", "touch", "pen", etc.\n         * @param {OpenSeadragon.Point} event.position\n         *      The position of the event relative to the tracked element.\n         * @param {Number} event.button\n         *      Button which caused the event.\n         *      -1: none, 0: primary/left, 1: aux/middle, 2: secondary/right, 3: X1/back, 4: X2/forward, 5: pen eraser.\n         * @param {Number} event.buttons\n         *      Current buttons pressed.\n         *      Combination of bit flags 0: none, 1: primary (or touch contact), 2: secondary, 4: aux (often middle), 8: X1 (often back), 16: X2 (often forward), 32: pen eraser.\n         * @param {Boolean} event.isTouchEvent\n         *      True if the original event is a touch event, otherwise false. <span style="color:red;">Deprecated. Use pointerType and/or originalEvent instead.</span>\n         * @param {Object} event.originalEvent\n         *      The original event object.\n         * @param {Boolean} event.preventDefaultAction\n         *      Set to true to prevent the tracker subscriber from performing its default action (subscriber implementation dependent). Default: false.\n         * @param {Object} event.userData\n         *      Arbitrary user-defined object.\n         */nonPrimaryReleaseHandler:function nonPrimaryReleaseHandler(){},/**\n         * Implement or assign implementation to these handlers during or after\n         * calling the constructor.\n         * @function\n         * @param {Object} event\n         * @param {OpenSeadragon.MouseTracker} event.eventSource\n         *      A reference to the tracker instance.\n         * @param {String} event.pointerType\n         *     "mouse", "touch", "pen", etc.\n         * @param {OpenSeadragon.Point} event.position\n         *      The position of the event relative to the tracked element.\n         * @param {Number} event.buttons\n         *      Current buttons pressed.\n         *      Combination of bit flags 0: none, 1: primary (or touch contact), 2: secondary, 4: aux (often middle), 8: X1 (often back), 16: X2 (often forward), 32: pen eraser.\n         * @param {Boolean} event.isTouchEvent\n         *      True if the original event is a touch event, otherwise false. <span style="color:red;">Deprecated. Use pointerType and/or originalEvent instead.</span>\n         * @param {Object} event.originalEvent\n         *      The original event object.\n         * @param {Boolean} event.preventDefaultAction\n         *      Set to true to prevent the tracker subscriber from performing its default action (subscriber implementation dependent). Default: false.\n         * @param {Object} event.userData\n         *      Arbitrary user-defined object.\n         */moveHandler:function moveHandler(){},/**\n         * Implement or assign implementation to these handlers during or after\n         * calling the constructor.\n         * @function\n         * @param {Object} event\n         * @param {OpenSeadragon.MouseTracker} event.eventSource\n         *      A reference to the tracker instance.\n         * @param {String} event.pointerType\n         *     "mouse", "touch", "pen", etc.\n         * @param {OpenSeadragon.Point} event.position\n         *      The position of the event relative to the tracked element.\n         * @param {Number} event.scroll\n         *      The scroll delta for the event.\n         * @param {Boolean} event.shift\n         *      True if the shift key was pressed during this event.\n         * @param {Boolean} event.isTouchEvent\n         *      True if the original event is a touch event, otherwise false. <span style="color:red;">Deprecated. Use pointerType and/or originalEvent instead. Touch devices no longer generate scroll event.</span>\n         * @param {Object} event.originalEvent\n         *      The original event object.\n         * @param {Boolean} event.preventDefaultAction\n         *      Set to true to prevent the tracker subscriber from performing its default action (subscriber implementation dependent). Default: false.\n         * @param {Object} event.userData\n         *      Arbitrary user-defined object.\n         */scrollHandler:function scrollHandler(){},/**\n         * Implement or assign implementation to these handlers during or after\n         * calling the constructor.\n         * @function\n         * @param {Object} event\n         * @param {OpenSeadragon.MouseTracker} event.eventSource\n         *      A reference to the tracker instance.\n         * @param {String} event.pointerType\n         *     "mouse", "touch", "pen", etc.\n         * @param {OpenSeadragon.Point} event.position\n         *      The position of the event relative to the tracked element.\n         * @param {Boolean} event.quick\n         *      True only if the clickDistThreshold and clickTimeThreshold are both passed. Useful for ignoring drag events.\n         * @param {Boolean} event.shift\n         *      True if the shift key was pressed during this event.\n         * @param {Boolean} event.isTouchEvent\n         *      True if the original event is a touch event, otherwise false. <span style="color:red;">Deprecated. Use pointerType and/or originalEvent instead.</span>\n         * @param {Object} event.originalEvent\n         *      The original event object.\n         * @param {Boolean} event.preventDefaultAction\n         *      Set to true to prevent the tracker subscriber from performing its default action (subscriber implementation dependent). Default: false.\n         * @param {Object} event.userData\n         *      Arbitrary user-defined object.\n         */clickHandler:function clickHandler(){},/**\n         * Implement or assign implementation to these handlers during or after\n         * calling the constructor.\n         * @function\n         * @param {Object} event\n         * @param {OpenSeadragon.MouseTracker} event.eventSource\n         *      A reference to the tracker instance.\n         * @param {String} event.pointerType\n         *     "mouse", "touch", "pen", etc.\n         * @param {OpenSeadragon.Point} event.position\n         *      The position of the event relative to the tracked element.\n         * @param {Boolean} event.shift\n         *      True if the shift key was pressed during this event.\n         * @param {Boolean} event.isTouchEvent\n         *      True if the original event is a touch event, otherwise false. <span style="color:red;">Deprecated. Use pointerType and/or originalEvent instead.</span>\n         * @param {Object} event.originalEvent\n         *      The original event object.\n         * @param {Boolean} event.preventDefaultAction\n         *      Set to true to prevent the tracker subscriber from performing its default action (subscriber implementation dependent). Default: false.\n         * @param {Object} event.userData\n         *      Arbitrary user-defined object.\n         */dblClickHandler:function dblClickHandler(){},/**\n         * Implement or assign implementation to these handlers during or after\n         * calling the constructor.\n         * @function\n         * @param {Object} event\n         * @param {OpenSeadragon.MouseTracker} event.eventSource\n         *      A reference to the tracker instance.\n         * @param {String} event.pointerType\n         *     "mouse", "touch", "pen", etc.\n         * @param {OpenSeadragon.Point} event.position\n         *      The position of the event relative to the tracked element.\n         * @param {Number} event.buttons\n         *      Current buttons pressed.\n         *      Combination of bit flags 0: none, 1: primary (or touch contact), 2: secondary, 4: aux (often middle), 8: X1 (often back), 16: X2 (often forward), 32: pen eraser.\n         * @param {OpenSeadragon.Point} event.delta\n         *      The x,y components of the difference between the current position and the last drag event position.  Useful for ignoring or weighting the events.\n         * @param {Number} event.speed\n         *     Current computed speed, in pixels per second.\n         * @param {Number} event.direction\n         *     Current computed direction, expressed as an angle counterclockwise relative to the positive X axis (-pi to pi, in radians). Only valid if speed > 0.\n         * @param {Boolean} event.shift\n         *      True if the shift key was pressed during this event.\n         * @param {Boolean} event.isTouchEvent\n         *      True if the original event is a touch event, otherwise false. <span style="color:red;">Deprecated. Use pointerType and/or originalEvent instead.</span>\n         * @param {Object} event.originalEvent\n         *      The original event object.\n         * @param {Boolean} event.preventDefaultAction\n         *      Set to true to prevent the tracker subscriber from performing its default action (subscriber implementation dependent). Default: false.\n         * @param {Object} event.userData\n         *      Arbitrary user-defined object.\n         */dragHandler:function dragHandler(){},/**\n         * Implement or assign implementation to these handlers during or after\n         * calling the constructor.\n         * @function\n         * @param {Object} event\n         * @param {OpenSeadragon.MouseTracker} event.eventSource\n         *      A reference to the tracker instance.\n         * @param {String} event.pointerType\n         *     "mouse", "touch", "pen", etc.\n         * @param {OpenSeadragon.Point} event.position\n         *      The position of the event relative to the tracked element.\n         * @param {Number} event.speed\n         *     Speed at the end of a drag gesture, in pixels per second.\n         * @param {Number} event.direction\n         *     Direction at the end of a drag gesture, expressed as an angle counterclockwise relative to the positive X axis (-pi to pi, in radians). Only valid if speed > 0.\n         * @param {Boolean} event.shift\n         *      True if the shift key was pressed during this event.\n         * @param {Boolean} event.isTouchEvent\n         *      True if the original event is a touch event, otherwise false. <span style="color:red;">Deprecated. Use pointerType and/or originalEvent instead.</span>\n         * @param {Object} event.originalEvent\n         *      The original event object.\n         * @param {Boolean} event.preventDefaultAction\n         *      Set to true to prevent the tracker subscriber from performing its default action (subscriber implementation dependent). Default: false.\n         * @param {Object} event.userData\n         *      Arbitrary user-defined object.\n         */dragEndHandler:function dragEndHandler(){},/**\n         * Implement or assign implementation to these handlers during or after\n         * calling the constructor.\n         * @function\n         * @param {Object} event\n         * @param {OpenSeadragon.MouseTracker} event.eventSource\n         *      A reference to the tracker instance.\n         * @param {String} event.pointerType\n         *     "mouse", "touch", "pen", etc.\n         * @param {Array.<OpenSeadragon.MouseTracker.GesturePoint>} event.gesturePoints\n         *      Gesture points associated with the gesture. Velocity data can be found here.\n         * @param {OpenSeadragon.Point} event.lastCenter\n         *      The previous center point of the two pinch contact points relative to the tracked element.\n         * @param {OpenSeadragon.Point} event.center\n         *      The center point of the two pinch contact points relative to the tracked element.\n         * @param {Number} event.lastDistance\n         *      The previous distance between the two pinch contact points in CSS pixels.\n         * @param {Number} event.distance\n         *      The distance between the two pinch contact points in CSS pixels.\n         * @param {Boolean} event.shift\n         *      True if the shift key was pressed during this event.\n         * @param {Object} event.originalEvent\n         *      The original event object.\n         * @param {Boolean} event.preventDefaultAction\n         *      Set to true to prevent the tracker subscriber from performing its default action (subscriber implementation dependent). Default: false.\n         * @param {Object} event.userData\n         *      Arbitrary user-defined object.\n         */pinchHandler:function pinchHandler(){},/**\n         * Implement or assign implementation to these handlers during or after\n         * calling the constructor.\n         * @function\n         * @param {Object} event\n         * @param {OpenSeadragon.MouseTracker} event.eventSource\n         *      A reference to the tracker instance.\n         * @param {String} event.pointerType\n         *     "mouse", "touch", "pen", etc.\n         * @param {OpenSeadragon.Point} event.position\n         *      The position of the event relative to the tracked element.\n         * @param {Number} event.buttons\n         *      Current buttons pressed.\n         *      Combination of bit flags 0: none, 1: primary (or touch contact), 2: secondary, 4: aux (often middle), 8: X1 (often back), 16: X2 (often forward), 32: pen eraser.\n         * @param {Boolean} event.isTouchEvent\n         *      True if the original event is a touch event, otherwise false. <span style="color:red;">Deprecated. Use pointerType and/or originalEvent instead.</span>\n         * @param {Object} event.originalEvent\n         *      The original event object.\n         * @param {Boolean} event.preventDefaultAction\n         *      Set to true to prevent the tracker subscriber from performing its default action (subscriber implementation dependent). Default: false.\n         * @param {Object} event.userData\n         *      Arbitrary user-defined object.\n         */stopHandler:function stopHandler(){},/**\n         * Implement or assign implementation to these handlers during or after\n         * calling the constructor.\n         * @function\n         * @param {Object} event\n         * @param {OpenSeadragon.MouseTracker} event.eventSource\n         *      A reference to the tracker instance.\n         * @param {Number} event.keyCode\n         *      The key code that was pressed.\n         * @param {Boolean} event.ctrl\n         *      True if the ctrl key was pressed during this event.\n         * @param {Boolean} event.shift\n         *      True if the shift key was pressed during this event.\n         * @param {Boolean} event.alt\n         *      True if the alt key was pressed during this event.\n         * @param {Boolean} event.meta\n         *      True if the meta key was pressed during this event.\n         * @param {Object} event.originalEvent\n         *      The original event object.\n         * @param {Boolean} event.preventDefaultAction\n         *      Set to true to prevent the tracker subscriber from performing its default action (subscriber implementation dependent). Default: false.\n         * @param {Object} event.userData\n         *      Arbitrary user-defined object.\n         */keyDownHandler:function keyDownHandler(){},/**\n         * Implement or assign implementation to these handlers during or after\n         * calling the constructor.\n         * @function\n         * @param {Object} event\n         * @param {OpenSeadragon.MouseTracker} event.eventSource\n         *      A reference to the tracker instance.\n         * @param {Number} event.keyCode\n         *      The key code that was pressed.\n         * @param {Boolean} event.ctrl\n         *      True if the ctrl key was pressed during this event.\n         * @param {Boolean} event.shift\n         *      True if the shift key was pressed during this event.\n         * @param {Boolean} event.alt\n         *      True if the alt key was pressed during this event.\n         * @param {Boolean} event.meta\n         *      True if the meta key was pressed during this event.\n         * @param {Object} event.originalEvent\n         *      The original event object.\n         * @param {Boolean} event.preventDefaultAction\n         *      Set to true to prevent the tracker subscriber from performing its default action (subscriber implementation dependent). Default: false.\n         * @param {Object} event.userData\n         *      Arbitrary user-defined object.\n         */keyUpHandler:function keyUpHandler(){},/**\n         * Implement or assign implementation to these handlers during or after\n         * calling the constructor.\n         * @function\n         * @param {Object} event\n         * @param {OpenSeadragon.MouseTracker} event.eventSource\n         *      A reference to the tracker instance.\n         * @param {Number} event.keyCode\n         *      The key code that was pressed.\n         * @param {Boolean} event.ctrl\n         *      True if the ctrl key was pressed during this event.\n         * @param {Boolean} event.shift\n         *      True if the shift key was pressed during this event.\n         * @param {Boolean} event.alt\n         *      True if the alt key was pressed during this event.\n         * @param {Boolean} event.meta\n         *      True if the meta key was pressed during this event.\n         * @param {Object} event.originalEvent\n         *      The original event object.\n         * @param {Boolean} event.preventDefaultAction\n         *      Set to true to prevent the tracker subscriber from performing its default action (subscriber implementation dependent). Default: false.\n         * @param {Object} event.userData\n         *      Arbitrary user-defined object.\n         */keyHandler:function keyHandler(){},/**\n         * Implement or assign implementation to these handlers during or after\n         * calling the constructor.\n         * @function\n         * @param {Object} event\n         * @param {OpenSeadragon.MouseTracker} event.eventSource\n         *      A reference to the tracker instance.\n         * @param {Object} event.originalEvent\n         *      The original event object.\n         * @param {Boolean} event.preventDefaultAction\n         *      Set to true to prevent the tracker subscriber from performing its default action (subscriber implementation dependent). Default: false.\n         * @param {Object} event.userData\n         *      Arbitrary user-defined object.\n         */focusHandler:function focusHandler(){},/**\n         * Implement or assign implementation to these handlers during or after\n         * calling the constructor.\n         * @function\n         * @param {Object} event\n         * @param {OpenSeadragon.MouseTracker} event.eventSource\n         *      A reference to the tracker instance.\n         * @param {Object} event.originalEvent\n         *      The original event object.\n         * @param {Boolean} event.preventDefaultAction\n         *      Set to true to prevent the tracker subscriber from performing its default action (subscriber implementation dependent). Default: false.\n         * @param {Object} event.userData\n         *      Arbitrary user-defined object.\n         */blurHandler:function blurHandler(){}};/**\n     * Provides continuous computation of velocity (speed and direction) of active pointers.\n     * This is a singleton, used by all MouseTracker instances, as it is unlikely there will ever be more than\n     * two active gesture pointers at a time.\n     *\n     * @private\n     * @member gesturePointVelocityTracker\n     * @memberof OpenSeadragon.MouseTracker\n     */$.MouseTracker.gesturePointVelocityTracker=function(){var trackerPoints=[],intervalId=0,lastTime=0;// Generates a unique identifier for a tracked gesture point\nvar _generateGuid=function _generateGuid(tracker,gPoint){return tracker.hash.toString()+gPoint.type+gPoint.id.toString();};// Interval timer callback. Computes velocity for all tracked gesture points.\nvar _doTracking=function _doTracking(){var i,len=trackerPoints.length,trackPoint,gPoint,now=$.now(),elapsedTime,distance,speed;elapsedTime=now-lastTime;lastTime=now;for(i=0;i<len;i++){trackPoint=trackerPoints[i];gPoint=trackPoint.gPoint;// Math.atan2 gives us just what we need for a velocity vector, as we can simply\n//   use cos()/sin() to extract the x/y velocity components.\ngPoint.direction=Math.atan2(gPoint.currentPos.y-trackPoint.lastPos.y,gPoint.currentPos.x-trackPoint.lastPos.x);// speed = distance / elapsed time\ndistance=trackPoint.lastPos.distanceTo(gPoint.currentPos);trackPoint.lastPos=gPoint.currentPos;speed=1000*distance/(elapsedTime+1);// Simple biased average, favors the most recent speed computation. Smooths out erratic gestures a bit.\ngPoint.speed=0.75*speed+0.25*gPoint.speed;}};// Public. Add a gesture point to be tracked\nvar addPoint=function addPoint(tracker,gPoint){var guid=_generateGuid(tracker,gPoint);trackerPoints.push({guid:guid,gPoint:gPoint,lastPos:gPoint.currentPos});// Only fire up the interval timer when there\'s gesture pointers to track\nif(trackerPoints.length===1){lastTime=$.now();intervalId=window.setInterval(_doTracking,50);}};// Public. Stop tracking a gesture point\nvar removePoint=function removePoint(tracker,gPoint){var guid=_generateGuid(tracker,gPoint),i,len=trackerPoints.length;for(i=0;i<len;i++){if(trackerPoints[i].guid===guid){trackerPoints.splice(i,1);// Only run the interval timer if theres gesture pointers to track\nlen--;if(len===0){window.clearInterval(intervalId);}break;}}};return{addPoint:addPoint,removePoint:removePoint};}();///////////////////////////////////////////////////////////////////////////////\n// Pointer event model and feature detection\n///////////////////////////////////////////////////////////////////////////////\n$.MouseTracker.captureElement=document;/**\n     * Detect available mouse wheel event name.\n     */$.MouseTracker.wheelEventName=$.Browser.vendor==$.BROWSERS.IE&&$.Browser.version>8||\'onwheel\'in document.createElement(\'div\')?\'wheel\':// Modern browsers support \'wheel\'\ndocument.onmousewheel!==undefined?\'mousewheel\':// Webkit and IE support at least \'mousewheel\'\n\'DOMMouseScroll\';// Assume old Firefox\n/**\n     * Detect legacy mouse capture support.\n     */$.MouseTracker.supportsMouseCapture=function(){var divElement=document.createElement(\'div\');return $.isFunction(divElement.setCapture)&&$.isFunction(divElement.releaseCapture);}();/**\n     * Detect browser pointer device event model(s) and build appropriate list of events to subscribe to.\n     */$.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur",$.MouseTracker.wheelEventName];if($.MouseTracker.wheelEventName=="DOMMouseScroll"){// Older Firefox\n$.MouseTracker.subscribeEvents.push("MozMousePixelScroll");}// Note: window.navigator.pointerEnable is deprecated on IE 11 and not part of W3C spec.\nif(window.PointerEvent&&(window.navigator.pointerEnabled||$.Browser.vendor!==$.BROWSERS.IE)){// IE11 and other W3C Pointer Event implementations (see http://www.w3.org/TR/pointerevents)\n$.MouseTracker.havePointerEvents=true;$.MouseTracker.subscribeEvents.push("pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel");$.MouseTracker.unprefixedPointerEvents=true;if(navigator.maxTouchPoints){$.MouseTracker.maxTouchPoints=navigator.maxTouchPoints;}else{$.MouseTracker.maxTouchPoints=0;}$.MouseTracker.haveMouseEnter=false;}else if(window.MSPointerEvent&&window.navigator.msPointerEnabled){// IE10\n$.MouseTracker.havePointerEvents=true;$.MouseTracker.subscribeEvents.push("MSPointerOver","MSPointerOut","MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel");$.MouseTracker.unprefixedPointerEvents=false;if(navigator.msMaxTouchPoints){$.MouseTracker.maxTouchPoints=navigator.msMaxTouchPoints;}else{$.MouseTracker.maxTouchPoints=0;}$.MouseTracker.haveMouseEnter=false;}else{// Legacy W3C mouse events\n$.MouseTracker.havePointerEvents=false;if($.Browser.vendor===$.BROWSERS.IE&&$.Browser.version<9){$.MouseTracker.subscribeEvents.push("mouseenter","mouseleave");$.MouseTracker.haveMouseEnter=true;}else{$.MouseTracker.subscribeEvents.push("mouseover","mouseout");$.MouseTracker.haveMouseEnter=false;}$.MouseTracker.subscribeEvents.push("mousedown","mouseup","mousemove");if(\'ontouchstart\'in window){// iOS, Android, and other W3c Touch Event implementations\n//    (see http://www.w3.org/TR/touch-events/)\n//    (see https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)\n//    (see https://developer.apple.com/library/safari/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)\n$.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel");}if(\'ongesturestart\'in window){// iOS (see https://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html)\n//   Subscribe to these to prevent default gesture handling\n$.MouseTracker.subscribeEvents.push("gesturestart","gesturechange");}$.MouseTracker.mousePointerId="legacy-mouse";$.MouseTracker.maxTouchPoints=10;}///////////////////////////////////////////////////////////////////////////////\n// Classes and typedefs\n///////////////////////////////////////////////////////////////////////////////\n/**\n     * Represents a point of contact on the screen made by a mouse cursor, pen, touch, or other pointer device.\n     *\n     * @typedef {Object} GesturePoint\n     * @memberof OpenSeadragon.MouseTracker\n     *\n     * @property {Number} id\n     *     Identifier unique from all other active GesturePoints for a given pointer device.\n     * @property {String} type\n     *     The pointer device type: "mouse", "touch", "pen", etc.\n     * @property {Boolean} captured\n     *     True if events for the gesture point are captured to the tracked element.\n     * @property {Boolean} isPrimary\n     *     True if the gesture point is a master pointer amongst the set of active pointers for each pointer type. True for mouse and primary (first) touch/pen pointers.\n     * @property {Boolean} insideElementPressed\n     *     True if button pressed or contact point initiated inside the screen area of the tracked element.\n     * @property {Boolean} insideElement\n     *     True if pointer or contact point is currently inside the bounds of the tracked element.\n     * @property {Number} speed\n     *     Current computed speed, in pixels per second.\n     * @property {Number} direction\n     *     Current computed direction, expressed as an angle counterclockwise relative to the positive X axis (-pi to pi, in radians). Only valid if speed > 0.\n     * @property {OpenSeadragon.Point} contactPos\n     *     The initial pointer contact position, relative to the page including any scrolling. Only valid if the pointer has contact (pressed, touch contact, pen contact).\n     * @property {Number} contactTime\n     *     The initial pointer contact time, in milliseconds. Only valid if the pointer has contact (pressed, touch contact, pen contact).\n     * @property {OpenSeadragon.Point} lastPos\n     *     The last pointer position, relative to the page including any scrolling.\n     * @property {Number} lastTime\n     *     The last pointer contact time, in milliseconds.\n     * @property {OpenSeadragon.Point} currentPos\n     *     The current pointer position, relative to the page including any scrolling.\n     * @property {Number} currentTime\n     *     The current pointer contact time, in milliseconds.\n     *//**\n     * @class GesturePointList\n     * @classdesc Provides an abstraction for a set of active {@link OpenSeadragon.MouseTracker.GesturePoint|GesturePoint} objects for a given pointer device type.\n     *            Active pointers are any pointer being tracked for this element which are in the hit-test area\n     *            of the element (for hover-capable devices) and/or have contact or a button press initiated in the element.\n     * @memberof OpenSeadragon.MouseTracker\n     * @param {String} type - The pointer device type: "mouse", "touch", "pen", etc.\n     */$.MouseTracker.GesturePointList=function(type){this._gPoints=[];/**\n         * The pointer device type: "mouse", "touch", "pen", etc.\n         * @member {String} type\n         * @memberof OpenSeadragon.MouseTracker.GesturePointList#\n         */this.type=type;/**\n         * Current buttons pressed for the device.\n         * Combination of bit flags 0: none, 1: primary (or touch contact), 2: secondary, 4: aux (often middle), 8: X1 (often back), 16: X2 (often forward), 32: pen eraser.\n         * @member {Number} buttons\n         * @memberof OpenSeadragon.MouseTracker.GesturePointList#\n         */this.buttons=0;/**\n         * Current number of contact points (touch points, mouse down, etc.) for the device.\n         * @member {Number} contacts\n         * @memberof OpenSeadragon.MouseTracker.GesturePointList#\n         */this.contacts=0;/**\n         * Current number of clicks for the device. Used for multiple click gesture tracking.\n         * @member {Number} clicks\n         * @memberof OpenSeadragon.MouseTracker.GesturePointList#\n         */this.clicks=0;/**\n         * Current number of captured pointers for the device.\n         * @member {Number} captureCount\n         * @memberof OpenSeadragon.MouseTracker.GesturePointList#\n         */this.captureCount=0;};/** @lends OpenSeadragon.MouseTracker.GesturePointList.prototype */$.MouseTracker.GesturePointList.prototype={/**\n         * @function\n         * @returns {Number} Number of gesture points in the list.\n         */getLength:function getLength(){return this._gPoints.length;},/**\n         * @function\n         * @returns {Array.<OpenSeadragon.MouseTracker.GesturePoint>} The list of gesture points in the list as an array (read-only).\n         */asArray:function asArray(){return this._gPoints;},/**\n         * @function\n         * @param {OpenSeadragon.MouseTracker.GesturePoint} gesturePoint - A gesture point to add to the list.\n         * @returns {Number} Number of gesture points in the list.\n         */add:function add(gp){return this._gPoints.push(gp);},/**\n         * @function\n         * @param {Number} id - The id of the gesture point to remove from the list.\n         * @returns {Number} Number of gesture points in the list.\n         */removeById:function removeById(id){var i,len=this._gPoints.length;for(i=0;i<len;i++){if(this._gPoints[i].id===id){this._gPoints.splice(i,1);break;}}return this._gPoints.length;},/**\n         * @function\n         * @param {Number} index - The index of the gesture point to retrieve from the list.\n         * @returns {OpenSeadragon.MouseTracker.GesturePoint|null} The gesture point at the given index, or null if not found.\n         */getByIndex:function getByIndex(index){if(index<this._gPoints.length){return this._gPoints[index];}return null;},/**\n         * @function\n         * @param {Number} id - The id of the gesture point to retrieve from the list.\n         * @returns {OpenSeadragon.MouseTracker.GesturePoint|null} The gesture point with the given id, or null if not found.\n         */getById:function getById(id){var i,len=this._gPoints.length;for(i=0;i<len;i++){if(this._gPoints[i].id===id){return this._gPoints[i];}}return null;},/**\n         * @function\n         * @returns {OpenSeadragon.MouseTracker.GesturePoint|null} The primary gesture point in the list, or null if not found.\n         */getPrimary:function getPrimary(id){var i,len=this._gPoints.length;for(i=0;i<len;i++){if(this._gPoints[i].isPrimary){return this._gPoints[i];}}return null;}};///////////////////////////////////////////////////////////////////////////////\n// Utility functions\n///////////////////////////////////////////////////////////////////////////////\n/**\n     * Removes all tracked pointers.\n     * @private\n     * @inner\n     */function clearTrackedPointers(tracker){var delegate=THIS[tracker.hash],i,pointerListCount=delegate.activePointersLists.length;for(i=0;i<pointerListCount;i++){if(delegate.activePointersLists[i].captureCount>0){$.removeEvent($.MouseTracker.captureElement,\'mousemove\',delegate.mousemovecaptured,true);$.removeEvent($.MouseTracker.captureElement,\'mouseup\',delegate.mouseupcaptured,true);$.removeEvent($.MouseTracker.captureElement,$.MouseTracker.unprefixedPointerEvents?\'pointermove\':\'MSPointerMove\',delegate.pointermovecaptured,true);$.removeEvent($.MouseTracker.captureElement,$.MouseTracker.unprefixedPointerEvents?\'pointerup\':\'MSPointerUp\',delegate.pointerupcaptured,true);$.removeEvent($.MouseTracker.captureElement,\'touchmove\',delegate.touchmovecaptured,true);$.removeEvent($.MouseTracker.captureElement,\'touchend\',delegate.touchendcaptured,true);delegate.activePointersLists[i].captureCount=0;}}for(i=0;i<pointerListCount;i++){delegate.activePointersLists.pop();}}/**\n     * Starts tracking pointer events on the tracked element.\n     * @private\n     * @inner\n     */function startTracking(tracker){var delegate=THIS[tracker.hash],event,i;if(!delegate.tracking){for(i=0;i<$.MouseTracker.subscribeEvents.length;i++){event=$.MouseTracker.subscribeEvents[i];$.addEvent(tracker.element,event,delegate[event],false);}clearTrackedPointers(tracker);delegate.tracking=true;}}/**\n     * Stops tracking pointer events on the tracked element.\n     * @private\n     * @inner\n     */function stopTracking(tracker){var delegate=THIS[tracker.hash],event,i;if(delegate.tracking){for(i=0;i<$.MouseTracker.subscribeEvents.length;i++){event=$.MouseTracker.subscribeEvents[i];$.removeEvent(tracker.element,event,delegate[event],false);}clearTrackedPointers(tracker);delegate.tracking=false;}}/**\n     * @private\n     * @inner\n     */function getCaptureEventParams(tracker,pointerType){var delegate=THIS[tracker.hash];if(pointerType===\'pointerevent\'){return{upName:$.MouseTracker.unprefixedPointerEvents?\'pointerup\':\'MSPointerUp\',upHandler:delegate.pointerupcaptured,moveName:$.MouseTracker.unprefixedPointerEvents?\'pointermove\':\'MSPointerMove\',moveHandler:delegate.pointermovecaptured};}else if(pointerType===\'mouse\'){return{upName:\'mouseup\',upHandler:delegate.mouseupcaptured,moveName:\'mousemove\',moveHandler:delegate.mousemovecaptured};}else if(pointerType===\'touch\'){return{upName:\'touchend\',upHandler:delegate.touchendcaptured,moveName:\'touchmove\',moveHandler:delegate.touchmovecaptured};}else{throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.");}}/**\n     * Begin capturing pointer events to the tracked element.\n     * @private\n     * @inner\n     */function capturePointer(tracker,pointerType){var pointsList=tracker.getActivePointersListByType(pointerType),eventParams;pointsList.captureCount++;if(pointsList.captureCount===1){if($.Browser.vendor===$.BROWSERS.IE&&$.Browser.version<9){tracker.element.setCapture(true);}else{eventParams=getCaptureEventParams(tracker,$.MouseTracker.havePointerEvents?\'pointerevent\':pointerType);// We emulate mouse capture by hanging listeners on the document object.\n//    (Note we listen on the capture phase so the captured handlers will get called first)\nif(isInIframe&&canAccessEvents(window.top)){$.addEvent(window.top,eventParams.upName,eventParams.upHandler,true);}$.addEvent($.MouseTracker.captureElement,eventParams.upName,eventParams.upHandler,true);$.addEvent($.MouseTracker.captureElement,eventParams.moveName,eventParams.moveHandler,true);}}}/**\n     * Stop capturing pointer events to the tracked element.\n     * @private\n     * @inner\n     */function releasePointer(tracker,pointerType){var pointsList=tracker.getActivePointersListByType(pointerType),eventParams;pointsList.captureCount--;if(pointsList.captureCount===0){if($.Browser.vendor===$.BROWSERS.IE&&$.Browser.version<9){tracker.element.releaseCapture();}else{eventParams=getCaptureEventParams(tracker,$.MouseTracker.havePointerEvents?\'pointerevent\':pointerType);// We emulate mouse capture by hanging listeners on the document object.\n//    (Note we listen on the capture phase so the captured handlers will get called first)\nif(isInIframe&&canAccessEvents(window.top)){$.removeEvent(window.top,eventParams.upName,eventParams.upHandler,true);}$.removeEvent($.MouseTracker.captureElement,eventParams.moveName,eventParams.moveHandler,true);$.removeEvent($.MouseTracker.captureElement,eventParams.upName,eventParams.upHandler,true);}}}/**\n     * Gets a W3C Pointer Events model compatible pointer type string from a DOM pointer event.\n     * IE10 used a long integer value, but the W3C specification (and IE11+) use a string "mouse", "touch", "pen", etc.\n     * @private\n     * @inner\n     */function getPointerType(event){var pointerTypeStr;if($.MouseTracker.unprefixedPointerEvents){pointerTypeStr=event.pointerType;}else{// IE10\n//  MSPOINTER_TYPE_TOUCH: 0x00000002\n//  MSPOINTER_TYPE_PEN:   0x00000003\n//  MSPOINTER_TYPE_MOUSE: 0x00000004\nswitch(event.pointerType){case 0x00000002:pointerTypeStr=\'touch\';break;case 0x00000003:pointerTypeStr=\'pen\';break;case 0x00000004:pointerTypeStr=\'mouse\';break;default:pointerTypeStr=\'\';}}return pointerTypeStr;}/**\n     * @private\n     * @inner\n     */function getMouseAbsolute(event){return $.getMousePosition(event);}/**\n     * @private\n     * @inner\n     */function getMouseRelative(event,element){return getPointRelativeToAbsolute(getMouseAbsolute(event),element);}/**\n     * @private\n     * @inner\n     */function getPointRelativeToAbsolute(point,element){var offset=$.getElementOffset(element);return point.minus(offset);}/**\n     * @private\n     * @inner\n     */function getCenterPoint(point1,point2){return new $.Point((point1.x+point2.x)/2,(point1.y+point2.y)/2);}///////////////////////////////////////////////////////////////////////////////\n// Device-specific DOM event handlers\n///////////////////////////////////////////////////////////////////////////////\n/**\n     * @private\n     * @inner\n     */function onClick(tracker,event){if(tracker.clickHandler){$.cancelEvent(event);}}/**\n     * @private\n     * @inner\n     */function onDblClick(tracker,event){if(tracker.dblClickHandler){$.cancelEvent(event);}}/**\n     * @private\n     * @inner\n     */function onKeyDown(tracker,event){//$.console.log( "keydown %s %s %s %s %s", event.keyCode, event.charCode, event.ctrlKey, event.shiftKey, event.altKey );\nvar propagate;if(tracker.keyDownHandler){event=$.getEvent(event);propagate=tracker.keyDownHandler({eventSource:tracker,keyCode:event.keyCode?event.keyCode:event.charCode,ctrl:event.ctrlKey,shift:event.shiftKey,alt:event.altKey,meta:event.metaKey,originalEvent:event,preventDefaultAction:false,userData:tracker.userData});if(!propagate){$.cancelEvent(event);}}}/**\n     * @private\n     * @inner\n     */function onKeyUp(tracker,event){//$.console.log( "keyup %s %s %s %s %s", event.keyCode, event.charCode, event.ctrlKey, event.shiftKey, event.altKey );\nvar propagate;if(tracker.keyUpHandler){event=$.getEvent(event);propagate=tracker.keyUpHandler({eventSource:tracker,keyCode:event.keyCode?event.keyCode:event.charCode,ctrl:event.ctrlKey,shift:event.shiftKey,alt:event.altKey,meta:event.metaKey,originalEvent:event,preventDefaultAction:false,userData:tracker.userData});if(!propagate){$.cancelEvent(event);}}}/**\n     * @private\n     * @inner\n     */function onKeyPress(tracker,event){//$.console.log( "keypress %s %s %s %s %s", event.keyCode, event.charCode, event.ctrlKey, event.shiftKey, event.altKey );\nvar propagate;if(tracker.keyHandler){event=$.getEvent(event);propagate=tracker.keyHandler({eventSource:tracker,keyCode:event.keyCode?event.keyCode:event.charCode,ctrl:event.ctrlKey,shift:event.shiftKey,alt:event.altKey,meta:event.metaKey,originalEvent:event,preventDefaultAction:false,userData:tracker.userData});if(!propagate){$.cancelEvent(event);}}}/**\n     * @private\n     * @inner\n     */function onFocus(tracker,event){//console.log( "focus %s", event );\nvar propagate;if(tracker.focusHandler){event=$.getEvent(event);propagate=tracker.focusHandler({eventSource:tracker,originalEvent:event,preventDefaultAction:false,userData:tracker.userData});if(propagate===false){$.cancelEvent(event);}}}/**\n     * @private\n     * @inner\n     */function onBlur(tracker,event){//console.log( "blur %s", event );\nvar propagate;if(tracker.blurHandler){event=$.getEvent(event);propagate=tracker.blurHandler({eventSource:tracker,originalEvent:event,preventDefaultAction:false,userData:tracker.userData});if(propagate===false){$.cancelEvent(event);}}}/**\n     * Handler for \'wheel\' events\n     *\n     * @private\n     * @inner\n     */function onWheel(tracker,event){handleWheelEvent(tracker,event,event);}/**\n     * Handler for \'mousewheel\', \'DOMMouseScroll\', and \'MozMousePixelScroll\' events\n     *\n     * @private\n     * @inner\n     */function onMouseWheel(tracker,event){event=$.getEvent(event);// Simulate a \'wheel\' event\nvar simulatedEvent={target:event.target||event.srcElement,type:"wheel",shiftKey:event.shiftKey||false,clientX:event.clientX,clientY:event.clientY,pageX:event.pageX?event.pageX:event.clientX,pageY:event.pageY?event.pageY:event.clientY,deltaMode:event.type=="MozMousePixelScroll"?0:1,// 0=pixel, 1=line, 2=page\ndeltaX:0,deltaZ:0};// Calculate deltaY\nif($.MouseTracker.wheelEventName=="mousewheel"){simulatedEvent.deltaY=-1/$.DEFAULT_SETTINGS.pixelsPerWheelLine*event.wheelDelta;}else{simulatedEvent.deltaY=event.detail;}handleWheelEvent(tracker,simulatedEvent,event);}/**\n     * Handles \'wheel\' events.\n     * The event may be simulated by the legacy mouse wheel event handler (onMouseWheel()).\n     *\n     * @private\n     * @inner\n     */function handleWheelEvent(tracker,event,originalEvent){var nDelta=0,propagate;// The nDelta variable is gated to provide smooth z-index scrolling\n//   since the mouse wheel allows for substantial deltas meant for rapid\n//   y-index scrolling.\n// event.deltaMode: 0=pixel, 1=line, 2=page\n// TODO: Deltas in pixel mode should be accumulated then a scroll value computed after $.DEFAULT_SETTINGS.pixelsPerWheelLine threshold reached\nnDelta=event.deltaY<0?1:-1;if(tracker.scrollHandler){propagate=tracker.scrollHandler({eventSource:tracker,pointerType:\'mouse\',position:getMouseRelative(event,tracker.element),scroll:nDelta,shift:event.shiftKey,isTouchEvent:false,originalEvent:originalEvent,preventDefaultAction:false,userData:tracker.userData});if(propagate===false){$.cancelEvent(originalEvent);}}}/**\n     * @private\n     * @inner\n     */function isParentChild(parent,child){if(parent===child){return false;}while(child&&child!==parent){child=child.parentNode;}return child===parent;}/**\n     * Only used on IE 8\n     *\n     * @private\n     * @inner\n     */function onMouseEnter(tracker,event){event=$.getEvent(event);handleMouseEnter(tracker,event);}/**\n     * @private\n     * @inner\n     */function onMouseOver(tracker,event){event=$.getEvent(event);if(event.currentTarget===event.relatedTarget||isParentChild(event.currentTarget,event.relatedTarget)){return;}handleMouseEnter(tracker,event);}/**\n     * @private\n     * @inner\n     */function handleMouseEnter(tracker,event){var gPoint={id:$.MouseTracker.mousePointerId,type:\'mouse\',isPrimary:true,currentPos:getMouseAbsolute(event),currentTime:$.now()};updatePointersEnter(tracker,event,[gPoint]);}/**\n     * Only used on IE 8\n     *\n     * @private\n     * @inner\n     */function onMouseLeave(tracker,event){event=$.getEvent(event);handleMouseExit(tracker,event);}/**\n     * @private\n     * @inner\n     */function onMouseOut(tracker,event){event=$.getEvent(event);if(event.currentTarget===event.relatedTarget||isParentChild(event.currentTarget,event.relatedTarget)){return;}handleMouseExit(tracker,event);}/**\n     * @private\n     * @inner\n     */function handleMouseExit(tracker,event){var gPoint={id:$.MouseTracker.mousePointerId,type:\'mouse\',isPrimary:true,currentPos:getMouseAbsolute(event),currentTime:$.now()};updatePointersExit(tracker,event,[gPoint]);}/**\n     * Returns a W3C DOM level 3 standard button value given an event.button property:\n     *   -1 == none, 0 == primary/left, 1 == middle, 2 == secondary/right, 3 == X1/back, 4 == X2/forward, 5 == eraser (pen)\n     * @private\n     * @inner\n     */function getStandardizedButton(button){if($.Browser.vendor===$.BROWSERS.IE&&$.Browser.version<9){// On IE 8, 0 == none, 1 == left, 2 == right, 3 == left and right, 4 == middle, 5 == left and middle, 6 == right and middle, 7 == all three\n// TODO: Support chorded (multiple) button presses on IE 8?\nif(button===1){return 0;}else if(button===2){return 2;}else if(button===4){return 1;}else{return-1;}}else{return button;}}/**\n     * @private\n     * @inner\n     */function onMouseDown(tracker,event){var gPoint;event=$.getEvent(event);gPoint={id:$.MouseTracker.mousePointerId,type:\'mouse\',isPrimary:true,currentPos:getMouseAbsolute(event),currentTime:$.now()};if(updatePointersDown(tracker,event,[gPoint],getStandardizedButton(event.button))){$.stopEvent(event);capturePointer(tracker,\'mouse\');}if(tracker.clickHandler||tracker.dblClickHandler||tracker.pressHandler||tracker.dragHandler||tracker.dragEndHandler){$.cancelEvent(event);}}/**\n     * @private\n     * @inner\n     */function onMouseUp(tracker,event){handleMouseUp(tracker,event);}/**\n     * This handler is attached to the window object (on the capture phase) to emulate mouse capture.\n     * onMouseUp is still attached to the tracked element, so stop propagation to avoid processing twice.\n     *\n     * @private\n     * @inner\n     */function onMouseUpCaptured(tracker,event){handleMouseUp(tracker,event);$.stopEvent(event);}/**\n     * @private\n     * @inner\n     */function handleMouseUp(tracker,event){var gPoint;event=$.getEvent(event);gPoint={id:$.MouseTracker.mousePointerId,type:\'mouse\',isPrimary:true,currentPos:getMouseAbsolute(event),currentTime:$.now()};if(updatePointersUp(tracker,event,[gPoint],getStandardizedButton(event.button))){releasePointer(tracker,\'mouse\');}}/**\n     * @private\n     * @inner\n     */function onMouseMove(tracker,event){handleMouseMove(tracker,event);}/**\n     * This handler is attached to the window object (on the capture phase) to emulate mouse capture.\n     * onMouseMove is still attached to the tracked element, so stop propagation to avoid processing twice.\n     *\n     * @private\n     * @inner\n     */function onMouseMoveCaptured(tracker,event){handleMouseMove(tracker,event);$.stopEvent(event);}/**\n     * @private\n     * @inner\n     */function handleMouseMove(tracker,event){var gPoint;event=$.getEvent(event);gPoint={id:$.MouseTracker.mousePointerId,type:\'mouse\',isPrimary:true,currentPos:getMouseAbsolute(event),currentTime:$.now()};updatePointersMove(tracker,event,[gPoint]);}/**\n     * @private\n     * @inner\n     */function abortTouchContacts(tracker,event,pointsList){var i,gPointCount=pointsList.getLength(),abortGPoints=[];for(i=0;i<gPointCount;i++){abortGPoints.push(pointsList.getByIndex(i));}if(abortGPoints.length>0){// simulate touchend\nupdatePointersUp(tracker,event,abortGPoints,0);// 0 means primary button press/release or touch contact\n// release pointer capture\npointsList.captureCount=1;releasePointer(tracker,\'touch\');// simulate touchleave\nupdatePointersExit(tracker,event,abortGPoints);}}/**\n     * @private\n     * @inner\n     */function onTouchStart(tracker,event){var time,i,j,touchCount=event.changedTouches.length,gPoints=[],parentGPoints,pointsList=tracker.getActivePointersListByType(\'touch\');time=$.now();if(pointsList.getLength()>event.touches.length-touchCount){$.console.warn(\'Tracked touch contact count doesn\\\'t match event.touches.length. Removing all tracked touch pointers.\');abortTouchContacts(tracker,event,pointsList);}for(i=0;i<touchCount;i++){gPoints.push({id:event.changedTouches[i].identifier,type:\'touch\',// isPrimary not set - let the updatePointers functions determine it\ncurrentPos:getMouseAbsolute(event.changedTouches[i]),currentTime:time});}// simulate touchenter on our tracked element\nupdatePointersEnter(tracker,event,gPoints);// simulate touchenter on our tracked element\'s tracked ancestor elements\nfor(i=0;i<MOUSETRACKERS.length;i++){if(MOUSETRACKERS[i]!==tracker&&MOUSETRACKERS[i].isTracking()&&isParentChild(MOUSETRACKERS[i].element,tracker.element)){parentGPoints=[];for(j=0;j<touchCount;j++){parentGPoints.push({id:event.changedTouches[j].identifier,type:\'touch\',// isPrimary not set - let the updatePointers functions determine it\ncurrentPos:getMouseAbsolute(event.changedTouches[j]),currentTime:time});}updatePointersEnter(MOUSETRACKERS[i],event,parentGPoints);}}if(updatePointersDown(tracker,event,gPoints,0)){// 0 means primary button press/release or touch contact\n$.stopEvent(event);capturePointer(tracker,\'touch\');}$.cancelEvent(event);}/**\n     * @private\n     * @inner\n     */function onTouchEnd(tracker,event){handleTouchEnd(tracker,event);}/**\n     * This handler is attached to the window object (on the capture phase) to emulate pointer capture.\n     * onTouchEnd is still attached to the tracked element, so stop propagation to avoid processing twice.\n     *\n     * @private\n     * @inner\n     */function onTouchEndCaptured(tracker,event){handleTouchEnd(tracker,event);$.stopEvent(event);}/**\n     * @private\n     * @inner\n     */function handleTouchEnd(tracker,event){var time,i,j,touchCount=event.changedTouches.length,gPoints=[],parentGPoints;time=$.now();for(i=0;i<touchCount;i++){gPoints.push({id:event.changedTouches[i].identifier,type:\'touch\',// isPrimary not set - let the updatePointers functions determine it\ncurrentPos:getMouseAbsolute(event.changedTouches[i]),currentTime:time});}if(updatePointersUp(tracker,event,gPoints,0)){releasePointer(tracker,\'touch\');}// simulate touchleave on our tracked element\nupdatePointersExit(tracker,event,gPoints);// simulate touchleave on our tracked element\'s tracked ancestor elements\nfor(i=0;i<MOUSETRACKERS.length;i++){if(MOUSETRACKERS[i]!==tracker&&MOUSETRACKERS[i].isTracking()&&isParentChild(MOUSETRACKERS[i].element,tracker.element)){parentGPoints=[];for(j=0;j<touchCount;j++){parentGPoints.push({id:event.changedTouches[j].identifier,type:\'touch\',// isPrimary not set - let the updatePointers functions determine it\ncurrentPos:getMouseAbsolute(event.changedTouches[j]),currentTime:time});}updatePointersExit(MOUSETRACKERS[i],event,parentGPoints);}}$.cancelEvent(event);}/**\n     * @private\n     * @inner\n     */function onTouchMove(tracker,event){handleTouchMove(tracker,event);}/**\n     * This handler is attached to the window object (on the capture phase) to emulate pointer capture.\n     * onTouchMove is still attached to the tracked element, so stop propagation to avoid processing twice.\n     *\n     * @private\n     * @inner\n     */function onTouchMoveCaptured(tracker,event){handleTouchMove(tracker,event);$.stopEvent(event);}/**\n     * @private\n     * @inner\n     */function handleTouchMove(tracker,event){var i,touchCount=event.changedTouches.length,gPoints=[];for(i=0;i<touchCount;i++){gPoints.push({id:event.changedTouches[i].identifier,type:\'touch\',// isPrimary not set - let the updatePointers functions determine it\ncurrentPos:getMouseAbsolute(event.changedTouches[i]),currentTime:$.now()});}updatePointersMove(tracker,event,gPoints);$.cancelEvent(event);}/**\n     * @private\n     * @inner\n     */function onTouchCancel(tracker,event){var i,touchCount=event.changedTouches.length,gPoints=[],pointsList=tracker.getActivePointersListByType(\'touch\');abortTouchContacts(tracker,event,pointsList);}/**\n     * @private\n     * @inner\n     */function onGestureStart(tracker,event){event.stopPropagation();event.preventDefault();return false;}/**\n     * @private\n     * @inner\n     */function onGestureChange(tracker,event){event.stopPropagation();event.preventDefault();return false;}/**\n     * @private\n     * @inner\n     */function onPointerOver(tracker,event){var gPoint;if(event.currentTarget===event.relatedTarget||isParentChild(event.currentTarget,event.relatedTarget)){return;}gPoint={id:event.pointerId,type:getPointerType(event),isPrimary:event.isPrimary,currentPos:getMouseAbsolute(event),currentTime:$.now()};updatePointersEnter(tracker,event,[gPoint]);}/**\n     * @private\n     * @inner\n     */function onPointerOut(tracker,event){var gPoint;if(event.currentTarget===event.relatedTarget||isParentChild(event.currentTarget,event.relatedTarget)){return;}gPoint={id:event.pointerId,type:getPointerType(event),isPrimary:event.isPrimary,currentPos:getMouseAbsolute(event),currentTime:$.now()};updatePointersExit(tracker,event,[gPoint]);}/**\n     * @private\n     * @inner\n     */function onPointerDown(tracker,event){var gPoint;gPoint={id:event.pointerId,type:getPointerType(event),isPrimary:event.isPrimary,currentPos:getMouseAbsolute(event),currentTime:$.now()};if(updatePointersDown(tracker,event,[gPoint],event.button)){$.stopEvent(event);capturePointer(tracker,gPoint.type);}if(tracker.clickHandler||tracker.dblClickHandler||tracker.pressHandler||tracker.dragHandler||tracker.dragEndHandler||tracker.pinchHandler){$.cancelEvent(event);}}/**\n     * @private\n     * @inner\n     */function onPointerUp(tracker,event){handlePointerUp(tracker,event);}/**\n     * This handler is attached to the window object (on the capture phase) to emulate mouse capture.\n     * onPointerUp is still attached to the tracked element, so stop propagation to avoid processing twice.\n     *\n     * @private\n     * @inner\n     */function onPointerUpCaptured(tracker,event){var pointsList=tracker.getActivePointersListByType(getPointerType(event));if(pointsList.getById(event.pointerId)){handlePointerUp(tracker,event);}$.stopEvent(event);}/**\n     * @private\n     * @inner\n     */function handlePointerUp(tracker,event){var gPoint;gPoint={id:event.pointerId,type:getPointerType(event),isPrimary:event.isPrimary,currentPos:getMouseAbsolute(event),currentTime:$.now()};if(updatePointersUp(tracker,event,[gPoint],event.button)){releasePointer(tracker,gPoint.type);}}/**\n     * @private\n     * @inner\n     */function onPointerMove(tracker,event){handlePointerMove(tracker,event);}/**\n     * This handler is attached to the window object (on the capture phase) to emulate mouse capture.\n     * onPointerMove is still attached to the tracked element, so stop propagation to avoid processing twice.\n     *\n     * @private\n     * @inner\n     */function onPointerMoveCaptured(tracker,event){var pointsList=tracker.getActivePointersListByType(getPointerType(event));if(pointsList.getById(event.pointerId)){handlePointerMove(tracker,event);}$.stopEvent(event);}/**\n     * @private\n     * @inner\n     */function handlePointerMove(tracker,event){// Pointer changed coordinates, button state, pressure, tilt, or contact geometry (e.g. width and height)\nvar gPoint;gPoint={id:event.pointerId,type:getPointerType(event),isPrimary:event.isPrimary,currentPos:getMouseAbsolute(event),currentTime:$.now()};updatePointersMove(tracker,event,[gPoint]);}/**\n     * @private\n     * @inner\n     */function onPointerCancel(tracker,event){var gPoint;gPoint={id:event.pointerId,type:getPointerType(event)};updatePointersCancel(tracker,event,[gPoint]);}///////////////////////////////////////////////////////////////////////////////\n// Device-agnostic DOM event handlers\n///////////////////////////////////////////////////////////////////////////////\n/**\n     * @function\n     * @private\n     * @inner\n     * @param {OpenSeadragon.MouseTracker.GesturePointList} pointsList\n     *     The GesturePointList to track the pointer in.\n     * @param {OpenSeadragon.MouseTracker.GesturePoint} gPoint\n     *      Gesture point to track.\n     * @returns {Number} Number of gesture points in pointsList.\n     */function startTrackingPointer(pointsList,gPoint){// If isPrimary is not known for the pointer then set it according to our rules:\n//    true if the first pointer in the gesture, otherwise false\nif(!gPoint.hasOwnProperty(\'isPrimary\')){if(pointsList.getLength()===0){gPoint.isPrimary=true;}else{gPoint.isPrimary=false;}}gPoint.speed=0;gPoint.direction=0;gPoint.contactPos=gPoint.currentPos;gPoint.contactTime=gPoint.currentTime;gPoint.lastPos=gPoint.currentPos;gPoint.lastTime=gPoint.currentTime;return pointsList.add(gPoint);}/**\n     * @function\n     * @private\n     * @inner\n     * @param {OpenSeadragon.MouseTracker.GesturePointList} pointsList\n     *     The GesturePointList to stop tracking the pointer on.\n     * @param {OpenSeadragon.MouseTracker.GesturePoint} gPoint\n     *      Gesture point to stop tracking.\n     * @returns {Number} Number of gesture points in pointsList.\n     */function stopTrackingPointer(pointsList,gPoint){var listLength,primaryPoint;if(pointsList.getById(gPoint.id)){listLength=pointsList.removeById(gPoint.id);// If isPrimary is not known for the pointer and we just removed the primary pointer from the list then we need to set another pointer as primary\nif(!gPoint.hasOwnProperty(\'isPrimary\')){primaryPoint=pointsList.getPrimary();if(!primaryPoint){primaryPoint=pointsList.getByIndex(0);if(primaryPoint){primaryPoint.isPrimary=true;}}}}else{listLength=pointsList.getLength();}return listLength;}/**\n     * @function\n     * @private\n     * @inner\n     * @param {OpenSeadragon.MouseTracker} tracker\n     *     A reference to the MouseTracker instance.\n     * @param {Object} event\n     *     A reference to the originating DOM event.\n     * @param {Array.<OpenSeadragon.MouseTracker.GesturePoint>} gPoints\n     *      Gesture points associated with the event.\n     */function updatePointersEnter(tracker,event,gPoints){var pointsList=tracker.getActivePointersListByType(gPoints[0].type),i,gPointCount=gPoints.length,curGPoint,updateGPoint,propagate;for(i=0;i<gPointCount;i++){curGPoint=gPoints[i];updateGPoint=pointsList.getById(curGPoint.id);if(updateGPoint){// Already tracking the pointer...update it\nupdateGPoint.insideElement=true;updateGPoint.lastPos=updateGPoint.currentPos;updateGPoint.lastTime=updateGPoint.currentTime;updateGPoint.currentPos=curGPoint.currentPos;updateGPoint.currentTime=curGPoint.currentTime;curGPoint=updateGPoint;}else{// Initialize for tracking and add to the tracking list\ncurGPoint.captured=false;curGPoint.insideElementPressed=false;curGPoint.insideElement=true;startTrackingPointer(pointsList,curGPoint);}// Enter\nif(tracker.enterHandler){propagate=tracker.enterHandler({eventSource:tracker,pointerType:curGPoint.type,position:getPointRelativeToAbsolute(curGPoint.currentPos,tracker.element),buttons:pointsList.buttons,pointers:tracker.getActivePointerCount(),insideElementPressed:curGPoint.insideElementPressed,buttonDownAny:pointsList.buttons!==0,isTouchEvent:curGPoint.type===\'touch\',originalEvent:event,preventDefaultAction:false,userData:tracker.userData});if(propagate===false){$.cancelEvent(event);}}}}/**\n     * @function\n     * @private\n     * @inner\n     * @param {OpenSeadragon.MouseTracker} tracker\n     *     A reference to the MouseTracker instance.\n     * @param {Object} event\n     *     A reference to the originating DOM event.\n     * @param {Array.<OpenSeadragon.MouseTracker.GesturePoint>} gPoints\n     *      Gesture points associated with the event.\n     */function updatePointersExit(tracker,event,gPoints){var delegate=THIS[tracker.hash],pointsList=tracker.getActivePointersListByType(gPoints[0].type),i,gPointCount=gPoints.length,curGPoint,updateGPoint,propagate;for(i=0;i<gPointCount;i++){curGPoint=gPoints[i];updateGPoint=pointsList.getById(curGPoint.id);if(updateGPoint){// Already tracking the pointer. If captured then update it, else stop tracking it\nif(updateGPoint.captured){updateGPoint.insideElement=false;updateGPoint.lastPos=updateGPoint.currentPos;updateGPoint.lastTime=updateGPoint.currentTime;updateGPoint.currentPos=curGPoint.currentPos;updateGPoint.currentTime=curGPoint.currentTime;}else{stopTrackingPointer(pointsList,updateGPoint);}curGPoint=updateGPoint;}// Exit\nif(tracker.exitHandler){propagate=tracker.exitHandler({eventSource:tracker,pointerType:curGPoint.type,position:getPointRelativeToAbsolute(curGPoint.currentPos,tracker.element),buttons:pointsList.buttons,pointers:tracker.getActivePointerCount(),insideElementPressed:updateGPoint?updateGPoint.insideElementPressed:false,buttonDownAny:pointsList.buttons!==0,isTouchEvent:curGPoint.type===\'touch\',originalEvent:event,preventDefaultAction:false,userData:tracker.userData});if(propagate===false){$.cancelEvent(event);}}}}/**\n     * @function\n     * @private\n     * @inner\n     * @param {OpenSeadragon.MouseTracker} tracker\n     *     A reference to the MouseTracker instance.\n     * @param {Object} event\n     *     A reference to the originating DOM event.\n     * @param {Array.<OpenSeadragon.MouseTracker.GesturePoint>} gPoints\n     *      Gesture points associated with the event.\n     * @param {Number} buttonChanged\n     *      The button involved in the event: -1: none, 0: primary/left, 1: aux/middle, 2: secondary/right, 3: X1/back, 4: X2/forward, 5: pen eraser.\n     *      Note on chorded button presses (a button pressed when another button is already pressed): In the W3C Pointer Events model,\n     *      only one pointerdown/pointerup event combo is fired. Chorded button state changes instead fire pointermove events.\n     *\n     * @returns {Boolean} True if pointers should be captured to the tracked element, otherwise false.\n     */function updatePointersDown(tracker,event,gPoints,buttonChanged){var delegate=THIS[tracker.hash],propagate,pointsList=tracker.getActivePointersListByType(gPoints[0].type),i,gPointCount=gPoints.length,curGPoint,updateGPoint;if(typeof event.buttons!==\'undefined\'){pointsList.buttons=event.buttons;}else{if($.Browser.vendor===$.BROWSERS.IE&&$.Browser.version<9){if(buttonChanged===0){// Primary\npointsList.buttons+=1;}else if(buttonChanged===1){// Aux\npointsList.buttons+=4;}else if(buttonChanged===2){// Secondary\npointsList.buttons+=2;}else if(buttonChanged===3){// X1 (Back)\npointsList.buttons+=8;}else if(buttonChanged===4){// X2 (Forward)\npointsList.buttons+=16;}else if(buttonChanged===5){// Pen Eraser\npointsList.buttons+=32;}}else{if(buttonChanged===0){// Primary\npointsList.buttons|=1;}else if(buttonChanged===1){// Aux\npointsList.buttons|=4;}else if(buttonChanged===2){// Secondary\npointsList.buttons|=2;}else if(buttonChanged===3){// X1 (Back)\npointsList.buttons|=8;}else if(buttonChanged===4){// X2 (Forward)\npointsList.buttons|=16;}else if(buttonChanged===5){// Pen Eraser\npointsList.buttons|=32;}}}// Only capture and track primary button, pen, and touch contacts\nif(buttonChanged!==0){// Aux Press\nif(tracker.nonPrimaryPressHandler){propagate=tracker.nonPrimaryPressHandler({eventSource:tracker,pointerType:gPoints[0].type,position:getPointRelativeToAbsolute(gPoints[0].currentPos,tracker.element),button:buttonChanged,buttons:pointsList.buttons,isTouchEvent:gPoints[0].type===\'touch\',originalEvent:event,preventDefaultAction:false,userData:tracker.userData});if(propagate===false){$.cancelEvent(event);}}return false;}for(i=0;i<gPointCount;i++){curGPoint=gPoints[i];updateGPoint=pointsList.getById(curGPoint.id);if(updateGPoint){// Already tracking the pointer...update it\nupdateGPoint.captured=true;updateGPoint.insideElementPressed=true;updateGPoint.insideElement=true;updateGPoint.contactPos=curGPoint.currentPos;updateGPoint.contactTime=curGPoint.currentTime;updateGPoint.lastPos=updateGPoint.currentPos;updateGPoint.lastTime=updateGPoint.currentTime;updateGPoint.currentPos=curGPoint.currentPos;updateGPoint.currentTime=curGPoint.currentTime;curGPoint=updateGPoint;}else{// Initialize for tracking and add to the tracking list (no pointerover or pointermove event occurred before this)\ncurGPoint.captured=true;curGPoint.insideElementPressed=true;curGPoint.insideElement=true;startTrackingPointer(pointsList,curGPoint);}pointsList.contacts++;//$.console.log(\'contacts++ \', pointsList.contacts);\nif(tracker.dragHandler||tracker.dragEndHandler||tracker.pinchHandler){$.MouseTracker.gesturePointVelocityTracker.addPoint(tracker,curGPoint);}if(pointsList.contacts===1){// Press\nif(tracker.pressHandler){propagate=tracker.pressHandler({eventSource:tracker,pointerType:curGPoint.type,position:getPointRelativeToAbsolute(curGPoint.contactPos,tracker.element),buttons:pointsList.buttons,isTouchEvent:curGPoint.type===\'touch\',originalEvent:event,preventDefaultAction:false,userData:tracker.userData});if(propagate===false){$.cancelEvent(event);}}}else if(pointsList.contacts===2){if(tracker.pinchHandler&&curGPoint.type===\'touch\'){// Initialize for pinch\ndelegate.pinchGPoints=pointsList.asArray();delegate.lastPinchDist=delegate.currentPinchDist=delegate.pinchGPoints[0].currentPos.distanceTo(delegate.pinchGPoints[1].currentPos);delegate.lastPinchCenter=delegate.currentPinchCenter=getCenterPoint(delegate.pinchGPoints[0].currentPos,delegate.pinchGPoints[1].currentPos);}}}return true;}/**\n     * @function\n     * @private\n     * @inner\n     * @param {OpenSeadragon.MouseTracker} tracker\n     *     A reference to the MouseTracker instance.\n     * @param {Object} event\n     *     A reference to the originating DOM event.\n     * @param {Array.<OpenSeadragon.MouseTracker.GesturePoint>} gPoints\n     *      Gesture points associated with the event.\n     * @param {Number} buttonChanged\n     *      The button involved in the event: -1: none, 0: primary/left, 1: aux/middle, 2: secondary/right, 3: X1/back, 4: X2/forward, 5: pen eraser.\n     *      Note on chorded button presses (a button pressed when another button is already pressed): In the W3C Pointer Events model,\n     *      only one pointerdown/pointerup event combo is fired. Chorded button state changes instead fire pointermove events.\n     *\n     * @returns {Boolean} True if pointer capture should be released from the tracked element, otherwise false.\n     */function updatePointersUp(tracker,event,gPoints,buttonChanged){var delegate=THIS[tracker.hash],pointsList=tracker.getActivePointersListByType(gPoints[0].type),propagate,insideElementReleased,releasePoint,releaseTime,i,gPointCount=gPoints.length,curGPoint,updateGPoint,releaseCapture=false,wasCaptured=false,quick;if(typeof event.buttons!==\'undefined\'){pointsList.buttons=event.buttons;}else{if($.Browser.vendor===$.BROWSERS.IE&&$.Browser.version<9){if(buttonChanged===0){// Primary\npointsList.buttons-=1;}else if(buttonChanged===1){// Aux\npointsList.buttons-=4;}else if(buttonChanged===2){// Secondary\npointsList.buttons-=2;}else if(buttonChanged===3){// X1 (Back)\npointsList.buttons-=8;}else if(buttonChanged===4){// X2 (Forward)\npointsList.buttons-=16;}else if(buttonChanged===5){// Pen Eraser\npointsList.buttons-=32;}}else{if(buttonChanged===0){// Primary\npointsList.buttons^=~1;}else if(buttonChanged===1){// Aux\npointsList.buttons^=~4;}else if(buttonChanged===2){// Secondary\npointsList.buttons^=~2;}else if(buttonChanged===3){// X1 (Back)\npointsList.buttons^=~8;}else if(buttonChanged===4){// X2 (Forward)\npointsList.buttons^=~16;}else if(buttonChanged===5){// Pen Eraser\npointsList.buttons^=~32;}}}// Only capture and track primary button, pen, and touch contacts\nif(buttonChanged!==0){// Aux Release\nif(tracker.nonPrimaryReleaseHandler){propagate=tracker.nonPrimaryReleaseHandler({eventSource:tracker,pointerType:gPoints[0].type,position:getPointRelativeToAbsolute(gPoints[0].currentPos,tracker.element),button:buttonChanged,buttons:pointsList.buttons,isTouchEvent:gPoints[0].type===\'touch\',originalEvent:event,preventDefaultAction:false,userData:tracker.userData});if(propagate===false){$.cancelEvent(event);}}return false;}for(i=0;i<gPointCount;i++){curGPoint=gPoints[i];updateGPoint=pointsList.getById(curGPoint.id);if(updateGPoint){// Update the pointer, stop tracking it if not still in this element\nif(updateGPoint.captured){updateGPoint.captured=false;releaseCapture=true;wasCaptured=true;}updateGPoint.lastPos=updateGPoint.currentPos;updateGPoint.lastTime=updateGPoint.currentTime;updateGPoint.currentPos=curGPoint.currentPos;updateGPoint.currentTime=curGPoint.currentTime;if(!updateGPoint.insideElement){stopTrackingPointer(pointsList,updateGPoint);}releasePoint=updateGPoint.currentPos;releaseTime=updateGPoint.currentTime;if(wasCaptured){// Pointer was activated in our element but could have been removed in any element since events are captured to our element\npointsList.contacts--;//$.console.log(\'contacts-- \', pointsList.contacts);\nif(tracker.dragHandler||tracker.dragEndHandler||tracker.pinchHandler){$.MouseTracker.gesturePointVelocityTracker.removePoint(tracker,updateGPoint);}if(pointsList.contacts===0){// Release (pressed in our element)\nif(tracker.releaseHandler){propagate=tracker.releaseHandler({eventSource:tracker,pointerType:updateGPoint.type,position:getPointRelativeToAbsolute(releasePoint,tracker.element),buttons:pointsList.buttons,insideElementPressed:updateGPoint.insideElementPressed,insideElementReleased:updateGPoint.insideElement,isTouchEvent:updateGPoint.type===\'touch\',originalEvent:event,preventDefaultAction:false,userData:tracker.userData});if(propagate===false){$.cancelEvent(event);}}// Drag End\nif(tracker.dragEndHandler&&!updateGPoint.currentPos.equals(updateGPoint.contactPos)){propagate=tracker.dragEndHandler({eventSource:tracker,pointerType:updateGPoint.type,position:getPointRelativeToAbsolute(updateGPoint.currentPos,tracker.element),speed:updateGPoint.speed,direction:updateGPoint.direction,shift:event.shiftKey,isTouchEvent:updateGPoint.type===\'touch\',originalEvent:event,preventDefaultAction:false,userData:tracker.userData});if(propagate===false){$.cancelEvent(event);}}// Click / Double-Click\nif((tracker.clickHandler||tracker.dblClickHandler)&&updateGPoint.insideElement){quick=releaseTime-updateGPoint.contactTime<=tracker.clickTimeThreshold&&updateGPoint.contactPos.distanceTo(releasePoint)<=tracker.clickDistThreshold;// Click\nif(tracker.clickHandler){propagate=tracker.clickHandler({eventSource:tracker,pointerType:updateGPoint.type,position:getPointRelativeToAbsolute(updateGPoint.currentPos,tracker.element),quick:quick,shift:event.shiftKey,isTouchEvent:updateGPoint.type===\'touch\',originalEvent:event,preventDefaultAction:false,userData:tracker.userData});if(propagate===false){$.cancelEvent(event);}}// Double-Click\nif(tracker.dblClickHandler&&quick){pointsList.clicks++;if(pointsList.clicks===1){delegate.lastClickPos=releasePoint;/*jshint loopfunc:true*/delegate.dblClickTimeOut=setTimeout(function(){pointsList.clicks=0;},tracker.dblClickTimeThreshold);/*jshint loopfunc:false*/}else if(pointsList.clicks===2){clearTimeout(delegate.dblClickTimeOut);pointsList.clicks=0;if(delegate.lastClickPos.distanceTo(releasePoint)<=tracker.dblClickDistThreshold){propagate=tracker.dblClickHandler({eventSource:tracker,pointerType:updateGPoint.type,position:getPointRelativeToAbsolute(updateGPoint.currentPos,tracker.element),shift:event.shiftKey,isTouchEvent:updateGPoint.type===\'touch\',originalEvent:event,preventDefaultAction:false,userData:tracker.userData});if(propagate===false){$.cancelEvent(event);}}delegate.lastClickPos=null;}}}}else if(pointsList.contacts===2){if(tracker.pinchHandler&&updateGPoint.type===\'touch\'){// Reset for pinch\ndelegate.pinchGPoints=pointsList.asArray();delegate.lastPinchDist=delegate.currentPinchDist=delegate.pinchGPoints[0].currentPos.distanceTo(delegate.pinchGPoints[1].currentPos);delegate.lastPinchCenter=delegate.currentPinchCenter=getCenterPoint(delegate.pinchGPoints[0].currentPos,delegate.pinchGPoints[1].currentPos);}}}else{// Pointer was activated in another element but removed in our element\n// Release (pressed in another element)\nif(tracker.releaseHandler){propagate=tracker.releaseHandler({eventSource:tracker,pointerType:updateGPoint.type,position:getPointRelativeToAbsolute(releasePoint,tracker.element),buttons:pointsList.buttons,insideElementPressed:updateGPoint.insideElementPressed,insideElementReleased:updateGPoint.insideElement,isTouchEvent:updateGPoint.type===\'touch\',originalEvent:event,preventDefaultAction:false,userData:tracker.userData});if(propagate===false){$.cancelEvent(event);}}}}}return releaseCapture;}/**\n     * Call when pointer(s) change coordinates, button state, pressure, tilt, or contact geometry (e.g. width and height)\n     *\n     * @function\n     * @private\n     * @inner\n     * @param {OpenSeadragon.MouseTracker} tracker\n     *     A reference to the MouseTracker instance.\n     * @param {Object} event\n     *     A reference to the originating DOM event.\n     * @param {Array.<OpenSeadragon.MouseTracker.GesturePoint>} gPoints\n     *      Gesture points associated with the event.\n     */function updatePointersMove(tracker,event,gPoints){var delegate=THIS[tracker.hash],pointsList=tracker.getActivePointersListByType(gPoints[0].type),i,gPointCount=gPoints.length,curGPoint,updateGPoint,gPointArray,delta,propagate;if(typeof event.buttons!==\'undefined\'){pointsList.buttons=event.buttons;}for(i=0;i<gPointCount;i++){curGPoint=gPoints[i];updateGPoint=pointsList.getById(curGPoint.id);if(updateGPoint){// Already tracking the pointer...update it\nif(curGPoint.hasOwnProperty(\'isPrimary\')){updateGPoint.isPrimary=curGPoint.isPrimary;}updateGPoint.lastPos=updateGPoint.currentPos;updateGPoint.lastTime=updateGPoint.currentTime;updateGPoint.currentPos=curGPoint.currentPos;updateGPoint.currentTime=curGPoint.currentTime;}else{// Initialize for tracking and add to the tracking list (no pointerover or pointerdown event occurred before this)\ncurGPoint.captured=false;curGPoint.insideElementPressed=false;curGPoint.insideElement=true;startTrackingPointer(pointsList,curGPoint);}}// Stop (mouse only)\nif(tracker.stopHandler&&gPoints[0].type===\'mouse\'){clearTimeout(tracker.stopTimeOut);tracker.stopTimeOut=setTimeout(function(){handlePointerStop(tracker,event,gPoints[0].type);},tracker.stopDelay);}if(pointsList.contacts===0){// Move (no contacts: hovering mouse or other hover-capable device)\nif(tracker.moveHandler){propagate=tracker.moveHandler({eventSource:tracker,pointerType:gPoints[0].type,position:getPointRelativeToAbsolute(gPoints[0].currentPos,tracker.element),buttons:pointsList.buttons,isTouchEvent:gPoints[0].type===\'touch\',originalEvent:event,preventDefaultAction:false,userData:tracker.userData});if(propagate===false){$.cancelEvent(event);}}}else if(pointsList.contacts===1){// Move (1 contact)\nif(tracker.moveHandler){updateGPoint=pointsList.asArray()[0];propagate=tracker.moveHandler({eventSource:tracker,pointerType:updateGPoint.type,position:getPointRelativeToAbsolute(updateGPoint.currentPos,tracker.element),buttons:pointsList.buttons,isTouchEvent:updateGPoint.type===\'touch\',originalEvent:event,preventDefaultAction:false,userData:tracker.userData});if(propagate===false){$.cancelEvent(event);}}// Drag\nif(tracker.dragHandler){updateGPoint=pointsList.asArray()[0];delta=updateGPoint.currentPos.minus(updateGPoint.lastPos);propagate=tracker.dragHandler({eventSource:tracker,pointerType:updateGPoint.type,position:getPointRelativeToAbsolute(updateGPoint.currentPos,tracker.element),buttons:pointsList.buttons,delta:delta,speed:updateGPoint.speed,direction:updateGPoint.direction,shift:event.shiftKey,isTouchEvent:updateGPoint.type===\'touch\',originalEvent:event,preventDefaultAction:false,userData:tracker.userData});if(propagate===false){$.cancelEvent(event);}}}else if(pointsList.contacts===2){// Move (2 contacts, use center)\nif(tracker.moveHandler){gPointArray=pointsList.asArray();propagate=tracker.moveHandler({eventSource:tracker,pointerType:gPointArray[0].type,position:getPointRelativeToAbsolute(getCenterPoint(gPointArray[0].currentPos,gPointArray[1].currentPos),tracker.element),buttons:pointsList.buttons,isTouchEvent:gPointArray[0].type===\'touch\',originalEvent:event,preventDefaultAction:false,userData:tracker.userData});if(propagate===false){$.cancelEvent(event);}}// Pinch\nif(tracker.pinchHandler&&gPoints[0].type===\'touch\'){delta=delegate.pinchGPoints[0].currentPos.distanceTo(delegate.pinchGPoints[1].currentPos);if(delta!=delegate.currentPinchDist){delegate.lastPinchDist=delegate.currentPinchDist;delegate.currentPinchDist=delta;delegate.lastPinchCenter=delegate.currentPinchCenter;delegate.currentPinchCenter=getCenterPoint(delegate.pinchGPoints[0].currentPos,delegate.pinchGPoints[1].currentPos);propagate=tracker.pinchHandler({eventSource:tracker,pointerType:\'touch\',gesturePoints:delegate.pinchGPoints,lastCenter:getPointRelativeToAbsolute(delegate.lastPinchCenter,tracker.element),center:getPointRelativeToAbsolute(delegate.currentPinchCenter,tracker.element),lastDistance:delegate.lastPinchDist,distance:delegate.currentPinchDist,shift:event.shiftKey,originalEvent:event,preventDefaultAction:false,userData:tracker.userData});if(propagate===false){$.cancelEvent(event);}}}}}/**\n     * @function\n     * @private\n     * @inner\n     * @param {OpenSeadragon.MouseTracker} tracker\n     *     A reference to the MouseTracker instance.\n     * @param {Object} event\n     *     A reference to the originating DOM event.\n     * @param {Array.<OpenSeadragon.MouseTracker.GesturePoint>} gPoints\n     *      Gesture points associated with the event.\n     */function updatePointersCancel(tracker,event,gPoints){updatePointersUp(tracker,event,gPoints,0);updatePointersExit(tracker,event,gPoints);}/**\n     * @private\n     * @inner\n     */function handlePointerStop(tracker,originalMoveEvent,pointerType){if(tracker.stopHandler){tracker.stopHandler({eventSource:tracker,pointerType:pointerType,position:getMouseRelative(originalMoveEvent,tracker.element),buttons:tracker.getActivePointersListByType(pointerType).buttons,isTouchEvent:pointerType===\'touch\',originalEvent:originalMoveEvent,preventDefaultAction:false,userData:tracker.userData});}}// True if inside an iframe, otherwise false.\n// @member {Boolean} isInIframe\n// @private\n// @inner\nvar isInIframe=function(){try{return window.self!==window.top;}catch(e){return true;}}();// @function\n// @private\n// @inner\n// @returns {Boolean} True if the target has access rights to events, otherwise false.\nfunction canAccessEvents(target){try{return target.addEventListener&&target.removeEventListener;}catch(e){return false;}}})(OpenSeadragon);/*\n * OpenSeadragon - Control\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n * An enumeration of supported locations where controls can be anchored.\n * The anchoring is always relative to the container.\n * @member ControlAnchor\n * @memberof OpenSeadragon\n * @static\n * @type {Object}\n * @property {Number} NONE\n * @property {Number} TOP_LEFT\n * @property {Number} TOP_RIGHT\n * @property {Number} BOTTOM_LEFT\n * @property {Number} BOTTOM_RIGHT\n * @property {Number} ABSOLUTE\n */$.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5};/**\n * @class Control\n * @classdesc A Control represents any interface element which is meant to allow the user\n * to interact with the zoomable interface. Any control can be anchored to any\n * element.\n *\n * @memberof OpenSeadragon\n * @param {Element} element - the control element to be anchored in the container.\n * @param {Object } options - All required and optional settings for configuring a control element.\n * @param {OpenSeadragon.ControlAnchor} [options.anchor=OpenSeadragon.ControlAnchor.NONE] - the position of the control\n *  relative to the container.\n * @param {Boolean} [options.attachToViewer=true] - Whether the control should be added directly to the viewer, or\n *  directly to the container\n * @param {Boolean} [options.autoFade=true] - Whether the control should have the autofade behavior\n * @param {Element} container - the element to control will be anchored too.\n */$.Control=function(element,options,container){var parent=element.parentNode;if(typeof options===\'number\'){$.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; "+"please use an options object instead.  "+"Support for this deprecated variant is scheduled for removal in December 2013");options={anchor:options};}options.attachToViewer=typeof options.attachToViewer===\'undefined\'?true:options.attachToViewer;/**\n     * True if the control should have autofade behavior.\n     * @member {Boolean} autoFade\n     * @memberof OpenSeadragon.Control#\n     */this.autoFade=typeof options.autoFade===\'undefined\'?true:options.autoFade;/**\n     * The element providing the user interface with some type of control (e.g. a zoom-in button).\n     * @member {Element} element\n     * @memberof OpenSeadragon.Control#\n     */this.element=element;/**\n     * The position of the Control relative to its container.\n     * @member {OpenSeadragon.ControlAnchor} anchor\n     * @memberof OpenSeadragon.Control#\n     */this.anchor=options.anchor;/**\n     * The Control\'s containing element.\n     * @member {Element} container\n     * @memberof OpenSeadragon.Control#\n     */this.container=container;/**\n     * A neutral element surrounding the control element.\n     * @member {Element} wrapper\n     * @memberof OpenSeadragon.Control#\n     */if(this.anchor==$.ControlAnchor.ABSOLUTE){this.wrapper=$.makeNeutralElement("div");this.wrapper.style.position="absolute";this.wrapper.style.top=typeof options.top=="number"?options.top+\'px\':options.top;this.wrapper.style.left=typeof options.left=="number"?options.left+\'px\':options.left;this.wrapper.style.height=typeof options.height=="number"?options.height+\'px\':options.height;this.wrapper.style.width=typeof options.width=="number"?options.width+\'px\':options.width;this.wrapper.style.margin="0px";this.wrapper.style.padding="0px";this.element.style.position="relative";this.element.style.top="0px";this.element.style.left="0px";this.element.style.height="100%";this.element.style.width="100%";}else{this.wrapper=$.makeNeutralElement("div");this.wrapper.style.display="inline-block";if(this.anchor==$.ControlAnchor.NONE){// IE6 fix\nthis.wrapper.style.width=this.wrapper.style.height="100%";}}this.wrapper.appendChild(this.element);if(options.attachToViewer){if(this.anchor==$.ControlAnchor.TOP_RIGHT||this.anchor==$.ControlAnchor.BOTTOM_RIGHT){this.container.insertBefore(this.wrapper,this.container.firstChild);}else{this.container.appendChild(this.wrapper);}}else{parent.appendChild(this.wrapper);}};/** @lends OpenSeadragon.Control.prototype */$.Control.prototype={/**\n     * Removes the control from the container.\n     * @function\n     */destroy:function destroy(){this.wrapper.removeChild(this.element);this.container.removeChild(this.wrapper);},/**\n     * Determines if the control is currently visible.\n     * @function\n     * @return {Boolean} true if currenly visible, false otherwise.\n     */isVisible:function isVisible(){return this.wrapper.style.display!="none";},/**\n     * Toggles the visibility of the control.\n     * @function\n     * @param {Boolean} visible - true to make visible, false to hide.\n     */setVisible:function setVisible(visible){this.wrapper.style.display=visible?this.anchor==$.ControlAnchor.ABSOLUTE?\'block\':\'inline-block\':"none";},/**\n     * Sets the opacity level for the control.\n     * @function\n     * @param {Number} opactiy - a value between 1 and 0 inclusively.\n     */setOpacity:function setOpacity(opacity){if(this.element[$.SIGNAL]&&$.Browser.vendor==$.BROWSERS.IE){$.setElementOpacity(this.element,opacity,true);}else{$.setElementOpacity(this.wrapper,opacity,true);}}};})(OpenSeadragon);/*\n * OpenSeadragon - ControlDock\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n     * @class ControlDock\n     * @classdesc Provides a container element (a &lt;form&gt; element) with support for the layout of control elements.\n     *\n     * @memberof OpenSeadragon\n     */$.ControlDock=function(options){var layouts=[\'topleft\',\'topright\',\'bottomright\',\'bottomleft\'],layout,i;$.extend(true,this,{id:\'controldock-\'+$.now()+\'-\'+Math.floor(Math.random()*1000000),container:$.makeNeutralElement(\'div\'),controls:[]},options);// Disable the form\'s submit; otherwise button clicks and return keys\n// can trigger it.\nthis.container.onsubmit=function(){return false;};if(this.element){this.element=$.getElement(this.element);this.element.appendChild(this.container);this.element.style.position=\'relative\';this.container.style.width=\'100%\';this.container.style.height=\'100%\';}for(i=0;i<layouts.length;i++){layout=layouts[i];this.controls[layout]=$.makeNeutralElement("div");this.controls[layout].style.position=\'absolute\';if(layout.match(\'left\')){this.controls[layout].style.left=\'0px\';}if(layout.match(\'right\')){this.controls[layout].style.right=\'0px\';}if(layout.match(\'top\')){this.controls[layout].style.top=\'0px\';}if(layout.match(\'bottom\')){this.controls[layout].style.bottom=\'0px\';}}this.container.appendChild(this.controls.topleft);this.container.appendChild(this.controls.topright);this.container.appendChild(this.controls.bottomright);this.container.appendChild(this.controls.bottomleft);};/** @lends OpenSeadragon.ControlDock.prototype */$.ControlDock.prototype={/**\n         * @function\n         */addControl:function addControl(element,controlOptions){element=$.getElement(element);var div=null;if(getControlIndex(this,element)>=0){return;// they\'re trying to add a duplicate control\n}switch(controlOptions.anchor){case $.ControlAnchor.TOP_RIGHT:div=this.controls.topright;element.style.position="relative";element.style.paddingRight="0px";element.style.paddingTop="0px";break;case $.ControlAnchor.BOTTOM_RIGHT:div=this.controls.bottomright;element.style.position="relative";element.style.paddingRight="0px";element.style.paddingBottom="0px";break;case $.ControlAnchor.BOTTOM_LEFT:div=this.controls.bottomleft;element.style.position="relative";element.style.paddingLeft="0px";element.style.paddingBottom="0px";break;case $.ControlAnchor.TOP_LEFT:div=this.controls.topleft;element.style.position="relative";element.style.paddingLeft="0px";element.style.paddingTop="0px";break;case $.ControlAnchor.ABSOLUTE:div=this.container;element.style.margin="0px";element.style.padding="0px";break;default:case $.ControlAnchor.NONE:div=this.container;element.style.margin="0px";element.style.padding="0px";break;}this.controls.push(new $.Control(element,controlOptions,div));element.style.display="inline-block";},/**\n         * @function\n         * @return {OpenSeadragon.ControlDock} Chainable.\n         */removeControl:function removeControl(element){element=$.getElement(element);var i=getControlIndex(this,element);if(i>=0){this.controls[i].destroy();this.controls.splice(i,1);}return this;},/**\n         * @function\n         * @return {OpenSeadragon.ControlDock} Chainable.\n         */clearControls:function clearControls(){while(this.controls.length>0){this.controls.pop().destroy();}return this;},/**\n         * @function\n         * @return {Boolean}\n         */areControlsEnabled:function areControlsEnabled(){var i;for(i=this.controls.length-1;i>=0;i--){if(this.controls[i].isVisible()){return true;}}return false;},/**\n         * @function\n         * @return {OpenSeadragon.ControlDock} Chainable.\n         */setControlsEnabled:function setControlsEnabled(enabled){var i;for(i=this.controls.length-1;i>=0;i--){this.controls[i].setVisible(enabled);}return this;}};///////////////////////////////////////////////////////////////////////////////\n// Utility methods\n///////////////////////////////////////////////////////////////////////////////\nfunction getControlIndex(dock,element){var controls=dock.controls,i;for(i=controls.length-1;i>=0;i--){if(controls[i].element==element){return i;}}return-1;}})(OpenSeadragon);/*\n * OpenSeadragon - Viewer\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){// dictionary from hash to private properties\nvar THIS={};var nextHash=1;/**\n *\n * The main point of entry into creating a zoomable image on the page.\n *\n * We have provided an idiomatic javascript constructor which takes\n * a single object, but still support the legacy positional arguments.\n *\n * The options below are given in order that they appeared in the constructor\n * as arguments and we translate a positional call into an idiomatic call.\n *\n * @class Viewer\n * @classdesc The main OpenSeadragon viewer class.\n *\n * @memberof OpenSeadragon\n * @extends OpenSeadragon.EventSource\n * @extends OpenSeadragon.ControlDock\n * @param {OpenSeadragon.Options} options - Viewer options.\n *\n **/$.Viewer=function(options){var args=arguments,_this=this,i;//backward compatibility for positional args while prefering more\n//idiomatic javascript options object as the only argument\nif(!$.isPlainObject(options)){options={id:args[0],xmlPath:args.length>1?args[1]:undefined,prefixUrl:args.length>2?args[2]:undefined,controls:args.length>3?args[3]:undefined,overlays:args.length>4?args[4]:undefined};}//options.config and the general config argument are deprecated\n//in favor of the more direct specification of optional settings\n//being pass directly on the options object\nif(options.config){$.extend(true,options,options.config);delete options.config;}//Public properties\n//Allow the options object to override global defaults\n$.extend(true,this,{//internal state and dom identifiers\nid:options.id,hash:options.hash||nextHash++,//dom nodes\n/**\n         * The parent element of this Viewer instance, passed in when the Viewer was created.\n         * @member {Element} element\n         * @memberof OpenSeadragon.Viewer#\n         */element:null,/**\n         * A &lt;div&gt; element (provided by {@link OpenSeadragon.ControlDock}), the base element of this Viewer instance.<br><br>\n         * Child element of {@link OpenSeadragon.Viewer#element}.\n         * @member {Element} container\n         * @memberof OpenSeadragon.Viewer#\n         */container:null,/**\n         * A &lt;div&gt; element, the element where user-input events are handled for panning and zooming.<br><br>\n         * Child element of {@link OpenSeadragon.Viewer#container},\n         * positioned on top of {@link OpenSeadragon.Viewer#keyboardCommandArea}.<br><br>\n         * The parent of {@link OpenSeadragon.Drawer#canvas} instances.\n         * @member {Element} canvas\n         * @memberof OpenSeadragon.Viewer#\n         */canvas:null,// Overlays list. An overlay allows to add html on top of the viewer.\noverlays:[],// Container inside the canvas where overlays are drawn.\noverlaysContainer:null,//private state properties\npreviousBody:[],//This was originally initialized in the constructor and so could never\n//have anything in it.  now it can because we allow it to be specified\n//in the options and is only empty by default if not specified. Also\n//this array was returned from get_controls which I find confusing\n//since this object has a controls property which is treated in other\n//functions like clearControls.  I\'m removing the accessors.\ncustomControls:[],//These are originally not part options but declared as members\n//in initialize.  It\'s still considered idiomatic to put them here\nsource:null,/**\n         * Handles rendering of tiles in the viewer. Created for each TileSource opened.\n         * @member {OpenSeadragon.Drawer} drawer\n         * @memberof OpenSeadragon.Viewer#\n         */drawer:null,world:null,/**\n         * Handles coordinate-related functionality - zoom, pan, rotation, etc. Created for each TileSource opened.\n         * @member {OpenSeadragon.Viewport} viewport\n         * @memberof OpenSeadragon.Viewer#\n         */viewport:null,/**\n         * @member {OpenSeadragon.Navigator} navigator\n         * @memberof OpenSeadragon.Viewer#\n         */navigator:null,//A collection viewport is a separate viewport used to provide\n//simultaneous rendering of sets of tiles\ncollectionViewport:null,collectionDrawer:null,//UI image resources\n//TODO: rename navImages to uiImages\nnavImages:null,//interface button controls\nbuttons:null,//TODO: this is defunct so safely remove it\nprofiler:null},$.DEFAULT_SETTINGS,options);if(typeof this.hash==="undefined"){throw new Error("A hash must be defined, either by specifying options.id or options.hash.");}if(typeof THIS[this.hash]!=="undefined"){// We don\'t want to throw an error here, as the user might have discarded\n// the previous viewer with the same hash and now want to recreate it.\n$.console.warn("Hash "+this.hash+" has already been used.");}//Private state properties\nTHIS[this.hash]={"fsBoundsDelta":new $.Point(1,1),"prevContainerSize":null,"animating":false,"forceRedraw":false,"mouseInside":false,"group":null,// whether we should be continuously zooming\n"zooming":false,// how much we should be continuously zooming by\n"zoomFactor":null,"lastZoomTime":null,"fullPage":false,"onfullscreenchange":null};this._sequenceIndex=0;this._firstOpen=true;this._updateRequestId=null;this._loadQueue=[];this.currentOverlays=[];this._lastScrollTime=$.now();// variable used to help normalize the scroll event speed of different devices\n//Inherit some behaviors and properties\n$.EventSource.call(this);this.addHandler(\'open-failed\',function(event){var msg=$.getString("Errors.OpenFailed",event.eventSource,event.message);_this._showMessage(msg);});$.ControlDock.call(this,options);//Deal with tile sources\nif(this.xmlPath){//Deprecated option.  Now it is preferred to use the tileSources option\nthis.tileSources=[this.xmlPath];}this.element=this.element||document.getElementById(this.id);this.canvas=$.makeNeutralElement("div");this.canvas.className="openseadragon-canvas";(function(style){style.width="100%";style.height="100%";style.overflow="hidden";style.position="absolute";style.top="0px";style.left="0px";})(this.canvas.style);$.setElementTouchActionNone(this.canvas);this.canvas.tabIndex=options.tabIndex===undefined?0:options.tabIndex;//the container is created through applying the ControlDock constructor above\nthis.container.className="openseadragon-container";(function(style){style.width="100%";style.height="100%";style.position="relative";style.overflow="hidden";style.left="0px";style.top="0px";style.textAlign="left";// needed to protect against\n})(this.container.style);this.container.insertBefore(this.canvas,this.container.firstChild);this.element.appendChild(this.container);//Used for toggling between fullscreen and default container size\n//TODO: these can be closure private and shared across Viewer\n//      instances.\nthis.bodyWidth=document.body.style.width;this.bodyHeight=document.body.style.height;this.bodyOverflow=document.body.style.overflow;this.docOverflow=document.documentElement.style.overflow;this.innerTracker=new $.MouseTracker({element:this.canvas,startDisabled:this.mouseNavEnabled?false:true,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,keyDownHandler:$.delegate(this,onCanvasKeyDown),keyHandler:$.delegate(this,onCanvasKeyPress),clickHandler:$.delegate(this,onCanvasClick),dblClickHandler:$.delegate(this,onCanvasDblClick),dragHandler:$.delegate(this,onCanvasDrag),dragEndHandler:$.delegate(this,onCanvasDragEnd),enterHandler:$.delegate(this,onCanvasEnter),exitHandler:$.delegate(this,onCanvasExit),pressHandler:$.delegate(this,onCanvasPress),releaseHandler:$.delegate(this,onCanvasRelease),nonPrimaryPressHandler:$.delegate(this,onCanvasNonPrimaryPress),nonPrimaryReleaseHandler:$.delegate(this,onCanvasNonPrimaryRelease),scrollHandler:$.delegate(this,onCanvasScroll),pinchHandler:$.delegate(this,onCanvasPinch)});this.outerTracker=new $.MouseTracker({element:this.container,startDisabled:this.mouseNavEnabled?false:true,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:$.delegate(this,onContainerEnter),exitHandler:$.delegate(this,onContainerExit)});if(this.toolbar){this.toolbar=new $.ControlDock({element:this.toolbar});}this.bindStandardControls();THIS[this.hash].prevContainerSize=_getSafeElemSize(this.container);// Create the world\nthis.world=new $.World({viewer:this});this.world.addHandler(\'add-item\',function(event){// For backwards compatibility, we maintain the source property\n_this.source=_this.world.getItemAt(0).source;THIS[_this.hash].forceRedraw=true;if(!_this._updateRequestId){_this._updateRequestId=scheduleUpdate(_this,updateMulti);}});this.world.addHandler(\'remove-item\',function(event){// For backwards compatibility, we maintain the source property\nif(_this.world.getItemCount()){_this.source=_this.world.getItemAt(0).source;}else{_this.source=null;}THIS[_this.hash].forceRedraw=true;});this.world.addHandler(\'metrics-change\',function(event){if(_this.viewport){_this.viewport.setHomeBounds(_this.world.getHomeBounds(),_this.world.getContentFactor());}});this.world.addHandler(\'item-index-change\',function(event){// For backwards compatibility, we maintain the source property\n_this.source=_this.world.getItemAt(0).source;});// Create the viewport\nthis.viewport=new $.Viewport({containerSize:THIS[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins});this.viewport.setHomeBounds(this.world.getHomeBounds(),this.world.getContentFactor());// Create the image loader\nthis.imageLoader=new $.ImageLoader({jobLimit:this.imageLoaderLimit});// Create the tile cache\nthis.tileCache=new $.TileCache({maxImageCacheCount:this.maxImageCacheCount});// Create the drawer\nthis.drawer=new $.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor});// Overlay container\nthis.overlaysContainer=$.makeNeutralElement("div");this.canvas.appendChild(this.overlaysContainer);// Now that we have a drawer, see if it supports rotate. If not we need to remove the rotate buttons\nif(!this.drawer.canRotate()){// Disable/remove the rotate left/right buttons since they aren\'t supported\nif(this.rotateLeft){i=this.buttons.buttons.indexOf(this.rotateLeft);this.buttons.buttons.splice(i,1);this.buttons.element.removeChild(this.rotateLeft.element);}if(this.rotateRight){i=this.buttons.buttons.indexOf(this.rotateRight);this.buttons.buttons.splice(i,1);this.buttons.element.removeChild(this.rotateRight.element);}}//Instantiate a navigator if configured\nif(this.showNavigator){this.navigator=new $.Navigator({id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,crossOriginPolicy:this.crossOriginPolicy});}// Sequence mode\nif(this.sequenceMode){this.bindSequenceControls();}// Open initial tilesources\nif(this.tileSources){this.open(this.tileSources);}// Add custom controls\nfor(i=0;i<this.customControls.length;i++){this.addControl(this.customControls[i].id,{anchor:this.customControls[i].anchor});}// Initial fade out\n$.requestAnimationFrame(function(){beginControlsAutoHide(_this);});};$.extend($.Viewer.prototype,$.EventSource.prototype,$.ControlDock.prototype,/** @lends OpenSeadragon.Viewer.prototype */{/**\n     * @function\n     * @return {Boolean}\n     */isOpen:function isOpen(){return!!this.world.getItemCount();},// deprecated\nopenDzi:function openDzi(dzi){$.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead.");return this.open(dzi);},// deprecated\nopenTileSource:function openTileSource(tileSource){$.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead.");return this.open(tileSource);},/**\n     * Open tiled images into the viewer, closing any others.\n     * @function\n     * @param {Array|String|Object|Function} tileSources - This can be a TiledImage\n     * specifier, a TileSource specifier, or an array of either. A TiledImage specifier\n     * is the same as the options parameter for {@link OpenSeadragon.Viewer#addTiledImage},\n     * except for the index property; images are added in sequence.\n     * A TileSource specifier is anything you could pass as the tileSource property\n     * of the options parameter for {@link OpenSeadragon.Viewer#addTiledImage}.\n     * @return {OpenSeadragon.Viewer} Chainable.\n     * @fires OpenSeadragon.Viewer.event:open\n     * @fires OpenSeadragon.Viewer.event:open-failed\n     */open:function open(tileSources){var _this=this;this.close();if(!tileSources){return;}if(this.sequenceMode&&$.isArray(tileSources)){if(this.referenceStrip){this.referenceStrip.destroy();this.referenceStrip=null;}this.tileSources=tileSources;this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage));if(this.tileSources.length){this.open(this.tileSources[this._sequenceIndex]);if(this.showReferenceStrip){this.referenceStrip=new $.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,viewer:this});}}this._updateSequenceButtons(this._sequenceIndex);return;}if(!$.isArray(tileSources)){tileSources=[tileSources];}if(!tileSources.length){return;}this._opening=true;var expected=tileSources.length;var successes=0;var failures=0;var failEvent;var checkCompletion=function checkCompletion(){if(successes+failures===expected){if(successes){if(_this._firstOpen||!_this.preserveViewport){_this.viewport.goHome(true);_this.viewport.update();}_this._firstOpen=false;var source=tileSources[0];if(source.tileSource){source=source.tileSource;}// Global overlays\nif(_this.overlays&&!_this.preserveOverlays){for(var i=0;i<_this.overlays.length;i++){_this.currentOverlays[i]=getOverlayObject(_this,_this.overlays[i]);}}_this._drawOverlays();_this._opening=false;/**\n                     * Raised when the viewer has opened and loaded one or more TileSources.\n                     *\n                     * @event open\n                     * @memberof OpenSeadragon.Viewer\n                     * @type {object}\n                     * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised the event.\n                     * @property {OpenSeadragon.TileSource} source - The tile source that was opened.\n                     * @property {?Object} userData - Arbitrary subscriber-defined object.\n                     */// TODO: what if there are multiple sources?\n_this.raiseEvent(\'open\',{source:source});}else{_this._opening=false;/**\n                     * Raised when an error occurs loading a TileSource.\n                     *\n                     * @event open-failed\n                     * @memberof OpenSeadragon.Viewer\n                     * @type {object}\n                     * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised the event.\n                     * @property {String} message - Information about what failed.\n                     * @property {String} source - The tile source that failed.\n                     * @property {?Object} userData - Arbitrary subscriber-defined object.\n                     */_this.raiseEvent(\'open-failed\',failEvent);}}};var doOne=function doOne(options){if(!$.isPlainObject(options)||!options.tileSource){options={tileSource:options};}if(options.index!==undefined){$.console.error(\'[Viewer.open] setting indexes here is not supported; use addTiledImage instead\');delete options.index;}if(options.collectionImmediately===undefined){options.collectionImmediately=true;}var originalSuccess=options.success;options.success=function(event){successes++;// TODO: now that options has other things besides tileSource, the overlays\n// should probably be at the options level, not the tileSource level.\nif(options.tileSource.overlays){for(var i=0;i<options.tileSource.overlays.length;i++){_this.addOverlay(options.tileSource.overlays[i]);}}if(originalSuccess){originalSuccess(event);}checkCompletion();};var originalError=options.error;options.error=function(event){failures++;if(!failEvent){failEvent=event;}if(originalError){originalError(event);}checkCompletion();};_this.addTiledImage(options);};// TileSources\nfor(var i=0;i<tileSources.length;i++){doOne(tileSources[i]);}return this;},/**\n     * @function\n     * @return {OpenSeadragon.Viewer} Chainable.\n     * @fires OpenSeadragon.Viewer.event:close\n     */close:function close(){if(!THIS[this.hash]){//this viewer has already been destroyed: returning immediately\nreturn this;}this._opening=false;if(this.navigator){this.navigator.close();}if(!this.preserveOverlays){this.clearOverlays();this.overlaysContainer.innerHTML="";}THIS[this.hash].animating=false;this.world.removeAll();this.imageLoader.clear();/**\n         * Raised when the viewer is closed (see {@link OpenSeadragon.Viewer#close}).\n         *\n         * @event close\n         * @memberof OpenSeadragon.Viewer\n         * @type {object}\n         * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised the event.\n         * @property {?Object} userData - Arbitrary subscriber-defined object.\n         */this.raiseEvent(\'close\');return this;},/**\n     * Function to destroy the viewer and clean up everything created by OpenSeadragon.\n     *\n     * Example:\n     * var viewer = OpenSeadragon({\n     *   [...]\n     * });\n     *\n     * //when you are done with the viewer:\n     * viewer.destroy();\n     * viewer = null; //important\n     *\n     * @function\n     */destroy:function destroy(){if(!THIS[this.hash]){//this viewer has already been destroyed: returning immediately\nreturn;}this.close();this.clearOverlays();this.overlaysContainer.innerHTML="";//TODO: implement this...\n//this.unbindSequenceControls()\n//this.unbindStandardControls()\nif(this.referenceStrip){this.referenceStrip.destroy();this.referenceStrip=null;}if(this._updateRequestId!==null){$.cancelAnimationFrame(this._updateRequestId);this._updateRequestId=null;}if(this.drawer){this.drawer.destroy();}this.removeAllHandlers();// Go through top element (passed to us) and remove all children\n// Use removeChild to make sure it handles SVG or any non-html\n// also it performs better - http://jsperf.com/innerhtml-vs-removechild/15\nif(this.element){while(this.element.firstChild){this.element.removeChild(this.element.firstChild);}}// destroy the mouse trackers\nif(this.innerTracker){this.innerTracker.destroy();}if(this.outerTracker){this.outerTracker.destroy();}THIS[this.hash]=null;delete THIS[this.hash];// clear all our references to dom objects\nthis.canvas=null;this.container=null;// clear our reference to the main element - they will need to pass it in again, creating a new viewer\nthis.element=null;},/**\n     * @function\n     * @return {Boolean}\n     */isMouseNavEnabled:function isMouseNavEnabled(){return this.innerTracker.isTracking();},/**\n     * @function\n     * @param {Boolean} enabled - true to enable, false to disable\n     * @return {OpenSeadragon.Viewer} Chainable.\n     * @fires OpenSeadragon.Viewer.event:mouse-enabled\n     */setMouseNavEnabled:function setMouseNavEnabled(enabled){this.innerTracker.setTracking(enabled);/**\n         * Raised when mouse/touch navigation is enabled or disabled (see {@link OpenSeadragon.Viewer#setMouseNavEnabled}).\n         *\n         * @event mouse-enabled\n         * @memberof OpenSeadragon.Viewer\n         * @type {object}\n         * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised the event.\n         * @property {Boolean} enabled\n         * @property {?Object} userData - Arbitrary subscriber-defined object.\n         */this.raiseEvent(\'mouse-enabled\',{enabled:enabled});return this;},/**\n     * @function\n     * @return {Boolean}\n     */areControlsEnabled:function areControlsEnabled(){var enabled=this.controls.length,i;for(i=0;i<this.controls.length;i++){enabled=enabled&&this.controls[i].isVisibile();}return enabled;},/**\n     * Shows or hides the controls (e.g. the default navigation buttons).\n     *\n     * @function\n     * @param {Boolean} true to show, false to hide.\n     * @return {OpenSeadragon.Viewer} Chainable.\n     * @fires OpenSeadragon.Viewer.event:controls-enabled\n     */setControlsEnabled:function setControlsEnabled(enabled){if(enabled){abortControlsAutoHide(this);}else{beginControlsAutoHide(this);}/**\n         * Raised when the navigation controls are shown or hidden (see {@link OpenSeadragon.Viewer#setControlsEnabled}).\n         *\n         * @event controls-enabled\n         * @memberof OpenSeadragon.Viewer\n         * @type {object}\n         * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised the event.\n         * @property {Boolean} enabled\n         * @property {?Object} userData - Arbitrary subscriber-defined object.\n         */this.raiseEvent(\'controls-enabled\',{enabled:enabled});return this;},/**\n     * @function\n     * @return {Boolean}\n     */isFullPage:function isFullPage(){return THIS[this.hash].fullPage;},/**\n     * Toggle full page mode.\n     * @function\n     * @param {Boolean} fullPage\n     *      If true, enter full page mode.  If false, exit full page mode.\n     * @return {OpenSeadragon.Viewer} Chainable.\n     * @fires OpenSeadragon.Viewer.event:pre-full-page\n     * @fires OpenSeadragon.Viewer.event:full-page\n     */setFullPage:function setFullPage(fullPage){var body=document.body,bodyStyle=body.style,docStyle=document.documentElement.style,_this=this,hash,nodes,i;//dont bother modifying the DOM if we are already in full page mode.\nif(fullPage==this.isFullPage()){return this;}var fullPageEventArgs={fullPage:fullPage,preventDefaultAction:false};/**\n         * Raised when the viewer is about to change to/from full-page mode (see {@link OpenSeadragon.Viewer#setFullPage}).\n         *\n         * @event pre-full-page\n         * @memberof OpenSeadragon.Viewer\n         * @type {object}\n         * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised the event.\n         * @property {Boolean} fullPage - True if entering full-page mode, false if exiting full-page mode.\n         * @property {Boolean} preventDefaultAction - Set to true to prevent full-page mode change. Default: false.\n         * @property {?Object} userData - Arbitrary subscriber-defined object.\n         */this.raiseEvent(\'pre-full-page\',fullPageEventArgs);if(fullPageEventArgs.preventDefaultAction){return this;}if(fullPage){this.elementSize=$.getElementSize(this.element);this.pageScroll=$.getPageScroll();this.elementMargin=this.element.style.margin;this.element.style.margin="0";this.elementPadding=this.element.style.padding;this.element.style.padding="0";this.bodyMargin=bodyStyle.margin;this.docMargin=docStyle.margin;bodyStyle.margin="0";docStyle.margin="0";this.bodyPadding=bodyStyle.padding;this.docPadding=docStyle.padding;bodyStyle.padding="0";docStyle.padding="0";this.bodyWidth=bodyStyle.width;this.bodyHeight=bodyStyle.height;bodyStyle.width="100%";bodyStyle.height="100%";//when entering full screen on the ipad it wasnt sufficient to leave\n//the body intact as only only the top half of the screen would\n//respond to touch events on the canvas, while the bottom half treated\n//them as touch events on the document body.  Thus we remove and store\n//the bodies elements and replace them when we leave full screen.\nthis.previousBody=[];THIS[this.hash].prevElementParent=this.element.parentNode;THIS[this.hash].prevNextSibling=this.element.nextSibling;THIS[this.hash].prevElementWidth=this.element.style.width;THIS[this.hash].prevElementHeight=this.element.style.height;nodes=body.childNodes.length;for(i=0;i<nodes;i++){this.previousBody.push(body.childNodes[0]);body.removeChild(body.childNodes[0]);}//If we\'ve got a toolbar, we need to enable the user to use css to\n//preserve it in fullpage mode\nif(this.toolbar&&this.toolbar.element){//save a reference to the parent so we can put it back\n//in the long run we need a better strategy\nthis.toolbar.parentNode=this.toolbar.element.parentNode;this.toolbar.nextSibling=this.toolbar.element.nextSibling;body.appendChild(this.toolbar.element);//Make sure the user has some ability to style the toolbar based\n//on the mode\n$.addClass(this.toolbar.element,\'fullpage\');}$.addClass(this.element,\'fullpage\');body.appendChild(this.element);this.element.style.height=$.getWindowSize().y+\'px\';this.element.style.width=$.getWindowSize().x+\'px\';if(this.toolbar&&this.toolbar.element){this.element.style.height=$.getElementSize(this.element).y-$.getElementSize(this.toolbar.element).y+\'px\';}THIS[this.hash].fullPage=true;// mouse will be inside container now\n$.delegate(this,onContainerEnter)({});}else{this.element.style.margin=this.elementMargin;this.element.style.padding=this.elementPadding;bodyStyle.margin=this.bodyMargin;docStyle.margin=this.docMargin;bodyStyle.padding=this.bodyPadding;docStyle.padding=this.docPadding;bodyStyle.width=this.bodyWidth;bodyStyle.height=this.bodyHeight;body.removeChild(this.element);nodes=this.previousBody.length;for(i=0;i<nodes;i++){body.appendChild(this.previousBody.shift());}$.removeClass(this.element,\'fullpage\');THIS[this.hash].prevElementParent.insertBefore(this.element,THIS[this.hash].prevNextSibling);//If we\'ve got a toolbar, we need to enable the user to use css to\n//reset it to its original state\nif(this.toolbar&&this.toolbar.element){body.removeChild(this.toolbar.element);//Make sure the user has some ability to style the toolbar based\n//on the mode\n$.removeClass(this.toolbar.element,\'fullpage\');this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling);delete this.toolbar.parentNode;delete this.toolbar.nextSibling;}this.element.style.width=THIS[this.hash].prevElementWidth;this.element.style.height=THIS[this.hash].prevElementHeight;// After exiting fullPage or fullScreen, it can take some time\n// before the browser can actually set the scroll.\nvar restoreScrollCounter=0;var restoreScroll=function restoreScroll(){$.setPageScroll(_this.pageScroll);var pageScroll=$.getPageScroll();restoreScrollCounter++;if(restoreScrollCounter<10&&pageScroll.x!==_this.pageScroll.x||pageScroll.y!==_this.pageScroll.y){$.requestAnimationFrame(restoreScroll);}};$.requestAnimationFrame(restoreScroll);THIS[this.hash].fullPage=false;// mouse will likely be outside now\n$.delegate(this,onContainerExit)({});}if(this.navigator&&this.viewport){this.navigator.update(this.viewport);}/**\n         * Raised when the viewer has changed to/from full-page mode (see {@link OpenSeadragon.Viewer#setFullPage}).\n         *\n         * @event full-page\n         * @memberof OpenSeadragon.Viewer\n         * @type {object}\n         * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised the event.\n         * @property {Boolean} fullPage - True if changed to full-page mode, false if exited full-page mode.\n         * @property {?Object} userData - Arbitrary subscriber-defined object.\n         */this.raiseEvent(\'full-page\',{fullPage:fullPage});return this;},/**\n     * Toggle full screen mode if supported. Toggle full page mode otherwise.\n     * @function\n     * @param {Boolean} fullScreen\n     *      If true, enter full screen mode.  If false, exit full screen mode.\n     * @return {OpenSeadragon.Viewer} Chainable.\n     * @fires OpenSeadragon.Viewer.event:pre-full-screen\n     * @fires OpenSeadragon.Viewer.event:full-screen\n     */setFullScreen:function setFullScreen(fullScreen){var _this=this;if(!$.supportsFullScreen){return this.setFullPage(fullScreen);}if($.isFullScreen()===fullScreen){return this;}var fullScreeEventArgs={fullScreen:fullScreen,preventDefaultAction:false};/**\n         * Raised when the viewer is about to change to/from full-screen mode (see {@link OpenSeadragon.Viewer#setFullScreen}).\n         * Note: the pre-full-screen event is not raised when the user is exiting\n         * full-screen mode by pressing the Esc key. In that case, consider using\n         * the full-screen, pre-full-page or full-page events.\n         *\n         * @event pre-full-screen\n         * @memberof OpenSeadragon.Viewer\n         * @type {object}\n         * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised the event.\n         * @property {Boolean} fullScreen - True if entering full-screen mode, false if exiting full-screen mode.\n         * @property {Boolean} preventDefaultAction - Set to true to prevent full-screen mode change. Default: false.\n         * @property {?Object} userData - Arbitrary subscriber-defined object.\n         */this.raiseEvent(\'pre-full-screen\',fullScreeEventArgs);if(fullScreeEventArgs.preventDefaultAction){return this;}if(fullScreen){this.setFullPage(true);// If the full page mode is not actually entered, we need to prevent\n// the full screen mode.\nif(!this.isFullPage()){return this;}this.fullPageStyleWidth=this.element.style.width;this.fullPageStyleHeight=this.element.style.height;this.element.style.width=\'100%\';this.element.style.height=\'100%\';var onFullScreenChange=function onFullScreenChange(){var isFullScreen=$.isFullScreen();if(!isFullScreen){$.removeEvent(document,$.fullScreenEventName,onFullScreenChange);$.removeEvent(document,$.fullScreenErrorEventName,onFullScreenChange);_this.setFullPage(false);if(_this.isFullPage()){_this.element.style.width=_this.fullPageStyleWidth;_this.element.style.height=_this.fullPageStyleHeight;}}if(_this.navigator&&_this.viewport){_this.navigator.update(_this.viewport);}/**\n                 * Raised when the viewer has changed to/from full-screen mode (see {@link OpenSeadragon.Viewer#setFullScreen}).\n                 *\n                 * @event full-screen\n                 * @memberof OpenSeadragon.Viewer\n                 * @type {object}\n                 * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised the event.\n                 * @property {Boolean} fullScreen - True if changed to full-screen mode, false if exited full-screen mode.\n                 * @property {?Object} userData - Arbitrary subscriber-defined object.\n                 */_this.raiseEvent(\'full-screen\',{fullScreen:isFullScreen});};$.addEvent(document,$.fullScreenEventName,onFullScreenChange);$.addEvent(document,$.fullScreenErrorEventName,onFullScreenChange);$.requestFullScreen(document.body);}else{$.exitFullScreen();}return this;},/**\n     * @function\n     * @return {Boolean}\n     */isVisible:function isVisible(){return this.container.style.visibility!="hidden";},/**\n     * @function\n     * @param {Boolean} visible\n     * @return {OpenSeadragon.Viewer} Chainable.\n     * @fires OpenSeadragon.Viewer.event:visible\n     */setVisible:function setVisible(visible){this.container.style.visibility=visible?"":"hidden";/**\n         * Raised when the viewer is shown or hidden (see {@link OpenSeadragon.Viewer#setVisible}).\n         *\n         * @event visible\n         * @memberof OpenSeadragon.Viewer\n         * @type {object}\n         * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised the event.\n         * @property {Boolean} visible\n         * @property {?Object} userData - Arbitrary subscriber-defined object.\n         */this.raiseEvent(\'visible\',{visible:visible});return this;},/**\n     * Add a tiled image to the viewer.\n     * options.tileSource can be anything that {@link OpenSeadragon.Viewer#open}\n     *  supports except arrays of images.\n     * Note that you can specify options.width or options.height, but not both.\n     * The other dimension will be calculated according to the item\'s aspect ratio.\n     * If collectionMode is on (see {@link OpenSeadragon.Options}), the new image is\n     * automatically arranged with the others.\n     * @function\n     * @param {Object} options\n     * @param {String|Object|Function} options.tileSource - The TileSource specifier.\n     * A String implies a url used to determine the tileSource implementation\n     *      based on the file extension of url. JSONP is implied by *.js,\n     *      otherwise the url is retrieved as text and the resulting text is\n     *      introspected to determine if its json, xml, or text and parsed.\n     * An Object implies an inline configuration which has a single\n     *      property sufficient for being able to determine tileSource\n     *      implementation. If the object has a property which is a function\n     *      named \'getTileUrl\', it is treated as a custom TileSource.\n     * @param {Number} [options.index] The index of the item. Added on top of\n     * all other items if not specified.\n     * @param {Boolean} [options.replace=false] If true, the item at options.index will be\n     * removed and the new item is added in its place. options.tileSource will be\n     * interpreted and fetched if necessary before the old item is removed to avoid leaving\n     * a gap in the world.\n     * @param {Number} [options.x=0] The X position for the image in viewport coordinates.\n     * @param {Number} [options.y=0] The Y position for the image in viewport coordinates.\n     * @param {Number} [options.width=1] The width for the image in viewport coordinates.\n     * @param {Number} [options.height] The height for the image in viewport coordinates.\n     * @param {OpenSeadragon.Rect} [options.clip] - An area, in image pixels, to clip to\n     * (portions of the image outside of this area will not be visible). Only works on\n     * browsers that support the HTML5 canvas.\n     * @param {Number} [options.opacity] Opacity the tiled image should be drawn at by default.\n     * @param {String} [options.compositeOperation] How the image is composited onto other images.\n     * @param {Function} [options.success] A function that gets called when the image is\n     * successfully added. It\'s passed the event object which contains a single property:\n     * "item", the resulting TiledImage.\n     * @param {Function} [options.error] A function that gets called if the image is\n     * unable to be added. It\'s passed the error event object, which contains "message"\n     * and "source" properties.\n     * @param {Boolean} [options.collectionImmediately=false] If collectionMode is on,\n     * specifies whether to snap to the new arrangement immediately or to animate to it.\n     * @param {String|CanvasGradient|CanvasPattern|Function} [options.placeholderFillStyle] - See {@link OpenSeadragon.Options}.\n     * @fires OpenSeadragon.World.event:add-item\n     * @fires OpenSeadragon.Viewer.event:add-item-failed\n     */addTiledImage:function addTiledImage(options){$.console.assert(options,"[Viewer.addTiledImage] options is required");$.console.assert(options.tileSource,"[Viewer.addTiledImage] options.tileSource is required");$.console.assert(!options.replace||options.index>-1&&options.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var _this=this;if(options.replace){options.replaceItem=_this.world.getItemAt(options.index);}this._hideMessage();if(options.placeholderFillStyle===undefined){options.placeholderFillStyle=this.placeholderFillStyle;}if(options.opacity===undefined){options.opacity=this.opacity;}if(options.compositeOperation===undefined){options.compositeOperation=this.compositeOperation;}var myQueueItem={options:options};function raiseAddItemFailed(event){for(var i=0;i<_this._loadQueue.length;i++){if(_this._loadQueue[i]===myQueueItem){_this._loadQueue.splice(i,1);break;}}if(_this._loadQueue.length===0){refreshWorld(myQueueItem);}/**\n             * Raised when an error occurs while adding a item.\n             * @event add-item-failed\n             * @memberOf OpenSeadragon.Viewer\n             * @type {object}\n             * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised the event.\n             * @property {String} message\n             * @property {String} source\n             * @property {Object} options The options passed to the addTiledImage method.\n             * @property {?Object} userData - Arbitrary subscriber-defined object.\n             */_this.raiseEvent(\'add-item-failed\',event);if(options.error){options.error(event);}}function refreshWorld(theItem){if(_this.collectionMode){_this.world.arrange({immediately:theItem.options.collectionImmediately,rows:_this.collectionRows,columns:_this.collectionColumns,layout:_this.collectionLayout,tileSize:_this.collectionTileSize,tileMargin:_this.collectionTileMargin});_this.world.setAutoRefigureSizes(true);}}if($.isArray(options.tileSource)){setTimeout(function(){raiseAddItemFailed({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:options.tileSource,options:options});});return;}this._loadQueue.push(myQueueItem);getTileSourceImplementation(this,options.tileSource,function(tileSource){myQueueItem.tileSource=tileSource;// add everybody at the front of the queue that\'s ready to go\nvar queueItem,tiledImage,optionsClone;while(_this._loadQueue.length){queueItem=_this._loadQueue[0];if(!queueItem.tileSource){break;}_this._loadQueue.splice(0,1);if(queueItem.options.replace){var newIndex=_this.world.getIndexOfItem(queueItem.options.replaceItem);if(newIndex!=-1){queueItem.options.index=newIndex;}_this.world.removeItem(queueItem.options.replaceItem);}tiledImage=new $.TiledImage({viewer:_this,source:queueItem.tileSource,viewport:_this.viewport,drawer:_this.drawer,tileCache:_this.tileCache,imageLoader:_this.imageLoader,x:queueItem.options.x,y:queueItem.options.y,width:queueItem.options.width,height:queueItem.options.height,clip:queueItem.options.clip,placeholderFillStyle:queueItem.options.placeholderFillStyle,opacity:queueItem.options.opacity,compositeOperation:queueItem.options.compositeOperation,springStiffness:_this.springStiffness,animationTime:_this.animationTime,minZoomImageRatio:_this.minZoomImageRatio,wrapHorizontal:_this.wrapHorizontal,wrapVertical:_this.wrapVertical,immediateRender:_this.immediateRender,blendTime:_this.blendTime,alwaysBlend:_this.alwaysBlend,minPixelRatio:_this.minPixelRatio,smoothTileEdgesMinZoom:_this.smoothTileEdgesMinZoom,crossOriginPolicy:_this.crossOriginPolicy,debugMode:_this.debugMode});if(_this.collectionMode){_this.world.setAutoRefigureSizes(false);}_this.world.addItem(tiledImage,{index:queueItem.options.index});if(_this._loadQueue.length===0){//this restores the autoRefigureSizes flag to true.\nrefreshWorld(queueItem);}if(_this.world.getItemCount()===1&&!_this.preserveViewport){_this.viewport.goHome(true);}if(_this.navigator){optionsClone=$.extend({},queueItem.options,{originalTiledImage:tiledImage,tileSource:queueItem.tileSource});_this.navigator.addTiledImage(optionsClone);}if(queueItem.options.success){queueItem.options.success({item:tiledImage});}}},function(event){event.options=options;raiseAddItemFailed(event);});},/**\n     * Add a simple image to the viewer.\n     * The options are the same as the ones in {@link OpenSeadragon.Viewer#addTiledImage}\n     * except for options.tileSource which is replaced by options.url.\n     * @function\n     * @param {Object} options - See {@link OpenSeadragon.Viewer#addTiledImage}\n     * for all the options\n     * @param {String} options.url - The URL of the image to add.\n     * @fires OpenSeadragon.World.event:add-item\n     * @fires OpenSeadragon.Viewer.event:add-item-failed\n     */addSimpleImage:function addSimpleImage(options){$.console.assert(options,"[Viewer.addSimpleImage] options is required");$.console.assert(options.url,"[Viewer.addSimpleImage] options.url is required");var opts=$.extend({},options,{tileSource:{type:\'image\',url:options.url}});delete opts.url;this.addTiledImage(opts);},// deprecated\naddLayer:function addLayer(options){var _this=this;$.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var optionsClone=$.extend({},options,{success:function success(event){_this.raiseEvent("add-layer",{options:options,drawer:event.item});},error:function error(event){_this.raiseEvent("add-layer-failed",event);}});this.addTiledImage(optionsClone);return this;},// deprecated\ngetLayerAtLevel:function getLayerAtLevel(level){$.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead.");return this.world.getItemAt(level);},// deprecated\ngetLevelOfLayer:function getLevelOfLayer(drawer){$.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead.");return this.world.getIndexOfItem(drawer);},// deprecated\ngetLayersCount:function getLayersCount(){$.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead.");return this.world.getItemCount();},// deprecated\nsetLayerLevel:function setLayerLevel(drawer,level){$.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead.");return this.world.setItemIndex(drawer,level);},// deprecated\nremoveLayer:function removeLayer(drawer){$.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead.");return this.world.removeItem(drawer);},/**\n     * Force the viewer to redraw its contents.\n     * @returns {OpenSeadragon.Viewer} Chainable.\n     */forceRedraw:function forceRedraw(){THIS[this.hash].forceRedraw=true;return this;},/**\n     * @function\n     * @return {OpenSeadragon.Viewer} Chainable.\n     */bindSequenceControls:function bindSequenceControls(){//////////////////////////////////////////////////////////////////////////\n// Image Sequence Controls\n//////////////////////////////////////////////////////////////////////////\nvar onFocusHandler=$.delegate(this,onFocus),onBlurHandler=$.delegate(this,onBlur),onNextHandler=$.delegate(this,onNext),onPreviousHandler=$.delegate(this,onPrevious),navImages=this.navImages,useGroup=true;if(this.showSequenceControl){if(this.previousButton||this.nextButton){//if we are binding to custom buttons then layout and\n//grouping is the responsibility of the page author\nuseGroup=false;}this.previousButton=new $.Button({element:this.previousButton?$.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.PreviousPage"),srcRest:resolveUrl(this.prefixUrl,navImages.previous.REST),srcGroup:resolveUrl(this.prefixUrl,navImages.previous.GROUP),srcHover:resolveUrl(this.prefixUrl,navImages.previous.HOVER),srcDown:resolveUrl(this.prefixUrl,navImages.previous.DOWN),onRelease:onPreviousHandler,onFocus:onFocusHandler,onBlur:onBlurHandler});this.nextButton=new $.Button({element:this.nextButton?$.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.NextPage"),srcRest:resolveUrl(this.prefixUrl,navImages.next.REST),srcGroup:resolveUrl(this.prefixUrl,navImages.next.GROUP),srcHover:resolveUrl(this.prefixUrl,navImages.next.HOVER),srcDown:resolveUrl(this.prefixUrl,navImages.next.DOWN),onRelease:onNextHandler,onFocus:onFocusHandler,onBlur:onBlurHandler});if(!this.navPrevNextWrap){this.previousButton.disable();}if(!this.tileSources||!this.tileSources.length){this.nextButton.disable();}if(useGroup){this.paging=new $.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold});this.pagingControl=this.paging.element;if(this.toolbar){this.toolbar.addControl(this.pagingControl,{anchor:$.ControlAnchor.BOTTOM_RIGHT});}else{this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||$.ControlAnchor.TOP_LEFT});}}}return this;},/**\n     * @function\n     * @return {OpenSeadragon.Viewer} Chainable.\n     */bindStandardControls:function bindStandardControls(){//////////////////////////////////////////////////////////////////////////\n// Navigation Controls\n//////////////////////////////////////////////////////////////////////////\nvar beginZoomingInHandler=$.delegate(this,beginZoomingIn),endZoomingHandler=$.delegate(this,endZooming),doSingleZoomInHandler=$.delegate(this,doSingleZoomIn),beginZoomingOutHandler=$.delegate(this,beginZoomingOut),doSingleZoomOutHandler=$.delegate(this,doSingleZoomOut),onHomeHandler=$.delegate(this,onHome),onFullScreenHandler=$.delegate(this,onFullScreen),onRotateLeftHandler=$.delegate(this,onRotateLeft),onRotateRightHandler=$.delegate(this,onRotateRight),onFocusHandler=$.delegate(this,onFocus),onBlurHandler=$.delegate(this,onBlur),navImages=this.navImages,buttons=[],useGroup=true;if(this.showNavigationControl){if(this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton){//if we are binding to custom buttons then layout and\n//grouping is the responsibility of the page author\nuseGroup=false;}if(this.showZoomControl){buttons.push(this.zoomInButton=new $.Button({element:this.zoomInButton?$.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.ZoomIn"),srcRest:resolveUrl(this.prefixUrl,navImages.zoomIn.REST),srcGroup:resolveUrl(this.prefixUrl,navImages.zoomIn.GROUP),srcHover:resolveUrl(this.prefixUrl,navImages.zoomIn.HOVER),srcDown:resolveUrl(this.prefixUrl,navImages.zoomIn.DOWN),onPress:beginZoomingInHandler,onRelease:endZoomingHandler,onClick:doSingleZoomInHandler,onEnter:beginZoomingInHandler,onExit:endZoomingHandler,onFocus:onFocusHandler,onBlur:onBlurHandler}));buttons.push(this.zoomOutButton=new $.Button({element:this.zoomOutButton?$.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.ZoomOut"),srcRest:resolveUrl(this.prefixUrl,navImages.zoomOut.REST),srcGroup:resolveUrl(this.prefixUrl,navImages.zoomOut.GROUP),srcHover:resolveUrl(this.prefixUrl,navImages.zoomOut.HOVER),srcDown:resolveUrl(this.prefixUrl,navImages.zoomOut.DOWN),onPress:beginZoomingOutHandler,onRelease:endZoomingHandler,onClick:doSingleZoomOutHandler,onEnter:beginZoomingOutHandler,onExit:endZoomingHandler,onFocus:onFocusHandler,onBlur:onBlurHandler}));}if(this.showHomeControl){buttons.push(this.homeButton=new $.Button({element:this.homeButton?$.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.Home"),srcRest:resolveUrl(this.prefixUrl,navImages.home.REST),srcGroup:resolveUrl(this.prefixUrl,navImages.home.GROUP),srcHover:resolveUrl(this.prefixUrl,navImages.home.HOVER),srcDown:resolveUrl(this.prefixUrl,navImages.home.DOWN),onRelease:onHomeHandler,onFocus:onFocusHandler,onBlur:onBlurHandler}));}if(this.showFullPageControl){buttons.push(this.fullPageButton=new $.Button({element:this.fullPageButton?$.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.FullPage"),srcRest:resolveUrl(this.prefixUrl,navImages.fullpage.REST),srcGroup:resolveUrl(this.prefixUrl,navImages.fullpage.GROUP),srcHover:resolveUrl(this.prefixUrl,navImages.fullpage.HOVER),srcDown:resolveUrl(this.prefixUrl,navImages.fullpage.DOWN),onRelease:onFullScreenHandler,onFocus:onFocusHandler,onBlur:onBlurHandler}));}if(this.showRotationControl){buttons.push(this.rotateLeftButton=new $.Button({element:this.rotateLeftButton?$.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.RotateLeft"),srcRest:resolveUrl(this.prefixUrl,navImages.rotateleft.REST),srcGroup:resolveUrl(this.prefixUrl,navImages.rotateleft.GROUP),srcHover:resolveUrl(this.prefixUrl,navImages.rotateleft.HOVER),srcDown:resolveUrl(this.prefixUrl,navImages.rotateleft.DOWN),onRelease:onRotateLeftHandler,onFocus:onFocusHandler,onBlur:onBlurHandler}));buttons.push(this.rotateRightButton=new $.Button({element:this.rotateRightButton?$.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:$.getString("Tooltips.RotateRight"),srcRest:resolveUrl(this.prefixUrl,navImages.rotateright.REST),srcGroup:resolveUrl(this.prefixUrl,navImages.rotateright.GROUP),srcHover:resolveUrl(this.prefixUrl,navImages.rotateright.HOVER),srcDown:resolveUrl(this.prefixUrl,navImages.rotateright.DOWN),onRelease:onRotateRightHandler,onFocus:onFocusHandler,onBlur:onBlurHandler}));}if(useGroup){this.buttons=new $.ButtonGroup({buttons:buttons,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold});this.navControl=this.buttons.element;this.addHandler(\'open\',$.delegate(this,lightUp));if(this.toolbar){this.toolbar.addControl(this.navControl,{anchor:$.ControlAnchor.TOP_LEFT});}else{this.addControl(this.navControl,{anchor:this.navigationControlAnchor||$.ControlAnchor.TOP_LEFT});}}}return this;},/**\n     * Gets the active page of a sequence\n     * @function\n     * @return {Number}\n     */currentPage:function currentPage(){return this._sequenceIndex;},/**\n     * @function\n     * @return {OpenSeadragon.Viewer} Chainable.\n     * @fires OpenSeadragon.Viewer.event:page\n     */goToPage:function goToPage(page){if(this.tileSources&&page>=0&&page<this.tileSources.length){/**\n             * Raised when the page is changed on a viewer configured with multiple image sources (see {@link OpenSeadragon.Viewer#goToPage}).\n             *\n             * @event page\n             * @memberof OpenSeadragon.Viewer\n             * @type {Object}\n             * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised the event.\n             * @property {Number} page - The page index.\n             * @property {?Object} userData - Arbitrary subscriber-defined object.\n             */this.raiseEvent(\'page\',{page:page});this._sequenceIndex=page;this._updateSequenceButtons(page);this.open(this.tileSources[page]);if(this.referenceStrip){this.referenceStrip.setFocus(page);}}return this;},/**\n     * Adds an html element as an overlay to the current viewport.  Useful for\n     * highlighting words or areas of interest on an image or other zoomable\n     * interface. The overlays added via this method are removed when the viewport\n     * is closed which include when changing page.\n     * @method\n     * @param {Element|String|Object} element - A reference to an element or an id for\n     *      the element which will be overlayed. Or an Object specifying the configuration for the overlay\n     * @param {OpenSeadragon.Point|OpenSeadragon.Rect} location - The point or\n     *      rectangle which will be overlayed.\n     * @param {OpenSeadragon.OverlayPlacement} placement - The position of the\n     *      viewport which the location coordinates will be treated as relative\n     *      to.\n     * @param {function} onDraw - If supplied the callback is called when the overlay\n     *      needs to be drawn. It it the responsibility of the callback to do any drawing/positioning.\n     *      It is passed position, size and element.\n     * @return {OpenSeadragon.Viewer} Chainable.\n     * @fires OpenSeadragon.Viewer.event:add-overlay\n     */addOverlay:function addOverlay(element,location,placement,onDraw){var options;if($.isPlainObject(element)){options=element;}else{options={element:element,location:location,placement:placement,onDraw:onDraw};}element=$.getElement(options.element);if(getOverlayIndex(this.currentOverlays,element)>=0){// they\'re trying to add a duplicate overlay\nreturn this;}var overlay=getOverlayObject(this,options);this.currentOverlays.push(overlay);overlay.drawHTML(this.overlaysContainer,this.viewport);/**\n         * Raised when an overlay is added to the viewer (see {@link OpenSeadragon.Viewer#addOverlay}).\n         *\n         * @event add-overlay\n         * @memberof OpenSeadragon.Viewer\n         * @type {object}\n         * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised the event.\n         * @property {Element} element - The overlay element.\n         * @property {OpenSeadragon.Point|OpenSeadragon.Rect} location\n         * @property {OpenSeadragon.OverlayPlacement} placement\n         * @property {?Object} userData - Arbitrary subscriber-defined object.\n         */this.raiseEvent(\'add-overlay\',{element:element,location:options.location,placement:options.placement});return this;},/**\n     * Updates the overlay represented by the reference to the element or\n     * element id moving it to the new location, relative to the new placement.\n     * @method\n     * @param {Element|String} element - A reference to an element or an id for\n     *      the element which is overlayed.\n     * @param {OpenSeadragon.Point|OpenSeadragon.Rect} location - The point or\n     *      rectangle which will be overlayed.\n     * @param {OpenSeadragon.OverlayPlacement} placement - The position of the\n     *      viewport which the location coordinates will be treated as relative\n     *      to.\n     * @return {OpenSeadragon.Viewer} Chainable.\n     * @fires OpenSeadragon.Viewer.event:update-overlay\n     */updateOverlay:function updateOverlay(element,location,placement){var i;element=$.getElement(element);i=getOverlayIndex(this.currentOverlays,element);if(i>=0){this.currentOverlays[i].update(location,placement);THIS[this.hash].forceRedraw=true;/**\n             * Raised when an overlay\'s location or placement changes\n             * (see {@link OpenSeadragon.Viewer#updateOverlay}).\n             *\n             * @event update-overlay\n             * @memberof OpenSeadragon.Viewer\n             * @type {object}\n             * @property {OpenSeadragon.Viewer} eventSource - A reference to the\n             * Viewer which raised the event.\n             * @property {Element} element\n             * @property {OpenSeadragon.Point|OpenSeadragon.Rect} location\n             * @property {OpenSeadragon.OverlayPlacement} placement\n             * @property {?Object} userData - Arbitrary subscriber-defined object.\n             */this.raiseEvent(\'update-overlay\',{element:element,location:location,placement:placement});}return this;},/**\n     * Removes an overlay identified by the reference element or element id\n     * and schedules an update.\n     * @method\n     * @param {Element|String} element - A reference to the element or an\n     *      element id which represent the ovelay content to be removed.\n     * @return {OpenSeadragon.Viewer} Chainable.\n     * @fires OpenSeadragon.Viewer.event:remove-overlay\n     */removeOverlay:function removeOverlay(element){var i;element=$.getElement(element);i=getOverlayIndex(this.currentOverlays,element);if(i>=0){this.currentOverlays[i].destroy();this.currentOverlays.splice(i,1);THIS[this.hash].forceRedraw=true;/**\n             * Raised when an overlay is removed from the viewer\n             * (see {@link OpenSeadragon.Viewer#removeOverlay}).\n             *\n             * @event remove-overlay\n             * @memberof OpenSeadragon.Viewer\n             * @type {object}\n             * @property {OpenSeadragon.Viewer} eventSource - A reference to the\n             * Viewer which raised the event.\n             * @property {Element} element - The overlay element.\n             * @property {?Object} userData - Arbitrary subscriber-defined object.\n             */this.raiseEvent(\'remove-overlay\',{element:element});}return this;},/**\n     * Removes all currently configured Overlays from this Viewer and schedules\n     * an update.\n     * @method\n     * @return {OpenSeadragon.Viewer} Chainable.\n     * @fires OpenSeadragon.Viewer.event:clear-overlay\n     */clearOverlays:function clearOverlays(){while(this.currentOverlays.length>0){this.currentOverlays.pop().destroy();}THIS[this.hash].forceRedraw=true;/**\n         * Raised when all overlays are removed from the viewer (see {@link OpenSeadragon.Drawer#clearOverlays}).\n         *\n         * @event clear-overlay\n         * @memberof OpenSeadragon.Viewer\n         * @type {object}\n         * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised the event.\n         * @property {?Object} userData - Arbitrary subscriber-defined object.\n         */this.raiseEvent(\'clear-overlay\',{});return this;},/**\n     * Updates the sequence buttons.\n     * @function OpenSeadragon.Viewer.prototype._updateSequenceButtons\n     * @private\n     * @param {Number} Sequence Value\n     */_updateSequenceButtons:function _updateSequenceButtons(page){if(this.nextButton){if(!this.tileSources||this.tileSources.length-1===page){//Disable next button\nif(!this.navPrevNextWrap){this.nextButton.disable();}}else{this.nextButton.enable();}}if(this.previousButton){if(page>0){//Enable previous button\nthis.previousButton.enable();}else{if(!this.navPrevNextWrap){this.previousButton.disable();}}}},/**\n     * Display a message in the viewport\n     * @function OpenSeadragon.Viewer.prototype._showMessage\n     * @private\n     * @param {String} text message\n     */_showMessage:function _showMessage(message){this._hideMessage();var div=$.makeNeutralElement("div");div.appendChild(document.createTextNode(message));this.messageDiv=$.makeCenteredNode(div);$.addClass(this.messageDiv,"openseadragon-message");this.container.appendChild(this.messageDiv);},/**\n     * Hide any currently displayed viewport message\n     * @function OpenSeadragon.Viewer.prototype._hideMessage\n     * @private\n     */_hideMessage:function _hideMessage(){var div=this.messageDiv;if(div){div.parentNode.removeChild(div);delete this.messageDiv;}},/**\n     * Gets this viewer\'s gesture settings for the given pointer device type.\n     * @method\n     * @param {String} type - The pointer device type to get the gesture settings for ("mouse", "touch", "pen", etc.).\n     * @return {OpenSeadragon.GestureSettings}\n     */gestureSettingsByDeviceType:function gestureSettingsByDeviceType(type){switch(type){case\'mouse\':return this.gestureSettingsMouse;case\'touch\':return this.gestureSettingsTouch;case\'pen\':return this.gestureSettingsPen;default:return this.gestureSettingsUnknown;}},// private\n_drawOverlays:function _drawOverlays(){var i,length=this.currentOverlays.length;for(i=0;i<length;i++){this.currentOverlays[i].drawHTML(this.overlaysContainer,this.viewport);}},/**\n     * Cancel the "in flight" images.\n     */_cancelPendingImages:function _cancelPendingImages(){this._loadQueue=[];}});/**\n * _getSafeElemSize is like getElementSize(), but refuses to return 0 for x or y,\n * which was causing some calling operations to return NaN.\n * @returns {Point}\n * @private\n */function _getSafeElemSize(oElement){oElement=$.getElement(oElement);return new $.Point(oElement.clientWidth===0?1:oElement.clientWidth,oElement.clientHeight===0?1:oElement.clientHeight);}/**\n * @function\n * @private\n */function getTileSourceImplementation(viewer,tileSource,successCallback,failCallback){var _this=viewer;//allow plain xml strings or json strings to be parsed here\nif($.type(tileSource)==\'string\'){if(tileSource.match(/\\s*<.*/)){tileSource=$.parseXml(tileSource);}else if(tileSource.match(/\\s*[\\{\\[].*/)){tileSource=$.parseJSON(tileSource);}}function waitUntilReady(tileSource,originalTileSource){if(tileSource.ready){successCallback(tileSource);}else{tileSource.addHandler(\'ready\',function(){successCallback(tileSource);});tileSource.addHandler(\'open-failed\',function(event){failCallback({message:event.message,source:originalTileSource});});}}setTimeout(function(){if($.type(tileSource)==\'string\'){//If its still a string it means it must be a url at this point\ntileSource=new $.TileSource({url:tileSource,crossOriginPolicy:viewer.crossOriginPolicy,ajaxWithCredentials:viewer.ajaxWithCredentials,useCanvas:viewer.useCanvas,success:function success(event){successCallback(event.tileSource);}});tileSource.addHandler(\'open-failed\',function(event){failCallback(event);});}else if($.isPlainObject(tileSource)||tileSource.nodeType){if(!tileSource.crossOriginPolicy&&viewer.crossOriginPolicy){tileSource.crossOriginPolicy=viewer.crossOriginPolicy;}if(tileSource.ajaxWithCredentials===undefined){tileSource.ajaxWithCredentials=viewer.ajaxWithCredentials;}if(tileSource.useCanvas===undefined){tileSource.useCanvas=viewer.useCanvas;}if($.isFunction(tileSource.getTileUrl)){//Custom tile source\nvar customTileSource=new $.TileSource(tileSource);customTileSource.getTileUrl=tileSource.getTileUrl;successCallback(customTileSource);}else{//inline configuration\nvar $TileSource=$.TileSource.determineType(_this,tileSource);if(!$TileSource){failCallback({message:"Unable to load TileSource",source:tileSource});return;}var options=$TileSource.prototype.configure.apply(_this,[tileSource]);waitUntilReady(new $TileSource(options),tileSource);}}else{//can assume it\'s already a tile source implementation\nwaitUntilReady(tileSource,tileSource);}});}function getOverlayObject(viewer,overlay){if(overlay instanceof $.Overlay){return overlay;}var element=null;if(overlay.element){element=$.getElement(overlay.element);}else{var id=overlay.id?overlay.id:"openseadragon-overlay-"+Math.floor(Math.random()*10000000);element=$.getElement(overlay.id);if(!element){element=document.createElement("a");element.href="#/overlay/"+id;}element.id=id;$.addClass(element,overlay.className?overlay.className:"openseadragon-overlay");}var location=overlay.location;if(!location){if(overlay.width&&overlay.height){location=overlay.px!==undefined?viewer.viewport.imageToViewportRectangle(new $.Rect(overlay.px,overlay.py,overlay.width,overlay.height)):new $.Rect(overlay.x,overlay.y,overlay.width,overlay.height);}else{location=overlay.px!==undefined?viewer.viewport.imageToViewportCoordinates(new $.Point(overlay.px,overlay.py)):new $.Point(overlay.x,overlay.y);}}var placement=overlay.placement;if(placement&&$.type(placement)==="string"){placement=$.OverlayPlacement[overlay.placement.toUpperCase()];}return new $.Overlay({element:element,location:location,placement:placement,onDraw:overlay.onDraw,checkResize:overlay.checkResize});}/**\n * @private\n * @inner\n * Determines the index of the given overlay in the given overlays array.\n */function getOverlayIndex(overlays,element){var i;for(i=overlays.length-1;i>=0;i--){if(overlays[i].element===element){return i;}}return-1;}///////////////////////////////////////////////////////////////////////////////\n// Schedulers provide the general engine for animation\n///////////////////////////////////////////////////////////////////////////////\nfunction scheduleUpdate(viewer,updateFunc){return $.requestAnimationFrame(function(){updateFunc(viewer);});}//provides a sequence in the fade animation\nfunction scheduleControlsFade(viewer){$.requestAnimationFrame(function(){updateControlsFade(viewer);});}//initiates an animation to hide the controls\nfunction beginControlsAutoHide(viewer){if(!viewer.autoHideControls){return;}viewer.controlsShouldFade=true;viewer.controlsFadeBeginTime=$.now()+viewer.controlsFadeDelay;window.setTimeout(function(){scheduleControlsFade(viewer);},viewer.controlsFadeDelay);}//determines if fade animation is done or continues the animation\nfunction updateControlsFade(viewer){var currentTime,deltaTime,opacity,i;if(viewer.controlsShouldFade){currentTime=$.now();deltaTime=currentTime-viewer.controlsFadeBeginTime;opacity=1.0-deltaTime/viewer.controlsFadeLength;opacity=Math.min(1.0,opacity);opacity=Math.max(0.0,opacity);for(i=viewer.controls.length-1;i>=0;i--){if(viewer.controls[i].autoFade){viewer.controls[i].setOpacity(opacity);}}if(opacity>0){// fade again\nscheduleControlsFade(viewer);}}}//stop the fade animation on the controls and show them\nfunction abortControlsAutoHide(viewer){var i;viewer.controlsShouldFade=false;for(i=viewer.controls.length-1;i>=0;i--){viewer.controls[i].setOpacity(1.0);}}///////////////////////////////////////////////////////////////////////////////\n// Default view event handlers.\n///////////////////////////////////////////////////////////////////////////////\nfunction onFocus(){abortControlsAutoHide(this);}function onBlur(){beginControlsAutoHide(this);}function onCanvasKeyDown(event){if(!event.preventDefaultAction&&!event.ctrl&&!event.alt&&!event.meta){switch(event.keyCode){case 38://up arrow\nif(event.shift){this.viewport.zoomBy(1.1);}else{this.viewport.panBy(this.viewport.deltaPointsFromPixels(new $.Point(0,-40)));}this.viewport.applyConstraints();return false;case 40://down arrow\nif(event.shift){this.viewport.zoomBy(0.9);}else{this.viewport.panBy(this.viewport.deltaPointsFromPixels(new $.Point(0,40)));}this.viewport.applyConstraints();return false;case 37://left arrow\nthis.viewport.panBy(this.viewport.deltaPointsFromPixels(new $.Point(-40,0)));this.viewport.applyConstraints();return false;case 39://right arrow\nthis.viewport.panBy(this.viewport.deltaPointsFromPixels(new $.Point(40,0)));this.viewport.applyConstraints();return false;default://console.log( \'navigator keycode %s\', event.keyCode );\nreturn true;}}else{return true;}}function onCanvasKeyPress(event){if(!event.preventDefaultAction&&!event.ctrl&&!event.alt&&!event.meta){switch(event.keyCode){case 43://=|+\ncase 61://=|+\nthis.viewport.zoomBy(1.1);this.viewport.applyConstraints();return false;case 45://-|_\nthis.viewport.zoomBy(0.9);this.viewport.applyConstraints();return false;case 48://0|)\nthis.viewport.goHome();this.viewport.applyConstraints();return false;case 119://w\ncase 87://W\nif(event.shift){this.viewport.zoomBy(1.1);}else{this.viewport.panBy(this.viewport.deltaPointsFromPixels(new $.Point(0,-40)));}this.viewport.applyConstraints();return false;case 115://s\ncase 83://S\nif(event.shift){this.viewport.zoomBy(0.9);}else{this.viewport.panBy(this.viewport.deltaPointsFromPixels(new $.Point(0,40)));}this.viewport.applyConstraints();return false;case 97://a\nthis.viewport.panBy(this.viewport.deltaPointsFromPixels(new $.Point(-40,0)));this.viewport.applyConstraints();return false;case 100://d\nthis.viewport.panBy(this.viewport.deltaPointsFromPixels(new $.Point(40,0)));this.viewport.applyConstraints();return false;default://console.log( \'navigator keycode %s\', event.keyCode );\nreturn true;}}else{return true;}}function onCanvasClick(event){var gestureSettings;var haveKeyboardFocus=document.activeElement==this.canvas;// If we don\'t have keyboard focus, request it.\nif(!haveKeyboardFocus){this.canvas.focus();}if(!event.preventDefaultAction&&this.viewport&&event.quick){gestureSettings=this.gestureSettingsByDeviceType(event.pointerType);if(gestureSettings.clickToZoom){this.viewport.zoomBy(event.shift?1.0/this.zoomPerClick:this.zoomPerClick,this.viewport.pointFromPixel(event.position,true));this.viewport.applyConstraints();}}/**\n     * Raised when a mouse press/release or touch/remove occurs on the {@link OpenSeadragon.Viewer#canvas} element.\n     *\n     * @event canvas-click\n     * @memberof OpenSeadragon.Viewer\n     * @type {object}\n     * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n     * @property {OpenSeadragon.MouseTracker} tracker - A reference to the MouseTracker which originated this event.\n     * @property {OpenSeadragon.Point} position - The position of the event relative to the tracked element.\n     * @property {Boolean} quick - True only if the clickDistThreshold and clickTimeThreshold are both passed. Useful for differentiating between clicks and drags.\n     * @property {Boolean} shift - True if the shift key was pressed during this event.\n     * @property {Object} originalEvent - The original DOM event.\n     * @property {?Object} userData - Arbitrary subscriber-defined object.\n     */this.raiseEvent(\'canvas-click\',{tracker:event.eventSource,position:event.position,quick:event.quick,shift:event.shift,originalEvent:event.originalEvent});}function onCanvasDblClick(event){var gestureSettings;if(!event.preventDefaultAction&&this.viewport){gestureSettings=this.gestureSettingsByDeviceType(event.pointerType);if(gestureSettings.dblClickToZoom){this.viewport.zoomBy(event.shift?1.0/this.zoomPerClick:this.zoomPerClick,this.viewport.pointFromPixel(event.position,true));this.viewport.applyConstraints();}}/**\n     * Raised when a double mouse press/release or touch/remove occurs on the {@link OpenSeadragon.Viewer#canvas} element.\n     *\n     * @event canvas-double-click\n     * @memberof OpenSeadragon.Viewer\n     * @type {object}\n     * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n     * @property {OpenSeadragon.MouseTracker} tracker - A reference to the MouseTracker which originated this event.\n     * @property {OpenSeadragon.Point} position - The position of the event relative to the tracked element.\n     * @property {Boolean} shift - True if the shift key was pressed during this event.\n     * @property {Object} originalEvent - The original DOM event.\n     * @property {?Object} userData - Arbitrary subscriber-defined object.\n     */this.raiseEvent(\'canvas-double-click\',{tracker:event.eventSource,position:event.position,shift:event.shift,originalEvent:event.originalEvent});}function onCanvasDrag(event){var gestureSettings;if(!event.preventDefaultAction&&this.viewport){gestureSettings=this.gestureSettingsByDeviceType(event.pointerType);if(!this.panHorizontal){event.delta.x=0;}if(!this.panVertical){event.delta.y=0;}this.viewport.panBy(this.viewport.deltaPointsFromPixels(event.delta.negate()),gestureSettings.flickEnabled);if(this.constrainDuringPan){this.viewport.applyConstraints();}}/**\n     * Raised when a mouse or touch drag operation occurs on the {@link OpenSeadragon.Viewer#canvas} element.\n     *\n     * @event canvas-drag\n     * @memberof OpenSeadragon.Viewer\n     * @type {object}\n     * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n     * @property {OpenSeadragon.MouseTracker} tracker - A reference to the MouseTracker which originated this event.\n     * @property {OpenSeadragon.Point} position - The position of the event relative to the tracked element.\n     * @property {OpenSeadragon.Point} delta - The x,y components of the difference between start drag and end drag.\n     * @property {Number} speed - Current computed speed, in pixels per second.\n     * @property {Number} direction - Current computed direction, expressed as an angle counterclockwise relative to the positive X axis (-pi to pi, in radians). Only valid if speed > 0.\n     * @property {Boolean} shift - True if the shift key was pressed during this event.\n     * @property {Object} originalEvent - The original DOM event.\n     * @property {?Object} userData - Arbitrary subscriber-defined object.\n     */this.raiseEvent(\'canvas-drag\',{tracker:event.eventSource,position:event.position,delta:event.delta,speed:event.speed,direction:event.direction,shift:event.shift,originalEvent:event.originalEvent});}function onCanvasDragEnd(event){var gestureSettings;if(!event.preventDefaultAction&&this.viewport){gestureSettings=this.gestureSettingsByDeviceType(event.pointerType);if(gestureSettings.flickEnabled&&event.speed>=gestureSettings.flickMinSpeed){var amplitudeX=gestureSettings.flickMomentum*(event.speed*Math.cos(event.direction-Math.PI/180*this.viewport.degrees)),amplitudeY=gestureSettings.flickMomentum*(event.speed*Math.sin(event.direction-Math.PI/180*this.viewport.degrees)),center=this.viewport.pixelFromPoint(this.viewport.getCenter(true)),target=this.viewport.pointFromPixel(new $.Point(center.x-amplitudeX,center.y-amplitudeY));if(!this.panHorizontal){target.x=center.x;}if(!this.panVertical){target.y=center.y;}this.viewport.panTo(target,false);}this.viewport.applyConstraints();}/**\n     * Raised when a mouse or touch drag operation ends on the {@link OpenSeadragon.Viewer#canvas} element.\n     *\n     * @event canvas-drag-end\n     * @memberof OpenSeadragon.Viewer\n     * @type {object}\n     * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n     * @property {OpenSeadragon.MouseTracker} tracker - A reference to the MouseTracker which originated this event.\n     * @property {OpenSeadragon.Point} position - The position of the event relative to the tracked element.\n     * @property {Number} speed - Speed at the end of a drag gesture, in pixels per second.\n     * @property {Number} direction - Direction at the end of a drag gesture, expressed as an angle counterclockwise relative to the positive X axis (-pi to pi, in radians). Only valid if speed > 0.\n     * @property {Boolean} shift - True if the shift key was pressed during this event.\n     * @property {Object} originalEvent - The original DOM event.\n     * @property {?Object} userData - Arbitrary subscriber-defined object.\n     */this.raiseEvent(\'canvas-drag-end\',{tracker:event.eventSource,position:event.position,speed:event.speed,direction:event.direction,shift:event.shift,originalEvent:event.originalEvent});}function onCanvasEnter(event){/**\n     * Raised when a pointer enters the {@link OpenSeadragon.Viewer#canvas} element.\n     *\n     * @event canvas-enter\n     * @memberof OpenSeadragon.Viewer\n     * @type {object}\n     * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n     * @property {OpenSeadragon.MouseTracker} tracker - A reference to the MouseTracker which originated this event.\n     * @property {String} pointerType - "mouse", "touch", "pen", etc.\n     * @property {OpenSeadragon.Point} position - The position of the event relative to the tracked element.\n     * @property {Number} buttons - Current buttons pressed. A combination of bit flags 0: none, 1: primary (or touch contact), 2: secondary, 4: aux (often middle), 8: X1 (often back), 16: X2 (often forward), 32: pen eraser.\n     * @property {Number} pointers - Number of pointers (all types) active in the tracked element.\n     * @property {Boolean} insideElementPressed - True if the left mouse button is currently being pressed and was initiated inside the tracked element, otherwise false.\n     * @property {Boolean} buttonDownAny - Was the button down anywhere in the screen during the event. <span style="color:red;">Deprecated. Use buttons instead.</span>\n     * @property {Object} originalEvent - The original DOM event.\n     * @property {?Object} userData - Arbitrary subscriber-defined object.\n     */this.raiseEvent(\'canvas-enter\',{tracker:event.eventSource,pointerType:event.pointerType,position:event.position,buttons:event.buttons,pointers:event.pointers,insideElementPressed:event.insideElementPressed,buttonDownAny:event.buttonDownAny,originalEvent:event.originalEvent});}function onCanvasExit(event){/**\n     * Raised when a pointer leaves the {@link OpenSeadragon.Viewer#canvas} element.\n     *\n     * @event canvas-exit\n     * @memberof OpenSeadragon.Viewer\n     * @type {object}\n     * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n     * @property {OpenSeadragon.MouseTracker} tracker - A reference to the MouseTracker which originated this event.\n     * @property {String} pointerType - "mouse", "touch", "pen", etc.\n     * @property {OpenSeadragon.Point} position - The position of the event relative to the tracked element.\n     * @property {Number} buttons - Current buttons pressed. A combination of bit flags 0: none, 1: primary (or touch contact), 2: secondary, 4: aux (often middle), 8: X1 (often back), 16: X2 (often forward), 32: pen eraser.\n     * @property {Number} pointers - Number of pointers (all types) active in the tracked element.\n     * @property {Boolean} insideElementPressed - True if the left mouse button is currently being pressed and was initiated inside the tracked element, otherwise false.\n     * @property {Boolean} buttonDownAny - Was the button down anywhere in the screen during the event. <span style="color:red;">Deprecated. Use buttons instead.</span>\n     * @property {Object} originalEvent - The original DOM event.\n     * @property {?Object} userData - Arbitrary subscriber-defined object.\n     */this.raiseEvent(\'canvas-exit\',{tracker:event.eventSource,pointerType:event.pointerType,position:event.position,buttons:event.buttons,pointers:event.pointers,insideElementPressed:event.insideElementPressed,buttonDownAny:event.buttonDownAny,originalEvent:event.originalEvent});}function onCanvasPress(event){/**\n     * Raised when the primary mouse button is pressed or touch starts on the {@link OpenSeadragon.Viewer#canvas} element.\n     *\n     * @event canvas-press\n     * @memberof OpenSeadragon.Viewer\n     * @type {object}\n     * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n     * @property {OpenSeadragon.MouseTracker} tracker - A reference to the MouseTracker which originated this event.\n     * @property {String} pointerType - "mouse", "touch", "pen", etc.\n     * @property {OpenSeadragon.Point} position - The position of the event relative to the tracked element.\n     * @property {Boolean} insideElementPressed - True if the left mouse button is currently being pressed and was initiated inside the tracked element, otherwise false.\n     * @property {Boolean} insideElementReleased - True if the cursor still inside the tracked element when the button was released.\n     * @property {Object} originalEvent - The original DOM event.\n     * @property {?Object} userData - Arbitrary subscriber-defined object.\n     */this.raiseEvent(\'canvas-press\',{tracker:event.eventSource,pointerType:event.pointerType,position:event.position,insideElementPressed:event.insideElementPressed,insideElementReleased:event.insideElementReleased,originalEvent:event.originalEvent});}function onCanvasRelease(event){/**\n     * Raised when the primary mouse button is released or touch ends on the {@link OpenSeadragon.Viewer#canvas} element.\n     *\n     * @event canvas-release\n     * @memberof OpenSeadragon.Viewer\n     * @type {object}\n     * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n     * @property {OpenSeadragon.MouseTracker} tracker - A reference to the MouseTracker which originated this event.\n     * @property {String} pointerType - "mouse", "touch", "pen", etc.\n     * @property {OpenSeadragon.Point} position - The position of the event relative to the tracked element.\n     * @property {Boolean} insideElementPressed - True if the left mouse button is currently being pressed and was initiated inside the tracked element, otherwise false.\n     * @property {Boolean} insideElementReleased - True if the cursor still inside the tracked element when the button was released.\n     * @property {Object} originalEvent - The original DOM event.\n     * @property {?Object} userData - Arbitrary subscriber-defined object.\n     */this.raiseEvent(\'canvas-release\',{tracker:event.eventSource,pointerType:event.pointerType,position:event.position,insideElementPressed:event.insideElementPressed,insideElementReleased:event.insideElementReleased,originalEvent:event.originalEvent});}function onCanvasNonPrimaryPress(event){/**\n     * Raised when any non-primary pointer button is pressed on the {@link OpenSeadragon.Viewer#canvas} element.\n     *\n     * @event canvas-nonprimary-press\n     * @memberof OpenSeadragon.Viewer\n     * @type {object}\n     * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n     * @property {OpenSeadragon.MouseTracker} tracker - A reference to the MouseTracker which originated this event.\n     * @property {OpenSeadragon.Point} position - The position of the event relative to the tracked element.\n     * @property {String} pointerType - "mouse", "touch", "pen", etc.\n     * @property {Number} button - Button which caused the event.\n     *      -1: none, 0: primary/left, 1: aux/middle, 2: secondary/right, 3: X1/back, 4: X2/forward, 5: pen eraser.\n     * @property {Number} buttons - Current buttons pressed.\n     *      Combination of bit flags 0: none, 1: primary (or touch contact), 2: secondary, 4: aux (often middle), 8: X1 (often back), 16: X2 (often forward), 32: pen eraser.\n     * @property {Object} originalEvent - The original DOM event.\n     * @property {?Object} userData - Arbitrary subscriber-defined object.\n     */this.raiseEvent(\'canvas-nonprimary-press\',{tracker:event.eventSource,position:event.position,pointerType:event.pointerType,button:event.button,buttons:event.buttons,originalEvent:event.originalEvent});}function onCanvasNonPrimaryRelease(event){/**\n     * Raised when any non-primary pointer button is released on the {@link OpenSeadragon.Viewer#canvas} element.\n     *\n     * @event canvas-nonprimary-release\n     * @memberof OpenSeadragon.Viewer\n     * @type {object}\n     * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n     * @property {OpenSeadragon.MouseTracker} tracker - A reference to the MouseTracker which originated this event.\n     * @property {OpenSeadragon.Point} position - The position of the event relative to the tracked element.\n     * @property {String} pointerType - "mouse", "touch", "pen", etc.\n     * @property {Number} button - Button which caused the event.\n     *      -1: none, 0: primary/left, 1: aux/middle, 2: secondary/right, 3: X1/back, 4: X2/forward, 5: pen eraser.\n     * @property {Number} buttons - Current buttons pressed.\n     *      Combination of bit flags 0: none, 1: primary (or touch contact), 2: secondary, 4: aux (often middle), 8: X1 (often back), 16: X2 (often forward), 32: pen eraser.\n     * @property {Object} originalEvent - The original DOM event.\n     * @property {?Object} userData - Arbitrary subscriber-defined object.\n     */this.raiseEvent(\'canvas-nonprimary-release\',{tracker:event.eventSource,position:event.position,pointerType:event.pointerType,button:event.button,buttons:event.buttons,originalEvent:event.originalEvent});}function onCanvasPinch(event){var gestureSettings,centerPt,lastCenterPt,panByPt;if(!event.preventDefaultAction&&this.viewport){gestureSettings=this.gestureSettingsByDeviceType(event.pointerType);if(gestureSettings.pinchToZoom){centerPt=this.viewport.pointFromPixel(event.center,true);lastCenterPt=this.viewport.pointFromPixel(event.lastCenter,true);panByPt=lastCenterPt.minus(centerPt);if(!this.panHorizontal){panByPt.x=0;}if(!this.panVertical){panByPt.y=0;}this.viewport.zoomBy(event.distance/event.lastDistance,centerPt,true);this.viewport.panBy(panByPt,true);this.viewport.applyConstraints();}if(gestureSettings.pinchRotate){// Pinch rotate\nvar angle1=Math.atan2(event.gesturePoints[0].currentPos.y-event.gesturePoints[1].currentPos.y,event.gesturePoints[0].currentPos.x-event.gesturePoints[1].currentPos.x);var angle2=Math.atan2(event.gesturePoints[0].lastPos.y-event.gesturePoints[1].lastPos.y,event.gesturePoints[0].lastPos.x-event.gesturePoints[1].lastPos.x);this.viewport.setRotation(this.viewport.getRotation()+(angle1-angle2)*(180/Math.PI));}}/**\n     * Raised when a pinch event occurs on the {@link OpenSeadragon.Viewer#canvas} element.\n     *\n     * @event canvas-pinch\n     * @memberof OpenSeadragon.Viewer\n     * @type {object}\n     * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n     * @property {OpenSeadragon.MouseTracker} tracker - A reference to the MouseTracker which originated this event.\n     * @property {Array.<OpenSeadragon.MouseTracker.GesturePoint>} gesturePoints - Gesture points associated with the gesture. Velocity data can be found here.\n     * @property {OpenSeadragon.Point} lastCenter - The previous center point of the two pinch contact points relative to the tracked element.\n     * @property {OpenSeadragon.Point} center - The center point of the two pinch contact points relative to the tracked element.\n     * @property {Number} lastDistance - The previous distance between the two pinch contact points in CSS pixels.\n     * @property {Number} distance - The distance between the two pinch contact points in CSS pixels.\n     * @property {Boolean} shift - True if the shift key was pressed during this event.\n     * @property {Object} originalEvent - The original DOM event.\n     * @property {?Object} userData - Arbitrary subscriber-defined object.\n     */this.raiseEvent(\'canvas-pinch\',{tracker:event.eventSource,gesturePoints:event.gesturePoints,lastCenter:event.lastCenter,center:event.center,lastDistance:event.lastDistance,distance:event.distance,shift:event.shift,originalEvent:event.originalEvent});//cancels event\nreturn false;}function onCanvasScroll(event){var gestureSettings,factor,thisScrollTime,deltaScrollTime;/* Certain scroll devices fire the scroll event way too fast so we are injecting a simple adjustment to keep things\n     * partially normalized. If we have already fired an event within the last \'minScrollDelta\' milliseconds we skip\n     * this one and wait for the next event. */thisScrollTime=$.now();deltaScrollTime=thisScrollTime-this._lastScrollTime;if(deltaScrollTime>this.minScrollDeltaTime){this._lastScrollTime=thisScrollTime;if(!event.preventDefaultAction&&this.viewport){gestureSettings=this.gestureSettingsByDeviceType(event.pointerType);if(gestureSettings.scrollToZoom){factor=Math.pow(this.zoomPerScroll,event.scroll);this.viewport.zoomBy(factor,this.viewport.pointFromPixel(event.position,true));this.viewport.applyConstraints();}}/**\n         * Raised when a scroll event occurs on the {@link OpenSeadragon.Viewer#canvas} element (mouse wheel).\n         *\n         * @event canvas-scroll\n         * @memberof OpenSeadragon.Viewer\n         * @type {object}\n         * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n         * @property {OpenSeadragon.MouseTracker} tracker - A reference to the MouseTracker which originated this event.\n         * @property {OpenSeadragon.Point} position - The position of the event relative to the tracked element.\n         * @property {Number} scroll - The scroll delta for the event.\n         * @property {Boolean} shift - True if the shift key was pressed during this event.\n         * @property {Object} originalEvent - The original DOM event.\n         * @property {?Object} userData - Arbitrary subscriber-defined object.\n         */this.raiseEvent(\'canvas-scroll\',{tracker:event.eventSource,position:event.position,scroll:event.scroll,shift:event.shift,originalEvent:event.originalEvent});if(gestureSettings&&gestureSettings.scrollToZoom){//cancels event\nreturn false;}}else{return false;// We are swallowing this event\n}}function onContainerEnter(event){THIS[this.hash].mouseInside=true;abortControlsAutoHide(this);/**\n     * Raised when the cursor enters the {@link OpenSeadragon.Viewer#container} element.\n     *\n     * @event container-enter\n     * @memberof OpenSeadragon.Viewer\n     * @type {object}\n     * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n     * @property {OpenSeadragon.MouseTracker} tracker - A reference to the MouseTracker which originated this event.\n     * @property {OpenSeadragon.Point} position - The position of the event relative to the tracked element.\n     * @property {Number} buttons - Current buttons pressed. A combination of bit flags 0: none, 1: primary (or touch contact), 2: secondary, 4: aux (often middle), 8: X1 (often back), 16: X2 (often forward), 32: pen eraser.\n     * @property {Number} pointers - Number of pointers (all types) active in the tracked element.\n     * @property {Boolean} insideElementPressed - True if the left mouse button is currently being pressed and was initiated inside the tracked element, otherwise false.\n     * @property {Boolean} buttonDownAny - Was the button down anywhere in the screen during the event. <span style="color:red;">Deprecated. Use buttons instead.</span>\n     * @property {Object} originalEvent - The original DOM event.\n     * @property {?Object} userData - Arbitrary subscriber-defined object.\n     */this.raiseEvent(\'container-enter\',{tracker:event.eventSource,position:event.position,buttons:event.buttons,pointers:event.pointers,insideElementPressed:event.insideElementPressed,buttonDownAny:event.buttonDownAny,originalEvent:event.originalEvent});}function onContainerExit(event){if(event.pointers<1){THIS[this.hash].mouseInside=false;if(!THIS[this.hash].animating){beginControlsAutoHide(this);}}/**\n     * Raised when the cursor leaves the {@link OpenSeadragon.Viewer#container} element.\n     *\n     * @event container-exit\n     * @memberof OpenSeadragon.Viewer\n     * @type {object}\n     * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n     * @property {OpenSeadragon.MouseTracker} tracker - A reference to the MouseTracker which originated this event.\n     * @property {OpenSeadragon.Point} position - The position of the event relative to the tracked element.\n     * @property {Number} buttons - Current buttons pressed. A combination of bit flags 0: none, 1: primary (or touch contact), 2: secondary, 4: aux (often middle), 8: X1 (often back), 16: X2 (often forward), 32: pen eraser.\n     * @property {Number} pointers - Number of pointers (all types) active in the tracked element.\n     * @property {Boolean} insideElementPressed - True if the left mouse button is currently being pressed and was initiated inside the tracked element, otherwise false.\n     * @property {Boolean} buttonDownAny - Was the button down anywhere in the screen during the event. <span style="color:red;">Deprecated. Use buttons instead.</span>\n     * @property {Object} originalEvent - The original DOM event.\n     * @property {?Object} userData - Arbitrary subscriber-defined object.\n     */this.raiseEvent(\'container-exit\',{tracker:event.eventSource,position:event.position,buttons:event.buttons,pointers:event.pointers,insideElementPressed:event.insideElementPressed,buttonDownAny:event.buttonDownAny,originalEvent:event.originalEvent});}///////////////////////////////////////////////////////////////////////////////\n// Page update routines ( aka Views - for future reference )\n///////////////////////////////////////////////////////////////////////////////\nfunction updateMulti(viewer){updateOnce(viewer);// Request the next frame, unless we\'ve been closed\nif(viewer.isOpen()){viewer._updateRequestId=scheduleUpdate(viewer,updateMulti);}else{viewer._updateRequestId=false;}}function updateOnce(viewer){//viewer.profiler.beginUpdate();\nif(viewer._opening){return;}var containerSize;if(viewer.autoResize){containerSize=_getSafeElemSize(viewer.container);if(!containerSize.equals(THIS[viewer.hash].prevContainerSize)){if(viewer.preserveImageSizeOnResize){var prevContainerSize=THIS[viewer.hash].prevContainerSize;var bounds=viewer.viewport.getBounds(true);var deltaX=containerSize.x-prevContainerSize.x;var deltaY=containerSize.y-prevContainerSize.y;var viewportDiff=viewer.viewport.deltaPointsFromPixels(new OpenSeadragon.Point(deltaX,deltaY),true);viewer.viewport.resize(new OpenSeadragon.Point(containerSize.x,containerSize.y),false);// Keep the center of the image in the center and just adjust the amount of image shown\nbounds.width+=viewportDiff.x;bounds.height+=viewportDiff.y;bounds.x-=viewportDiff.x/2;bounds.y-=viewportDiff.y/2;viewer.viewport.fitBoundsWithConstraints(bounds,true);}else{// maintain image position\nvar oldBounds=viewer.viewport.getBounds();var oldCenter=viewer.viewport.getCenter();resizeViewportAndRecenter(viewer,containerSize,oldBounds,oldCenter);}THIS[viewer.hash].prevContainerSize=containerSize;THIS[viewer.hash].forceRedraw=true;}}var viewportChange=viewer.viewport.update();var animated=viewer.world.update()||viewportChange;if(viewportChange){/**\n         * Raised when any spring animation update occurs (zoom, pan, etc.),\n         * before the viewer has drawn the new location.\n         *\n         * @event viewport-change\n         * @memberof OpenSeadragon.Viewer\n         * @type {object}\n         * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n         * @property {?Object} userData - Arbitrary subscriber-defined object.\n         */viewer.raiseEvent(\'viewport-change\');}if(viewer.referenceStrip){animated=viewer.referenceStrip.update(viewer.viewport)||animated;}if(!THIS[viewer.hash].animating&&animated){/**\n         * Raised when any spring animation starts (zoom, pan, etc.).\n         *\n         * @event animation-start\n         * @memberof OpenSeadragon.Viewer\n         * @type {object}\n         * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n         * @property {?Object} userData - Arbitrary subscriber-defined object.\n         */viewer.raiseEvent("animation-start");abortControlsAutoHide(viewer);}if(animated||THIS[viewer.hash].forceRedraw||viewer.world.needsDraw()){drawWorld(viewer);viewer._drawOverlays();if(viewer.navigator){viewer.navigator.update(viewer.viewport);}THIS[viewer.hash].forceRedraw=false;if(animated){/**\n             * Raised when any spring animation update occurs (zoom, pan, etc.),\n             * after the viewer has drawn the new location.\n             *\n             * @event animation\n             * @memberof OpenSeadragon.Viewer\n             * @type {object}\n             * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n             * @property {?Object} userData - Arbitrary subscriber-defined object.\n             */viewer.raiseEvent("animation");}}if(THIS[viewer.hash].animating&&!animated){/**\n         * Raised when any spring animation ends (zoom, pan, etc.).\n         *\n         * @event animation-finish\n         * @memberof OpenSeadragon.Viewer\n         * @type {object}\n         * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n         * @property {?Object} userData - Arbitrary subscriber-defined object.\n         */viewer.raiseEvent("animation-finish");if(!THIS[viewer.hash].mouseInside){beginControlsAutoHide(viewer);}}THIS[viewer.hash].animating=animated;//viewer.profiler.endUpdate();\n}// This function resizes the viewport and recenters the image\n// as it was before resizing.\n// TODO: better adjust width and height. The new width and height\n// should depend on the image dimensions and on the dimensions\n// of the viewport before and after switching mode.\nfunction resizeViewportAndRecenter(viewer,containerSize,oldBounds,oldCenter){var viewport=viewer.viewport;viewport.resize(containerSize,true);var newBounds=new $.Rect(oldCenter.x-oldBounds.width/2.0,oldCenter.y-oldBounds.height/2.0,oldBounds.width,oldBounds.height);// let the viewport decide if the bounds are too big or too small\nviewport.fitBoundsWithConstraints(newBounds,true);}function drawWorld(viewer){viewer.imageLoader.clear();viewer.drawer.clear();viewer.world.draw();/**\n     * <em>- Needs documentation -</em>\n     *\n     * @event update-viewport\n     * @memberof OpenSeadragon.Viewer\n     * @type {object}\n     * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised the event.\n     * @property {?Object} userData - Arbitrary subscriber-defined object.\n     */viewer.raiseEvent(\'update-viewport\',{});}///////////////////////////////////////////////////////////////////////////////\n// Navigation Controls\n///////////////////////////////////////////////////////////////////////////////\nfunction resolveUrl(prefix,url){return prefix?prefix+url:url;}function beginZoomingIn(){THIS[this.hash].lastZoomTime=$.now();THIS[this.hash].zoomFactor=this.zoomPerSecond;THIS[this.hash].zooming=true;scheduleZoom(this);}function beginZoomingOut(){THIS[this.hash].lastZoomTime=$.now();THIS[this.hash].zoomFactor=1.0/this.zoomPerSecond;THIS[this.hash].zooming=true;scheduleZoom(this);}function endZooming(){THIS[this.hash].zooming=false;}function scheduleZoom(viewer){$.requestAnimationFrame($.delegate(viewer,doZoom));}function doZoom(){var currentTime,deltaTime,adjustedFactor;if(THIS[this.hash].zooming&&this.viewport){currentTime=$.now();deltaTime=currentTime-THIS[this.hash].lastZoomTime;adjustedFactor=Math.pow(THIS[this.hash].zoomFactor,deltaTime/1000);this.viewport.zoomBy(adjustedFactor);this.viewport.applyConstraints();THIS[this.hash].lastZoomTime=currentTime;scheduleZoom(this);}}function doSingleZoomIn(){if(this.viewport){THIS[this.hash].zooming=false;this.viewport.zoomBy(this.zoomPerClick/1.0);this.viewport.applyConstraints();}}function doSingleZoomOut(){if(this.viewport){THIS[this.hash].zooming=false;this.viewport.zoomBy(1.0/this.zoomPerClick);this.viewport.applyConstraints();}}function lightUp(){this.buttons.emulateEnter();this.buttons.emulateExit();}function onHome(){if(this.viewport){this.viewport.goHome();}}function onFullScreen(){if(this.isFullPage()&&!$.isFullScreen()){// Is fullPage but not fullScreen\nthis.setFullPage(false);}else{this.setFullScreen(!this.isFullPage());}// correct for no mouseout event on change\nif(this.buttons){this.buttons.emulateExit();}this.fullPageButton.element.focus();if(this.viewport){this.viewport.applyConstraints();}}/**\n * Note: The current rotation feature is limited to 90 degree turns.\n */function onRotateLeft(){if(this.viewport){var currRotation=this.viewport.getRotation();if(currRotation===0){currRotation=270;}else{currRotation-=90;}this.viewport.setRotation(currRotation);}}/**\n * Note: The current rotation feature is limited to 90 degree turns.\n */function onRotateRight(){if(this.viewport){var currRotation=this.viewport.getRotation();if(currRotation===270){currRotation=0;}else{currRotation+=90;}this.viewport.setRotation(currRotation);}}function onPrevious(){var previous=this._sequenceIndex-1;if(this.navPrevNextWrap&&previous<0){previous+=this.tileSources.length;}this.goToPage(previous);}function onNext(){var next=this._sequenceIndex+1;if(this.navPrevNextWrap&&next>=this.tileSources.length){next=0;}this.goToPage(next);}})(OpenSeadragon);/*\n * OpenSeadragon - Navigator\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n * @class Navigator\n * @classdesc The Navigator provides a small view of the current image as fixed\n * while representing the viewport as a moving box serving as a frame\n * of reference in the larger viewport as to which portion of the image\n * is currently being examined.  The navigator\'s viewport can be interacted\n * with using the keyboard or the mouse.\n *\n * @memberof OpenSeadragon\n * @extends OpenSeadragon.Viewer\n * @extends OpenSeadragon.EventSource\n * @param {Object} options\n */$.Navigator=function(options){var viewer=options.viewer,_this=this,viewerSize,navigatorSize;//We may need to create a new element and id if they did not\n//provide the id for the existing element\nif(!options.id){options.id=\'navigator-\'+$.now();this.element=$.makeNeutralElement("div");options.controlOptions={anchor:$.ControlAnchor.TOP_RIGHT,attachToViewer:true,autoFade:true};if(options.position){if(\'BOTTOM_RIGHT\'==options.position){options.controlOptions.anchor=$.ControlAnchor.BOTTOM_RIGHT;}else if(\'BOTTOM_LEFT\'==options.position){options.controlOptions.anchor=$.ControlAnchor.BOTTOM_LEFT;}else if(\'TOP_RIGHT\'==options.position){options.controlOptions.anchor=$.ControlAnchor.TOP_RIGHT;}else if(\'TOP_LEFT\'==options.position){options.controlOptions.anchor=$.ControlAnchor.TOP_LEFT;}else if(\'ABSOLUTE\'==options.position){options.controlOptions.anchor=$.ControlAnchor.ABSOLUTE;options.controlOptions.top=options.top;options.controlOptions.left=options.left;options.controlOptions.height=options.height;options.controlOptions.width=options.width;}}}else{this.element=document.getElementById(options.id);options.controlOptions={anchor:$.ControlAnchor.NONE,attachToViewer:false,autoFade:false};}this.element.id=options.id;this.element.className+=\' navigator\';options=$.extend(true,{sizeRatio:$.DEFAULT_SETTINGS.navigatorSizeRatio},options,{element:this.element,tabIndex:-1,// No keyboard navigation, omit from tab order\n//These need to be overridden to prevent recursion since\n//the navigator is a viewer and a viewer has a navigator\nshowNavigator:false,mouseNavEnabled:false,showNavigationControl:false,showSequenceControl:false,immediateRender:true,blendTime:0,animationTime:0,autoResize:options.autoResize,// prevent resizing the navigator from adding unwanted space around the image\nminZoomImageRatio:1.0});options.minPixelRatio=this.minPixelRatio=viewer.minPixelRatio;$.setElementTouchActionNone(this.element);this.borderWidth=2;//At some browser magnification levels the display regions lines up correctly, but at some there appears to\n//be a one pixel gap.\nthis.fudge=new $.Point(1,1);this.totalBorderWidths=new $.Point(this.borderWidth*2,this.borderWidth*2).minus(this.fudge);if(options.controlOptions.anchor!=$.ControlAnchor.NONE){(function(style,borderWidth){style.margin=\'0px\';style.border=borderWidth+\'px solid #555\';style.padding=\'0px\';style.background=\'#000\';style.opacity=0.8;style.overflow=\'hidden\';})(this.element.style,this.borderWidth);}this.displayRegion=$.makeNeutralElement("div");this.displayRegion.id=this.element.id+\'-displayregion\';this.displayRegion.className=\'displayregion\';(function(style,borderWidth){style.position=\'relative\';style.top=\'0px\';style.left=\'0px\';style.fontSize=\'0px\';style.overflow=\'hidden\';style.border=borderWidth+\'px solid #900\';style.margin=\'0px\';style.padding=\'0px\';//TODO: IE doesnt like this property being set\n//try{ style.outline  = \'2px auto #909\'; }catch(e){/*ignore*/}\nstyle.background=\'transparent\';// We use square bracket notation on the statement below, because float is a keyword.\n// This is important for the Google Closure compiler, if nothing else.\n/*jshint sub:true */style[\'float\']=\'left\';//Webkit\nstyle.cssFloat=\'left\';//Firefox\nstyle.styleFloat=\'left\';//IE\nstyle.zIndex=999999999;style.cursor=\'default\';})(this.displayRegion.style,this.borderWidth);this.displayRegionContainer=$.makeNeutralElement("div");this.displayRegionContainer.id=this.element.id+\'-displayregioncontainer\';this.displayRegionContainer.className="displayregioncontainer";this.displayRegionContainer.style.width="100%";this.displayRegionContainer.style.height="100%";viewer.addControl(this.element,options.controlOptions);this._resizeWithViewer=options.controlOptions.anchor!=$.ControlAnchor.ABSOLUTE&&options.controlOptions.anchor!=$.ControlAnchor.NONE;if(this._resizeWithViewer){if(options.width&&options.height){this.element.style.height=typeof options.height=="number"?options.height+\'px\':options.height;this.element.style.width=typeof options.width=="number"?options.width+\'px\':options.width;}else{viewerSize=$.getElementSize(viewer.element);this.element.style.height=Math.round(viewerSize.y*options.sizeRatio)+\'px\';this.element.style.width=Math.round(viewerSize.x*options.sizeRatio)+\'px\';this.oldViewerSize=viewerSize;}navigatorSize=$.getElementSize(this.element);this.elementArea=navigatorSize.x*navigatorSize.y;}this.oldContainerSize=new $.Point(0,0);$.Viewer.apply(this,[options]);this.displayRegionContainer.appendChild(this.displayRegion);this.element.getElementsByTagName(\'div\')[0].appendChild(this.displayRegionContainer);if(options.navigatorRotate){options.viewer.addHandler("rotate",function(args){_setTransformRotate(_this.displayRegionContainer,args.degrees);_setTransformRotate(_this.displayRegion,-args.degrees);_this.viewport.setRotation(args.degrees);});}// Remove the base class\' (Viewer\'s) innerTracker and replace it with our own\nthis.innerTracker.destroy();this.innerTracker=new $.MouseTracker({element:this.element,dragHandler:$.delegate(this,onCanvasDrag),clickHandler:$.delegate(this,onCanvasClick),releaseHandler:$.delegate(this,onCanvasRelease),scrollHandler:$.delegate(this,onCanvasScroll)});this.addHandler("reset-size",function(){if(_this.viewport){_this.viewport.goHome(true);}});viewer.world.addHandler("item-index-change",function(event){var item=_this.world.getItemAt(event.previousIndex);_this.world.setItemIndex(item,event.newIndex);});viewer.world.addHandler("remove-item",function(event){var theirItem=event.item;var myItem=_this._getMatchingItem(theirItem);if(myItem){_this.world.removeItem(myItem);}});this.update(viewer.viewport);};$.extend($.Navigator.prototype,$.EventSource.prototype,$.Viewer.prototype,/** @lends OpenSeadragon.Navigator.prototype */{/**\n     * Used to notify the navigator when its size has changed.\n     * Especially useful when {@link OpenSeadragon.Options}.navigatorAutoResize is set to false and the navigator is resizable.\n     * @function\n     */updateSize:function updateSize(){if(this.viewport){var containerSize=new $.Point(this.container.clientWidth===0?1:this.container.clientWidth,this.container.clientHeight===0?1:this.container.clientHeight);if(!containerSize.equals(this.oldContainerSize)){this.viewport.resize(containerSize,true);this.viewport.goHome(true);this.oldContainerSize=containerSize;this.drawer.clear();this.world.draw();}}},/**\n     * Used to update the navigator minimap\'s viewport rectangle when a change in the viewer\'s viewport occurs.\n     * @function\n     * @param {OpenSeadragon.Viewport} The viewport this navigator is tracking.\n     */update:function update(viewport){var viewerSize,newWidth,newHeight,bounds,topleft,bottomright;viewerSize=$.getElementSize(this.viewer.element);if(this._resizeWithViewer&&viewerSize.x&&viewerSize.y&&!viewerSize.equals(this.oldViewerSize)){this.oldViewerSize=viewerSize;if(this.maintainSizeRatio||!this.elementArea){newWidth=viewerSize.x*this.sizeRatio;newHeight=viewerSize.y*this.sizeRatio;}else{newWidth=Math.sqrt(this.elementArea*(viewerSize.x/viewerSize.y));newHeight=this.elementArea/newWidth;}this.element.style.width=Math.round(newWidth)+\'px\';this.element.style.height=Math.round(newHeight)+\'px\';if(!this.elementArea){this.elementArea=newWidth*newHeight;}this.updateSize();}if(viewport&&this.viewport){bounds=viewport.getBounds(true);topleft=this.viewport.pixelFromPointNoRotate(bounds.getTopLeft(),false);bottomright=this.viewport.pixelFromPointNoRotate(bounds.getBottomRight(),false).minus(this.totalBorderWidths);//update style for navigator-box\nvar style=this.displayRegion.style;style.display=this.world.getItemCount()?\'block\':\'none\';style.top=Math.round(topleft.y)+\'px\';style.left=Math.round(topleft.x)+\'px\';var width=Math.abs(topleft.x-bottomright.x);var height=Math.abs(topleft.y-bottomright.y);// make sure width and height are non-negative so IE doesn\'t throw\nstyle.width=Math.round(Math.max(width,0))+\'px\';style.height=Math.round(Math.max(height,0))+\'px\';}},// overrides Viewer.addTiledImage\naddTiledImage:function addTiledImage(options){var _this=this;var original=options.originalTiledImage;delete options.original;var optionsClone=$.extend({},options,{success:function success(event){var myItem=event.item;myItem._originalForNavigator=original;_this._matchBounds(myItem,original,true);original.addHandler(\'bounds-change\',function(){_this._matchBounds(myItem,original);});}});return $.Viewer.prototype.addTiledImage.apply(this,[optionsClone]);},// private\n_getMatchingItem:function _getMatchingItem(theirItem){var count=this.world.getItemCount();var item;for(var i=0;i<count;i++){item=this.world.getItemAt(i);if(item._originalForNavigator===theirItem){return item;}}return null;},// private\n_matchBounds:function _matchBounds(myItem,theirItem,immediately){var bounds=theirItem.getBounds();myItem.setPosition(bounds.getTopLeft(),immediately);myItem.setWidth(bounds.width,immediately);}});/**\n * @private\n * @inner\n * @function\n */function onCanvasClick(event){if(event.quick&&this.viewer.viewport){this.viewer.viewport.panTo(this.viewport.pointFromPixel(event.position));this.viewer.viewport.applyConstraints();}}/**\n * @private\n * @inner\n * @function\n */function onCanvasDrag(event){if(this.viewer.viewport){if(!this.panHorizontal){event.delta.x=0;}if(!this.panVertical){event.delta.y=0;}this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(event.delta));}}/**\n * @private\n * @inner\n * @function\n */function onCanvasRelease(event){if(event.insideElementPressed&&this.viewer.viewport){this.viewer.viewport.applyConstraints();}}/**\n * @private\n * @inner\n * @function\n */function onCanvasScroll(event){/**\n     * Raised when a scroll event occurs on the {@link OpenSeadragon.Viewer#navigator} element (mouse wheel, touch pinch, etc.).\n     *\n     * @event navigator-scroll\n     * @memberof OpenSeadragon.Viewer\n     * @type {object}\n     * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n     * @property {OpenSeadragon.MouseTracker} tracker - A reference to the MouseTracker which originated this event.\n     * @property {OpenSeadragon.Point} position - The position of the event relative to the tracked element.\n     * @property {Number} scroll - The scroll delta for the event.\n     * @property {Boolean} shift - True if the shift key was pressed during this event.\n     * @property {Object} originalEvent - The original DOM event.\n     * @property {?Object} userData - Arbitrary subscriber-defined object.\n     */this.viewer.raiseEvent(\'navigator-scroll\',{tracker:event.eventSource,position:event.position,scroll:event.scroll,shift:event.shift,originalEvent:event.originalEvent});//dont scroll the page up and down if the user is scrolling\n//in the navigator\nreturn false;}/**\n    * @function\n    * @private\n    * @param {Object} element\n    * @param {Number} degrees\n    */function _setTransformRotate(element,degrees){element.style.webkitTransform="rotate("+degrees+"deg)";element.style.mozTransform="rotate("+degrees+"deg)";element.style.msTransform="rotate("+degrees+"deg)";element.style.oTransform="rotate("+degrees+"deg)";element.style.transform="rotate("+degrees+"deg)";}})(OpenSeadragon);/*\n * OpenSeadragon - getString/setString\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){//TODO: I guess this is where the i18n needs to be reimplemented.  I\'ll look\n//      into existing patterns for i18n in javascript but i think that mimicking\n//      pythons gettext might be a reasonable approach.\nvar I18N={Errors:{Dzc:"Sorry, we don\'t support Deep Zoom Collections!",Dzi:"Hmm, this doesn\'t appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn\'t appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don\'t support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from "+"loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right"}};$.extend($,/** @lends OpenSeadragon */{/**\n     * @function\n     * @param {String} property\n     */getString:function getString(prop){var props=prop.split(\'.\'),string=null,args=arguments,container=I18N,i;for(i=0;i<props.length-1;i++){// in case not a subproperty\ncontainer=container[props[i]]||{};}string=container[props[i]];if(typeof string!="string"){$.console.debug("Untranslated source string:",prop);string="";// FIXME: this breaks gettext()-style convention, which would return source\n}return string.replace(/\\{\\d+\\}/g,function(capture){var i=parseInt(capture.match(/\\d+/),10)+1;return i<args.length?args[i]:"";});},/**\n     * @function\n     * @param {String} property\n     * @param {*} value\n     */setString:function setString(prop,value){var props=prop.split(\'.\'),container=I18N,i;for(i=0;i<props.length-1;i++){if(!container[props[i]]){container[props[i]]={};}container=container[props[i]];}container[props[i]]=value;}});})(OpenSeadragon);/*\n * OpenSeadragon - Point\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n * @class Point\n * @classdesc A Point is really used as a 2-dimensional vector, equally useful for\n * representing a point on a plane, or the height and width of a plane\n * not requiring any other frame of reference.\n *\n * @memberof OpenSeadragon\n * @param {Number} [x] The vector component \'x\'. Defaults to the origin at 0.\n * @param {Number} [y] The vector component \'y\'. Defaults to the origin at 0.\n */$.Point=function(x,y){/**\n     * The vector component \'x\'.\n     * @member {Number} x\n     * @memberof OpenSeadragon.Point#\n     */this.x=typeof x=="number"?x:0;/**\n     * The vector component \'y\'.\n     * @member {Number} y\n     * @memberof OpenSeadragon.Point#\n     */this.y=typeof y=="number"?y:0;};/** @lends OpenSeadragon.Point.prototype */$.Point.prototype={/**\n     * @function\n     * @returns {OpenSeadragon.Point} a duplicate of this Point\n     */clone:function clone(){return new $.Point(this.x,this.y);},/**\n     * Add another Point to this point and return a new Point.\n     * @function\n     * @param {OpenSeadragon.Point} point The point to add vector components.\n     * @returns {OpenSeadragon.Point} A new point representing the sum of the\n     *  vector components\n     */plus:function plus(point){return new $.Point(this.x+point.x,this.y+point.y);},/**\n     * Substract another Point to this point and return a new Point.\n     * @function\n     * @param {OpenSeadragon.Point} point The point to substract vector components.\n     * @returns {OpenSeadragon.Point} A new point representing the substraction of the\n     *  vector components\n     */minus:function minus(point){return new $.Point(this.x-point.x,this.y-point.y);},/**\n     * Multiply this point by a factor and return a new Point.\n     * @function\n     * @param {Number} factor The factor to multiply vector components.\n     * @returns {OpenSeadragon.Point} A new point representing the multiplication\n     *  of the vector components by the factor\n     */times:function times(factor){return new $.Point(this.x*factor,this.y*factor);},/**\n     * Divide this point by a factor and return a new Point.\n     * @function\n     * @param {Number} factor The factor to divide vector components.\n     * @returns {OpenSeadragon.Point} A new point representing the division of the\n     *  vector components by the factor\n     */divide:function divide(factor){return new $.Point(this.x/factor,this.y/factor);},/**\n     * Compute the opposite of this point and return a new Point.\n     * @function\n     * @returns {OpenSeadragon.Point} A new point representing the opposite of the\n     *  vector components\n     */negate:function negate(){return new $.Point(-this.x,-this.y);},/**\n     * Compute the distance between this point and another point.\n     * @function\n     * @param {OpenSeadragon.Point} point The point to compute the distance with.\n     * @returns {Number} The distance between the 2 points\n     */distanceTo:function distanceTo(point){return Math.sqrt(Math.pow(this.x-point.x,2)+Math.pow(this.y-point.y,2));},/**\n     * Apply a function to each coordinate of this point and return a new point.\n     * @function\n     * @param {function} func The function to apply to each coordinate.\n     * @returns {OpenSeadragon.Point} A new point with the coordinates computed\n     * by the specified function\n     */apply:function apply(func){return new $.Point(func(this.x),func(this.y));},/**\n     * Check if this point is equal to another one.\n     * @function\n     * @param {OpenSeadragon.Point} point The point to compare this point with.\n     * @returns {Boolean} true if they are equal, false otherwise.\n     */equals:function equals(point){return point instanceof $.Point&&this.x===point.x&&this.y===point.y;},/**\n     * Rotates the point around the specified pivot\n     * From http://stackoverflow.com/questions/4465931/rotate-rectangle-around-a-point\n     * @function\n     * @param {Number} degress to rotate around the pivot.\n     * @param {OpenSeadragon.Point} [pivot=(0,0)] Point around which to rotate.\n     * Defaults to the origin.\n     * @returns {OpenSeadragon.Point}. A new point representing the point rotated around the specified pivot\n     */rotate:function rotate(degrees,pivot){pivot=pivot||new $.Point(0,0);var cos;var sin;// Avoid float computations when possible\nif(degrees%90===0){var d=degrees%360;if(d<0){d+=360;}switch(d){case 0:cos=1;sin=0;break;case 90:cos=0;sin=1;break;case 180:cos=-1;sin=0;break;case 270:cos=0;sin=-1;break;}}else{var angle=degrees*Math.PI/180.0;cos=Math.cos(angle);sin=Math.sin(angle);}var x=cos*(this.x-pivot.x)-sin*(this.y-pivot.y)+pivot.x;var y=sin*(this.x-pivot.x)+cos*(this.y-pivot.y)+pivot.y;return new $.Point(x,y);},/**\n     * Convert this point to a string in the format (x,y) where x and y are\n     * rounded to the nearest integer.\n     * @function\n     * @returns {String} A string representation of this point.\n     */toString:function toString(){return"("+Math.round(this.x*100)/100+","+Math.round(this.y*100)/100+")";}};})(OpenSeadragon);/*\n * OpenSeadragon - TileSource\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n * @class TileSource\n * @classdesc The TileSource contains the most basic implementation required to create a\n * smooth transition between layers in an image pyramid. It has only a single key\n * interface that must be implemented to complete its key functionality:\n * \'getTileUrl\'.  It also has several optional interfaces that can be\n * implemented if a new TileSource wishes to support configuration via a simple\n * object or array (\'configure\') and if the tile source supports or requires\n * configuration via retrieval of a document on the network ala AJAX or JSONP,\n * (\'getImageInfo\').\n * <br/>\n * By default the image pyramid is split into N layers where the image\'s longest\n * side in M (in pixels), where N is the smallest integer which satisfies\n *      <strong>2^(N+1) >= M</strong>.\n *\n * @memberof OpenSeadragon\n * @extends OpenSeadragon.EventSource\n * @param {Object} options\n *      You can either specify a URL, or literally define the TileSource (by specifying\n *      width, height, tileSize, tileOverlap, minLevel, and maxLevel). For the former,\n *      the extending class is expected to implement \'getImageInfo\' and \'configure\'.\n *      For the latter, the construction is assumed to occur through\n *      the extending classes implementation of \'configure\'.\n * @param {String} [options.url]\n *      The URL for the data necessary for this TileSource.\n * @param {Function} [options.success]\n *      A function to be called upon successful creation.\n * @param {Boolean} [options.ajaxWithCredentials]\n *      If this TileSource needs to make an AJAX call, this specifies whether to set\n *      the XHR\'s withCredentials (for accessing secure data).\n * @param {Number} [options.width]\n *      Width of the source image at max resolution in pixels.\n * @param {Number} [options.height]\n *      Height of the source image at max resolution in pixels.\n * @param {Number} [options.tileSize]\n *      The size of the tiles to assumed to make up each pyramid layer in pixels.\n *      Tile size determines the point at which the image pyramid must be\n *      divided into a matrix of smaller images.\n *      Use options.tileWidth and options.tileHeight to support non-square tiles.\n * @param {Number} [options.tileWidth]\n *      The width of the tiles to assumed to make up each pyramid layer in pixels.\n * @param {Number} [options.tileHeight]\n *      The height of the tiles to assumed to make up each pyramid layer in pixels.\n * @param {Number} [options.tileOverlap]\n *      The number of pixels each tile is expected to overlap touching tiles.\n * @param {Number} [options.minLevel]\n *      The minimum level to attempt to load.\n * @param {Number} [options.maxLevel]\n *      The maximum level to attempt to load.\n */$.TileSource=function(width,height,tileSize,tileOverlap,minLevel,maxLevel){var _this=this;var args=arguments,options,i;if($.isPlainObject(width)){options=width;}else{options={width:args[0],height:args[1],tileSize:args[2],tileOverlap:args[3],minLevel:args[4],maxLevel:args[5]};}//Tile sources supply some events, namely \'ready\' when they must be configured\n//by asynchronously fetching their configuration data.\n$.EventSource.call(this);//we allow options to override anything we dont treat as\n//required via idiomatic options or which is functionally\n//set depending on the state of the readiness of this tile\n//source\n$.extend(true,this,options);if(!this.success){//Any functions that are passed as arguments are bound to the ready callback\nfor(i=0;i<arguments.length;i++){if($.isFunction(arguments[i])){this.success=arguments[i];//only one callback per constructor\nbreak;}}}if(this.success){this.addHandler(\'ready\',function(event){_this.success(event);});}/**\n     * Ratio of width to height\n     * @member {Number} aspectRatio\n     * @memberof OpenSeadragon.TileSource#\n     *//**\n     * Vector storing x and y dimensions ( width and height respectively ).\n     * @member {OpenSeadragon.Point} dimensions\n     * @memberof OpenSeadragon.TileSource#\n     *//**\n     * The overlap in pixels each tile shares with its adjacent neighbors.\n     * @member {Number} tileOverlap\n     * @memberof OpenSeadragon.TileSource#\n     *//**\n     * The minimum pyramid level this tile source supports or should attempt to load.\n     * @member {Number} minLevel\n     * @memberof OpenSeadragon.TileSource#\n     *//**\n     * The maximum pyramid level this tile source supports or should attempt to load.\n     * @member {Number} maxLevel\n     * @memberof OpenSeadragon.TileSource#\n     *//**\n     *\n     * @member {Boolean} ready\n     * @memberof OpenSeadragon.TileSource#\n     */if(\'string\'==$.type(arguments[0])){this.url=arguments[0];}if(this.url){//in case the getImageInfo method is overriden and/or implies an\n//async mechanism set some safe defaults first\nthis.aspectRatio=1;this.dimensions=new $.Point(10,10);this._tileWidth=0;this._tileHeight=0;this.tileOverlap=0;this.minLevel=0;this.maxLevel=0;this.ready=false;//configuration via url implies the extending class\n//implements and \'configure\'\nthis.getImageInfo(this.url);}else{//explicit configuration via positional args in constructor\n//or the more idiomatic \'options\' object\nthis.ready=true;this.aspectRatio=options.width&&options.height?options.width/options.height:1;this.dimensions=new $.Point(options.width,options.height);if(this.tileSize){this._tileWidth=this._tileHeight=this.tileSize;delete this.tileSize;}else{if(this.tileWidth){// We were passed tileWidth in options, but we want to rename it\n// with a leading underscore to make clear that it is not safe to directly modify it\nthis._tileWidth=this.tileWidth;delete this.tileWidth;}else{this._tileWidth=0;}if(this.tileHeight){// See note above about renaming this.tileWidth\nthis._tileHeight=this.tileHeight;delete this.tileHeight;}else{this._tileHeight=0;}}this.tileOverlap=options.tileOverlap?options.tileOverlap:0;this.minLevel=options.minLevel?options.minLevel:0;this.maxLevel=undefined!==options.maxLevel&&null!==options.maxLevel?options.maxLevel:options.width&&options.height?Math.ceil(Math.log(Math.max(options.width,options.height))/Math.log(2)):0;if(this.success&&$.isFunction(this.success)){this.success(this);}}};/** @lends OpenSeadragon.TileSource.prototype */$.TileSource.prototype={getTileSize:function getTileSize(level){$.console.error("[TileSource.getTileSize] is deprecated."+"Use TileSource.getTileWidth() and TileSource.getTileHeight() instead");return this._tileWidth;},/**\n     * Return the tileWidth for a given level.\n     * Subclasses should override this if tileWidth can be different at different levels\n     *   such as in IIIFTileSource.  Code should use this function rather than reading\n     *   from ._tileWidth directly.\n     * @function\n     * @param {Number} level\n     */getTileWidth:function getTileWidth(level){if(!this._tileWidth){return this.getTileSize(level);}return this._tileWidth;},/**\n     * Return the tileHeight for a given level.\n     * Subclasses should override this if tileHeight can be different at different levels\n     *   such as in IIIFTileSource.  Code should use this function rather than reading\n     *   from ._tileHeight directly.\n     * @function\n     * @param {Number} level\n     */getTileHeight:function getTileHeight(level){if(!this._tileHeight){return this.getTileSize(level);}return this._tileHeight;},/**\n     * @function\n     * @param {Number} level\n     */getLevelScale:function getLevelScale(level){// see https://github.com/openseadragon/openseadragon/issues/22\n// we use the tilesources implementation of getLevelScale to generate\n// a memoized re-implementation\nvar levelScaleCache={},i;for(i=0;i<=this.maxLevel;i++){levelScaleCache[i]=1/Math.pow(2,this.maxLevel-i);}this.getLevelScale=function(_level){return levelScaleCache[_level];};return this.getLevelScale(level);},/**\n     * @function\n     * @param {Number} level\n     */getNumTiles:function getNumTiles(level){var scale=this.getLevelScale(level),x=Math.ceil(scale*this.dimensions.x/this.getTileWidth(level)),y=Math.ceil(scale*this.dimensions.y/this.getTileHeight(level));return new $.Point(x,y);},/**\n     * @function\n     * @param {Number} level\n     */getPixelRatio:function getPixelRatio(level){var imageSizeScaled=this.dimensions.times(this.getLevelScale(level)),rx=1.0/imageSizeScaled.x,ry=1.0/imageSizeScaled.y;return new $.Point(rx,ry);},/**\n     * @function\n     * @param {Number} level\n     */getClosestLevel:function getClosestLevel(rect){var i,tilesPerSide,tiles;for(i=this.minLevel;i<this.maxLevel;i++){tiles=this.getNumTiles(i);tilesPerSide=new $.Point(Math.floor(rect.x/this.getTileWidth(i)),Math.floor(rect.y/this.getTileHeight(i)));if(tiles.x+1>=tilesPerSide.x&&tiles.y+1>=tilesPerSide.y){break;}}return Math.max(0,i-1);},/**\n     * @function\n     * @param {Number} level\n     * @param {OpenSeadragon.Point} point\n     */getTileAtPoint:function getTileAtPoint(level,point){var pixel=point.times(this.dimensions.x).times(this.getLevelScale(level)),tx=Math.floor(pixel.x/this.getTileWidth(level)),ty=Math.floor(pixel.y/this.getTileHeight(level));return new $.Point(tx,ty);},/**\n     * @function\n     * @param {Number} level\n     * @param {Number} x\n     * @param {Number} y\n     */getTileBounds:function getTileBounds(level,x,y){var dimensionsScaled=this.dimensions.times(this.getLevelScale(level)),tileWidth=this.getTileWidth(level),tileHeight=this.getTileHeight(level),px=x===0?0:tileWidth*x-this.tileOverlap,py=y===0?0:tileHeight*y-this.tileOverlap,sx=tileWidth+(x===0?1:2)*this.tileOverlap,sy=tileHeight+(y===0?1:2)*this.tileOverlap,scale=1.0/dimensionsScaled.x;sx=Math.min(sx,dimensionsScaled.x-px);sy=Math.min(sy,dimensionsScaled.y-py);return new $.Rect(px*scale,py*scale,sx*scale,sy*scale);},/**\n     * Responsible for retrieving, and caching the\n     * image metadata pertinent to this TileSources implementation.\n     * @function\n     * @param {String} url\n     * @throws {Error}\n     */getImageInfo:function getImageInfo(url){var _this=this,callbackName,callback,readySource,options,urlParts,filename,lastDot;if(url){urlParts=url.split(\'/\');filename=urlParts[urlParts.length-1];lastDot=filename.lastIndexOf(\'.\');if(lastDot>-1){urlParts[urlParts.length-1]=filename.slice(0,lastDot);}}callback=function callback(data){if(typeof data==="string"){data=$.parseXml(data);}var $TileSource=$.TileSource.determineType(_this,data,url);if(!$TileSource){/**\n                 * Raised when an error occurs loading a TileSource.\n                 *\n                 * @event open-failed\n                 * @memberof OpenSeadragon.TileSource\n                 * @type {object}\n                 * @property {OpenSeadragon.TileSource} eventSource - A reference to the TileSource which raised the event.\n                 * @property {String} message\n                 * @property {String} source\n                 * @property {?Object} userData - Arbitrary subscriber-defined object.\n                 */_this.raiseEvent(\'open-failed\',{message:"Unable to load TileSource",source:url});return;}options=$TileSource.prototype.configure.apply(_this,[data,url]);if(options.ajaxWithCredentials===undefined){options.ajaxWithCredentials=_this.ajaxWithCredentials;}readySource=new $TileSource(options);_this.ready=true;/**\n             * Raised when a TileSource is opened and initialized.\n             *\n             * @event ready\n             * @memberof OpenSeadragon.TileSource\n             * @type {object}\n             * @property {OpenSeadragon.TileSource} eventSource - A reference to the TileSource which raised the event.\n             * @property {Object} tileSource\n             * @property {?Object} userData - Arbitrary subscriber-defined object.\n             */_this.raiseEvent(\'ready\',{tileSource:readySource});};if(url.match(/\\.js$/)){//TODO: Its not very flexible to require tile sources to end jsonp\n//      request for info  with a url that ends with \'.js\' but for\n//      now it\'s the only way I see to distinguish uniformly.\ncallbackName=url.split(\'/\').pop().replace(\'.js\',\'\');$.jsonp({url:url,async:false,callbackName:callbackName,callback:callback});}else{// request info via xhr asynchronously.\n$.makeAjaxRequest({url:url,withCredentials:this.ajaxWithCredentials,success:function success(xhr){var data=processResponse(xhr);callback(data);},error:function error(xhr,exc){var msg;/*\n                        IE < 10 will block XHR requests to different origins. Any property access on the request\n                        object will raise an exception which we\'ll attempt to handle by formatting the original\n                        exception rather than the second one raised when we try to access xhr.status\n                     */try{msg="HTTP "+xhr.status+" attempting to load TileSource";}catch(e){var formattedExc;if(typeof exc=="undefined"||!exc.toString){formattedExc="Unknown error";}else{formattedExc=exc.toString();}msg=formattedExc+" attempting to load TileSource";}/***\n                     * Raised when an error occurs loading a TileSource.\n                     *\n                     * @event open-failed\n                     * @memberof OpenSeadragon.TileSource\n                     * @type {object}\n                     * @property {OpenSeadragon.TileSource} eventSource - A reference to the TileSource which raised the event.\n                     * @property {String} message\n                     * @property {String} source\n                     * @property {?Object} userData - Arbitrary subscriber-defined object.\n                     */_this.raiseEvent(\'open-failed\',{message:msg,source:url});}});}},/**\n     * Responsible determining if a the particular TileSource supports the\n     * data format ( and allowed to apply logic against the url the data was\n     * loaded from, if any ). Overriding implementations are expected to do\n     * something smart with data and / or url to determine support.  Also\n     * understand that iteration order of TileSources is not guarunteed so\n     * please make sure your data or url is expressive enough to ensure a simple\n     * and sufficient mechanisim for clear determination.\n     * @function\n     * @param {String|Object|Array|Document} data\n     * @param {String} url - the url the data was loaded\n     *      from if any.\n     * @return {Boolean}\n     */supports:function supports(data,url){return false;},/**\n     * Responsible for parsing and configuring the\n     * image metadata pertinent to this TileSources implementation.\n     * This method is not implemented by this class other than to throw an Error\n     * announcing you have to implement it.  Because of the variety of tile\n     * server technologies, and various specifications for building image\n     * pyramids, this method is here to allow easy integration.\n     * @function\n     * @param {String|Object|Array|Document} data\n     * @param {String} url - the url the data was loaded\n     *      from if any.\n     * @return {Object} options - A dictionary of keyword arguments sufficient\n     *      to configure this tile sources constructor.\n     * @throws {Error}\n     */configure:function configure(data,url){throw new Error("Method not implemented.");},/**\n     * Responsible for retriving the url which will return an image for the\n     * region speified by the given x, y, and level components.\n     * This method is not implemented by this class other than to throw an Error\n     * announcing you have to implement it.  Because of the variety of tile\n     * server technologies, and various specifications for building image\n     * pyramids, this method is here to allow easy integration.\n     * @function\n     * @param {Number} level\n     * @param {Number} x\n     * @param {Number} y\n     * @throws {Error}\n     */getTileUrl:function getTileUrl(level,x,y){throw new Error("Method not implemented.");},/**\n     * @function\n     * @param {Number} level\n     * @param {Number} x\n     * @param {Number} y\n     */tileExists:function tileExists(level,x,y){var numTiles=this.getNumTiles(level);return level>=this.minLevel&&level<=this.maxLevel&&x>=0&&y>=0&&x<numTiles.x&&y<numTiles.y;}};$.extend(true,$.TileSource.prototype,$.EventSource.prototype);/**\n * Decides whether to try to process the response as xml, json, or hand back\n * the text\n * @private\n * @inner\n * @function\n * @param {XMLHttpRequest} xhr - the completed network request\n */function processResponse(xhr){var responseText=xhr.responseText,status=xhr.status,statusText,data;if(!xhr){throw new Error($.getString("Errors.Security"));}else if(xhr.status!==200&&xhr.status!==0){status=xhr.status;statusText=status==404?"Not Found":xhr.statusText;throw new Error($.getString("Errors.Status",status,statusText));}if(responseText.match(/\\s*<.*/)){try{data=xhr.responseXML&&xhr.responseXML.documentElement?xhr.responseXML:$.parseXml(responseText);}catch(e){data=xhr.responseText;}}else if(responseText.match(/\\s*[\\{\\[].*/)){data=$.parseJSON(responseText);}else{data=responseText;}return data;}/**\n * Determines the TileSource Implementation by introspection of OpenSeadragon\n * namespace, calling each TileSource implementation of \'isType\'\n * @private\n * @inner\n * @function\n * @param {Object|Array|Document} data - the tile source configuration object\n * @param {String} url - the url where the tile source configuration object was\n *      loaded from, if any.\n */$.TileSource.determineType=function(tileSource,data,url){var property;for(property in OpenSeadragon){if(property.match(/.+TileSource$/)&&$.isFunction(OpenSeadragon[property])&&$.isFunction(OpenSeadragon[property].prototype.supports)&&OpenSeadragon[property].prototype.supports.call(tileSource,data,url)){return OpenSeadragon[property];}}$.console.error("No TileSource was able to open %s %s",url,data);};})(OpenSeadragon);/*\n * OpenSeadragon - DziTileSource\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n * @class DziTileSource\n * @memberof OpenSeadragon\n * @extends OpenSeadragon.TileSource\n * @param {Number|Object} width - the pixel width of the image or the idiomatic\n *      options object which is used instead of positional arguments.\n * @param {Number} height\n * @param {Number} tileSize\n * @param {Number} tileOverlap\n * @param {String} tilesUrl\n * @param {String} fileFormat\n * @param {OpenSeadragon.DisplayRect[]} displayRects\n * @property {String} tilesUrl\n * @property {String} fileFormat\n * @property {OpenSeadragon.DisplayRect[]} displayRects\n */$.DziTileSource=function(width,height,tileSize,tileOverlap,tilesUrl,fileFormat,displayRects,minLevel,maxLevel){var i,rect,level,options;if($.isPlainObject(width)){options=width;}else{options={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]};}this._levelRects={};this.tilesUrl=options.tilesUrl;this.fileFormat=options.fileFormat;this.displayRects=options.displayRects;if(this.displayRects){for(i=this.displayRects.length-1;i>=0;i--){rect=this.displayRects[i];for(level=rect.minLevel;level<=rect.maxLevel;level++){if(!this._levelRects[level]){this._levelRects[level]=[];}this._levelRects[level].push(rect);}}}$.TileSource.apply(this,[options]);};$.extend($.DziTileSource.prototype,$.TileSource.prototype,/** @lends OpenSeadragon.DziTileSource.prototype */{/**\n     * Determine if the data and/or url imply the image service is supported by\n     * this tile source.\n     * @function\n     * @param {Object|Array} data\n     * @param {String} optional - url\n     */supports:function supports(data,url){var ns;if(data.Image){ns=data.Image.xmlns;}else if(data.documentElement){if("Image"==data.documentElement.localName||"Image"==data.documentElement.tagName){ns=data.documentElement.namespaceURI;}}return"http://schemas.microsoft.com/deepzoom/2008"==ns||"http://schemas.microsoft.com/deepzoom/2009"==ns;},/**\n     *\n     * @function\n     * @param {Object|XMLDocument} data - the raw configuration\n     * @param {String} url - the url the data was retreived from if any.\n     * @return {Object} options - A dictionary of keyword arguments sufficient\n     *      to configure this tile sources constructor.\n     */configure:function configure(data,url){var options;if(!$.isPlainObject(data)){options=configureFromXML(this,data);}else{options=configureFromObject(this,data);}if(url&&!options.tilesUrl){options.tilesUrl=url.replace(/([^\\/]+?)(\\.(dzi|xml|js))?\\/?(\\?.*)?$/,\'$1_files/\');if(url.search(/\\.(dzi|xml|js)\\?/)!=-1){options.queryParams=url.match(/\\?.*/);}else{options.queryParams=\'\';}}return options;},/**\n     * @function\n     * @param {Number} level\n     * @param {Number} x\n     * @param {Number} y\n     */getTileUrl:function getTileUrl(level,x,y){return[this.tilesUrl,level,\'/\',x,\'_\',y,\'.\',this.fileFormat,this.queryParams].join(\'\');},/**\n     * @function\n     * @param {Number} level\n     * @param {Number} x\n     * @param {Number} y\n     */tileExists:function tileExists(level,x,y){var rects=this._levelRects[level],rect,scale,xMin,yMin,xMax,yMax,i;if(!rects||!rects.length){return true;}for(i=rects.length-1;i>=0;i--){rect=rects[i];if(level<rect.minLevel||level>rect.maxLevel){continue;}scale=this.getLevelScale(level);xMin=rect.x*scale;yMin=rect.y*scale;xMax=xMin+rect.width*scale;yMax=yMin+rect.height*scale;xMin=Math.floor(xMin/this.tileSize);yMin=Math.floor(yMin/this.tileSize);xMax=Math.ceil(xMax/this.tileSize);yMax=Math.ceil(yMax/this.tileSize);if(xMin<=x&&x<xMax&&yMin<=y&&y<yMax){return true;}}return false;}});/**\n * @private\n * @inner\n * @function\n */function configureFromXML(tileSource,xmlDoc){if(!xmlDoc||!xmlDoc.documentElement){throw new Error($.getString("Errors.Xml"));}var root=xmlDoc.documentElement,rootName=root.localName||root.tagName,ns=xmlDoc.documentElement.namespaceURI,configuration=null,displayRects=[],dispRectNodes,dispRectNode,rectNode,sizeNode,i;if(rootName=="Image"){try{sizeNode=root.getElementsByTagName("Size")[0];if(sizeNode===undefined){sizeNode=root.getElementsByTagNameNS(ns,"Size")[0];}configuration={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:root.getAttribute("Url"),Format:root.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(root.getAttribute("Overlap"),10),TileSize:parseInt(root.getAttribute("TileSize"),10),Size:{Height:parseInt(sizeNode.getAttribute("Height"),10),Width:parseInt(sizeNode.getAttribute("Width"),10)}}};if(!$.imageFormatSupported(configuration.Image.Format)){throw new Error($.getString("Errors.ImageFormat",configuration.Image.Format.toUpperCase()));}dispRectNodes=root.getElementsByTagName("DisplayRect");if(dispRectNodes===undefined){dispRectNodes=root.getElementsByTagNameNS(ns,"DisplayRect")[0];}for(i=0;i<dispRectNodes.length;i++){dispRectNode=dispRectNodes[i];rectNode=dispRectNode.getElementsByTagName("Rect")[0];if(rectNode===undefined){rectNode=dispRectNode.getElementsByTagNameNS(ns,"Rect")[0];}displayRects.push({Rect:{X:parseInt(rectNode.getAttribute("X"),10),Y:parseInt(rectNode.getAttribute("Y"),10),Width:parseInt(rectNode.getAttribute("Width"),10),Height:parseInt(rectNode.getAttribute("Height"),10),MinLevel:parseInt(dispRectNode.getAttribute("MinLevel"),10),MaxLevel:parseInt(dispRectNode.getAttribute("MaxLevel"),10)}});}if(displayRects.length){configuration.Image.DisplayRect=displayRects;}return configureFromObject(tileSource,configuration);}catch(e){throw e instanceof Error?e:new Error($.getString("Errors.Dzi"));}}else if(rootName=="Collection"){throw new Error($.getString("Errors.Dzc"));}else if(rootName=="Error"){return $._processDZIError(root);}throw new Error($.getString("Errors.Dzi"));}/**\n * @private\n * @inner\n * @function\n */function configureFromObject(tileSource,configuration){var imageData=configuration.Image,tilesUrl=imageData.Url,fileFormat=imageData.Format,sizeData=imageData.Size,dispRectData=imageData.DisplayRect||[],width=parseInt(sizeData.Width,10),height=parseInt(sizeData.Height,10),tileSize=parseInt(imageData.TileSize,10),tileOverlap=parseInt(imageData.Overlap,10),displayRects=[],rectData,i;//TODO: need to figure out out to better handle image format compatibility\n//      which actually includes additional file formats like xml and pdf\n//      and plain text for various tilesource implementations to avoid low\n//      level errors.\n//\n//      For now, just don\'t perform the check.\n//\n/*if ( !imageFormatSupported( fileFormat ) ) {\n        throw new Error(\n            $.getString( "Errors.ImageFormat", fileFormat.toUpperCase() )\n        );\n    }*/for(i=0;i<dispRectData.length;i++){rectData=dispRectData[i].Rect;displayRects.push(new $.DisplayRect(parseInt(rectData.X,10),parseInt(rectData.Y,10),parseInt(rectData.Width,10),parseInt(rectData.Height,10),parseInt(rectData.MinLevel,10),parseInt(rectData.MaxLevel,10)));}return $.extend(true,{width:width,/* width *required */height:height,/* height *required */tileSize:tileSize,/* tileSize *required */tileOverlap:tileOverlap,/* tileOverlap *required */minLevel:null,/* minLevel */maxLevel:null,/* maxLevel */tilesUrl:tilesUrl,/* tilesUrl */fileFormat:fileFormat,/* fileFormat */displayRects:displayRects/* displayRects */},configuration);}})(OpenSeadragon);/*\n * OpenSeadragon - IIIFTileSource\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n * @class IIIFTileSource\n * @classdesc A client implementation of the International Image Interoperability Framework\n * Format: Image API 1.0 - 2.1\n *\n * @memberof OpenSeadragon\n * @extends OpenSeadragon.TileSource\n * @see http://iiif.io/api/image/\n */$.IIIFTileSource=function(options){$.extend(true,this,options);if(!(this.height&&this.width&&this[\'@id\'])){throw new Error(\'IIIF required parameters not provided.\');}options.tileSizePerScaleFactor={};// N.B. 2.0 renamed scale_factors to scaleFactors\nif(this.tile_width&&this.tile_height){options.tileWidth=this.tile_width;options.tileHeight=this.tile_height;}else if(this.tile_width){options.tileSize=this.tile_width;}else if(this.tile_height){options.tileSize=this.tile_height;}else if(this.tiles){// Version 2.0 forwards\nif(this.tiles.length==1){options.tileWidth=this.tiles[0].width;// Use height if provided, otherwise assume square tiles and use width.\noptions.tileHeight=this.tiles[0].height||this.tiles[0].width;this.scale_factors=this.tiles[0].scaleFactors;}else{// Multiple tile sizes at different levels\nthis.scale_factors=[];for(var t=0;t<this.tiles.length;t++){for(var sf=0;sf<this.tiles[t].scaleFactors.length;sf++){var scaleFactor=this.tiles[t].scaleFactors[sf];this.scale_factors.push(scaleFactor);options.tileSizePerScaleFactor[scaleFactor]={width:this.tiles[t].width,height:this.tiles[t].height||this.tiles[t].width};}}}}else if(canBeTiled(options.profile)){// use the largest of tileOptions that is smaller than the short dimension\nvar shortDim=Math.min(this.height,this.width),tileOptions=[256,512,1024],smallerTiles=[];for(var c=0;c<tileOptions.length;c++){if(tileOptions[c]<=shortDim){smallerTiles.push(tileOptions[c]);}}if(smallerTiles.length>0){options.tileSize=Math.max.apply(null,smallerTiles);}else{// If we\'re smaller than 256, just use the short side.\noptions.tileSize=shortDim;}}else if(this.sizes&&this.sizes.length>0){// This info.json can\'t be tiled, but we can still construct a legacy pyramid from the sizes array. \n// In this mode, IIIFTileSource will call functions from the abstract baseTileSource or the \n// LegacyTileSource instead of performing IIIF tiling.      \nthis.emulateLegacyImagePyramid=true;options.levels=constructLevels(this);// use the largest available size to define tiles\n$.extend(true,options,{width:options.levels[options.levels.length-1].width,height:options.levels[options.levels.length-1].height,tileSize:Math.max(options.height,options.width),tileOverlap:0,minLevel:0,maxLevel:options.levels.length-1});this.levels=options.levels;}else{$.console.error("Nothing in the info.json to construct image pyramids from");}if(!options.maxLevel&&!this.emulateLegacyImagePyramid){if(!this.scale_factors){options.maxLevel=Number(Math.ceil(Math.log(Math.max(this.width,this.height),2)));}else{options.maxLevel=Math.floor(Math.pow(Math.max.apply(null,this.scale_factors),0.5));}}$.TileSource.apply(this,[options]);};$.extend($.IIIFTileSource.prototype,$.TileSource.prototype,/** @lends OpenSeadragon.IIIFTileSource.prototype */{/**\n     * Determine if the data and/or url imply the image service is supported by\n     * this tile source.\n     * @function\n     * @param {Object|Array} data\n     * @param {String} optional - url\n     */supports:function supports(data,url){// Version 2.0 and forwards\nif(data.protocol&&data.protocol==\'http://iiif.io/api/image\'){return true;// Version 1.1\n}else if(data[\'@context\']&&(data[\'@context\']=="http://library.stanford.edu/iiif/image-api/1.1/context.json"||data[\'@context\']=="http://iiif.io/api/image/1/context.json")){// N.B. the iiif.io context is wrong, but where the representation lives so likely to be used\nreturn true;// Version 1.0\n}else if(data.profile&&data.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0){return true;}else if(data.identifier&&data.width&&data.height){return true;}else if(data.documentElement&&"info"==data.documentElement.tagName&&"http://library.stanford.edu/iiif/image-api/ns/"==data.documentElement.namespaceURI){return true;// Not IIIF\n}else{return false;}},/**\n     *\n     * @function\n     * @param {Object} data - the raw configuration\n     * @example <caption>IIIF 1.1 Info Looks like this</caption>\n     * {\n     *   "@context" : "http://library.stanford.edu/iiif/image-api/1.1/context.json",\n     *   "@id" : "http://iiif.example.com/prefix/1E34750D-38DB-4825-A38A-B60A345E591C",\n     *   "width" : 6000,\n     *   "height" : 4000,\n     *   "scale_factors" : [ 1, 2, 4 ],\n     *   "tile_width" : 1024,\n     *   "tile_height" : 1024,\n     *   "formats" : [ "jpg", "png" ],\n     *   "qualities" : [ "native", "grey" ],\n     *   "profile" : "http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0"\n     * }\n     */configure:function configure(data,url){// Try to deduce our version and fake it upwards if needed\nif(!$.isPlainObject(data)){var options=configureFromXml10(data);options[\'@context\']="http://iiif.io/api/image/1.0/context.json";options[\'@id\']=url.replace(\'/info.xml\',\'\');return options;}else if(!data[\'@context\']){data[\'@context\']=\'http://iiif.io/api/image/1.0/context.json\';data[\'@id\']=url.replace(\'/info.json\',\'\');return data;}else{return data;}},/**\n     * Return the tileWidth for the given level.\n     * @function\n     * @param {Number} level\n     */getTileWidth:function getTileWidth(level){if(this.emulateLegacyImagePyramid){return $.TileSource.prototype.getTileWidth.call(this,level);}var scaleFactor=Math.pow(2,this.maxLevel-level);if(this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[scaleFactor]){return this.tileSizePerScaleFactor[scaleFactor].width;}return this._tileWidth;},/**\n     * Return the tileHeight for the given level.\n     * @function\n     * @param {Number} level\n     */getTileHeight:function getTileHeight(level){if(this.emulateLegacyImagePyramid){return $.TileSource.prototype.getTileHeight.call(this,level);}var scaleFactor=Math.pow(2,this.maxLevel-level);if(this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[scaleFactor]){return this.tileSizePerScaleFactor[scaleFactor].height;}return this._tileHeight;},/**\n     * @function\n     * @param {Number} level\n     */getLevelScale:function getLevelScale(level){if(this.emulateLegacyImagePyramid){var levelScale=NaN;if(this.levels.length>0&&level>=this.minLevel&&level<=this.maxLevel){levelScale=this.levels[level].width/this.levels[this.maxLevel].width;}return levelScale;}return $.TileSource.prototype.getLevelScale.call(this,level);},/**\n     * @function\n     * @param {Number} level\n     */getNumTiles:function getNumTiles(level){if(this.emulateLegacyImagePyramid){var scale=this.getLevelScale(level);if(scale){return new $.Point(1,1);}else{return new $.Point(0,0);}}return $.TileSource.prototype.getNumTiles.call(this,level);},/**\n     * @function\n     * @param {Number} level\n     * @param {OpenSeadragon.Point} point\n     */getTileAtPoint:function getTileAtPoint(level,point){if(this.emulateLegacyImagePyramid){return new $.Point(0,0);}return $.TileSource.prototype.getTileAtPoint.call(this,level,point);},/**\n     * Responsible for retrieving the url which will return an image for the\n     * region specified by the given x, y, and level components.\n     * @function\n     * @param {Number} level - z index\n     * @param {Number} x\n     * @param {Number} y\n     * @throws {Error}\n     */getTileUrl:function getTileUrl(level,x,y){if(this.emulateLegacyImagePyramid){var url=null;if(this.levels.length>0&&level>=this.minLevel&&level<=this.maxLevel){url=this.levels[level].url;}return url;}//# constants\nvar IIIF_ROTATION=\'0\',//## get the scale (level as a decimal)\nscale=Math.pow(0.5,this.maxLevel-level),//# image dimensions at this level\nlevelWidth=Math.ceil(this.width*scale),levelHeight=Math.ceil(this.height*scale),//## iiif region\ntileWidth,tileHeight,iiifTileSizeWidth,iiifTileSizeHeight,iiifRegion,iiifTileX,iiifTileY,iiifTileW,iiifTileH,iiifSize,iiifQuality,uri;tileWidth=this.getTileWidth(level);tileHeight=this.getTileHeight(level);iiifTileSizeWidth=Math.ceil(tileWidth/scale);iiifTileSizeHeight=Math.ceil(tileHeight/scale);if(this[\'@context\'].indexOf(\'/1.0/context.json\')>-1||this[\'@context\'].indexOf(\'/1.1/context.json\')>-1||this[\'@context\'].indexOf(\'/1/context.json\')>-1){iiifQuality="native.jpg";}else{iiifQuality="default.jpg";}if(levelWidth<tileWidth&&levelHeight<tileHeight){iiifSize=levelWidth+",";iiifRegion=\'full\';}else{iiifTileX=x*iiifTileSizeWidth;iiifTileY=y*iiifTileSizeHeight;iiifTileW=Math.min(iiifTileSizeWidth,this.width-iiifTileX);iiifTileH=Math.min(iiifTileSizeHeight,this.height-iiifTileY);iiifSize=Math.ceil(iiifTileW*scale)+",";iiifRegion=[iiifTileX,iiifTileY,iiifTileW,iiifTileH].join(\',\');}uri=[this[\'@id\'],iiifRegion,iiifSize,IIIF_ROTATION,iiifQuality].join(\'/\');return uri;}});/**\n     * Determine whether arbitrary tile requests can be made against a service with the given profile\n     * @function\n     * @param {object} profile - IIIF profile object\n     * @throws {Error}\n     */function canBeTiled(profile){var level0Profiles=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json"];var isLevel0=level0Profiles.indexOf(profile[0])!=-1;return!isLevel0||profile.indexOf("sizeByW")!=-1;}/**\n     * Build the legacy pyramid URLs (one tile per level)\n     * @function\n     * @param {object} options - infoJson\n     * @throws {Error}\n     */function constructLevels(options){var levels=[];for(var i=0;i<options.sizes.length;i++){levels.push({url:options[\'@id\']+\'/full/\'+options.sizes[i].width+\',/0/default.jpg\',width:options.sizes[i].width,height:options.sizes[i].height});}return levels.sort(function(a,b){return a.width-b.width;});}function configureFromXml10(xmlDoc){//parse the xml\nif(!xmlDoc||!xmlDoc.documentElement){throw new Error($.getString("Errors.Xml"));}var root=xmlDoc.documentElement,rootName=root.tagName,configuration=null;if(rootName=="info"){try{configuration={};parseXML10(root,configuration);return configuration;}catch(e){throw e instanceof Error?e:new Error($.getString("Errors.IIIF"));}}throw new Error($.getString("Errors.IIIF"));}function parseXML10(node,configuration,property){var i,value;if(node.nodeType==3&&property){//text node\nvalue=node.nodeValue.trim();if(value.match(/^\\d*$/)){value=Number(value);}if(!configuration[property]){configuration[property]=value;}else{if(!$.isArray(configuration[property])){configuration[property]=[configuration[property]];}configuration[property].push(value);}}else if(node.nodeType==1){for(i=0;i<node.childNodes.length;i++){parseXML10(node.childNodes[i],configuration,node.nodeName);}}}})(OpenSeadragon);/*\n * OpenSeadragon - OsmTileSource\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *//*\n * Derived from the OSM tile source in Rainer Simon\'s seajax-utils project\n * <http://github.com/rsimon/seajax-utils>.  Rainer Simon has contributed\n * the included code to the OpenSeadragon project under the New BSD license;\n * see <https://github.com/openseadragon/openseadragon/issues/58>.\n */(function($){/**\n * @class OsmTileSource\n * @classdesc A tilesource implementation for OpenStreetMap.<br><br>\n *\n * Note 1. Zoomlevels. Deep Zoom and OSM define zoom levels differently. In  Deep\n * Zoom, level 0 equals an image of 1x1 pixels. In OSM, level 0 equals an image of\n * 256x256 levels (see http://gasi.ch/blog/inside-deep-zoom-2). I.e. there is a\n * difference of log2(256)=8 levels.<br><br>\n *\n * Note 2. Image dimension. According to the OSM Wiki\n * (http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames#Zoom_levels)\n * the highest Mapnik zoom level has 256.144x256.144 tiles, with a 256x256\n * pixel size. I.e. the Deep Zoom image dimension is 65.572.864x65.572.864\n * pixels.\n *\n * @memberof OpenSeadragon\n * @extends OpenSeadragon.TileSource\n * @param {Number|Object} width - the pixel width of the image or the idiomatic\n *      options object which is used instead of positional arguments.\n * @param {Number} height\n * @param {Number} tileSize\n * @param {Number} tileOverlap\n * @param {String} tilesUrl\n */$.OsmTileSource=function(width,height,tileSize,tileOverlap,tilesUrl){var options;if($.isPlainObject(width)){options=width;}else{options={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};}//apply default setting for standard public OpenStreatMaps service\n//but allow them to be specified so fliks can host there own instance\n//or apply against other services supportting the same standard\nif(!options.width||!options.height){options.width=65572864;options.height=65572864;}if(!options.tileSize){options.tileSize=256;options.tileOverlap=0;}if(!options.tilesUrl){options.tilesUrl="http://tile.openstreetmap.org/";}options.minLevel=8;$.TileSource.apply(this,[options]);};$.extend($.OsmTileSource.prototype,$.TileSource.prototype,/** @lends OpenSeadragon.OsmTileSource.prototype */{/**\n     * Determine if the data and/or url imply the image service is supported by\n     * this tile source.\n     * @function\n     * @param {Object|Array} data\n     * @param {String} optional - url\n     */supports:function supports(data,url){return data.type&&"openstreetmaps"==data.type;},/**\n     *\n     * @function\n     * @param {Object} data - the raw configuration\n     * @param {String} url - the url the data was retreived from if any.\n     * @return {Object} options - A dictionary of keyword arguments sufficient\n     *      to configure this tile sources constructor.\n     */configure:function configure(data,url){return data;},/**\n     * @function\n     * @param {Number} level\n     * @param {Number} x\n     * @param {Number} y\n     */getTileUrl:function getTileUrl(level,x,y){return this.tilesUrl+(level-8)+"/"+x+"/"+y+".png";}});})(OpenSeadragon);/*\n * OpenSeadragon - TmsTileSource\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *//*\n * Derived from the TMS tile source in Rainer Simon\'s seajax-utils project\n * <http://github.com/rsimon/seajax-utils>.  Rainer Simon has contributed\n * the included code to the OpenSeadragon project under the New BSD license;\n * see <https://github.com/openseadragon/openseadragon/issues/58>.\n */(function($){/**\n * @class TmsTileSource\n * @classdesc A tilesource implementation for Tiled Map Services (TMS).\n * TMS tile scheme ( [ as supported by OpenLayers ] is described here\n * ( http://openlayers.org/dev/examples/tms.html ).\n *\n * @memberof OpenSeadragon\n * @extends OpenSeadragon.TileSource\n * @param {Number|Object} width - the pixel width of the image or the idiomatic\n *      options object which is used instead of positional arguments.\n * @param {Number} height\n * @param {Number} tileSize\n * @param {Number} tileOverlap\n * @param {String} tilesUrl\n */$.TmsTileSource=function(width,height,tileSize,tileOverlap,tilesUrl){var options;if($.isPlainObject(width)){options=width;}else{options={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};}// TMS has integer multiples of 256 for width/height and adds buffer\n// if necessary -> account for this!\nvar bufferedWidth=Math.ceil(options.width/256)*256,bufferedHeight=Math.ceil(options.height/256)*256,max;// Compute number of zoomlevels in this tileset\nif(bufferedWidth>bufferedHeight){max=bufferedWidth/256;}else{max=bufferedHeight/256;}options.maxLevel=Math.ceil(Math.log(max)/Math.log(2))-1;options.tileSize=256;options.width=bufferedWidth;options.height=bufferedHeight;$.TileSource.apply(this,[options]);};$.extend($.TmsTileSource.prototype,$.TileSource.prototype,/** @lends OpenSeadragon.TmsTileSource.prototype */{/**\n     * Determine if the data and/or url imply the image service is supported by\n     * this tile source.\n     * @function\n     * @param {Object|Array} data\n     * @param {String} optional - url\n     */supports:function supports(data,url){return data.type&&"tiledmapservice"==data.type;},/**\n     *\n     * @function\n     * @param {Object} data - the raw configuration\n     * @param {String} url - the url the data was retreived from if any.\n     * @return {Object} options - A dictionary of keyword arguments sufficient\n     *      to configure this tile sources constructor.\n     */configure:function configure(data,url){return data;},/**\n     * @function\n     * @param {Number} level\n     * @param {Number} x\n     * @param {Number} y\n     */getTileUrl:function getTileUrl(level,x,y){// Convert from Deep Zoom definition to TMS zoom definition\nvar yTiles=this.getNumTiles(level).y-1;return this.tilesUrl+level+"/"+x+"/"+(yTiles-y)+".png";}});})(OpenSeadragon);/*\n * OpenSeadragon - LegacyTileSource\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n * @class LegacyTileSource\n * @classdesc The LegacyTileSource allows simple, traditional image pyramids to be loaded\n * into an OpenSeadragon Viewer.  Basically, this translates to the historically\n * common practice of starting with a \'master\' image, maybe a tiff for example,\n * and generating a set of \'service\' images like one or more thumbnails, a medium\n * resolution image and a high resolution image in standard web formats like\n * png or jpg.\n *\n * @memberof OpenSeadragon\n * @extends OpenSeadragon.TileSource\n * @param {Array} levels An array of file descriptions, each is an object with\n *      a \'url\', a \'width\', and a \'height\'.  Overriding classes can expect more\n *      properties but these properties are sufficient for this implementation.\n *      Additionally, the levels are required to be listed in order from\n *      smallest to largest.\n * @property {Number} aspectRatio\n * @property {Number} dimensions\n * @property {Number} tileSize\n * @property {Number} tileOverlap\n * @property {Number} minLevel\n * @property {Number} maxLevel\n * @property {Array}  levels\n */$.LegacyTileSource=function(levels){var options,width,height;if($.isArray(levels)){options={type:\'legacy-image-pyramid\',levels:levels};}//clean up the levels to make sure we support all formats\noptions.levels=filterFiles(options.levels);if(options.levels.length>0){width=options.levels[options.levels.length-1].width;height=options.levels[options.levels.length-1].height;}else{width=0;height=0;$.console.error("No supported image formats found");}$.extend(true,options,{width:width,height:height,tileSize:Math.max(height,width),tileOverlap:0,minLevel:0,maxLevel:options.levels.length>0?options.levels.length-1:0});$.TileSource.apply(this,[options]);this.levels=options.levels;};$.extend($.LegacyTileSource.prototype,$.TileSource.prototype,/** @lends OpenSeadragon.LegacyTileSource.prototype */{/**\n     * Determine if the data and/or url imply the image service is supported by\n     * this tile source.\n     * @function\n     * @param {Object|Array} data\n     * @param {String} optional - url\n     */supports:function supports(data,url){return data.type&&"legacy-image-pyramid"==data.type||data.documentElement&&"legacy-image-pyramid"==data.documentElement.getAttribute(\'type\');},/**\n     *\n     * @function\n     * @param {Object|XMLDocument} configuration - the raw configuration\n     * @param {String} dataUrl - the url the data was retreived from if any.\n     * @return {Object} options - A dictionary of keyword arguments sufficient\n     *      to configure this tile sources constructor.\n     */configure:function configure(configuration,dataUrl){var options;if(!$.isPlainObject(configuration)){options=configureFromXML(this,configuration);}else{options=configureFromObject(this,configuration);}return options;},/**\n     * @function\n     * @param {Number} level\n     */getLevelScale:function getLevelScale(level){var levelScale=NaN;if(this.levels.length>0&&level>=this.minLevel&&level<=this.maxLevel){levelScale=this.levels[level].width/this.levels[this.maxLevel].width;}return levelScale;},/**\n     * @function\n     * @param {Number} level\n     */getNumTiles:function getNumTiles(level){var scale=this.getLevelScale(level);if(scale){return new $.Point(1,1);}else{return new $.Point(0,0);}},/**\n     * @function\n     * @param {Number} level\n     * @param {OpenSeadragon.Point} point\n     */getTileAtPoint:function getTileAtPoint(level,point){return new $.Point(0,0);},/**\n     * This method is not implemented by this class other than to throw an Error\n     * announcing you have to implement it.  Because of the variety of tile\n     * server technologies, and various specifications for building image\n     * pyramids, this method is here to allow easy integration.\n     * @function\n     * @param {Number} level\n     * @param {Number} x\n     * @param {Number} y\n     * @throws {Error}\n     */getTileUrl:function getTileUrl(level,x,y){var url=null;if(this.levels.length>0&&level>=this.minLevel&&level<=this.maxLevel){url=this.levels[level].url;}return url;}});/**\n * This method removes any files from the Array which dont conform to our\n * basic requirements for a \'level\' in the LegacyTileSource.\n * @private\n * @inner\n * @function\n */function filterFiles(files){var filtered=[],file,i;for(i=0;i<files.length;i++){file=files[i];if(file.height&&file.width&&file.url&&(file.url.toLowerCase().match(/^.*\\.(png|jpg|jpeg|gif)(?:\\?.*)?$/)||file.mimetype&&file.mimetype.toLowerCase().match(/^.*\\/(png|jpg|jpeg|gif)$/))){//This is sufficient to serve as a level\nfiltered.push({url:file.url,width:Number(file.width),height:Number(file.height)});}else{$.console.error(\'Unsupported image format: %s\',file.url?file.url:\'<no URL>\');}}return filtered.sort(function(a,b){return a.height-b.height;});}/**\n * @private\n * @inner\n * @function\n */function configureFromXML(tileSource,xmlDoc){if(!xmlDoc||!xmlDoc.documentElement){throw new Error($.getString("Errors.Xml"));}var root=xmlDoc.documentElement,rootName=root.tagName,conf=null,levels=[],level,i;if(rootName=="image"){try{conf={type:root.getAttribute("type"),levels:[]};levels=root.getElementsByTagName("level");for(i=0;i<levels.length;i++){level=levels[i];conf.levels.push({url:level.getAttribute("url"),width:parseInt(level.getAttribute("width"),10),height:parseInt(level.getAttribute("height"),10)});}return configureFromObject(tileSource,conf);}catch(e){throw e instanceof Error?e:new Error(\'Unknown error parsing Legacy Image Pyramid XML.\');}}else if(rootName=="collection"){throw new Error(\'Legacy Image Pyramid Collections not yet supported.\');}else if(rootName=="error"){throw new Error(\'Error: \'+xmlDoc);}throw new Error(\'Unknown element \'+rootName);}/**\n * @private\n * @inner\n * @function\n */function configureFromObject(tileSource,configuration){return configuration.levels;}})(OpenSeadragon);/*\n * OpenSeadragon - ImageTileSource\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n     * @class ImageTileSource\n     * @classdesc The ImageTileSource allows a simple image to be loaded\n     * into an OpenSeadragon Viewer.\n     * There are 2 ways to open an ImageTileSource:\n     * 1. viewer.open({type: \'image\', url: fooUrl});\n     * 2. viewer.open(new OpenSeadragon.ImageTileSource({url: fooUrl}));\n     *\n     * With the first syntax, the crossOriginPolicy, ajaxWithCredentials and\n     * useCanvas options are inherited from the viewer if they are not\n     * specified directly in the options object.\n     *\n     * @memberof OpenSeadragon\n     * @extends OpenSeadragon.TileSource\n     * @param {Object} options Options object.\n     * @param {String} options.url URL of the image\n     * @param {Boolean} [options.buildPyramid=true] If set to true (default), a\n     * pyramid will be built internally to provide a better downsampling.\n     * @param {String|Boolean} [options.crossOriginPolicy=false] Valid values are\n     * \'Anonymous\', \'use-credentials\', and false. If false, image requests will\n     * not use CORS preventing internal pyramid building for images from other\n     * domains.\n     * @param {String|Boolean} [options.ajaxWithCredentials=false] Whether to set\n     * the withCredentials XHR flag for AJAX requests (when loading tile sources).\n     * @param {Boolean} [options.useCanvas=true] Set to false to prevent any use\n     * of the canvas API.\n     */$.ImageTileSource=function(options){options=$.extend({buildPyramid:true,crossOriginPolicy:false,ajaxWithCredentials:false,useCanvas:true},options);$.TileSource.apply(this,[options]);};$.extend($.ImageTileSource.prototype,$.TileSource.prototype,/** @lends OpenSeadragon.ImageTileSource.prototype */{/**\n         * Determine if the data and/or url imply the image service is supported by\n         * this tile source.\n         * @function\n         * @param {Object|Array} data\n         * @param {String} optional - url\n         */supports:function supports(data,url){return data.type&&data.type==="image";},/**\n         *\n         * @function\n         * @param {Object} options - the options\n         * @param {String} dataUrl - the url the image was retreived from, if any.\n         * @return {Object} options - A dictionary of keyword arguments sufficient\n         *      to configure this tile sources constructor.\n         */configure:function configure(options,dataUrl){return options;},/**\n         * Responsible for retrieving, and caching the\n         * image metadata pertinent to this TileSources implementation.\n         * @function\n         * @param {String} url\n         * @throws {Error}\n         */getImageInfo:function getImageInfo(url){var image=this._image=new Image();var _this=this;if(this.crossOriginPolicy){image.crossOrigin=this.crossOriginPolicy;}if(this.ajaxWithCredentials){image.useCredentials=this.ajaxWithCredentials;}$.addEvent(image,\'load\',function(){_this.width=image.naturalWidth;_this.height=image.naturalHeight;_this.aspectRatio=_this.width/_this.height;_this.dimensions=new $.Point(_this.width,_this.height);_this._tileWidth=_this.width;_this._tileHeight=_this.height;_this.tileOverlap=0;_this.minLevel=0;_this.levels=_this._buildLevels();_this.maxLevel=_this.levels.length-1;_this.ready=true;// Note: this event is documented elsewhere, in TileSource\n_this.raiseEvent(\'ready\',{tileSource:_this});});$.addEvent(image,\'error\',function(){// Note: this event is documented elsewhere, in TileSource\n_this.raiseEvent(\'open-failed\',{message:"Error loading image at "+url,source:url});});image.src=url;},/**\n         * @function\n         * @param {Number} level\n         */getLevelScale:function getLevelScale(level){var levelScale=NaN;if(level>=this.minLevel&&level<=this.maxLevel){levelScale=this.levels[level].width/this.levels[this.maxLevel].width;}return levelScale;},/**\n         * @function\n         * @param {Number} level\n         */getNumTiles:function getNumTiles(level){var scale=this.getLevelScale(level);if(scale){return new $.Point(1,1);}else{return new $.Point(0,0);}},/**\n         * @function\n         * @param {Number} level\n         * @param {OpenSeadragon.Point} point\n         */getTileAtPoint:function getTileAtPoint(level,point){return new $.Point(0,0);},/**\n         * Retrieves a tile url\n         * @function\n         * @param {Number} level Level of the tile\n         * @param {Number} x x coordinate of the tile\n         * @param {Number} y y coordinate of the tile\n         */getTileUrl:function getTileUrl(level,x,y){var url=null;if(level>=this.minLevel&&level<=this.maxLevel){url=this.levels[level].url;}return url;},/**\n         * Retrieves a tile context 2D\n         * @function\n         * @param {Number} level Level of the tile\n         * @param {Number} x x coordinate of the tile\n         * @param {Number} y y coordinate of the tile\n         */getContext2D:function getContext2D(level,x,y){var context=null;if(level>=this.minLevel&&level<=this.maxLevel){context=this.levels[level].context2D;}return context;},// private\n//\n// Builds the differents levels of the pyramid if possible\n// (i.e. if canvas API enabled and no canvas tainting issue).\n_buildLevels:function _buildLevels(){var levels=[{url:this._image.src,width:this._image.naturalWidth,height:this._image.naturalHeight}];if(!this.buildPyramid||!$.supportsCanvas||!this.useCanvas){// We don\'t need the image anymore. Allows it to be GC.\ndelete this._image;return levels;}var currentWidth=this._image.naturalWidth;var currentHeight=this._image.naturalHeight;var bigCanvas=document.createElement("canvas");var bigContext=bigCanvas.getContext("2d");bigCanvas.width=currentWidth;bigCanvas.height=currentHeight;bigContext.drawImage(this._image,0,0,currentWidth,currentHeight);// We cache the context of the highest level because the browser\n// is a lot faster at downsampling something it already has\n// downsampled before.\nlevels[0].context2D=bigContext;// We don\'t need the image anymore. Allows it to be GC.\ndelete this._image;if($.isCanvasTainted(bigCanvas)){// If the canvas is tainted, we can\'t compute the pyramid.\nreturn levels;}// We build smaller levels until either width or height becomes\n// 1 pixel wide.\nwhile(currentWidth>=2&&currentHeight>=2){currentWidth=Math.floor(currentWidth/2);currentHeight=Math.floor(currentHeight/2);var smallCanvas=document.createElement("canvas");var smallContext=smallCanvas.getContext("2d");smallCanvas.width=currentWidth;smallCanvas.height=currentHeight;smallContext.drawImage(bigCanvas,0,0,currentWidth,currentHeight);levels.splice(0,0,{context2D:smallContext,width:currentWidth,height:currentHeight});bigCanvas=smallCanvas;bigContext=smallContext;}return levels;}});})(OpenSeadragon);/*\n * OpenSeadragon - TileSourceCollection\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){// deprecated\n$.TileSourceCollection=function(tileSize,tileSources,rows,layout){$.console.error(\'TileSourceCollection is deprecated; use World instead\');};})(OpenSeadragon);/*\n * OpenSeadragon - Button\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n * An enumeration of button states\n * @member ButtonState\n * @memberof OpenSeadragon\n * @static\n * @type {Object}\n * @property {Number} REST\n * @property {Number} GROUP\n * @property {Number} HOVER\n * @property {Number} DOWN\n */$.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3};/**\n * @class Button\n * @classdesc Manages events, hover states for individual buttons, tool-tips, as well\n * as fading the buttons out when the user has not interacted with them\n * for a specified period.\n *\n * @memberof OpenSeadragon\n * @extends OpenSeadragon.EventSource\n * @param {Object} options\n * @param {Element} [options.element=null] Element to use as the button. If not specified, an HTML &lt;button&gt; element is created.\n * @param {String} [options.tooltip=null] Provides context help for the button when the\n *  user hovers over it.\n * @param {String} [options.srcRest=null] URL of image to use in \'rest\' state.\n * @param {String} [options.srcGroup=null] URL of image to use in \'up\' state.\n * @param {String} [options.srcHover=null] URL of image to use in \'hover\' state.\n * @param {String} [options.srcDown=null] URL of image to use in \'down\' state.\n * @param {Number} [options.fadeDelay=0] How long to wait before fading.\n * @param {Number} [options.fadeLength=2000] How long should it take to fade the button.\n * @param {OpenSeadragon.EventHandler} [options.onPress=null] Event handler callback for {@link OpenSeadragon.Button.event:press}.\n * @param {OpenSeadragon.EventHandler} [options.onRelease=null] Event handler callback for {@link OpenSeadragon.Button.event:release}.\n * @param {OpenSeadragon.EventHandler} [options.onClick=null] Event handler callback for {@link OpenSeadragon.Button.event:click}.\n * @param {OpenSeadragon.EventHandler} [options.onEnter=null] Event handler callback for {@link OpenSeadragon.Button.event:enter}.\n * @param {OpenSeadragon.EventHandler} [options.onExit=null] Event handler callback for {@link OpenSeadragon.Button.event:exit}.\n * @param {OpenSeadragon.EventHandler} [options.onFocus=null] Event handler callback for {@link OpenSeadragon.Button.event:focus}.\n * @param {OpenSeadragon.EventHandler} [options.onBlur=null] Event handler callback for {@link OpenSeadragon.Button.event:blur}.\n */$.Button=function(options){var _this=this;$.EventSource.call(this);$.extend(true,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:$.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:$.DEFAULT_SETTINGS.clickDistThreshold,/**\n         * How long to wait before fading.\n         * @member {Number} fadeDelay\n         * @memberof OpenSeadragon.Button#\n         */fadeDelay:0,/**\n         * How long should it take to fade the button.\n         * @member {Number} fadeLength\n         * @memberof OpenSeadragon.Button#\n         */fadeLength:2000,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null},options);/**\n     * The button element.\n     * @member {Element} element\n     * @memberof OpenSeadragon.Button#\n     */this.element=options.element||$.makeNeutralElement("div");//if the user has specified the element to bind the control to explicitly\n//then do not add the default control images\nif(!options.element){this.imgRest=$.makeTransparentImage(this.srcRest);this.imgGroup=$.makeTransparentImage(this.srcGroup);this.imgHover=$.makeTransparentImage(this.srcHover);this.imgDown=$.makeTransparentImage(this.srcDown);this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip;this.element.style.position="relative";$.setElementTouchActionNone(this.element);this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute";this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px";this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px";this.imgHover.style.visibility=this.imgDown.style.visibility="hidden";if($.Browser.vendor==$.BROWSERS.FIREFOX&&$.Browser.version<3){this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="";}this.element.appendChild(this.imgRest);this.element.appendChild(this.imgGroup);this.element.appendChild(this.imgHover);this.element.appendChild(this.imgDown);}this.addHandler("press",this.onPress);this.addHandler("release",this.onRelease);this.addHandler("click",this.onClick);this.addHandler("enter",this.onEnter);this.addHandler("exit",this.onExit);this.addHandler("focus",this.onFocus);this.addHandler("blur",this.onBlur);/**\n     * The button\'s current state.\n     * @member {OpenSeadragon.ButtonState} currentState\n     * @memberof OpenSeadragon.Button#\n     */this.currentState=$.ButtonState.GROUP;// When the button last began to fade.\nthis.fadeBeginTime=null;// Whether this button should fade after user stops interacting with the viewport.\nthis.shouldFade=false;this.element.style.display="inline-block";this.element.style.position="relative";this.element.title=this.tooltip;/**\n     * Tracks mouse/touch/key events on the button.\n     * @member {OpenSeadragon.MouseTracker} tracker\n     * @memberof OpenSeadragon.Button#\n     */this.tracker=new $.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function enterHandler(event){if(event.insideElementPressed){inTo(_this,$.ButtonState.DOWN);/**\n                 * Raised when the cursor enters the Button element.\n                 *\n                 * @event enter\n                 * @memberof OpenSeadragon.Button\n                 * @type {object}\n                 * @property {OpenSeadragon.Button} eventSource - A reference to the Button which raised the event.\n                 * @property {Object} originalEvent - The original DOM event.\n                 * @property {?Object} userData - Arbitrary subscriber-defined object.\n                 */_this.raiseEvent("enter",{originalEvent:event.originalEvent});}else if(!event.buttonDownAny){inTo(_this,$.ButtonState.HOVER);}},focusHandler:function focusHandler(event){this.enterHandler(event);/**\n             * Raised when the Button element receives focus.\n             *\n             * @event focus\n             * @memberof OpenSeadragon.Button\n             * @type {object}\n             * @property {OpenSeadragon.Button} eventSource - A reference to the Button which raised the event.\n             * @property {Object} originalEvent - The original DOM event.\n             * @property {?Object} userData - Arbitrary subscriber-defined object.\n             */_this.raiseEvent("focus",{originalEvent:event.originalEvent});},exitHandler:function exitHandler(event){outTo(_this,$.ButtonState.GROUP);if(event.insideElementPressed){/**\n                 * Raised when the cursor leaves the Button element.\n                 *\n                 * @event exit\n                 * @memberof OpenSeadragon.Button\n                 * @type {object}\n                 * @property {OpenSeadragon.Button} eventSource - A reference to the Button which raised the event.\n                 * @property {Object} originalEvent - The original DOM event.\n                 * @property {?Object} userData - Arbitrary subscriber-defined object.\n                 */_this.raiseEvent("exit",{originalEvent:event.originalEvent});}},blurHandler:function blurHandler(event){this.exitHandler(event);/**\n             * Raised when the Button element loses focus.\n             *\n             * @event blur\n             * @memberof OpenSeadragon.Button\n             * @type {object}\n             * @property {OpenSeadragon.Button} eventSource - A reference to the Button which raised the event.\n             * @property {Object} originalEvent - The original DOM event.\n             * @property {?Object} userData - Arbitrary subscriber-defined object.\n             */_this.raiseEvent("blur",{originalEvent:event.originalEvent});},pressHandler:function pressHandler(event){inTo(_this,$.ButtonState.DOWN);/**\n             * Raised when a mouse button is pressed or touch occurs in the Button element.\n             *\n             * @event press\n             * @memberof OpenSeadragon.Button\n             * @type {object}\n             * @property {OpenSeadragon.Button} eventSource - A reference to the Button which raised the event.\n             * @property {Object} originalEvent - The original DOM event.\n             * @property {?Object} userData - Arbitrary subscriber-defined object.\n             */_this.raiseEvent("press",{originalEvent:event.originalEvent});},releaseHandler:function releaseHandler(event){if(event.insideElementPressed&&event.insideElementReleased){outTo(_this,$.ButtonState.HOVER);/**\n                 * Raised when the mouse button is released or touch ends in the Button element.\n                 *\n                 * @event release\n                 * @memberof OpenSeadragon.Button\n                 * @type {object}\n                 * @property {OpenSeadragon.Button} eventSource - A reference to the Button which raised the event.\n                 * @property {Object} originalEvent - The original DOM event.\n                 * @property {?Object} userData - Arbitrary subscriber-defined object.\n                 */_this.raiseEvent("release",{originalEvent:event.originalEvent});}else if(event.insideElementPressed){outTo(_this,$.ButtonState.GROUP);}else{inTo(_this,$.ButtonState.HOVER);}},clickHandler:function clickHandler(event){if(event.quick){/**\n                 * Raised when a mouse button is pressed and released or touch is initiated and ended in the Button element within the time and distance threshold.\n                 *\n                 * @event click\n                 * @memberof OpenSeadragon.Button\n                 * @type {object}\n                 * @property {OpenSeadragon.Button} eventSource - A reference to the Button which raised the event.\n                 * @property {Object} originalEvent - The original DOM event.\n                 * @property {?Object} userData - Arbitrary subscriber-defined object.\n                 */_this.raiseEvent("click",{originalEvent:event.originalEvent});}},keyHandler:function keyHandler(event){//console.log( "%s : handling key %s!", _this.tooltip, event.keyCode);\nif(13===event.keyCode){/***\n                 * Raised when a mouse button is pressed and released or touch is initiated and ended in the Button element within the time and distance threshold.\n                 *\n                 * @event click\n                 * @memberof OpenSeadragon.Button\n                 * @type {object}\n                 * @property {OpenSeadragon.Button} eventSource - A reference to the Button which raised the event.\n                 * @property {Object} originalEvent - The original DOM event.\n                 * @property {?Object} userData - Arbitrary subscriber-defined object.\n                 */_this.raiseEvent("click",{originalEvent:event.originalEvent});/***\n                 * Raised when the mouse button is released or touch ends in the Button element.\n                 *\n                 * @event release\n                 * @memberof OpenSeadragon.Button\n                 * @type {object}\n                 * @property {OpenSeadragon.Button} eventSource - A reference to the Button which raised the event.\n                 * @property {Object} originalEvent - The original DOM event.\n                 * @property {?Object} userData - Arbitrary subscriber-defined object.\n                 */_this.raiseEvent("release",{originalEvent:event.originalEvent});return false;}return true;}});outTo(this,$.ButtonState.REST);};$.extend($.Button.prototype,$.EventSource.prototype,/** @lends OpenSeadragon.Button.prototype */{/**\n     * TODO: Determine what this function is intended to do and if it\'s actually\n     * useful as an API point.\n     * @function\n     */notifyGroupEnter:function notifyGroupEnter(){inTo(this,$.ButtonState.GROUP);},/**\n     * TODO: Determine what this function is intended to do and if it\'s actually\n     * useful as an API point.\n     * @function\n     */notifyGroupExit:function notifyGroupExit(){outTo(this,$.ButtonState.REST);},/**\n     * @function\n     */disable:function disable(){this.notifyGroupExit();this.element.disabled=true;$.setElementOpacity(this.element,0.2,true);},/**\n     * @function\n     */enable:function enable(){this.element.disabled=false;$.setElementOpacity(this.element,1.0,true);this.notifyGroupEnter();}});function scheduleFade(button){$.requestAnimationFrame(function(){updateFade(button);});}function updateFade(button){var currentTime,deltaTime,opacity;if(button.shouldFade){currentTime=$.now();deltaTime=currentTime-button.fadeBeginTime;opacity=1.0-deltaTime/button.fadeLength;opacity=Math.min(1.0,opacity);opacity=Math.max(0.0,opacity);if(button.imgGroup){$.setElementOpacity(button.imgGroup,opacity,true);}if(opacity>0){// fade again\nscheduleFade(button);}}}function beginFading(button){button.shouldFade=true;button.fadeBeginTime=$.now()+button.fadeDelay;window.setTimeout(function(){scheduleFade(button);},button.fadeDelay);}function stopFading(button){button.shouldFade=false;if(button.imgGroup){$.setElementOpacity(button.imgGroup,1.0,true);}}function inTo(button,newState){if(button.element.disabled){return;}if(newState>=$.ButtonState.GROUP&&button.currentState==$.ButtonState.REST){stopFading(button);button.currentState=$.ButtonState.GROUP;}if(newState>=$.ButtonState.HOVER&&button.currentState==$.ButtonState.GROUP){if(button.imgHover){button.imgHover.style.visibility="";}button.currentState=$.ButtonState.HOVER;}if(newState>=$.ButtonState.DOWN&&button.currentState==$.ButtonState.HOVER){if(button.imgDown){button.imgDown.style.visibility="";}button.currentState=$.ButtonState.DOWN;}}function outTo(button,newState){if(button.element.disabled){return;}if(newState<=$.ButtonState.HOVER&&button.currentState==$.ButtonState.DOWN){if(button.imgDown){button.imgDown.style.visibility="hidden";}button.currentState=$.ButtonState.HOVER;}if(newState<=$.ButtonState.GROUP&&button.currentState==$.ButtonState.HOVER){if(button.imgHover){button.imgHover.style.visibility="hidden";}button.currentState=$.ButtonState.GROUP;}if(newState<=$.ButtonState.REST&&button.currentState==$.ButtonState.GROUP){beginFading(button);button.currentState=$.ButtonState.REST;}}})(OpenSeadragon);/*\n * OpenSeadragon - ButtonGroup\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n * @class ButtonGroup\n * @classdesc Manages events on groups of buttons.\n *\n * @memberof OpenSeadragon\n * @param {Object} options - A dictionary of settings applied against the entire group of buttons.\n * @param {Array} options.buttons Array of buttons\n * @param {Element} [options.element] Element to use as the container\n **/$.ButtonGroup=function(options){$.extend(true,this,{/**\n         * An array containing the buttons themselves.\n         * @member {Array} buttons\n         * @memberof OpenSeadragon.ButtonGroup#\n         */buttons:[],clickTimeThreshold:$.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:$.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},options);// copy the button elements  TODO: Why?\nvar buttons=this.buttons.concat([]),_this=this,i;/**\n     * The shared container for the buttons.\n     * @member {Element} element\n     * @memberof OpenSeadragon.ButtonGroup#\n     */this.element=options.element||$.makeNeutralElement("div");// TODO What if there IS an options.group specified?\nif(!options.group){this.label=$.makeNeutralElement("label");//TODO: support labels for ButtonGroups\n//this.label.innerHTML = this.labelText;\nthis.element.style.display="inline-block";this.element.appendChild(this.label);for(i=0;i<buttons.length;i++){this.element.appendChild(buttons[i].element);}}$.setElementTouchActionNone(this.element);/**\n     * Tracks mouse/touch/key events accross the group of buttons.\n     * @member {OpenSeadragon.MouseTracker} tracker\n     * @memberof OpenSeadragon.ButtonGroup#\n     */this.tracker=new $.MouseTracker({element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function enterHandler(event){var i;for(i=0;i<_this.buttons.length;i++){_this.buttons[i].notifyGroupEnter();}},exitHandler:function exitHandler(event){var i;if(!event.insideElementPressed){for(i=0;i<_this.buttons.length;i++){_this.buttons[i].notifyGroupExit();}}}});};/** @lends OpenSeadragon.ButtonGroup.prototype */$.ButtonGroup.prototype={/**\n     * TODO: Figure out why this is used on the public API and if a more useful\n     * api can be created.\n     * @function\n     * @private\n     */emulateEnter:function emulateEnter(){this.tracker.enterHandler({eventSource:this.tracker});},/**\n     * TODO: Figure out why this is used on the public API and if a more useful\n     * api can be created.\n     * @function\n     * @private\n     */emulateExit:function emulateExit(){this.tracker.exitHandler({eventSource:this.tracker});}};})(OpenSeadragon);/*\n * OpenSeadragon - Rect\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n * @class Rect\n * @classdesc A Rectangle is described by it top left coordinates (x, y), width,\n * height and degrees of rotation around (x, y).\n * Note that the coordinate system used is the one commonly used with images:\n * x increases when going to the right\n * y increases when going to the bottom\n * degrees increases clockwise with 0 being the horizontal\n *\n * The constructor normalizes the rectangle to always have 0 <= degrees < 90\n *\n * @memberof OpenSeadragon\n * @param {Number} [x=0] The vector component \'x\'.\n * @param {Number} [y=0] The vector component \'y\'.\n * @param {Number} [width=0] The vector component \'width\'.\n * @param {Number} [height=0] The vector component \'height\'.\n * @param {Number} [degrees=0] Rotation of the rectangle around (x,y) in degrees.\n */$.Rect=function(x,y,width,height,degrees){/**\n     * The vector component \'x\'.\n     * @member {Number} x\n     * @memberof OpenSeadragon.Rect#\n     */this.x=typeof x==="number"?x:0;/**\n     * The vector component \'y\'.\n     * @member {Number} y\n     * @memberof OpenSeadragon.Rect#\n     */this.y=typeof y==="number"?y:0;/**\n     * The vector component \'width\'.\n     * @member {Number} width\n     * @memberof OpenSeadragon.Rect#\n     */this.width=typeof width==="number"?width:0;/**\n     * The vector component \'height\'.\n     * @member {Number} height\n     * @memberof OpenSeadragon.Rect#\n     */this.height=typeof height==="number"?height:0;this.degrees=typeof degrees==="number"?degrees:0;// Normalizes the rectangle.\nthis.degrees=this.degrees%360;if(this.degrees<0){this.degrees+=360;}var newTopLeft,newWidth;if(this.degrees>=270){newTopLeft=this.getTopRight();this.x=newTopLeft.x;this.y=newTopLeft.y;newWidth=this.height;this.height=this.width;this.width=newWidth;this.degrees-=270;}else if(this.degrees>=180){newTopLeft=this.getBottomRight();this.x=newTopLeft.x;this.y=newTopLeft.y;this.degrees-=180;}else if(this.degrees>=90){newTopLeft=this.getBottomLeft();this.x=newTopLeft.x;this.y=newTopLeft.y;newWidth=this.height;this.height=this.width;this.width=newWidth;this.degrees-=90;}};/** @lends OpenSeadragon.Rect.prototype */$.Rect.prototype={/**\n     * @function\n     * @returns {OpenSeadragon.Rect} a duplicate of this Rect\n     */clone:function clone(){return new $.Rect(this.x,this.y,this.width,this.height,this.degrees);},/**\n     * The aspect ratio is simply the ratio of width to height.\n     * @function\n     * @returns {Number} The ratio of width to height.\n     */getAspectRatio:function getAspectRatio(){return this.width/this.height;},/**\n     * Provides the coordinates of the upper-left corner of the rectangle as a\n     * point.\n     * @function\n     * @returns {OpenSeadragon.Point} The coordinate of the upper-left corner of\n     *  the rectangle.\n     */getTopLeft:function getTopLeft(){return new $.Point(this.x,this.y);},/**\n     * Provides the coordinates of the bottom-right corner of the rectangle as a\n     * point.\n     * @function\n     * @returns {OpenSeadragon.Point} The coordinate of the bottom-right corner of\n     *  the rectangle.\n     */getBottomRight:function getBottomRight(){return new $.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft());},/**\n     * Provides the coordinates of the top-right corner of the rectangle as a\n     * point.\n     * @function\n     * @returns {OpenSeadragon.Point} The coordinate of the top-right corner of\n     *  the rectangle.\n     */getTopRight:function getTopRight(){return new $.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft());},/**\n     * Provides the coordinates of the bottom-left corner of the rectangle as a\n     * point.\n     * @function\n     * @returns {OpenSeadragon.Point} The coordinate of the bottom-left corner of\n     *  the rectangle.\n     */getBottomLeft:function getBottomLeft(){return new $.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft());},/**\n     * Computes the center of the rectangle.\n     * @function\n     * @returns {OpenSeadragon.Point} The center of the rectangle as represented\n     *  as represented by a 2-dimensional vector (x,y)\n     */getCenter:function getCenter(){return new $.Point(this.x+this.width/2.0,this.y+this.height/2.0).rotate(this.degrees,this.getTopLeft());},/**\n     * Returns the width and height component as a vector OpenSeadragon.Point\n     * @function\n     * @returns {OpenSeadragon.Point} The 2 dimensional vector representing the\n     *  the width and height of the rectangle.\n     */getSize:function getSize(){return new $.Point(this.width,this.height);},/**\n     * Determines if two Rectangles have equivalent components.\n     * @function\n     * @param {OpenSeadragon.Rect} rectangle The Rectangle to compare to.\n     * @return {Boolean} \'true\' if all components are equal, otherwise \'false\'.\n     */equals:function equals(other){return other instanceof $.Rect&&this.x===other.x&&this.y===other.y&&this.width===other.width&&this.height===other.height&&this.degrees===other.degrees;},/**\n    * Multiply all dimensions (except degrees) in this Rect by a factor and\n    * return a new Rect.\n    * @function\n    * @param {Number} factor The factor to multiply vector components.\n    * @returns {OpenSeadragon.Rect} A new rect representing the multiplication\n    *  of the vector components by the factor\n    */times:function times(factor){return new $.Rect(this.x*factor,this.y*factor,this.width*factor,this.height*factor,this.degrees);},/**\n    * Translate/move this Rect by a vector and return new Rect.\n    * @function\n    * @param {OpenSeadragon.Point} delta The translation vector.\n    * @returns {OpenSeadragon.Rect} A new rect with altered position\n    */translate:function translate(delta){return new $.Rect(this.x+delta.x,this.y+delta.y,this.width,this.height,this.degrees);},/**\n     * Returns the smallest rectangle that will contain this and the given\n     * rectangle bounding boxes.\n     * @param {OpenSeadragon.Rect} rect\n     * @return {OpenSeadragon.Rect} The new rectangle.\n     */union:function union(rect){var thisBoundingBox=this.getBoundingBox();var otherBoundingBox=rect.getBoundingBox();var left=Math.min(thisBoundingBox.x,otherBoundingBox.x);var top=Math.min(thisBoundingBox.y,otherBoundingBox.y);var right=Math.max(thisBoundingBox.x+thisBoundingBox.width,otherBoundingBox.x+otherBoundingBox.width);var bottom=Math.max(thisBoundingBox.y+thisBoundingBox.height,otherBoundingBox.y+otherBoundingBox.height);return new $.Rect(left,top,right-left,bottom-top);},/**\n     * Rotates a rectangle around a point.\n     * @function\n     * @param {Number} degrees The angle in degrees to rotate.\n     * @param {OpenSeadragon.Point} pivot The point about which to rotate.\n     * Defaults to the center of the rectangle.\n     * @return {OpenSeadragon.Rect}\n     */rotate:function rotate(degrees,pivot){degrees=degrees%360;if(degrees===0){return this.clone();}if(degrees<0){degrees+=360;}pivot=pivot||this.getCenter();var newTopLeft=this.getTopLeft().rotate(degrees,pivot);var newTopRight=this.getTopRight().rotate(degrees,pivot);var diff=newTopRight.minus(newTopLeft);var radians=Math.atan(diff.y/diff.x);if(diff.x<0){radians+=Math.PI;}else if(diff.y<0){radians+=2*Math.PI;}return new $.Rect(newTopLeft.x,newTopLeft.y,this.width,this.height,radians/Math.PI*180);},/**\n     * Retrieves the smallest horizontal (degrees=0) rectangle which contains\n     * this rectangle.\n     * @returns {OpenSeadragon.Rect}\n     */getBoundingBox:function getBoundingBox(){if(this.degrees===0){return this.clone();}var topLeft=this.getTopLeft();var topRight=this.getTopRight();var bottomLeft=this.getBottomLeft();var bottomRight=this.getBottomRight();var minX=Math.min(topLeft.x,topRight.x,bottomLeft.x,bottomRight.x);var maxX=Math.max(topLeft.x,topRight.x,bottomLeft.x,bottomRight.x);var minY=Math.min(topLeft.y,topRight.y,bottomLeft.y,bottomRight.y);var maxY=Math.max(topLeft.y,topRight.y,bottomLeft.y,bottomRight.y);return new $.Rect(minX,minY,maxX-minX,maxY-minY);},/**\n     * Provides a string representation of the rectangle which is useful for\n     * debugging.\n     * @function\n     * @returns {String} A string representation of the rectangle.\n     */toString:function toString(){return"["+Math.round(this.x*100)/100+","+Math.round(this.y*100)/100+","+Math.round(this.width*100)/100+"x"+Math.round(this.height*100)/100+","+Math.round(this.degrees*100)/100+"deg"+"]";}};})(OpenSeadragon);/*\n * OpenSeadragon - ReferenceStrip\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){// dictionary from id to private properties\nvar THIS={};/**\n *  The CollectionDrawer is a reimplementation if the Drawer API that\n *  focuses on allowing a viewport to be redefined as a collection\n *  of smaller viewports, defined by a clear number of rows and / or\n *  columns of which each item in the matrix of viewports has its own\n *  source.\n *\n *  This idea is a reexpression of the idea of dzi collections\n *  which allows a clearer algorithm to reuse the tile sources already\n *  supported by OpenSeadragon, in heterogenious or homogenious\n *  sequences just like mixed groups already supported by the viewer\n *  for the purpose of image sequnces.\n *\n *  TODO:   The difficult part of this feature is figuring out how to express\n *          this functionality as a combination of the functionality already\n *          provided by Drawer, Viewport, TileSource, and Navigator.  It may\n *          require better abstraction at those points in order to effeciently\n *          reuse those paradigms.\n *//**\n * @class ReferenceStrip\n * @memberof OpenSeadragon\n * @param {Object} options\n */$.ReferenceStrip=function(options){var _this=this,viewer=options.viewer,viewerSize=$.getElementSize(viewer.element),element,style,i;//We may need to create a new element and id if they did not\n//provide the id for the existing element\nif(!options.id){options.id=\'referencestrip-\'+$.now();this.element=$.makeNeutralElement("div");this.element.id=options.id;this.element.className=\'referencestrip\';}options=$.extend(true,{sizeRatio:$.DEFAULT_SETTINGS.referenceStripSizeRatio,position:$.DEFAULT_SETTINGS.referenceStripPosition,scroll:$.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:$.DEFAULT_SETTINGS.clickTimeThreshold},options,{//required overrides\nelement:this.element,//These need to be overridden to prevent recursion since\n//the navigator is a viewer and a viewer has a navigator\nshowNavigator:false,mouseNavEnabled:false,showNavigationControl:false,showSequenceControl:false});$.extend(this,options);//Private state properties\nTHIS[this.id]={"animating":false};this.minPixelRatio=this.viewer.minPixelRatio;style=this.element.style;style.marginTop=\'0px\';style.marginRight=\'0px\';style.marginBottom=\'0px\';style.marginLeft=\'0px\';style.left=\'0px\';style.bottom=\'0px\';style.border=\'0px\';style.background=\'#000\';style.position=\'relative\';$.setElementTouchActionNone(this.element);$.setElementOpacity(this.element,0.8);this.viewer=viewer;this.innerTracker=new $.MouseTracker({element:this.element,dragHandler:$.delegate(this,onStripDrag),scrollHandler:$.delegate(this,onStripScroll),enterHandler:$.delegate(this,onStripEnter),exitHandler:$.delegate(this,onStripExit),keyDownHandler:$.delegate(this,onKeyDown),keyHandler:$.delegate(this,onKeyPress)});//Controls the position and orientation of the reference strip and sets the\n//appropriate width and height\nif(options.width&&options.height){this.element.style.width=options.width+\'px\';this.element.style.height=options.height+\'px\';viewer.addControl(this.element,{anchor:$.ControlAnchor.BOTTOM_LEFT});}else{if("horizontal"==options.scroll){this.element.style.width=viewerSize.x*options.sizeRatio*viewer.tileSources.length+12*viewer.tileSources.length+\'px\';this.element.style.height=viewerSize.y*options.sizeRatio+\'px\';viewer.addControl(this.element,{anchor:$.ControlAnchor.BOTTOM_LEFT});}else{this.element.style.height=viewerSize.y*options.sizeRatio*viewer.tileSources.length+12*viewer.tileSources.length+\'px\';this.element.style.width=viewerSize.x*options.sizeRatio+\'px\';viewer.addControl(this.element,{anchor:$.ControlAnchor.TOP_LEFT});}}this.panelWidth=viewerSize.x*this.sizeRatio+8;this.panelHeight=viewerSize.y*this.sizeRatio+8;this.panels=[];/*jshint loopfunc:true*/for(i=0;i<viewer.tileSources.length;i++){element=$.makeNeutralElement(\'div\');element.id=this.element.id+"-"+i;element.style.width=_this.panelWidth+\'px\';element.style.height=_this.panelHeight+\'px\';element.style.display=\'inline\';element.style.float=\'left\';//Webkit\nelement.style.cssFloat=\'left\';//Firefox\nelement.style.styleFloat=\'left\';//IE\nelement.style.padding=\'2px\';$.setElementTouchActionNone(element);element.innerTracker=new $.MouseTracker({element:element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,pressHandler:function pressHandler(event){event.eventSource.dragging=$.now();},releaseHandler:function releaseHandler(event){var tracker=event.eventSource,id=tracker.element.id,page=Number(id.split(\'-\')[2]),now=$.now();if(event.insideElementPressed&&event.insideElementReleased&&tracker.dragging&&now-tracker.dragging<tracker.clickTimeThreshold){tracker.dragging=null;viewer.goToPage(page);}}});this.element.appendChild(element);element.activePanel=false;this.panels.push(element);}loadPanels(this,this.scroll==\'vertical\'?viewerSize.y:viewerSize.x,0);this.setFocus(0);};$.extend($.ReferenceStrip.prototype,$.EventSource.prototype,$.Viewer.prototype,/** @lends OpenSeadragon.ReferenceStrip.prototype */{/**\n     * @function\n     */setFocus:function setFocus(page){var element=$.getElement(this.element.id+\'-\'+page),viewerSize=$.getElementSize(this.viewer.canvas),scrollWidth=Number(this.element.style.width.replace(\'px\',\'\')),scrollHeight=Number(this.element.style.height.replace(\'px\',\'\')),offsetLeft=-Number(this.element.style.marginLeft.replace(\'px\',\'\')),offsetTop=-Number(this.element.style.marginTop.replace(\'px\',\'\')),offset;if(this.currentSelected!==element){if(this.currentSelected){this.currentSelected.style.background=\'#000\';}this.currentSelected=element;this.currentSelected.style.background=\'#999\';if(\'horizontal\'==this.scroll){//right left\noffset=Number(page)*(this.panelWidth+3);if(offset>offsetLeft+viewerSize.x-this.panelWidth){offset=Math.min(offset,scrollWidth-viewerSize.x);this.element.style.marginLeft=-offset+\'px\';loadPanels(this,viewerSize.x,-offset);}else if(offset<offsetLeft){offset=Math.max(0,offset-viewerSize.x/2);this.element.style.marginLeft=-offset+\'px\';loadPanels(this,viewerSize.x,-offset);}}else{offset=Number(page)*(this.panelHeight+3);if(offset>offsetTop+viewerSize.y-this.panelHeight){offset=Math.min(offset,scrollHeight-viewerSize.y);this.element.style.marginTop=-offset+\'px\';loadPanels(this,viewerSize.y,-offset);}else if(offset<offsetTop){offset=Math.max(0,offset-viewerSize.y/2);this.element.style.marginTop=-offset+\'px\';loadPanels(this,viewerSize.y,-offset);}}this.currentPage=page;$.getElement(element.id+\'-displayregion\').focus();onStripEnter.call(this,{eventSource:this.innerTracker});}},/**\n     * @function\n     */update:function update(){if(THIS[this.id].animating){$.console.log(\'image reference strip update\');return true;}return false;},// Overrides Viewer.destroy\ndestroy:function destroy(){if(this.element){this.element.parentNode.removeChild(this.element);}}});/**\n * @private\n * @inner\n * @function\n */function onStripDrag(event){var offsetLeft=Number(this.element.style.marginLeft.replace(\'px\',\'\')),offsetTop=Number(this.element.style.marginTop.replace(\'px\',\'\')),scrollWidth=Number(this.element.style.width.replace(\'px\',\'\')),scrollHeight=Number(this.element.style.height.replace(\'px\',\'\')),viewerSize=$.getElementSize(this.viewer.canvas);this.dragging=true;if(this.element){if(\'horizontal\'==this.scroll){if(-event.delta.x>0){//forward\nif(offsetLeft>-(scrollWidth-viewerSize.x)){this.element.style.marginLeft=offsetLeft+event.delta.x*2+\'px\';loadPanels(this,viewerSize.x,offsetLeft+event.delta.x*2);}}else if(-event.delta.x<0){//reverse\nif(offsetLeft<0){this.element.style.marginLeft=offsetLeft+event.delta.x*2+\'px\';loadPanels(this,viewerSize.x,offsetLeft+event.delta.x*2);}}}else{if(-event.delta.y>0){//forward\nif(offsetTop>-(scrollHeight-viewerSize.y)){this.element.style.marginTop=offsetTop+event.delta.y*2+\'px\';loadPanels(this,viewerSize.y,offsetTop+event.delta.y*2);}}else if(-event.delta.y<0){//reverse\nif(offsetTop<0){this.element.style.marginTop=offsetTop+event.delta.y*2+\'px\';loadPanels(this,viewerSize.y,offsetTop+event.delta.y*2);}}}}return false;}/**\n * @private\n * @inner\n * @function\n */function onStripScroll(event){var offsetLeft=Number(this.element.style.marginLeft.replace(\'px\',\'\')),offsetTop=Number(this.element.style.marginTop.replace(\'px\',\'\')),scrollWidth=Number(this.element.style.width.replace(\'px\',\'\')),scrollHeight=Number(this.element.style.height.replace(\'px\',\'\')),viewerSize=$.getElementSize(this.viewer.canvas);if(this.element){if(\'horizontal\'==this.scroll){if(event.scroll>0){//forward\nif(offsetLeft>-(scrollWidth-viewerSize.x)){this.element.style.marginLeft=offsetLeft-event.scroll*60+\'px\';loadPanels(this,viewerSize.x,offsetLeft-event.scroll*60);}}else if(event.scroll<0){//reverse\nif(offsetLeft<0){this.element.style.marginLeft=offsetLeft-event.scroll*60+\'px\';loadPanels(this,viewerSize.x,offsetLeft-event.scroll*60);}}}else{if(event.scroll<0){//scroll up\nif(offsetTop>viewerSize.y-scrollHeight){this.element.style.marginTop=offsetTop+event.scroll*60+\'px\';loadPanels(this,viewerSize.y,offsetTop+event.scroll*60);}}else if(event.scroll>0){//scroll dowm\nif(offsetTop<0){this.element.style.marginTop=offsetTop+event.scroll*60+\'px\';loadPanels(this,viewerSize.y,offsetTop+event.scroll*60);}}}}//cancels event\nreturn false;}function loadPanels(strip,viewerSize,scroll){var panelSize,activePanelsStart,activePanelsEnd,miniViewer,style,i,element;if(\'horizontal\'==strip.scroll){panelSize=strip.panelWidth;}else{panelSize=strip.panelHeight;}activePanelsStart=Math.ceil(viewerSize/panelSize)+5;activePanelsEnd=Math.ceil((Math.abs(scroll)+viewerSize)/panelSize)+1;activePanelsStart=activePanelsEnd-activePanelsStart;activePanelsStart=activePanelsStart<0?0:activePanelsStart;for(i=activePanelsStart;i<activePanelsEnd&&i<strip.panels.length;i++){element=strip.panels[i];if(!element.activePanel){miniViewer=new $.Viewer({id:element.id,tileSources:[strip.viewer.tileSources[i]],element:element,navigatorSizeRatio:strip.sizeRatio,showNavigator:false,mouseNavEnabled:false,showNavigationControl:false,showSequenceControl:false,immediateRender:true,blendTime:0,animationTime:0});miniViewer.displayRegion=$.makeNeutralElement("div");miniViewer.displayRegion.id=element.id+\'-displayregion\';miniViewer.displayRegion.className=\'displayregion\';style=miniViewer.displayRegion.style;style.position=\'relative\';style.top=\'0px\';style.left=\'0px\';style.fontSize=\'0px\';style.overflow=\'hidden\';style.float=\'left\';//Webkit\nstyle.cssFloat=\'left\';//Firefox\nstyle.styleFloat=\'left\';//IE\nstyle.zIndex=999999999;style.cursor=\'default\';style.width=strip.panelWidth-4+\'px\';style.height=strip.panelHeight-4+\'px\';// TODO: What is this for? Future keyboard navigation support?\nminiViewer.displayRegion.innerTracker=new $.MouseTracker({element:miniViewer.displayRegion,startDisabled:true});element.getElementsByTagName(\'div\')[0].appendChild(miniViewer.displayRegion);element.activePanel=true;}}}/**\n * @private\n * @inner\n * @function\n */function onStripEnter(event){var element=event.eventSource.element;//$.setElementOpacity(element, 0.8);\n//element.style.border = \'1px solid #555\';\n//element.style.background = \'#000\';\nif(\'horizontal\'==this.scroll){//element.style.paddingTop = "0px";\nelement.style.marginBottom="0px";}else{//element.style.paddingRight = "0px";\nelement.style.marginLeft="0px";}return false;}/**\n * @private\n * @inner\n * @function\n */function onStripExit(event){var element=event.eventSource.element;if(\'horizontal\'==this.scroll){//element.style.paddingTop = "10px";\nelement.style.marginBottom="-"+$.getElementSize(element).y/2+"px";}else{//element.style.paddingRight = "10px";\nelement.style.marginLeft="-"+$.getElementSize(element).x/2+"px";}return false;}/**\n * @private\n * @inner\n * @function\n */function onKeyDown(event){//console.log( event.keyCode );\nif(!event.preventDefaultAction&&!event.ctrl&&!event.alt&&!event.meta){switch(event.keyCode){case 38://up arrow\nonStripScroll.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null});return false;case 40://down arrow\nonStripScroll.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null});return false;case 37://left arrow\nonStripScroll.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null});return false;case 39://right arrow\nonStripScroll.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null});return false;default://console.log( \'navigator keycode %s\', event.keyCode );\nreturn true;}}else{return true;}}/**\n * @private\n * @inner\n * @function\n */function onKeyPress(event){//console.log( event.keyCode );\nif(!event.preventDefaultAction&&!event.ctrl&&!event.alt&&!event.meta){switch(event.keyCode){case 61://=|+\nonStripScroll.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null});return false;case 45://-|_\nonStripScroll.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null});return false;case 48://0|)\ncase 119://w\ncase 87://W\nonStripScroll.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null});return false;case 115://s\ncase 83://S\nonStripScroll.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null});return false;case 97://a\nonStripScroll.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null});return false;case 100://d\nonStripScroll.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null});return false;default://console.log( \'navigator keycode %s\', event.keyCode );\nreturn true;}}else{return true;}}})(OpenSeadragon);/*\n * OpenSeadragon - DisplayRect\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n * @class DisplayRect\n * @classdesc A display rectangle is very similar to {@link OpenSeadragon.Rect} but adds two\n * fields, \'minLevel\' and \'maxLevel\' which denote the supported zoom levels\n * for this rectangle.\n *\n * @memberof OpenSeadragon\n * @extends OpenSeadragon.Rect\n * @param {Number} x The vector component \'x\'.\n * @param {Number} y The vector component \'y\'.\n * @param {Number} width The vector component \'height\'.\n * @param {Number} height The vector component \'width\'.\n * @param {Number} minLevel The lowest zoom level supported.\n * @param {Number} maxLevel The highest zoom level supported.\n */$.DisplayRect=function(x,y,width,height,minLevel,maxLevel){$.Rect.apply(this,[x,y,width,height]);/**\n     * The lowest zoom level supported.\n     * @member {Number} minLevel\n     * @memberof OpenSeadragon.DisplayRect#\n     */this.minLevel=minLevel;/**\n     * The highest zoom level supported.\n     * @member {Number} maxLevel\n     * @memberof OpenSeadragon.DisplayRect#\n     */this.maxLevel=maxLevel;};$.extend($.DisplayRect.prototype,$.Rect.prototype);})(OpenSeadragon);/*\n * OpenSeadragon - Spring\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n * @class Spring\n * @memberof OpenSeadragon\n * @param {Object} options - Spring configuration settings.\n * @param {Number} options.springStiffness - Spring stiffness. Must be greater than zero.\n * The closer to zero, the closer to linear animation.\n * @param {Number} options.animationTime - Animation duration per spring, in seconds.\n * Must be zero or greater.\n * @param {Number} [options.initial=0] - Initial value of spring.\n * @param {Boolean} [options.exponential=false] - Whether this spring represents\n * an exponential scale (such as zoom) and should be animated accordingly. Note that\n * exponential springs must have non-zero values.\n */$.Spring=function(options){var args=arguments;if((typeof options===\'undefined\'?\'undefined\':_typeof(options))!=\'object\'){//allows backward compatible use of ( initialValue, config ) as\n//constructor parameters\noptions={initial:args.length&&typeof args[0]=="number"?args[0]:undefined,/**\n             * Spring stiffness.\n             * @member {Number} springStiffness\n             * @memberof OpenSeadragon.Spring#\n             */springStiffness:args.length>1?args[1].springStiffness:5.0,/**\n             * Animation duration per spring.\n             * @member {Number} animationTime\n             * @memberof OpenSeadragon.Spring#\n             */animationTime:args.length>1?args[1].animationTime:1.5};}$.console.assert(typeof options.springStiffness==="number"&&options.springStiffness!==0,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number");$.console.assert(typeof options.animationTime==="number"&&options.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0");if(options.exponential){this._exponential=true;delete options.exponential;}$.extend(true,this,options);/**\n     * @member {Object} current\n     * @memberof OpenSeadragon.Spring#\n     * @property {Number} value\n     * @property {Number} time\n     */this.current={value:typeof this.initial=="number"?this.initial:this._exponential?0:1,time:$.now()// always work in milliseconds\n};$.console.assert(!this._exponential||this.current.value!==0,"[OpenSeadragon.Spring] value must be non-zero for exponential springs");/**\n     * @member {Object} start\n     * @memberof OpenSeadragon.Spring#\n     * @property {Number} value\n     * @property {Number} time\n     */this.start={value:this.current.value,time:this.current.time};/**\n     * @member {Object} target\n     * @memberof OpenSeadragon.Spring#\n     * @property {Number} value\n     * @property {Number} time\n     */this.target={value:this.current.value,time:this.current.time};if(this._exponential){this.start._logValue=Math.log(this.start.value);this.target._logValue=Math.log(this.target.value);this.current._logValue=Math.log(this.current.value);}};/** @lends OpenSeadragon.Spring.prototype */$.Spring.prototype={/**\n     * @function\n     * @param {Number} target\n     */resetTo:function resetTo(target){$.console.assert(!this._exponential||target!==0,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs");this.start.value=this.target.value=this.current.value=target;this.start.time=this.target.time=this.current.time=$.now();if(this._exponential){this.start._logValue=Math.log(this.start.value);this.target._logValue=Math.log(this.target.value);this.current._logValue=Math.log(this.current.value);}},/**\n     * @function\n     * @param {Number} target\n     */springTo:function springTo(target){$.console.assert(!this._exponential||target!==0,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs");this.start.value=this.current.value;this.start.time=this.current.time;this.target.value=target;this.target.time=this.start.time+1000*this.animationTime;if(this._exponential){this.start._logValue=Math.log(this.start.value);this.target._logValue=Math.log(this.target.value);}},/**\n     * @function\n     * @param {Number} delta\n     */shiftBy:function shiftBy(delta){this.start.value+=delta;this.target.value+=delta;if(this._exponential){$.console.assert(this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs");this.start._logValue=Math.log(this.start.value);this.target._logValue=Math.log(this.target.value);}},setExponential:function setExponential(value){this._exponential=value;if(this._exponential){$.console.assert(this.current.value!==0&&this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs");this.start._logValue=Math.log(this.start.value);this.target._logValue=Math.log(this.target.value);this.current._logValue=Math.log(this.current.value);}},/**\n     * @function\n     */update:function update(){this.current.time=$.now();var startValue,targetValue;if(this._exponential){startValue=this.start._logValue;targetValue=this.target._logValue;}else{startValue=this.start.value;targetValue=this.target.value;}var currentValue=this.current.time>=this.target.time?targetValue:startValue+(targetValue-startValue)*transform(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time));if(this._exponential){this.current.value=Math.exp(currentValue);}else{this.current.value=currentValue;}}};/**\n * @private\n */function transform(stiffness,x){return(1.0-Math.exp(stiffness*-x))/(1.0-Math.exp(-stiffness));}})(OpenSeadragon);/*\n * OpenSeadragon - ImageLoader\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){// private class\nfunction ImageJob(options){$.extend(true,this,{timeout:$.DEFAULT_SETTINGS.timeout,jobId:null},options);/**\n     * Image object which will contain downloaded image.\n     * @member {Image} image\n     * @memberof OpenSeadragon.ImageJob#\n     */this.image=null;}ImageJob.prototype={errorMsg:null,start:function start(){var _this=this;this.image=new Image();if(this.crossOriginPolicy!==false){this.image.crossOrigin=this.crossOriginPolicy;}this.image.onload=function(){_this.finish(true);};this.image.onabort=this.image.onerror=function(){_this.errorMsg="Image load aborted";_this.finish(false);};this.jobId=window.setTimeout(function(){_this.errorMsg="Image load exceeded timeout";_this.finish(false);},this.timeout);this.image.src=this.src;},finish:function finish(successful){this.image.onload=this.image.onerror=this.image.onabort=null;if(!successful){this.image=null;}if(this.jobId){window.clearTimeout(this.jobId);}this.callback(this);}};/**\n * @class ImageLoader\n * @memberof OpenSeadragon\n * @classdesc Handles downloading of a set of images using asynchronous queue pattern.\n * You generally won\'t have to interact with the ImageLoader directly.\n * @param {Object} options - Options for this ImageLoader.\n * @param {Number} [options.jobLimit] - The number of concurrent image requests. See imageLoaderLimit in {@link OpenSeadragon.Options} for details.\n */$.ImageLoader=function(options){$.extend(true,this,{jobLimit:$.DEFAULT_SETTINGS.imageLoaderLimit,jobQueue:[],jobsInProgress:0},options);};/** @lends OpenSeadragon.ImageLoader.prototype */$.ImageLoader.prototype={/**\n     * Add an unloaded image to the loader queue.\n     * @method\n     * @param {String} src - URL of image to download.\n     * @param {String} crossOriginPolicy - CORS policy to use for downloads\n     * @param {Function} callback - Called once image has been downloaded.\n     */addJob:function addJob(options){var _this=this,complete=function complete(job){completeJob(_this,job,options.callback);},jobOptions={src:options.src,crossOriginPolicy:options.crossOriginPolicy,callback:complete,abort:options.abort},newJob=new ImageJob(jobOptions);if(!this.jobLimit||this.jobsInProgress<this.jobLimit){newJob.start();this.jobsInProgress++;}else{this.jobQueue.push(newJob);}},/**\n     * Clear any unstarted image loading jobs from the queue.\n     * @method\n     */clear:function clear(){for(var i=0;i<this.jobQueue.length;i++){var job=this.jobQueue[i];if(typeof job.abort==="function"){job.abort();}}this.jobQueue=[];}};/**\n * Cleans up ImageJob once completed.\n * @method\n * @private\n * @param loader - ImageLoader used to start job.\n * @param job - The ImageJob that has completed.\n * @param callback - Called once cleanup is finished.\n */function completeJob(loader,job,callback){var nextJob;loader.jobsInProgress--;if((!loader.jobLimit||loader.jobsInProgress<loader.jobLimit)&&loader.jobQueue.length>0){nextJob=loader.jobQueue.shift();nextJob.start();loader.jobsInProgress++;}callback(job.image,job.errorMsg);}})(OpenSeadragon);/*\n * OpenSeadragon - Tile\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n * @class Tile\n * @memberof OpenSeadragon\n * @param {Number} level The zoom level this tile belongs to.\n * @param {Number} x The vector component \'x\'.\n * @param {Number} y The vector component \'y\'.\n * @param {OpenSeadragon.Point} bounds Where this tile fits, in normalized\n *      coordinates.\n * @param {Boolean} exists Is this tile a part of a sparse image? ( Also has\n *      this tile failed to load? )\n * @param {String} url The URL of this tile\'s image.\n * @param {CanvasRenderingContext2D} context2D The context2D of this tile if it\n * is provided directly by the tile source.\n */$.Tile=function(level,x,y,bounds,exists,url,context2D){/**\n     * The zoom level this tile belongs to.\n     * @member {Number} level\n     * @memberof OpenSeadragon.Tile#\n     */this.level=level;/**\n     * The vector component \'x\'.\n     * @member {Number} x\n     * @memberof OpenSeadragon.Tile#\n     */this.x=x;/**\n     * The vector component \'y\'.\n     * @member {Number} y\n     * @memberof OpenSeadragon.Tile#\n     */this.y=y;/**\n     * Where this tile fits, in normalized coordinates\n     * @member {OpenSeadragon.Rect} bounds\n     * @memberof OpenSeadragon.Tile#\n     */this.bounds=bounds;/**\n     * Is this tile a part of a sparse image? Also has this tile failed to load?\n     * @member {Boolean} exists\n     * @memberof OpenSeadragon.Tile#\n     */this.exists=exists;/**\n     * The URL of this tile\'s image.\n     * @member {String} url\n     * @memberof OpenSeadragon.Tile#\n     */this.url=url;/**\n     * The context2D of this tile if it is provided directly by the tile source.\n     * @member {CanvasRenderingContext2D} context2D\n     * @memberOf OpenSeadragon.Tile#\n     */this.context2D=context2D;/**\n     * Is this tile loaded?\n     * @member {Boolean} loaded\n     * @memberof OpenSeadragon.Tile#\n     */this.loaded=false;/**\n     * Is this tile loading?\n     * @member {Boolean} loading\n     * @memberof OpenSeadragon.Tile#\n     */this.loading=false;/**\n     * The HTML div element for this tile\n     * @member {Element} element\n     * @memberof OpenSeadragon.Tile#\n     */this.element=null;/**\n     * The HTML img element for this tile.\n     * @member {Element} imgElement\n     * @memberof OpenSeadragon.Tile#\n     */this.imgElement=null;/**\n     * The Image object for this tile.\n     * @member {Object} image\n     * @memberof OpenSeadragon.Tile#\n     */this.image=null;/**\n     * The alias of this.element.style.\n     * @member {String} style\n     * @memberof OpenSeadragon.Tile#\n     */this.style=null;/**\n     * This tile\'s position on screen, in pixels.\n     * @member {OpenSeadragon.Point} position\n     * @memberof OpenSeadragon.Tile#\n     */this.position=null;/**\n     * This tile\'s size on screen, in pixels.\n     * @member {OpenSeadragon.Point} size\n     * @memberof OpenSeadragon.Tile#\n     */this.size=null;/**\n     * The start time of this tile\'s blending.\n     * @member {Number} blendStart\n     * @memberof OpenSeadragon.Tile#\n     */this.blendStart=null;/**\n     * The current opacity this tile should be.\n     * @member {Number} opacity\n     * @memberof OpenSeadragon.Tile#\n     */this.opacity=null;/**\n     * The distance of this tile to the viewport center.\n     * @member {Number} distance\n     * @memberof OpenSeadragon.Tile#\n     */this.distance=null;/**\n     * The visibility score of this tile.\n     * @member {Number} visibility\n     * @memberof OpenSeadragon.Tile#\n     */this.visibility=null;/**\n     * Whether this tile is currently being drawn.\n     * @member {Boolean} beingDrawn\n     * @memberof OpenSeadragon.Tile#\n     */this.beingDrawn=false;/**\n     * Timestamp the tile was last touched.\n     * @member {Number} lastTouchTime\n     * @memberof OpenSeadragon.Tile#\n     */this.lastTouchTime=0;};/** @lends OpenSeadragon.Tile.prototype */$.Tile.prototype={/**\n     * Provides a string representation of this tiles level and (x,y)\n     * components.\n     * @function\n     * @returns {String}\n     */toString:function toString(){return this.level+"/"+this.x+"_"+this.y;},/**\n     * Renders the tile in an html container.\n     * @function\n     * @param {Element} container\n     */drawHTML:function drawHTML(container){if(!this.cacheImageRecord){$.console.warn(\'[Tile.drawHTML] attempting to draw tile %s when it\\\'s not cached\',this.toString());return;}if(!this.loaded){$.console.warn("Attempting to draw tile %s when it\'s not yet loaded.",this.toString());return;}//EXPERIMENTAL - trying to figure out how to scale the container\n//               content during animation of the container size.\nif(!this.element){this.element=$.makeNeutralElement("div");this.imgElement=this.cacheImageRecord.getImage().cloneNode();this.imgElement.style.msInterpolationMode="nearest-neighbor";this.imgElement.style.width="100%";this.imgElement.style.height="100%";this.style=this.element.style;this.style.position="absolute";}if(this.element.parentNode!=container){container.appendChild(this.element);}if(this.imgElement.parentNode!=this.element){this.element.appendChild(this.imgElement);}this.style.top=this.position.y+"px";this.style.left=this.position.x+"px";this.style.height=this.size.y+"px";this.style.width=this.size.x+"px";$.setElementOpacity(this.element,this.opacity);},/**\n     * Renders the tile in a canvas-based context.\n     * @function\n     * @param {Canvas} context\n     * @param {Function} drawingHandler - Method for firing the drawing event.\n     * drawingHandler({context, tile, rendered})\n     * where <code>rendered</code> is the context with the pre-drawn image.\n     * @param {Number} [scale=1] - Apply a scale to position and size\n     * @param {OpenSeadragon.Point} [translate] - A translation vector\n     */drawCanvas:function drawCanvas(context,drawingHandler,scale,translate){var position=this.position.times($.pixelDensityRatio),size=this.size.times($.pixelDensityRatio),rendered;if(!this.context2D&&!this.cacheImageRecord){$.console.warn(\'[Tile.drawCanvas] attempting to draw tile %s when it\\\'s not cached\',this.toString());return;}rendered=this.context2D||this.cacheImageRecord.getRenderedContext();if(!this.loaded||!rendered){$.console.warn("Attempting to draw tile %s when it\'s not yet loaded.",this.toString());return;}context.save();context.globalAlpha=this.opacity;//if we are supposed to be rendering fully opaque rectangle,\n//ie its done fading or fading is turned off, and if we are drawing\n//an image with an alpha channel, then the only way\n//to avoid seeing the tile underneath is to clear the rectangle\nif(context.globalAlpha===1&&(this.context2D||this.url.match(\'.png\'))){//clearing only the inside of the rectangle occupied\n//by the png prevents edge flikering\ncontext.clearRect(position.x+1,position.y+1,size.x-2,size.y-2);}// This gives the application a chance to make image manipulation\n// changes as we are rendering the image\ndrawingHandler({context:context,tile:this,rendered:rendered});if(typeof scale===\'number\'&&scale!==1){// draw tile at a different scale\nposition=position.times(scale);size=size.times(scale);}if(translate instanceof $.Point){// shift tile position slightly\nposition=position.plus(translate);}context.drawImage(rendered.canvas,0,0,rendered.canvas.width,rendered.canvas.height,position.x,position.y,size.x,size.y);context.restore();},/**\n     * Get the ratio between current and original size.\n     * @function\n     * @return {Float}\n     */getScaleForEdgeSmoothing:function getScaleForEdgeSmoothing(){if(!this.cacheImageRecord){$.console.warn(\'[Tile.drawCanvas] attempting to get tile scale %s when tile\\\'s not cached\',this.toString());return 1;}var rendered=this.cacheImageRecord.getRenderedContext();return rendered.canvas.width/this.size.times($.pixelDensityRatio).x;},/**\n     * Get a translation vector that when applied to the tile position produces integer coordinates.\n     * Needed to avoid swimming and twitching.\n     * @function\n     * @param {Number} [scale=1] - Scale to be applied to position.\n     * @return {OpenSeadragon.Point}\n     */getTranslationForEdgeSmoothing:function getTranslationForEdgeSmoothing(scale,canvasSize,sketchCanvasSize){// The translation vector must have positive values, otherwise the image goes a bit off\n// the sketch canvas to the top and left and we must use negative coordinates to repaint it\n// to the main canvas. In that case, some browsers throw:\n// INDEX_SIZE_ERR: DOM Exception 1: Index or size was negative, or greater than the allowed value.\nvar x=Math.max(1,Math.ceil((sketchCanvasSize.x-canvasSize.x)/2));var y=Math.max(1,Math.ceil((sketchCanvasSize.y-canvasSize.y)/2));return new $.Point(x,y).minus(this.position.times($.pixelDensityRatio).times(scale||1).apply(function(x){return x%1;}));},/**\n     * Removes tile from its container.\n     * @function\n     */unload:function unload(){if(this.imgElement&&this.imgElement.parentNode){this.imgElement.parentNode.removeChild(this.imgElement);}if(this.element&&this.element.parentNode){this.element.parentNode.removeChild(this.element);}this.element=null;this.imgElement=null;this.loaded=false;this.loading=false;}};})(OpenSeadragon);/*\n * OpenSeadragon - Overlay\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n     * An enumeration of positions that an overlay may be assigned relative to\n     * the viewport.\n     * @member OverlayPlacement\n     * @memberof OpenSeadragon\n     * @static\n     * @type {Object}\n     * @property {Number} CENTER\n     * @property {Number} TOP_LEFT\n     * @property {Number} TOP\n     * @property {Number} TOP_RIGHT\n     * @property {Number} RIGHT\n     * @property {Number} BOTTOM_RIGHT\n     * @property {Number} BOTTOM\n     * @property {Number} BOTTOM_LEFT\n     * @property {Number} LEFT\n     */$.OverlayPlacement={CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8};/**\n     * @class Overlay\n     * @classdesc Provides a way to float an HTML element on top of the viewer element.\n     *\n     * @memberof OpenSeadragon\n     * @param {Object} options\n     * @param {Element} options.element\n     * @param {OpenSeadragon.Point|OpenSeadragon.Rect} options.location - The\n     * location of the overlay on the image. If a {@link OpenSeadragon.Point}\n     * is specified, the overlay will keep a constant size independently of the\n     * zoom. If a {@link OpenSeadragon.Rect} is specified, the overlay size will\n     * be adjusted when the zoom changes.\n     * @param {OpenSeadragon.OverlayPlacement} [options.placement=OpenSeadragon.OverlayPlacement.TOP_LEFT]\n     * Relative position to the viewport.\n     * Only used if location is a {@link OpenSeadragon.Point}.\n     * @param {OpenSeadragon.Overlay.OnDrawCallback} [options.onDraw]\n     * @param {Boolean} [options.checkResize=true] Set to false to avoid to\n     * check the size of the overlay everytime it is drawn when using a\n     * {@link OpenSeadragon.Point} as options.location. It will improve\n     * performances but will cause a misalignment if the overlay size changes.\n     */$.Overlay=function(element,location,placement){/**\n         * onDraw callback signature used by {@link OpenSeadragon.Overlay}.\n         *\n         * @callback OnDrawCallback\n         * @memberof OpenSeadragon.Overlay\n         * @param {OpenSeadragon.Point} position\n         * @param {OpenSeadragon.Point} size\n         * @param {Element} element\n         */var options;if($.isPlainObject(element)){options=element;}else{options={element:element,location:location,placement:placement};}this.element=options.element;this.scales=options.location instanceof $.Rect;this.bounds=new $.Rect(options.location.x,options.location.y,options.location.width,options.location.height);this.position=new $.Point(options.location.x,options.location.y);this.size=new $.Point(options.location.width,options.location.height);this.style=options.element.style;// rects are always top-left\nthis.placement=options.location instanceof $.Point?options.placement:$.OverlayPlacement.TOP_LEFT;this.onDraw=options.onDraw;this.checkResize=options.checkResize===undefined?true:options.checkResize;};/** @lends OpenSeadragon.Overlay.prototype */$.Overlay.prototype={/**\n         * @function\n         * @param {OpenSeadragon.OverlayPlacement} position\n         * @param {OpenSeadragon.Point} size\n         */adjust:function adjust(position,size){switch(this.placement){case $.OverlayPlacement.TOP_LEFT:break;case $.OverlayPlacement.TOP:position.x-=size.x/2;break;case $.OverlayPlacement.TOP_RIGHT:position.x-=size.x;break;case $.OverlayPlacement.RIGHT:position.x-=size.x;position.y-=size.y/2;break;case $.OverlayPlacement.BOTTOM_RIGHT:position.x-=size.x;position.y-=size.y;break;case $.OverlayPlacement.BOTTOM:position.x-=size.x/2;position.y-=size.y;break;case $.OverlayPlacement.BOTTOM_LEFT:position.y-=size.y;break;case $.OverlayPlacement.LEFT:position.y-=size.y/2;break;default:case $.OverlayPlacement.CENTER:position.x-=size.x/2;position.y-=size.y/2;break;}},/**\n         * @function\n         */destroy:function destroy(){var element=this.element,style=this.style;if(element.parentNode){element.parentNode.removeChild(element);//this should allow us to preserve overlays when required between\n//pages\nif(element.prevElementParent){style.display=\'none\';//element.prevElementParent.insertBefore(\n//    element,\n//    element.prevNextSibling\n//);\ndocument.body.appendChild(element);}}// clear the onDraw callback\nthis.onDraw=null;style.top="";style.left="";style.position="";if(this.scales){style.width="";style.height="";}},/**\n         * @function\n         * @param {Element} container\n         */drawHTML:function drawHTML(container,viewport){var element=this.element,style=this.style,scales=this.scales,degrees=viewport.degrees,position=viewport.pixelFromPoint(this.bounds.getTopLeft(),true),size,overlayCenter;if(element.parentNode!=container){//save the source parent for later if we need it\nelement.prevElementParent=element.parentNode;element.prevNextSibling=element.nextSibling;container.appendChild(element);this.size=$.getElementSize(element);}if(scales){size=viewport.deltaPixelsFromPoints(this.bounds.getSize(),true);}else if(this.checkResize){size=$.getElementSize(element);}else{size=this.size;}this.position=position;this.size=size;this.adjust(position,size);position=position.apply(Math.round);size=size.apply(Math.round);// rotate the position of the overlay\n// TODO only rotate overlays if in canvas mode\n// TODO replace the size rotation with CSS3 transforms\n// TODO add an option to overlays to not rotate with the image\n// Currently only rotates position and size\nif(degrees!==0&&this.scales){overlayCenter=new $.Point(size.x/2,size.y/2);var drawerCenter=new $.Point(viewport.viewer.drawer.canvas.width/2,viewport.viewer.drawer.canvas.height/2);position=position.plus(overlayCenter).rotate(degrees,drawerCenter).minus(overlayCenter);size=size.rotate(degrees,new $.Point(0,0));size=new $.Point(Math.abs(size.x),Math.abs(size.y));}// call the onDraw callback if it exists to allow one to overwrite\n// the drawing/positioning/sizing of the overlay\nif(this.onDraw){this.onDraw(position,size,element);}else{style.left=position.x+"px";style.top=position.y+"px";style.position="absolute";if(style.display!=\'none\'){style.display=\'block\';}if(scales){style.width=size.x+"px";style.height=size.y+"px";}}},/**\n         * @function\n         * @param {OpenSeadragon.Point|OpenSeadragon.Rect} location\n         * @param {OpenSeadragon.OverlayPlacement} position\n         */update:function update(location,placement){this.scales=location instanceof $.Rect;this.bounds=new $.Rect(location.x,location.y,location.width,location.height);// rects are always top-left\nthis.placement=location instanceof $.Point?placement:$.OverlayPlacement.TOP_LEFT;}};})(OpenSeadragon);/*\n * OpenSeadragon - Drawer\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n * @class Drawer\n * @memberof OpenSeadragon\n * @classdesc Handles rendering of tiles for an {@link OpenSeadragon.Viewer}.\n * @param {Object} options - Options for this Drawer.\n * @param {OpenSeadragon.Viewer} options.viewer - The Viewer that owns this Drawer.\n * @param {OpenSeadragon.Viewport} options.viewport - Reference to Viewer viewport.\n * @param {Element} options.element - Parent element.\n * @param {Number} [options.debugGridColor] - See debugGridColor in {@link OpenSeadragon.Options} for details.\n */$.Drawer=function(options){$.console.assert(options.viewer,"[Drawer] options.viewer is required");//backward compatibility for positional args while prefering more\n//idiomatic javascript options object as the only argument\nvar args=arguments;if(!$.isPlainObject(options)){options={source:args[0],// Reference to Viewer tile source.\nviewport:args[1],// Reference to Viewer viewport.\nelement:args[2]// Parent element.\n};}$.console.assert(options.viewport,"[Drawer] options.viewport is required");$.console.assert(options.element,"[Drawer] options.element is required");if(options.source){$.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead");}this.viewer=options.viewer;this.viewport=options.viewport;this.debugGridColor=options.debugGridColor||$.DEFAULT_SETTINGS.debugGridColor;if(options.opacity){$.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead");}this.useCanvas=$.supportsCanvas&&(this.viewer?this.viewer.useCanvas:true);/**\n     * The parent element of this Drawer instance, passed in when the Drawer was created.\n     * The parent of {@link OpenSeadragon.Drawer#canvas}.\n     * @member {Element} container\n     * @memberof OpenSeadragon.Drawer#\n     */this.container=$.getElement(options.element);/**\n     * A &lt;canvas&gt; element if the browser supports them, otherwise a &lt;div&gt; element.\n     * Child element of {@link OpenSeadragon.Drawer#container}.\n     * @member {Element} canvas\n     * @memberof OpenSeadragon.Drawer#\n     */this.canvas=$.makeNeutralElement(this.useCanvas?"canvas":"div");/**\n     * 2d drawing context for {@link OpenSeadragon.Drawer#canvas} if it\'s a &lt;canvas&gt; element, otherwise null.\n     * @member {Object} context\n     * @memberof OpenSeadragon.Drawer#\n     */this.context=this.useCanvas?this.canvas.getContext("2d"):null;/**\n     * Sketch canvas used to temporarily draw tiles which cannot be drawn directly\n     * to the main canvas due to opacity. Lazily initialized.\n     */this.sketchCanvas=null;this.sketchContext=null;/**\n     * @member {Element} element\n     * @memberof OpenSeadragon.Drawer#\n     * @deprecated Alias for {@link OpenSeadragon.Drawer#container}.\n     */this.element=this.container;// We force our container to ltr because our drawing math doesn\'t work in rtl.\n// This issue only affects our canvas renderer, but we do it always for consistency.\n// Note that this means overlays you want to be rtl need to be explicitly set to rtl.\nthis.container.dir=\'ltr\';// check canvas available width and height, set canvas width and height such that the canvas backing store is set to the proper pixel density\nif(this.useCanvas){var viewportSize=this._calculateCanvasSize();this.canvas.width=viewportSize.x;this.canvas.height=viewportSize.y;}this.canvas.style.width="100%";this.canvas.style.height="100%";this.canvas.style.position="absolute";$.setElementOpacity(this.canvas,this.opacity,true);// explicit left-align\nthis.container.style.textAlign="left";this.container.appendChild(this.canvas);};/** @lends OpenSeadragon.Drawer.prototype */$.Drawer.prototype={// deprecated\naddOverlay:function addOverlay(element,location,placement,onDraw){$.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead.");this.viewer.addOverlay(element,location,placement,onDraw);return this;},// deprecated\nupdateOverlay:function updateOverlay(element,location,placement){$.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead.");this.viewer.updateOverlay(element,location,placement);return this;},// deprecated\nremoveOverlay:function removeOverlay(element){$.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead.");this.viewer.removeOverlay(element);return this;},// deprecated\nclearOverlays:function clearOverlays(){$.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead.");this.viewer.clearOverlays();return this;},/**\n     * Set the opacity of the drawer.\n     * @param {Number} opacity\n     * @return {OpenSeadragon.Drawer} Chainable.\n     */setOpacity:function setOpacity(opacity){$.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");var world=this.viewer.world;for(var i=0;i<world.getItemCount();i++){world.getItemAt(i).setOpacity(opacity);}return this;},/**\n     * Get the opacity of the drawer.\n     * @returns {Number}\n     */getOpacity:function getOpacity(){$.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");var world=this.viewer.world;var maxOpacity=0;for(var i=0;i<world.getItemCount();i++){var opacity=world.getItemAt(i).getOpacity();if(opacity>maxOpacity){maxOpacity=opacity;}}return maxOpacity;},// deprecated\nneedsUpdate:function needsUpdate(){$.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead.");return this.viewer.world.needsDraw();},// deprecated\nnumTilesLoaded:function numTilesLoaded(){$.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead.");return this.viewer.tileCache.numTilesLoaded();},// deprecated\nreset:function reset(){$.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead.");this.viewer.world.resetItems();return this;},// deprecated\nupdate:function update(){$.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead.");this.clear();this.viewer.world.draw();return this;},/**\n     * @return {Boolean} True if rotation is supported.\n     */canRotate:function canRotate(){return this.useCanvas;},/**\n     * Destroy the drawer (unload current loaded tiles)\n     */destroy:function destroy(){//force unloading of current canvas (1x1 will be gc later, trick not necessarily needed)\nthis.canvas.width=1;this.canvas.height=1;this.sketchCanvas=null;this.sketchContext=null;},/**\n     * Clears the Drawer so it\'s ready to draw another frame.\n     */clear:function clear(){this.canvas.innerHTML="";if(this.useCanvas){var viewportSize=this._calculateCanvasSize();if(this.canvas.width!=viewportSize.x||this.canvas.height!=viewportSize.y){this.canvas.width=viewportSize.x;this.canvas.height=viewportSize.y;if(this.sketchCanvas!==null){var sketchCanvasSize=this._calculateSketchCanvasSize();this.sketchCanvas.width=sketchCanvasSize.x;this.sketchCanvas.height=sketchCanvasSize.y;}}this._clear();}},_clear:function _clear(useSketch){if(!this.useCanvas){return;}var context=this._getContext(useSketch);var canvas=context.canvas;context.clearRect(0,0,canvas.width,canvas.height);},/**\n     * Scale from OpenSeadragon viewer rectangle to drawer rectangle\n     * (ignoring rotation)\n     * @param {OpenSeadragon.Rect} rectangle - The rectangle in viewport coordinate system.\n     * @return {OpenSeadragon.Rect} Rectangle in drawer coordinate system.\n     */viewportToDrawerRectangle:function viewportToDrawerRectangle(rectangle){var topLeft=this.viewport.pixelFromPointNoRotate(rectangle.getTopLeft(),true);var size=this.viewport.deltaPixelsFromPointsNoRotate(rectangle.getSize(),true);return new $.Rect(topLeft.x*$.pixelDensityRatio,topLeft.y*$.pixelDensityRatio,size.x*$.pixelDensityRatio,size.y*$.pixelDensityRatio);},/**\n     * Draws the given tile.\n     * @param {OpenSeadragon.Tile} tile - The tile to draw.\n     * @param {Function} drawingHandler - Method for firing the drawing event if using canvas.\n     * drawingHandler({context, tile, rendered})\n     * @param {Boolean} useSketch - Whether to use the sketch canvas or not.\n     * where <code>rendered</code> is the context with the pre-drawn image.\n     * @param {Float} [scale=1] - Apply a scale to tile position and size. Defaults to 1.\n     * @param {OpenSeadragon.Point} [translate] A translation vector to offset tile position\n     */drawTile:function drawTile(tile,drawingHandler,useSketch,scale,translate){$.console.assert(tile,\'[Drawer.drawTile] tile is required\');$.console.assert(drawingHandler,\'[Drawer.drawTile] drawingHandler is required\');if(this.useCanvas){var context=this._getContext(useSketch);scale=scale||1;tile.drawCanvas(context,drawingHandler,scale,translate);}else{tile.drawHTML(this.canvas);}},_getContext:function _getContext(useSketch){var context=this.context;if(useSketch){if(this.sketchCanvas===null){this.sketchCanvas=document.createElement("canvas");var sketchCanvasSize=this._calculateSketchCanvasSize();this.sketchCanvas.width=sketchCanvasSize.x;this.sketchCanvas.height=sketchCanvasSize.y;this.sketchContext=this.sketchCanvas.getContext("2d");// If the viewport is not currently rotated, the sketchCanvas\n// will have the same size as the main canvas. However, if\n// the viewport get rotated later on, we will need to resize it.\nif(this.viewport.getRotation()===0){var self=this;this.viewer.addHandler(\'rotate\',function resizeSketchCanvas(){self.viewer.removeHandler(\'rotate\',resizeSketchCanvas);var sketchCanvasSize=self._calculateSketchCanvasSize();self.sketchCanvas.width=sketchCanvasSize.x;self.sketchCanvas.height=sketchCanvasSize.y;});}}context=this.sketchContext;}return context;},// private\nsaveContext:function saveContext(useSketch){if(!this.useCanvas){return;}this._getContext(useSketch).save();},// private\nrestoreContext:function restoreContext(useSketch){if(!this.useCanvas){return;}this._getContext(useSketch).restore();},// private\nsetClip:function setClip(rect,useSketch){if(!this.useCanvas){return;}var context=this._getContext(useSketch);context.beginPath();context.rect(rect.x,rect.y,rect.width,rect.height);context.clip();},// private\ndrawRectangle:function drawRectangle(rect,fillStyle,useSketch){if(!this.useCanvas){return;}var context=this._getContext(useSketch);context.save();context.fillStyle=fillStyle;context.fillRect(rect.x,rect.y,rect.width,rect.height);context.restore();},/**\n     * Blends the sketch canvas in the main canvas.\n     * @param {Float} opacity The opacity of the blending.\n     * @param {Float} [scale=1] The scale at which tiles were drawn on the sketch. Default is 1.\n     *   Use scale to draw at a lower scale and then enlarge onto the main canvas.\n     * @param {OpenSeadragon.Point} [translate] A translation vector that was used to draw the tiles\n     * @param {String} [options.compositeOperation] - How the image is composited onto other images; see compositeOperation in {@link OpenSeadragon.Options} for possible values.\n     * @returns {undefined}\n     */blendSketch:function blendSketch(opacity,scale,translate,compositeOperation){if(!this.useCanvas||!this.sketchCanvas){return;}scale=scale||1;var position=translate instanceof $.Point?translate:new $.Point(0,0);var widthExt=0;var heightExt=0;if(translate){var widthDiff=this.sketchCanvas.width-this.canvas.width;var heightDiff=this.sketchCanvas.height-this.canvas.height;widthExt=Math.round(widthDiff/2);heightExt=Math.round(heightDiff/2);}this.context.save();this.context.globalAlpha=opacity;if(compositeOperation){this.context.globalCompositeOperation=compositeOperation;}this.context.drawImage(this.sketchCanvas,position.x-widthExt*scale,position.y-heightExt*scale,(this.canvas.width+2*widthExt)*scale,(this.canvas.height+2*heightExt)*scale,-widthExt,-heightExt,this.canvas.width+2*widthExt,this.canvas.height+2*heightExt);this.context.restore();},// private\ndrawDebugInfo:function drawDebugInfo(tile,count,i){if(!this.useCanvas){return;}var context=this.context;context.save();context.lineWidth=2*$.pixelDensityRatio;context.font=\'small-caps bold \'+13*$.pixelDensityRatio+\'px arial\';context.strokeStyle=this.debugGridColor;context.fillStyle=this.debugGridColor;if(this.viewport.degrees!==0){this._offsetForRotation(this.viewport.degrees);}context.strokeRect(tile.position.x*$.pixelDensityRatio,tile.position.y*$.pixelDensityRatio,tile.size.x*$.pixelDensityRatio,tile.size.y*$.pixelDensityRatio);var tileCenterX=(tile.position.x+tile.size.x/2)*$.pixelDensityRatio;var tileCenterY=(tile.position.y+tile.size.y/2)*$.pixelDensityRatio;// Rotate the text the right way around.\ncontext.translate(tileCenterX,tileCenterY);context.rotate(Math.PI/180*-this.viewport.degrees);context.translate(-tileCenterX,-tileCenterY);if(tile.x===0&&tile.y===0){context.fillText("Zoom: "+this.viewport.getZoom(),tile.position.x*$.pixelDensityRatio,(tile.position.y-30)*$.pixelDensityRatio);context.fillText("Pan: "+this.viewport.getBounds().toString(),tile.position.x*$.pixelDensityRatio,(tile.position.y-20)*$.pixelDensityRatio);}context.fillText("Level: "+tile.level,(tile.position.x+10)*$.pixelDensityRatio,(tile.position.y+20)*$.pixelDensityRatio);context.fillText("Column: "+tile.x,(tile.position.x+10)*$.pixelDensityRatio,(tile.position.y+30)*$.pixelDensityRatio);context.fillText("Row: "+tile.y,(tile.position.x+10)*$.pixelDensityRatio,(tile.position.y+40)*$.pixelDensityRatio);context.fillText("Order: "+i+" of "+count,(tile.position.x+10)*$.pixelDensityRatio,(tile.position.y+50)*$.pixelDensityRatio);context.fillText("Size: "+tile.size.toString(),(tile.position.x+10)*$.pixelDensityRatio,(tile.position.y+60)*$.pixelDensityRatio);context.fillText("Position: "+tile.position.toString(),(tile.position.x+10)*$.pixelDensityRatio,(tile.position.y+70)*$.pixelDensityRatio);if(this.viewport.degrees!==0){this._restoreRotationChanges();}context.restore();},// private\ndebugRect:function debugRect(rect){if(this.useCanvas){var context=this.context;context.save();context.lineWidth=2*$.pixelDensityRatio;context.strokeStyle=this.debugGridColor;context.fillStyle=this.debugGridColor;context.strokeRect(rect.x*$.pixelDensityRatio,rect.y*$.pixelDensityRatio,rect.width*$.pixelDensityRatio,rect.height*$.pixelDensityRatio);context.restore();}},/**\n     * Get the canvas size\n     * @param {Boolean} sketch If set to true return the size of the sketch canvas\n     * @returns {OpenSeadragon.Point} The size of the canvas\n     */getCanvasSize:function getCanvasSize(sketch){var canvas=this._getContext(sketch).canvas;return new $.Point(canvas.width,canvas.height);},// private\n_offsetForRotation:function _offsetForRotation(degrees,useSketch){var cx=this.canvas.width/2;var cy=this.canvas.height/2;var context=this._getContext(useSketch);context.save();context.translate(cx,cy);context.rotate(Math.PI/180*degrees);context.translate(-cx,-cy);},// private\n_restoreRotationChanges:function _restoreRotationChanges(useSketch){var context=this._getContext(useSketch);context.restore();},// private\n_calculateCanvasSize:function _calculateCanvasSize(){var pixelDensityRatio=$.pixelDensityRatio;var viewportSize=this.viewport.getContainerSize();return{x:viewportSize.x*pixelDensityRatio,y:viewportSize.y*pixelDensityRatio};},// private\n_calculateSketchCanvasSize:function _calculateSketchCanvasSize(){var canvasSize=this._calculateCanvasSize();if(this.viewport.getRotation()===0){return canvasSize;}// If the viewport is rotated, we need a larger sketch canvas in order\n// to support edge smoothing.\nvar sketchCanvasSize=Math.ceil(Math.sqrt(canvasSize.x*canvasSize.x+canvasSize.y*canvasSize.y));return{x:sketchCanvasSize,y:sketchCanvasSize};}};})(OpenSeadragon);/*\n * OpenSeadragon - Viewport\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n * @class Viewport\n * @memberof OpenSeadragon\n * @classdesc Handles coordinate-related functionality (zoom, pan, rotation, etc.)\n * for an {@link OpenSeadragon.Viewer}.\n * @param {Object} options - Options for this Viewport.\n * @param {Object} [options.margins] - See viewportMargins in {@link OpenSeadragon.Options}.\n * @param {Number} [options.springStiffness] - See springStiffness in {@link OpenSeadragon.Options}.\n * @param {Number} [options.animationTime] - See animationTime in {@link OpenSeadragon.Options}.\n * @param {Number} [options.minZoomImageRatio] - See minZoomImageRatio in {@link OpenSeadragon.Options}.\n * @param {Number} [options.maxZoomPixelRatio] - See maxZoomPixelRatio in {@link OpenSeadragon.Options}.\n * @param {Number} [options.visibilityRatio] - See visibilityRatio in {@link OpenSeadragon.Options}.\n * @param {Boolean} [options.wrapHorizontal] - See wrapHorizontal in {@link OpenSeadragon.Options}.\n * @param {Boolean} [options.wrapVertical] - See wrapVertical in {@link OpenSeadragon.Options}.\n * @param {Number} [options.defaultZoomLevel] - See defaultZoomLevel in {@link OpenSeadragon.Options}.\n * @param {Number} [options.minZoomLevel] - See minZoomLevel in {@link OpenSeadragon.Options}.\n * @param {Number} [options.maxZoomLevel] - See maxZoomLevel in {@link OpenSeadragon.Options}.\n * @param {Number} [options.degrees] - See degrees in {@link OpenSeadragon.Options}.\n * @param {Boolean} [options.homeFillsViewer] - See homeFillsViewer in {@link OpenSeadragon.Options}.\n */$.Viewport=function(options){//backward compatibility for positional args while prefering more\n//idiomatic javascript options object as the only argument\nvar args=arguments;if(args.length&&args[0]instanceof $.Point){options={containerSize:args[0],contentSize:args[1],config:args[2]};}//options.config and the general config argument are deprecated\n//in favor of the more direct specification of optional settings\n//being passed directly on the options object\nif(options.config){$.extend(true,options,options.config);delete options.config;}this._margins=$.extend({left:0,top:0,right:0,bottom:0},options.margins||{});delete options.margins;$.extend(true,this,{//required settings\ncontainerSize:null,contentSize:null,//internal state properties\nzoomPoint:null,viewer:null,//configurable options\nspringStiffness:$.DEFAULT_SETTINGS.springStiffness,animationTime:$.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:$.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:$.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:$.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:$.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:$.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:$.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:$.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:$.DEFAULT_SETTINGS.maxZoomLevel,degrees:$.DEFAULT_SETTINGS.degrees,homeFillsViewer:$.DEFAULT_SETTINGS.homeFillsViewer},options);this._updateContainerInnerSize();this.centerSpringX=new $.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime});this.centerSpringY=new $.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime});this.zoomSpring=new $.Spring({exponential:true,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime});this._oldCenterX=this.centerSpringX.current.value;this._oldCenterY=this.centerSpringY.current.value;this._oldZoom=this.zoomSpring.current.value;if(this.contentSize){this.resetContentSize(this.contentSize);}else{this.setHomeBounds(new $.Rect(0,0,1,1),1);}this.goHome(true);this.update();};/** @lends OpenSeadragon.Viewport.prototype */$.Viewport.prototype={/**\n     * Updates the viewport\'s home bounds and constraints for the given content size.\n     * @function\n     * @param {OpenSeadragon.Point} contentSize - size of the content in content units\n     * @return {OpenSeadragon.Viewport} Chainable.\n     * @fires OpenSeadragon.Viewer.event:reset-size\n     */resetContentSize:function resetContentSize(contentSize){$.console.assert(contentSize,"[Viewport.resetContentSize] contentSize is required");$.console.assert(contentSize instanceof $.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point");$.console.assert(contentSize.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0");$.console.assert(contentSize.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0");this.setHomeBounds(new $.Rect(0,0,1,contentSize.y/contentSize.x),contentSize.x);return this;},/**\n     * Updates the viewport\'s home bounds and constraints.\n     * @function\n     * @param {OpenSeadragon.Rect} bounds - the new bounds in viewport coordinates\n     * @param {Number} contentFactor - how many content units per viewport unit\n     * @fires OpenSeadragon.Viewer.event:reset-size\n     */setHomeBounds:function setHomeBounds(bounds,contentFactor){$.console.assert(bounds,"[Viewport.setHomeBounds] bounds is required");$.console.assert(bounds instanceof $.Rect,"[Viewport.setHomeBounds] bounds must be an OpenSeadragon.Rect");$.console.assert(bounds.width>0,"[Viewport.setHomeBounds] bounds.width must be greater than 0");$.console.assert(bounds.height>0,"[Viewport.setHomeBounds] bounds.height must be greater than 0");this.homeBounds=bounds.clone().rotate(this.degrees).getBoundingBox();this.contentSize=this.homeBounds.getSize().times(contentFactor);this.contentAspectX=this.contentSize.x/this.contentSize.y;this.contentAspectY=this.contentSize.y/this.contentSize.x;if(this.viewer){/**\n             * Raised when the viewer\'s content size or home bounds are reset\n             * (see {@link OpenSeadragon.Viewport#resetContentSize},\n             * {@link OpenSeadragon.Viewport#setHomeBounds}).\n             *\n             * @event reset-size\n             * @memberof OpenSeadragon.Viewer\n             * @type {object}\n             * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n             * @property {OpenSeadragon.Point} contentSize\n             * @property {OpenSeadragon.Rect} homeBounds\n             * @property {Number} contentFactor\n             * @property {?Object} userData - Arbitrary subscriber-defined object.\n             */this.viewer.raiseEvent(\'reset-size\',{contentSize:this.contentSize.clone(),contentFactor:contentFactor,homeBounds:this.homeBounds.clone()});}},/**\n     * @function\n     */getHomeZoom:function getHomeZoom(){if(this.defaultZoomLevel){return this.defaultZoomLevel;}else{var aspectFactor=this.contentAspectX/this.getAspectRatio();var output;if(this.homeFillsViewer){// fill the viewer and clip the image\noutput=aspectFactor>=1?aspectFactor:1;}else{output=aspectFactor>=1?1:aspectFactor;}return output/this.homeBounds.width;}},/**\n     * @function\n     */getHomeBounds:function getHomeBounds(){var center=this.homeBounds.getCenter(),width=1.0/this.getHomeZoom(),height=width/this.getAspectRatio();return new $.Rect(center.x-width/2.0,center.y-height/2.0,width,height);},/**\n     * @function\n     * @param {Boolean} immediately\n     * @fires OpenSeadragon.Viewer.event:home\n     */goHome:function goHome(immediately){if(this.viewer){/**\n             * Raised when the "home" operation occurs (see {@link OpenSeadragon.Viewport#goHome}).\n             *\n             * @event home\n             * @memberof OpenSeadragon.Viewer\n             * @type {object}\n             * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n             * @property {Boolean} immediately\n             * @property {?Object} userData - Arbitrary subscriber-defined object.\n             */this.viewer.raiseEvent(\'home\',{immediately:immediately});}return this.fitBounds(this.getHomeBounds(),immediately);},/**\n     * @function\n     */getMinZoom:function getMinZoom(){var homeZoom=this.getHomeZoom(),zoom=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*homeZoom;return zoom;},/**\n     * @function\n     */getMaxZoom:function getMaxZoom(){var zoom=this.maxZoomLevel;if(!zoom){zoom=this.contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x;zoom/=this.homeBounds.width;}return Math.max(zoom,this.getHomeZoom());},/**\n     * @function\n     */getAspectRatio:function getAspectRatio(){return this._containerInnerSize.x/this._containerInnerSize.y;},/**\n     * @function\n     * @returns {OpenSeadragon.Point} The size of the container, in screen coordinates.\n     */getContainerSize:function getContainerSize(){return new $.Point(this.containerSize.x,this.containerSize.y);},/**\n     * @function\n     * The margins push the "home" region in from the sides by the specified amounts.\n     * @returns {Object} Properties (Numbers, in screen coordinates): left, top, right, bottom.\n     */getMargins:function getMargins(){return $.extend({},this._margins);// Make a copy so we are not returning our original\n},/**\n     * @function\n     * The margins push the "home" region in from the sides by the specified amounts.\n     * @param {Object} margins - Properties (Numbers, in screen coordinates): left, top, right, bottom.\n     */setMargins:function setMargins(margins){$.console.assert($.type(margins)===\'object\',\'[Viewport.setMargins] margins must be an object\');this._margins=$.extend({left:0,top:0,right:0,bottom:0},margins);this._updateContainerInnerSize();this.viewer.forceRedraw();},/**\n     * @function\n     * @param {Boolean} current - Pass true for the current location; defaults to false (target location).\n     * @returns {OpenSeadragon.Rect} The location you are zoomed/panned to, in viewport coordinates.\n     */getBounds:function getBounds(current){var center=this.getCenter(current),width=1.0/this.getZoom(current),height=width/this.getAspectRatio();return new $.Rect(center.x-width/2.0,center.y-height/2.0,width,height);},/**\n     * @function\n     * @param {Boolean} current - Pass true for the current location; defaults to false (target location).\n     * @returns {OpenSeadragon.Rect} The location you are zoomed/panned to,\n     * including the space taken by margins, in viewport coordinates.\n     */getBoundsWithMargins:function getBoundsWithMargins(current){var bounds=this.getBounds(current);var factor=this._containerInnerSize.x*this.getZoom(current);bounds.x-=this._margins.left/factor;bounds.y-=this._margins.top/factor;bounds.width+=(this._margins.left+this._margins.right)/factor;bounds.height+=(this._margins.top+this._margins.bottom)/factor;return bounds;},/**\n     * @function\n     * @param {Boolean} current - Pass true for the current location; defaults to false (target location).\n     */getCenter:function getCenter(current){var centerCurrent=new $.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),centerTarget=new $.Point(this.centerSpringX.target.value,this.centerSpringY.target.value),oldZoomPixel,zoom,width,height,bounds,newZoomPixel,deltaZoomPixels,deltaZoomPoints;if(current){return centerCurrent;}else if(!this.zoomPoint){return centerTarget;}oldZoomPixel=this.pixelFromPoint(this.zoomPoint,true);zoom=this.getZoom();width=1.0/zoom;height=width/this.getAspectRatio();bounds=new $.Rect(centerCurrent.x-width/2.0,centerCurrent.y-height/2.0,width,height);newZoomPixel=this._pixelFromPoint(this.zoomPoint,bounds);deltaZoomPixels=newZoomPixel.minus(oldZoomPixel);deltaZoomPoints=deltaZoomPixels.divide(this._containerInnerSize.x*zoom);return centerTarget.plus(deltaZoomPoints);},/**\n     * @function\n     * @param {Boolean} current - Pass true for the current location; defaults to false (target location).\n     */getZoom:function getZoom(current){if(current){return this.zoomSpring.current.value;}else{return this.zoomSpring.target.value;}},/**\n     * @function\n     * @private\n     * @param {OpenSeadragon.Rect} bounds\n     * @param {Boolean} immediately\n     * @return {OpenSeadragon.Rect} constrained bounds.\n     */_applyBoundaryConstraints:function _applyBoundaryConstraints(bounds,immediately){var dx=0,dy=0,newBounds=new $.Rect(bounds.x,bounds.y,bounds.width,bounds.height);var horizontalThreshold=this.visibilityRatio*newBounds.width;var verticalThreshold=this.visibilityRatio*newBounds.height;if(this.wrapHorizontal){//do nothing\n}else{var thresholdLeft=newBounds.x+(newBounds.width-horizontalThreshold);if(this.homeBounds.x>thresholdLeft){dx=this.homeBounds.x-thresholdLeft;}var homeRight=this.homeBounds.x+this.homeBounds.width;var thresholdRight=newBounds.x+horizontalThreshold;if(homeRight<thresholdRight){var newDx=homeRight-thresholdRight;if(dx){dx=(dx+newDx)/2;}else{dx=newDx;}}}if(this.wrapVertical){//do nothing\n}else{var thresholdTop=newBounds.y+(newBounds.height-verticalThreshold);if(this.homeBounds.y>thresholdTop){dy=this.homeBounds.y-thresholdTop;}var homeBottom=this.homeBounds.y+this.homeBounds.height;var thresholdBottom=newBounds.y+verticalThreshold;if(homeBottom<thresholdBottom){var newDy=homeBottom-thresholdBottom;if(dy){dy=(dy+newDy)/2;}else{dy=newDy;}}}if(dx||dy){newBounds.x+=dx;newBounds.y+=dy;}if(this.viewer){/**\n             * Raised when the viewport constraints are applied (see {@link OpenSeadragon.Viewport#applyConstraints}).\n             *\n             * @event constrain\n             * @memberof OpenSeadragon.Viewer\n             * @type {object}\n             * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n             * @property {Boolean} immediately\n             * @property {?Object} userData - Arbitrary subscriber-defined object.\n             */this.viewer.raiseEvent(\'constrain\',{immediately:immediately});}return newBounds;},/**\n     * @function\n     * @return {OpenSeadragon.Viewport} Chainable.\n     * @fires OpenSeadragon.Viewer.event:constrain\n     */applyConstraints:function applyConstraints(immediately){var actualZoom=this.getZoom(),constrainedZoom=Math.max(Math.min(actualZoom,this.getMaxZoom()),this.getMinZoom()),bounds,constrainedBounds;if(actualZoom!=constrainedZoom){this.zoomTo(constrainedZoom,this.zoomPoint,immediately);}bounds=this.getBounds();constrainedBounds=this._applyBoundaryConstraints(bounds,immediately);if(bounds.x!==constrainedBounds.x||bounds.y!==constrainedBounds.y||immediately){this.fitBounds(constrainedBounds,immediately);}return this;},/**\n     * @function\n     * @param {Boolean} immediately\n     */ensureVisible:function ensureVisible(immediately){return this.applyConstraints(immediately);},/**\n     * @function\n     * @private\n     * @param {OpenSeadragon.Rect} bounds\n     * @param {Object} options (immediately=false, constraints=false)\n     * @return {OpenSeadragon.Viewport} Chainable.\n     */_fitBounds:function _fitBounds(bounds,options){options=options||{};var immediately=options.immediately||false;var constraints=options.constraints||false;var aspect=this.getAspectRatio(),center=bounds.getCenter(),newBounds=new $.Rect(bounds.x,bounds.y,bounds.width,bounds.height),oldBounds,oldZoom,newZoom,referencePoint,newBoundsAspectRatio,newConstrainedZoom;if(newBounds.getAspectRatio()>=aspect){newBounds.height=bounds.width/aspect;newBounds.y=center.y-newBounds.height/2;}else{newBounds.width=bounds.height*aspect;newBounds.x=center.x-newBounds.width/2;}if(constraints){newBoundsAspectRatio=newBounds.getAspectRatio();}this.panTo(this.getCenter(true),true);this.zoomTo(this.getZoom(true),null,true);oldBounds=this.getBounds();oldZoom=this.getZoom();newZoom=1.0/newBounds.width;if(constraints){newConstrainedZoom=Math.max(Math.min(newZoom,this.getMaxZoom()),this.getMinZoom());if(newZoom!==newConstrainedZoom){newZoom=newConstrainedZoom;newBounds.width=1.0/newZoom;newBounds.x=center.x-newBounds.width/2;newBounds.height=newBounds.width/newBoundsAspectRatio;newBounds.y=center.y-newBounds.height/2;}newBounds=this._applyBoundaryConstraints(newBounds,immediately);center=newBounds.getCenter();}if(immediately){this.panTo(center,true);return this.zoomTo(newZoom,null,true);}if(Math.abs(newZoom-oldZoom)<0.00000001||Math.abs(newBounds.width-oldBounds.width)<0.00000001){return this.panTo(center,immediately);}referencePoint=oldBounds.getTopLeft().times(this._containerInnerSize.x/oldBounds.width).minus(newBounds.getTopLeft().times(this._containerInnerSize.x/newBounds.width)).divide(this._containerInnerSize.x/oldBounds.width-this._containerInnerSize.x/newBounds.width);return this.zoomTo(newZoom,referencePoint,immediately);},/**\n     * @function\n     * @param {OpenSeadragon.Rect} bounds\n     * @param {Boolean} immediately\n     * @return {OpenSeadragon.Viewport} Chainable.\n     */fitBounds:function fitBounds(bounds,immediately){return this._fitBounds(bounds,{immediately:immediately,constraints:false});},/**\n     * @function\n     * @param {OpenSeadragon.Rect} bounds\n     * @param {Boolean} immediately\n     * @return {OpenSeadragon.Viewport} Chainable.\n     */fitBoundsWithConstraints:function fitBoundsWithConstraints(bounds,immediately){return this._fitBounds(bounds,{immediately:immediately,constraints:true});},/**\n     * Zooms so the image just fills the viewer vertically.\n     * @param {Boolean} immediately\n     * @return {OpenSeadragon.Viewport} Chainable.\n     */fitVertically:function fitVertically(immediately){var box=new $.Rect(this.homeBounds.x+this.homeBounds.width/2,this.homeBounds.y,0,this.homeBounds.height);return this.fitBounds(box,immediately);},/**\n     * Zooms so the image just fills the viewer horizontally.\n     * @param {Boolean} immediately\n     * @return {OpenSeadragon.Viewport} Chainable.\n     */fitHorizontally:function fitHorizontally(immediately){var box=new $.Rect(this.homeBounds.x,this.homeBounds.y+this.homeBounds.height/2,this.homeBounds.width,0);return this.fitBounds(box,immediately);},/**\n     * @function\n     * @param {OpenSeadragon.Point} delta\n     * @param {Boolean} immediately\n     * @return {OpenSeadragon.Viewport} Chainable.\n     * @fires OpenSeadragon.Viewer.event:pan\n     */panBy:function panBy(delta,immediately){var center=new $.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(center.plus(delta),immediately);},/**\n     * @function\n     * @param {OpenSeadragon.Point} center\n     * @param {Boolean} immediately\n     * @return {OpenSeadragon.Viewport} Chainable.\n     * @fires OpenSeadragon.Viewer.event:pan\n     */panTo:function panTo(center,immediately){if(immediately){this.centerSpringX.resetTo(center.x);this.centerSpringY.resetTo(center.y);}else{this.centerSpringX.springTo(center.x);this.centerSpringY.springTo(center.y);}if(this.viewer){/**\n             * Raised when the viewport is panned (see {@link OpenSeadragon.Viewport#panBy} and {@link OpenSeadragon.Viewport#panTo}).\n             *\n             * @event pan\n             * @memberof OpenSeadragon.Viewer\n             * @type {object}\n             * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n             * @property {OpenSeadragon.Point} center\n             * @property {Boolean} immediately\n             * @property {?Object} userData - Arbitrary subscriber-defined object.\n             */this.viewer.raiseEvent(\'pan\',{center:center,immediately:immediately});}return this;},/**\n     * @function\n     * @return {OpenSeadragon.Viewport} Chainable.\n     * @fires OpenSeadragon.Viewer.event:zoom\n     */zoomBy:function zoomBy(factor,refPoint,immediately){return this.zoomTo(this.zoomSpring.target.value*factor,refPoint,immediately);},/**\n     * @function\n     * @return {OpenSeadragon.Viewport} Chainable.\n     * @fires OpenSeadragon.Viewer.event:zoom\n     */zoomTo:function zoomTo(zoom,refPoint,immediately){this.zoomPoint=refPoint instanceof $.Point&&!isNaN(refPoint.x)&&!isNaN(refPoint.y)?refPoint:null;if(immediately){this.zoomSpring.resetTo(zoom);}else{this.zoomSpring.springTo(zoom);}if(this.viewer){/**\n             * Raised when the viewport zoom level changes (see {@link OpenSeadragon.Viewport#zoomBy} and {@link OpenSeadragon.Viewport#zoomTo}).\n             *\n             * @event zoom\n             * @memberof OpenSeadragon.Viewer\n             * @type {object}\n             * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n             * @property {Number} zoom\n             * @property {OpenSeadragon.Point} refPoint\n             * @property {Boolean} immediately\n             * @property {?Object} userData - Arbitrary subscriber-defined object.\n             */this.viewer.raiseEvent(\'zoom\',{zoom:zoom,refPoint:refPoint,immediately:immediately});}return this;},/**\n     * Rotates this viewport to the angle specified.\n     * @function\n     * @return {OpenSeadragon.Viewport} Chainable.\n     */setRotation:function setRotation(degrees){if(!this.viewer||!this.viewer.drawer.canRotate()){return this;}degrees=degrees%360;if(degrees<0){degrees+=360;}this.degrees=degrees;this.setHomeBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor());this.viewer.forceRedraw();/**\n         * Raised when rotation has been changed.\n         *\n         * @event rotate\n         * @memberof OpenSeadragon.Viewer\n         * @type {object}\n         * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised the event.\n         * @property {Number} degrees - The number of degrees the rotation was set to.\n         * @property {?Object} userData - Arbitrary subscriber-defined object.\n         */this.viewer.raiseEvent(\'rotate\',{"degrees":degrees});return this;},/**\n     * Gets the current rotation in degrees.\n     * @function\n     * @return {Number} The current rotation in degrees.\n     */getRotation:function getRotation(){return this.degrees;},/**\n     * @function\n     * @return {OpenSeadragon.Viewport} Chainable.\n     * @fires OpenSeadragon.Viewer.event:resize\n     */resize:function resize(newContainerSize,maintain){var oldBounds=this.getBounds(),newBounds=oldBounds,widthDeltaFactor;this.containerSize.x=newContainerSize.x;this.containerSize.y=newContainerSize.y;this._updateContainerInnerSize();if(maintain){// TODO: widthDeltaFactor will always be 1; probably not what\'s intended\nwidthDeltaFactor=newContainerSize.x/this.containerSize.x;newBounds.width=oldBounds.width*widthDeltaFactor;newBounds.height=newBounds.width/this.getAspectRatio();}if(this.viewer){/**\n             * Raised when the viewer is resized (see {@link OpenSeadragon.Viewport#resize}).\n             *\n             * @event resize\n             * @memberof OpenSeadragon.Viewer\n             * @type {object}\n             * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised this event.\n             * @property {OpenSeadragon.Point} newContainerSize\n             * @property {Boolean} maintain\n             * @property {?Object} userData - Arbitrary subscriber-defined object.\n             */this.viewer.raiseEvent(\'resize\',{newContainerSize:newContainerSize,maintain:maintain});}return this.fitBounds(newBounds,true);},// private\n_updateContainerInnerSize:function _updateContainerInnerSize(){this._containerInnerSize=new $.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)));},/**\n     * @function\n     */update:function update(){var oldZoomPixel,newZoomPixel,deltaZoomPixels,deltaZoomPoints;if(this.zoomPoint){oldZoomPixel=this.pixelFromPoint(this.zoomPoint,true);}this.zoomSpring.update();if(this.zoomPoint&&this.zoomSpring.current.value!=this._oldZoom){newZoomPixel=this.pixelFromPoint(this.zoomPoint,true);deltaZoomPixels=newZoomPixel.minus(oldZoomPixel);deltaZoomPoints=this.deltaPointsFromPixels(deltaZoomPixels,true);this.centerSpringX.shiftBy(deltaZoomPoints.x);this.centerSpringY.shiftBy(deltaZoomPoints.y);}else{this.zoomPoint=null;}this.centerSpringX.update();this.centerSpringY.update();var changed=this.centerSpringX.current.value!=this._oldCenterX||this.centerSpringY.current.value!=this._oldCenterY||this.zoomSpring.current.value!=this._oldZoom;this._oldCenterX=this.centerSpringX.current.value;this._oldCenterY=this.centerSpringY.current.value;this._oldZoom=this.zoomSpring.current.value;return changed;},/**\n     * Convert a delta (translation vector) from viewport coordinates to pixels\n     * coordinates. This method does not take rotation into account.\n     * Consider using deltaPixelsFromPoints if you need to account for rotation.\n     * @param {OpenSeadragon.Point} deltaPoints - The translation vector to convert.\n     * @param {Boolean} [current=false] - Pass true for the current location;\n     * defaults to false (target location).\n     * @returns {OpenSeadragon.Point}\n     */deltaPixelsFromPointsNoRotate:function deltaPixelsFromPointsNoRotate(deltaPoints,current){return deltaPoints.times(this._containerInnerSize.x*this.getZoom(current));},/**\n     * Convert a delta (translation vector) from viewport coordinates to pixels\n     * coordinates.\n     * @param {OpenSeadragon.Point} deltaPoints - The translation vector to convert.\n     * @param {Boolean} [current=false] - Pass true for the current location;\n     * defaults to false (target location).\n     * @returns {OpenSeadragon.Point}\n     */deltaPixelsFromPoints:function deltaPixelsFromPoints(deltaPoints,current){return this.deltaPixelsFromPointsNoRotate(deltaPoints.rotate(this.getRotation()),current);},/**\n     * Convert a delta (translation vector) from pixels coordinates to viewport\n     * coordinates. This method does not take rotation into account.\n     * Consider using deltaPointsFromPixels if you need to account for rotation.\n     * @param {OpenSeadragon.Point} deltaPixels - The translation vector to convert.\n     * @param {Boolean} [current=false] - Pass true for the current location;\n     * defaults to false (target location).\n     * @returns {OpenSeadragon.Point}\n     */deltaPointsFromPixelsNoRotate:function deltaPointsFromPixelsNoRotate(deltaPixels,current){return deltaPixels.divide(this._containerInnerSize.x*this.getZoom(current));},/**\n     * Convert a delta (translation vector) from pixels coordinates to viewport\n     * coordinates.\n     * @param {OpenSeadragon.Point} deltaPixels - The translation vector to convert.\n     * @param {Boolean} [current=false] - Pass true for the current location;\n     * defaults to false (target location).\n     * @returns {OpenSeadragon.Point}\n     */deltaPointsFromPixels:function deltaPointsFromPixels(deltaPixels,current){return this.deltaPointsFromPixelsNoRotate(deltaPixels,current).rotate(-this.getRotation());},/**\n     * Convert viewport coordinates to pixels coordinates.\n     * This method does not take rotation into account.\n     * Consider using pixelFromPoint if you need to account for rotation.\n     * @param {OpenSeadragon.Point} point the viewport coordinates\n     * @param {Boolean} [current=false] - Pass true for the current location;\n     * defaults to false (target location).\n     * @returns {OpenSeadragon.Point}\n     */pixelFromPointNoRotate:function pixelFromPointNoRotate(point,current){return this._pixelFromPointNoRotate(point,this.getBounds(current));},/**\n     * Convert viewport coordinates to pixel coordinates.\n     * @param {OpenSeadragon.Point} point the viewport coordinates\n     * @param {Boolean} [current=false] - Pass true for the current location;\n     * defaults to false (target location).\n     * @returns {OpenSeadragon.Point}\n     */pixelFromPoint:function pixelFromPoint(point,current){return this._pixelFromPoint(point,this.getBounds(current));},// private\n_pixelFromPointNoRotate:function _pixelFromPointNoRotate(point,bounds){return point.minus(bounds.getTopLeft()).times(this._containerInnerSize.x/bounds.width).plus(new $.Point(this._margins.left,this._margins.top));},// private\n_pixelFromPoint:function _pixelFromPoint(point,bounds){return this._pixelFromPointNoRotate(point.rotate(this.getRotation(),this.getCenter(true)),bounds);},/**\n     * Convert pixel coordinates to viewport coordinates.\n     * This method does not take rotation into account.\n     * Consider using pointFromPixel if you need to account for rotation.\n     * @param {OpenSeadragon.Point} pixel Pixel coordinates\n     * @param {Boolean} [current=false] - Pass true for the current location;\n     * defaults to false (target location).\n     * @returns {OpenSeadragon.Point}\n     */pointFromPixelNoRotate:function pointFromPixelNoRotate(pixel,current){var bounds=this.getBounds(current);return pixel.minus(new $.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/bounds.width).plus(bounds.getTopLeft());},/**\n     * Convert pixel coordinates to viewport coordinates.\n     * @param {OpenSeadragon.Point} pixel Pixel coordinates\n     * @param {Boolean} [current=false] - Pass true for the current location;\n     * defaults to false (target location).\n     * @returns {OpenSeadragon.Point}\n     */pointFromPixel:function pointFromPixel(pixel,current){return this.pointFromPixelNoRotate(pixel,current).rotate(-this.getRotation(),this.getCenter(true));},// private\n_viewportToImageDelta:function _viewportToImageDelta(viewerX,viewerY){var scale=this.homeBounds.width;return new $.Point(viewerX*(this.contentSize.x/scale),viewerY*(this.contentSize.y*this.contentAspectX/scale));},/**\n     * Translates from OpenSeadragon viewer coordinate system to image coordinate system.\n     * This method can be called either by passing X,Y coordinates or an\n     * OpenSeadragon.Point\n     * Note: not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.\n     * @function\n     * @param {(OpenSeadragon.Point|Number)} viewerX either a point or the X\n     * coordinate in viewport coordinate system.\n     * @param {Number} [viewerY] Y coordinate in viewport coordinate system.\n     * @return {OpenSeadragon.Point} a point representing the coordinates in the image.\n     */viewportToImageCoordinates:function viewportToImageCoordinates(viewerX,viewerY){if(viewerX instanceof $.Point){//they passed a point instead of individual components\nreturn this.viewportToImageCoordinates(viewerX.x,viewerX.y);}if(this.viewer&&this.viewer.world.getItemCount()>1){$.console.error(\'[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.\');}return this._viewportToImageDelta(viewerX-this.homeBounds.x,viewerY-this.homeBounds.y);},// private\n_imageToViewportDelta:function _imageToViewportDelta(imageX,imageY){var scale=this.homeBounds.width;return new $.Point(imageX/this.contentSize.x*scale,imageY/this.contentSize.y/this.contentAspectX*scale);},/**\n     * Translates from image coordinate system to OpenSeadragon viewer coordinate system\n     * This method can be called either by passing X,Y coordinates or an\n     * OpenSeadragon.Point\n     * Note: not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.\n     * @function\n     * @param {(OpenSeadragon.Point | Number)} imageX the point or the\n     * X coordinate in image coordinate system.\n     * @param {Number} [imageY] Y coordinate in image coordinate system.\n     * @return {OpenSeadragon.Point} a point representing the coordinates in the viewport.\n     */imageToViewportCoordinates:function imageToViewportCoordinates(imageX,imageY){if(imageX instanceof $.Point){//they passed a point instead of individual components\nreturn this.imageToViewportCoordinates(imageX.x,imageX.y);}if(this.viewer&&this.viewer.world.getItemCount()>1){$.console.error(\'[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.\');}var point=this._imageToViewportDelta(imageX,imageY);point.x+=this.homeBounds.x;point.y+=this.homeBounds.y;return point;},/**\n     * Translates from a rectangle which describes a portion of the image in\n     * pixel coordinates to OpenSeadragon viewport rectangle coordinates.\n     * This method can be called either by passing X,Y,width,height or an\n     * OpenSeadragon.Rect\n     * Note: not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.\n     * @function\n     * @param {(OpenSeadragon.Rect | Number)} imageX the rectangle or the X\n     * coordinate of the top left corner of the rectangle in image coordinate system.\n     * @param {Number} [imageY] the Y coordinate of the top left corner of the rectangle\n     * in image coordinate system.\n     * @param {Number} [pixelWidth] the width in pixel of the rectangle.\n     * @param {Number} [pixelHeight] the height in pixel of the rectangle.\n     */imageToViewportRectangle:function imageToViewportRectangle(imageX,imageY,pixelWidth,pixelHeight){var rect=imageX;if(!(rect instanceof $.Rect)){//they passed individual components instead of a rectangle\nrect=new $.Rect(imageX,imageY,pixelWidth,pixelHeight);}var coordA=this.imageToViewportCoordinates(rect.x,rect.y);var coordB=this._imageToViewportDelta(rect.width,rect.height);return new $.Rect(coordA.x,coordA.y,coordB.x,coordB.y,rect.degrees);},/**\n     * Translates from a rectangle which describes a portion of\n     * the viewport in point coordinates to image rectangle coordinates.\n     * This method can be called either by passing X,Y,width,height or an\n     * OpenSeadragon.Rect\n     * Note: not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.\n     * @function\n     * @param {(OpenSeadragon.Rect | Number)} viewerX either a rectangle or\n     * the X coordinate of the top left corner of the rectangle in viewport\n     * coordinate system.\n     * @param {Number} [viewerY] the Y coordinate of the top left corner of the rectangle\n     * in viewport coordinate system.\n     * @param {Number} [pointWidth] the width of the rectangle in viewport coordinate system.\n     * @param {Number} [pointHeight] the height of the rectangle in viewport coordinate system.\n     */viewportToImageRectangle:function viewportToImageRectangle(viewerX,viewerY,pointWidth,pointHeight){var rect=viewerX;if(!(rect instanceof $.Rect)){//they passed individual components instead of a rectangle\nrect=new $.Rect(viewerX,viewerY,pointWidth,pointHeight);}var coordA=this.viewportToImageCoordinates(rect.x,rect.y);var coordB=this._viewportToImageDelta(rect.width,rect.height);return new $.Rect(coordA.x,coordA.y,coordB.x,coordB.y,rect.degrees);},/**\n     * Convert pixel coordinates relative to the viewer element to image\n     * coordinates.\n     * Note: not accurate with multi-image.\n     * @param {OpenSeadragon.Point} pixel\n     * @returns {OpenSeadragon.Point}\n     */viewerElementToImageCoordinates:function viewerElementToImageCoordinates(pixel){var point=this.pointFromPixel(pixel,true);return this.viewportToImageCoordinates(point);},/**\n     * Convert pixel coordinates relative to the image to\n     * viewer element coordinates.\n     * Note: not accurate with multi-image.\n     * @param {OpenSeadragon.Point} pixel\n     * @returns {OpenSeadragon.Point}\n     */imageToViewerElementCoordinates:function imageToViewerElementCoordinates(pixel){var point=this.imageToViewportCoordinates(pixel);return this.pixelFromPoint(point,true);},/**\n     * Convert pixel coordinates relative to the window to image coordinates.\n     * Note: not accurate with multi-image.\n     * @param {OpenSeadragon.Point} pixel\n     * @returns {OpenSeadragon.Point}\n     */windowToImageCoordinates:function windowToImageCoordinates(pixel){var viewerCoordinates=pixel.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(viewerCoordinates);},/**\n     * Convert image coordinates to pixel coordinates relative to the window.\n     * Note: not accurate with multi-image.\n     * @param {OpenSeadragon.Point} pixel\n     * @returns {OpenSeadragon.Point}\n     */imageToWindowCoordinates:function imageToWindowCoordinates(pixel){var viewerCoordinates=this.imageToViewerElementCoordinates(pixel);return viewerCoordinates.plus(OpenSeadragon.getElementPosition(this.viewer.element));},/**\n     * Convert pixel coordinates relative to the viewer element to viewport\n     * coordinates.\n     * @param {OpenSeadragon.Point} pixel\n     * @returns {OpenSeadragon.Point}\n     */viewerElementToViewportCoordinates:function viewerElementToViewportCoordinates(pixel){return this.pointFromPixel(pixel,true);},/**\n     * Convert viewport coordinates to pixel coordinates relative to the\n     * viewer element.\n     * @param {OpenSeadragon.Point} point\n     * @returns {OpenSeadragon.Point}\n     */viewportToViewerElementCoordinates:function viewportToViewerElementCoordinates(point){return this.pixelFromPoint(point,true);},/**\n     * Convert pixel coordinates relative to the window to viewport coordinates.\n     * @param {OpenSeadragon.Point} pixel\n     * @returns {OpenSeadragon.Point}\n     */windowToViewportCoordinates:function windowToViewportCoordinates(pixel){var viewerCoordinates=pixel.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(viewerCoordinates);},/**\n     * Convert viewport coordinates to pixel coordinates relative to the window.\n     * @param {OpenSeadragon.Point} point\n     * @returns {OpenSeadragon.Point}\n     */viewportToWindowCoordinates:function viewportToWindowCoordinates(point){var viewerCoordinates=this.viewportToViewerElementCoordinates(point);return viewerCoordinates.plus(OpenSeadragon.getElementPosition(this.viewer.element));},/**\n     * Convert a viewport zoom to an image zoom.\n     * Image zoom: ratio of the original image size to displayed image size.\n     * 1 means original image size, 0.5 half size...\n     * Viewport zoom: ratio of the displayed image\'s width to viewport\'s width.\n     * 1 means identical width, 2 means image\'s width is twice the viewport\'s width...\n     * Note: not accurate with multi-image.\n     * @function\n     * @param {Number} viewportZoom The viewport zoom\n     * target zoom.\n     * @returns {Number} imageZoom The image zoom\n     */viewportToImageZoom:function viewportToImageZoom(viewportZoom){if(this.viewer&&this.viewer.world.getItemCount()>1){$.console.error(\'[Viewport.viewportToImageZoom] is not accurate with multi-image.\');}var imageWidth=this.contentSize.x;var containerWidth=this._containerInnerSize.x;var scale=this.homeBounds.width;var viewportToImageZoomRatio=containerWidth/imageWidth*scale;return viewportZoom*viewportToImageZoomRatio;},/**\n     * Convert an image zoom to a viewport zoom.\n     * Image zoom: ratio of the original image size to displayed image size.\n     * 1 means original image size, 0.5 half size...\n     * Viewport zoom: ratio of the displayed image\'s width to viewport\'s width.\n     * 1 means identical width, 2 means image\'s width is twice the viewport\'s width...\n     * Note: not accurate with multi-image.\n     * @function\n     * @param {Number} imageZoom The image zoom\n     * target zoom.\n     * @returns {Number} viewportZoom The viewport zoom\n     */imageToViewportZoom:function imageToViewportZoom(imageZoom){if(this.viewer&&this.viewer.world.getItemCount()>1){$.console.error(\'[Viewport.imageToViewportZoom] is not accurate with multi-image.\');}var imageWidth=this.contentSize.x;var containerWidth=this._containerInnerSize.x;var scale=this.homeBounds.width;var viewportToImageZoomRatio=imageWidth/containerWidth/scale;return imageZoom*viewportToImageZoomRatio;}};})(OpenSeadragon);/*\n * OpenSeadragon - TiledImage\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n * You shouldn\'t have to create a TiledImage directly; use {@link OpenSeadragon.Viewer#open}\n * or {@link OpenSeadragon.Viewer#addTiledImage} instead.\n * @class TiledImage\n * @memberof OpenSeadragon\n * @extends OpenSeadragon.EventSource\n * @classdesc Handles rendering of tiles for an {@link OpenSeadragon.Viewer}.\n * A new instance is created for each TileSource opened.\n * @param {Object} options - Configuration for this TiledImage.\n * @param {OpenSeadragon.TileSource} options.source - The TileSource that defines this TiledImage.\n * @param {OpenSeadragon.Viewer} options.viewer - The Viewer that owns this TiledImage.\n * @param {OpenSeadragon.TileCache} options.tileCache - The TileCache for this TiledImage to use.\n * @param {OpenSeadragon.Drawer} options.drawer - The Drawer for this TiledImage to draw onto.\n * @param {OpenSeadragon.ImageLoader} options.imageLoader - The ImageLoader for this TiledImage to use.\n * @param {Number} [options.x=0] - Left position, in viewport coordinates.\n * @param {Number} [options.y=0] - Top position, in viewport coordinates.\n * @param {Number} [options.width=1] - Width, in viewport coordinates.\n * @param {Number} [options.height] - Height, in viewport coordinates.\n * @param {OpenSeadragon.Rect} [options.clip] - An area, in image pixels, to clip to\n * (portions of the image outside of this area will not be visible). Only works on\n * browsers that support the HTML5 canvas.\n * @param {Number} [options.springStiffness] - See {@link OpenSeadragon.Options}.\n * @param {Boolean} [options.animationTime] - See {@link OpenSeadragon.Options}.\n * @param {Number} [options.minZoomImageRatio] - See {@link OpenSeadragon.Options}.\n * @param {Boolean} [options.wrapHorizontal] - See {@link OpenSeadragon.Options}.\n * @param {Boolean} [options.wrapVertical] - See {@link OpenSeadragon.Options}.\n * @param {Boolean} [options.immediateRender] - See {@link OpenSeadragon.Options}.\n * @param {Number} [options.blendTime] - See {@link OpenSeadragon.Options}.\n * @param {Boolean} [options.alwaysBlend] - See {@link OpenSeadragon.Options}.\n * @param {Number} [options.minPixelRatio] - See {@link OpenSeadragon.Options}.\n * @param {Number} [options.smoothTileEdgesMinZoom] - See {@link OpenSeadragon.Options}.\n * @param {Number} [options.opacity=1] - Opacity the tiled image should be drawn at.\n * @param {String} [options.compositeOperation] - How the image is composited onto other images; see compositeOperation in {@link OpenSeadragon.Options} for possible values.\n * @param {Boolean} [options.debugMode] - See {@link OpenSeadragon.Options}.\n * @param {String|CanvasGradient|CanvasPattern|Function} [options.placeholderFillStyle] - See {@link OpenSeadragon.Options}.\n * @param {String|Boolean} [options.crossOriginPolicy] - See {@link OpenSeadragon.Options}.\n */$.TiledImage=function(options){var _this=this;$.console.assert(options.tileCache,"[TiledImage] options.tileCache is required");$.console.assert(options.drawer,"[TiledImage] options.drawer is required");$.console.assert(options.viewer,"[TiledImage] options.viewer is required");$.console.assert(options.imageLoader,"[TiledImage] options.imageLoader is required");$.console.assert(options.source,"[TiledImage] options.source is required");$.console.assert(!options.clip||options.clip instanceof $.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present");$.EventSource.call(this);this._tileCache=options.tileCache;delete options.tileCache;this._drawer=options.drawer;delete options.drawer;this._imageLoader=options.imageLoader;delete options.imageLoader;if(options.clip instanceof $.Rect){this._clip=options.clip.clone();}delete options.clip;var x=options.x||0;delete options.x;var y=options.y||0;delete options.y;// Ratio of zoomable image height to width.\nthis.normHeight=options.source.dimensions.y/options.source.dimensions.x;this.contentAspectX=options.source.dimensions.x/options.source.dimensions.y;var scale=1;if(options.width){scale=options.width;delete options.width;if(options.height){$.console.error("specifying both width and height to a tiledImage is not supported");delete options.height;}}else if(options.height){scale=options.height/this.normHeight;delete options.height;}$.extend(true,this,{//internal state properties\nviewer:null,tilesMatrix:{},// A \'3d\' dictionary [level][x][y] --\x3e Tile.\ncoverage:{},// A \'3d\' dictionary [level][x][y] --\x3e Boolean.\nlastDrawn:[],// An unordered list of Tiles drawn last frame.\nlastResetTime:0,// Last time for which the tiledImage was reset.\n_midDraw:false,// Is the tiledImage currently updating the viewport?\n_needsDraw:true,// Does the tiledImage need to update the viewport again?\n_hasOpaqueTile:false,// Do we have even one fully opaque tile?\n//configurable settings\nspringStiffness:$.DEFAULT_SETTINGS.springStiffness,animationTime:$.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:$.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:$.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:$.DEFAULT_SETTINGS.wrapVertical,immediateRender:$.DEFAULT_SETTINGS.immediateRender,blendTime:$.DEFAULT_SETTINGS.blendTime,alwaysBlend:$.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:$.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:$.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,debugMode:$.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:$.DEFAULT_SETTINGS.crossOriginPolicy,placeholderFillStyle:$.DEFAULT_SETTINGS.placeholderFillStyle,opacity:$.DEFAULT_SETTINGS.opacity,compositeOperation:$.DEFAULT_SETTINGS.compositeOperation},options);this._xSpring=new $.Spring({initial:x,springStiffness:this.springStiffness,animationTime:this.animationTime});this._ySpring=new $.Spring({initial:y,springStiffness:this.springStiffness,animationTime:this.animationTime});this._scaleSpring=new $.Spring({initial:scale,springStiffness:this.springStiffness,animationTime:this.animationTime});this._updateForScale();// We need a callback to give image manipulation a chance to happen\nthis._drawingHandler=function(args){/**\n       * This event is fired just before the tile is drawn giving the application a chance to alter the image.\n       *\n       * NOTE: This event is only fired when the drawer is using a &lt;canvas&gt;.\n       *\n       * @event tile-drawing\n       * @memberof OpenSeadragon.Viewer\n       * @type {object}\n       * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised the event.\n       * @property {OpenSeadragon.Tile} tile - The Tile being drawn.\n       * @property {OpenSeadragon.TiledImage} tiledImage - Which TiledImage is being drawn.\n       * @property {OpenSeadragon.Tile} context - The HTML canvas context being drawn into.\n       * @property {OpenSeadragon.Tile} rendered - The HTML canvas context containing the tile imagery.\n       * @property {?Object} userData - Arbitrary subscriber-defined object.\n       */_this.viewer.raiseEvent(\'tile-drawing\',$.extend({tiledImage:_this},args));};};$.extend($.TiledImage.prototype,$.EventSource.prototype,/** @lends OpenSeadragon.TiledImage.prototype */{/**\n     * @returns {Boolean} Whether the TiledImage needs to be drawn.\n     */needsDraw:function needsDraw(){return this._needsDraw;},/**\n     * Clears all tiles and triggers an update on the next call to\n     * {@link OpenSeadragon.TiledImage#update}.\n     */reset:function reset(){this._tileCache.clearTilesFor(this);this.lastResetTime=$.now();this._needsDraw=true;},/**\n     * Updates the TiledImage\'s bounds, animating if needed.\n     * @returns {Boolean} Whether the TiledImage animated.\n     */update:function update(){var oldX=this._xSpring.current.value;var oldY=this._ySpring.current.value;var oldScale=this._scaleSpring.current.value;this._xSpring.update();this._ySpring.update();this._scaleSpring.update();if(this._xSpring.current.value!==oldX||this._ySpring.current.value!==oldY||this._scaleSpring.current.value!==oldScale){this._updateForScale();this._needsDraw=true;return true;}return false;},/**\n     * Draws the TiledImage to its Drawer.\n     */draw:function draw(){this._midDraw=true;updateViewport(this);this._midDraw=false;},/**\n     * Destroy the TiledImage (unload current loaded tiles).\n     */destroy:function destroy(){this.reset();},/**\n     * @returns {OpenSeadragon.Rect} This TiledImage\'s bounds in viewport coordinates.\n     * @param {Boolean} [current=false] - Pass true for the current location; false for target location.\n     */getBounds:function getBounds(current){if(current){return new $.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent);}return new $.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget);},// deprecated\ngetWorldBounds:function getWorldBounds(){$.console.error(\'[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead\');return this.getBounds();},/**\n     * @returns {OpenSeadragon.Point} This TiledImage\'s content size, in original pixels.\n     */getContentSize:function getContentSize(){return new $.Point(this.source.dimensions.x,this.source.dimensions.y);},// private\n_viewportToImageDelta:function _viewportToImageDelta(viewerX,viewerY,current){var scale=current?this._scaleSpring.current.value:this._scaleSpring.target.value;return new $.Point(viewerX*(this.source.dimensions.x/scale),viewerY*(this.source.dimensions.y*this.contentAspectX/scale));},/**\n     * Translates from OpenSeadragon viewer coordinate system to image coordinate system.\n     * This method can be called either by passing X,Y coordinates or an {@link OpenSeadragon.Point}.\n     * @param {Number|OpenSeadragon.Point} viewerX - The X coordinate or point in viewport coordinate system.\n     * @param {Number} [viewerY] - The Y coordinate in viewport coordinate system.\n     * @param {Boolean} [current=false] - Pass true to use the current location; false for target location.\n     * @return {OpenSeadragon.Point} A point representing the coordinates in the image.\n     */viewportToImageCoordinates:function viewportToImageCoordinates(viewerX,viewerY,current){if(viewerX instanceof $.Point){//they passed a point instead of individual components\ncurrent=viewerY;viewerY=viewerX.y;viewerX=viewerX.x;}if(current){return this._viewportToImageDelta(viewerX-this._xSpring.current.value,viewerY-this._ySpring.current.value);}return this._viewportToImageDelta(viewerX-this._xSpring.target.value,viewerY-this._ySpring.target.value);},// private\n_imageToViewportDelta:function _imageToViewportDelta(imageX,imageY,current){var scale=current?this._scaleSpring.current.value:this._scaleSpring.target.value;return new $.Point(imageX/this.source.dimensions.x*scale,imageY/this.source.dimensions.y/this.contentAspectX*scale);},/**\n     * Translates from image coordinate system to OpenSeadragon viewer coordinate system\n     * This method can be called either by passing X,Y coordinates or an {@link OpenSeadragon.Point}.\n     * @param {Number|OpenSeadragon.Point} imageX - The X coordinate or point in image coordinate system.\n     * @param {Number} [imageY] - The Y coordinate in image coordinate system.\n     * @param {Boolean} [current=false] - Pass true to use the current location; false for target location.\n     * @return {OpenSeadragon.Point} A point representing the coordinates in the viewport.\n     */imageToViewportCoordinates:function imageToViewportCoordinates(imageX,imageY,current){if(imageX instanceof $.Point){//they passed a point instead of individual components\ncurrent=imageY;imageY=imageX.y;imageX=imageX.x;}var point=this._imageToViewportDelta(imageX,imageY);if(current){point.x+=this._xSpring.current.value;point.y+=this._ySpring.current.value;}else{point.x+=this._xSpring.target.value;point.y+=this._ySpring.target.value;}return point;},/**\n     * Translates from a rectangle which describes a portion of the image in\n     * pixel coordinates to OpenSeadragon viewport rectangle coordinates.\n     * This method can be called either by passing X,Y,width,height or an {@link OpenSeadragon.Rect}.\n     * @param {Number|OpenSeadragon.Rect} imageX - The left coordinate or rectangle in image coordinate system.\n     * @param {Number} [imageY] - The top coordinate in image coordinate system.\n     * @param {Number} [pixelWidth] - The width in pixel of the rectangle.\n     * @param {Number} [pixelHeight] - The height in pixel of the rectangle.\n     * @param {Boolean} [current=false] - Pass true to use the current location; false for target location.\n     * @return {OpenSeadragon.Rect} A rect representing the coordinates in the viewport.\n     */imageToViewportRectangle:function imageToViewportRectangle(imageX,imageY,pixelWidth,pixelHeight,current){var rect=imageX;if(rect instanceof $.Rect){//they passed a rect instead of individual components\ncurrent=imageY;}else{rect=new $.Rect(imageX,imageY,pixelWidth,pixelHeight);}var coordA=this.imageToViewportCoordinates(rect.getTopLeft(),current);var coordB=this._imageToViewportDelta(rect.width,rect.height,current);return new $.Rect(coordA.x,coordA.y,coordB.x,coordB.y,rect.degrees);},/**\n     * Translates from a rectangle which describes a portion of\n     * the viewport in point coordinates to image rectangle coordinates.\n     * This method can be called either by passing X,Y,width,height or an {@link OpenSeadragon.Rect}.\n     * @param {Number|OpenSeadragon.Rect} viewerX - The left coordinate or rectangle in viewport coordinate system.\n     * @param {Number} [viewerY] - The top coordinate in viewport coordinate system.\n     * @param {Number} [pointWidth] - The width in viewport coordinate system.\n     * @param {Number} [pointHeight] - The height in viewport coordinate system.\n     * @param {Boolean} [current=false] - Pass true to use the current location; false for target location.\n     * @return {OpenSeadragon.Rect} A rect representing the coordinates in the image.\n     */viewportToImageRectangle:function viewportToImageRectangle(viewerX,viewerY,pointWidth,pointHeight,current){var rect=viewerX;if(viewerX instanceof $.Rect){//they passed a rect instead of individual components\ncurrent=viewerY;}else{rect=new $.Rect(viewerX,viewerY,pointWidth,pointHeight);}var coordA=this.viewportToImageCoordinates(rect.getTopLeft(),current);var coordB=this._viewportToImageDelta(rect.width,rect.height,current);return new $.Rect(coordA.x,coordA.y,coordB.x,coordB.y,rect.degrees);},/**\n     * Convert pixel coordinates relative to the viewer element to image\n     * coordinates.\n     * @param {OpenSeadragon.Point} pixel\n     * @returns {OpenSeadragon.Point}\n     */viewerElementToImageCoordinates:function viewerElementToImageCoordinates(pixel){var point=this.viewport.pointFromPixel(pixel,true);return this.viewportToImageCoordinates(point);},/**\n     * Convert pixel coordinates relative to the image to\n     * viewer element coordinates.\n     * @param {OpenSeadragon.Point} pixel\n     * @returns {OpenSeadragon.Point}\n     */imageToViewerElementCoordinates:function imageToViewerElementCoordinates(pixel){var point=this.imageToViewportCoordinates(pixel);return this.viewport.pixelFromPoint(point,true);},/**\n     * Convert pixel coordinates relative to the window to image coordinates.\n     * @param {OpenSeadragon.Point} pixel\n     * @returns {OpenSeadragon.Point}\n     */windowToImageCoordinates:function windowToImageCoordinates(pixel){var viewerCoordinates=pixel.minus(OpenSeadragon.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(viewerCoordinates);},/**\n     * Convert image coordinates to pixel coordinates relative to the window.\n     * @param {OpenSeadragon.Point} pixel\n     * @returns {OpenSeadragon.Point}\n     */imageToWindowCoordinates:function imageToWindowCoordinates(pixel){var viewerCoordinates=this.imageToViewerElementCoordinates(pixel);return viewerCoordinates.plus(OpenSeadragon.getElementPosition(this.viewer.element));},/**\n     * Convert a viewport zoom to an image zoom.\n     * Image zoom: ratio of the original image size to displayed image size.\n     * 1 means original image size, 0.5 half size...\n     * Viewport zoom: ratio of the displayed image\'s width to viewport\'s width.\n     * 1 means identical width, 2 means image\'s width is twice the viewport\'s width...\n     * @function\n     * @param {Number} viewportZoom The viewport zoom\n     * @returns {Number} imageZoom The image zoom\n     */viewportToImageZoom:function viewportToImageZoom(viewportZoom){var ratio=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return ratio*viewportZoom;},/**\n     * Convert an image zoom to a viewport zoom.\n     * Image zoom: ratio of the original image size to displayed image size.\n     * 1 means original image size, 0.5 half size...\n     * Viewport zoom: ratio of the displayed image\'s width to viewport\'s width.\n     * 1 means identical width, 2 means image\'s width is twice the viewport\'s width...\n     * Note: not accurate with multi-image.\n     * @function\n     * @param {Number} imageZoom The image zoom\n     * @returns {Number} viewportZoom The viewport zoom\n     */imageToViewportZoom:function imageToViewportZoom(imageZoom){var ratio=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return imageZoom/ratio;},/**\n     * Sets the TiledImage\'s position in the world.\n     * @param {OpenSeadragon.Point} position - The new position, in viewport coordinates.\n     * @param {Boolean} [immediately=false] - Whether to animate to the new position or snap immediately.\n     * @fires OpenSeadragon.TiledImage.event:bounds-change\n     */setPosition:function setPosition(position,immediately){var sameTarget=this._xSpring.target.value===position.x&&this._ySpring.target.value===position.y;if(immediately){if(sameTarget&&this._xSpring.current.value===position.x&&this._ySpring.current.value===position.y){return;}this._xSpring.resetTo(position.x);this._ySpring.resetTo(position.y);this._needsDraw=true;}else{if(sameTarget){return;}this._xSpring.springTo(position.x);this._ySpring.springTo(position.y);this._needsDraw=true;}if(!sameTarget){this._raiseBoundsChange();}},/**\n     * Sets the TiledImage\'s width in the world, adjusting the height to match based on aspect ratio.\n     * @param {Number} width - The new width, in viewport coordinates.\n     * @param {Boolean} [immediately=false] - Whether to animate to the new size or snap immediately.\n     * @fires OpenSeadragon.TiledImage.event:bounds-change\n     */setWidth:function setWidth(width,immediately){this._setScale(width,immediately);},/**\n     * Sets the TiledImage\'s height in the world, adjusting the width to match based on aspect ratio.\n     * @param {Number} height - The new height, in viewport coordinates.\n     * @param {Boolean} [immediately=false] - Whether to animate to the new size or snap immediately.\n     * @fires OpenSeadragon.TiledImage.event:bounds-change\n     */setHeight:function setHeight(height,immediately){this._setScale(height/this.normHeight,immediately);},/**\n     * @returns {OpenSeadragon.Rect|null} The TiledImage\'s current clip rectangle,\n     * in image pixels, or null if none.\n     */getClip:function getClip(){if(this._clip){return this._clip.clone();}return null;},/**\n     * @param {OpenSeadragon.Rect|null} newClip - An area, in image pixels, to clip to\n     * (portions of the image outside of this area will not be visible). Only works on\n     * browsers that support the HTML5 canvas.\n     */setClip:function setClip(newClip){$.console.assert(!newClip||newClip instanceof $.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null");if(newClip instanceof $.Rect){this._clip=newClip.clone();}else{this._clip=null;}this._needsDraw=true;},/**\n     * @returns {Number} The TiledImage\'s current opacity.\n     */getOpacity:function getOpacity(){return this.opacity;},/**\n     * @param {Number} opacity Opacity the tiled image should be drawn at.\n     */setOpacity:function setOpacity(opacity){this.opacity=opacity;this._needsDraw=true;},/**\n     * @returns {String} The TiledImage\'s current compositeOperation.\n     */getCompositeOperation:function getCompositeOperation(){return this.compositeOperation;},/**\n     * @param {String} compositeOperation the tiled image should be drawn with this globalCompositeOperation.\n     */setCompositeOperation:function setCompositeOperation(compositeOperation){this.compositeOperation=compositeOperation;this._needsDraw=true;},// private\n_setScale:function _setScale(scale,immediately){var sameTarget=this._scaleSpring.target.value===scale;if(immediately){if(sameTarget&&this._scaleSpring.current.value===scale){return;}this._scaleSpring.resetTo(scale);this._updateForScale();this._needsDraw=true;}else{if(sameTarget){return;}this._scaleSpring.springTo(scale);this._updateForScale();this._needsDraw=true;}if(!sameTarget){this._raiseBoundsChange();}},// private\n_updateForScale:function _updateForScale(){this._worldWidthTarget=this._scaleSpring.target.value;this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value;this._worldWidthCurrent=this._scaleSpring.current.value;this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value;},// private\n_raiseBoundsChange:function _raiseBoundsChange(){/**\n         * Raised when the TiledImage\'s bounds are changed.\n         * Note that this event is triggered only when the animation target is changed;\n         * not for every frame of animation.\n         * @event bounds-change\n         * @memberOf OpenSeadragon.TiledImage\n         * @type {object}\n         * @property {OpenSeadragon.World} eventSource - A reference to the TiledImage which raised the event.\n         * @property {?Object} userData - Arbitrary subscriber-defined object.\n         */this.raiseEvent(\'bounds-change\');}});/**\n * @private\n * @inner\n * Pretty much every other line in this needs to be documented so it\'s clear\n * how each piece of this routine contributes to the drawing process.  That\'s\n * why there are so many TODO\'s inside this function.\n */function updateViewport(tiledImage){tiledImage._needsDraw=false;var tile,level,best=null,haveDrawn=false,currentTime=$.now(),viewportBounds=tiledImage.viewport.getBoundsWithMargins(true),zeroRatioC=tiledImage.viewport.deltaPixelsFromPointsNoRotate(tiledImage.source.getPixelRatio(0),true).x*tiledImage._scaleSpring.current.value,lowestLevel=Math.max(tiledImage.source.minLevel,Math.floor(Math.log(tiledImage.minZoomImageRatio)/Math.log(2))),highestLevel=Math.min(Math.abs(tiledImage.source.maxLevel),Math.abs(Math.floor(Math.log(zeroRatioC/tiledImage.minPixelRatio)/Math.log(2)))),degrees=tiledImage.viewport.degrees,renderPixelRatioC,renderPixelRatioT,zeroRatioT,optimalRatio,levelOpacity,levelVisibility;viewportBounds.x-=tiledImage._xSpring.current.value;viewportBounds.y-=tiledImage._ySpring.current.value;// Reset tile\'s internal drawn state\nwhile(tiledImage.lastDrawn.length>0){tile=tiledImage.lastDrawn.pop();tile.beingDrawn=false;}//Change bounds for rotation\nif(degrees===90||degrees===270){viewportBounds=viewportBounds.rotate(degrees);}else if(degrees!==0&&degrees!==180){// This is just an approximation.\nvar orthBounds=viewportBounds.rotate(90);viewportBounds.x-=orthBounds.width/2;viewportBounds.y-=orthBounds.height/2;viewportBounds.width+=orthBounds.width;viewportBounds.height+=orthBounds.height;}var viewportTL=viewportBounds.getTopLeft();var viewportBR=viewportBounds.getBottomRight();//Don\'t draw if completely outside of the viewport\nif(!tiledImage.wrapHorizontal&&(viewportBR.x<0||viewportTL.x>tiledImage._worldWidthCurrent)){return;}if(!tiledImage.wrapVertical&&(viewportBR.y<0||viewportTL.y>tiledImage._worldHeightCurrent)){return;}// Calculate viewport rect / bounds\nif(!tiledImage.wrapHorizontal){viewportTL.x=Math.max(viewportTL.x,0);viewportBR.x=Math.min(viewportBR.x,tiledImage._worldWidthCurrent);}if(!tiledImage.wrapVertical){viewportTL.y=Math.max(viewportTL.y,0);viewportBR.y=Math.min(viewportBR.y,tiledImage._worldHeightCurrent);}// Calculations for the interval of levels to draw\n// (above in initial var statement)\n// can return invalid intervals; fix that here if necessary\nlowestLevel=Math.min(lowestLevel,highestLevel);// Update any level that will be drawn\nvar drawLevel;// FIXME: drawLevel should have a more explanatory name\nfor(level=highestLevel;level>=lowestLevel;level--){drawLevel=false;//Avoid calculations for draw if we have already drawn this\nrenderPixelRatioC=tiledImage.viewport.deltaPixelsFromPointsNoRotate(tiledImage.source.getPixelRatio(level),true).x*tiledImage._scaleSpring.current.value;if(!haveDrawn&&renderPixelRatioC>=tiledImage.minPixelRatio||level==lowestLevel){drawLevel=true;haveDrawn=true;}else if(!haveDrawn){continue;}//Perform calculations for draw if we haven\'t drawn this\nrenderPixelRatioT=tiledImage.viewport.deltaPixelsFromPointsNoRotate(tiledImage.source.getPixelRatio(level),false).x*tiledImage._scaleSpring.current.value;zeroRatioT=tiledImage.viewport.deltaPixelsFromPointsNoRotate(tiledImage.source.getPixelRatio(Math.max(tiledImage.source.getClosestLevel(tiledImage.viewport.containerSize)-1,0)),false).x*tiledImage._scaleSpring.current.value;optimalRatio=tiledImage.immediateRender?1:zeroRatioT;levelOpacity=Math.min(1,(renderPixelRatioC-0.5)/0.5);levelVisibility=optimalRatio/Math.abs(optimalRatio-renderPixelRatioT);// Update the level and keep track of \'best\' tile to load\nbest=updateLevel(tiledImage,haveDrawn,drawLevel,level,levelOpacity,levelVisibility,viewportTL,viewportBR,currentTime,best);// Stop the loop if lower-res tiles would all be covered by\n// already drawn tiles\nif(providesCoverage(tiledImage.coverage,level)){break;}}// Perform the actual drawing\ndrawTiles(tiledImage,tiledImage.lastDrawn);// Load the new \'best\' tile\nif(best&&!best.context2D){loadTile(tiledImage,best,currentTime);}else{/**\n         * Fired every time the TiledImage is drawn when all the necessary tiles for the\n         * current view have been fully loaded.\n         *\n         * @event fully-loaded\n         * @memberof OpenSeadragon.TiledImage\n         * @type {object}\n         * @property {OpenSeadragon.TiledImage} eventSource - A reference to the TiledImage which raised the event.\n         * @property {?Object} userData - Arbitrary subscriber-defined object.\n         */tiledImage.raiseEvent(\'fully-loaded\');}}function updateLevel(tiledImage,haveDrawn,drawLevel,level,levelOpacity,levelVisibility,viewportTL,viewportBR,currentTime,best){var x,y,tileTL,tileBR,numberOfTiles,viewportCenter=tiledImage.viewport.pixelFromPoint(tiledImage.viewport.getCenter());if(tiledImage.viewer){/**\n         * <em>- Needs documentation -</em>\n         *\n         * @event update-level\n         * @memberof OpenSeadragon.Viewer\n         * @type {object}\n         * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised the event.\n         * @property {OpenSeadragon.TiledImage} tiledImage - Which TiledImage is being drawn.\n         * @property {Object} havedrawn\n         * @property {Object} level\n         * @property {Object} opacity\n         * @property {Object} visibility\n         * @property {Object} topleft\n         * @property {Object} bottomright\n         * @property {Object} currenttime\n         * @property {Object} best\n         * @property {?Object} userData - Arbitrary subscriber-defined object.\n         */tiledImage.viewer.raiseEvent(\'update-level\',{tiledImage:tiledImage,havedrawn:haveDrawn,level:level,opacity:levelOpacity,visibility:levelVisibility,topleft:viewportTL,bottomright:viewportBR,currenttime:currentTime,best:best});}//OK, a new drawing so do your calculations\ntileTL=tiledImage.source.getTileAtPoint(level,viewportTL.divide(tiledImage._scaleSpring.current.value));tileBR=tiledImage.source.getTileAtPoint(level,viewportBR.divide(tiledImage._scaleSpring.current.value));numberOfTiles=tiledImage.source.getNumTiles(level);resetCoverage(tiledImage.coverage,level);if(!tiledImage.wrapHorizontal){tileBR.x=Math.min(tileBR.x,numberOfTiles.x-1);}if(!tiledImage.wrapVertical){tileBR.y=Math.min(tileBR.y,numberOfTiles.y-1);}for(x=tileTL.x;x<=tileBR.x;x++){for(y=tileTL.y;y<=tileBR.y;y++){best=updateTile(tiledImage,drawLevel,haveDrawn,x,y,level,levelOpacity,levelVisibility,viewportCenter,numberOfTiles,currentTime,best);}}return best;}function updateTile(tiledImage,drawLevel,haveDrawn,x,y,level,levelOpacity,levelVisibility,viewportCenter,numberOfTiles,currentTime,best){var tile=getTile(x,y,level,tiledImage.source,tiledImage.tilesMatrix,currentTime,numberOfTiles,tiledImage._worldWidthCurrent,tiledImage._worldHeightCurrent),drawTile=drawLevel;if(tiledImage.viewer){/**\n         * <em>- Needs documentation -</em>\n         *\n         * @event update-tile\n         * @memberof OpenSeadragon.Viewer\n         * @type {object}\n         * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised the event.\n         * @property {OpenSeadragon.TiledImage} tiledImage - Which TiledImage is being drawn.\n         * @property {OpenSeadragon.Tile} tile\n         * @property {?Object} userData - Arbitrary subscriber-defined object.\n         */tiledImage.viewer.raiseEvent(\'update-tile\',{tiledImage:tiledImage,tile:tile});}setCoverage(tiledImage.coverage,level,x,y,false);if(!tile.exists){return best;}if(haveDrawn&&!drawTile){if(isCovered(tiledImage.coverage,level,x,y)){setCoverage(tiledImage.coverage,level,x,y,true);}else{drawTile=true;}}if(!drawTile){return best;}positionTile(tile,tiledImage.source.tileOverlap,tiledImage.viewport,viewportCenter,levelVisibility,tiledImage);if(!tile.loaded){if(tile.context2D){setTileLoaded(tiledImage,tile);}else{var imageRecord=tiledImage._tileCache.getImageRecord(tile.url);if(imageRecord){var image=imageRecord.getImage();setTileLoaded(tiledImage,tile,image);}}}if(tile.loaded){var needsDraw=blendTile(tiledImage,tile,x,y,level,levelOpacity,currentTime);if(needsDraw){tiledImage._needsDraw=true;}}else if(tile.loading){// the tile is already in the download queue\n// thanks josh1093 for finally translating this typo\n}else{best=compareTiles(best,tile);}return best;}function getTile(x,y,level,tileSource,tilesMatrix,time,numTiles,worldWidth,worldHeight){var xMod,yMod,bounds,exists,url,context2D,tile;if(!tilesMatrix[level]){tilesMatrix[level]={};}if(!tilesMatrix[level][x]){tilesMatrix[level][x]={};}if(!tilesMatrix[level][x][y]){xMod=(numTiles.x+x%numTiles.x)%numTiles.x;yMod=(numTiles.y+y%numTiles.y)%numTiles.y;bounds=tileSource.getTileBounds(level,xMod,yMod);exists=tileSource.tileExists(level,xMod,yMod);url=tileSource.getTileUrl(level,xMod,yMod);context2D=tileSource.getContext2D?tileSource.getContext2D(level,xMod,yMod):undefined;bounds.x+=(x-xMod)/numTiles.x;bounds.y+=worldHeight/worldWidth*((y-yMod)/numTiles.y);tilesMatrix[level][x][y]=new $.Tile(level,x,y,bounds,exists,url,context2D);}tile=tilesMatrix[level][x][y];tile.lastTouchTime=time;return tile;}function loadTile(tiledImage,tile,time){tile.loading=true;tiledImage._imageLoader.addJob({src:tile.url,crossOriginPolicy:tiledImage.crossOriginPolicy,callback:function callback(image,errorMsg){onTileLoad(tiledImage,tile,time,image,errorMsg);},abort:function abort(){tile.loading=false;}});}function onTileLoad(tiledImage,tile,time,image,errorMsg){if(!image){$.console.log("Tile %s failed to load: %s - error: %s",tile,tile.url,errorMsg);/**\n         * Triggered when a tile fails to load.\n         *\n         * @event tile-load-failed\n         * @memberof OpenSeadragon.Viewer\n         * @type {object}\n         * @property {OpenSeadragon.Tile} tile - The tile that failed to load.\n         * @property {OpenSeadragon.TiledImage} tiledImage - The tiled image the tile belongs to.\n         * @property {number} time - The time in milliseconds when the tile load began.\n         * @property {string} message - The error message.\n         */tiledImage.viewer.raiseEvent("tile-load-failed",{tile:tile,tiledImage:tiledImage,time:time,message:errorMsg});tile.loading=false;tile.exists=false;return;}if(time<tiledImage.lastResetTime){$.console.log("Ignoring tile %s loaded before reset: %s",tile,tile.url);tile.loading=false;return;}var finish=function finish(){var cutoff=Math.ceil(Math.log(tiledImage.source.getTileWidth(tile.level))/Math.log(2));setTileLoaded(tiledImage,tile,image,cutoff);};// Check if we\'re mid-update; this can happen on IE8 because image load events for\n// cached images happen immediately there\nif(!tiledImage._midDraw){finish();}else{// Wait until after the update, in case caching unloads any tiles\nwindow.setTimeout(finish,1);}}function setTileLoaded(tiledImage,tile,image,cutoff){var increment=0;function getCompletionCallback(){increment++;return completionCallback;}function completionCallback(){increment--;if(increment===0){tile.loading=false;tile.loaded=true;if(!tile.context2D){tiledImage._tileCache.cacheTile({image:image,tile:tile,cutoff:cutoff,tiledImage:tiledImage});}tiledImage._needsDraw=true;}}/**\n     * Triggered when a tile has just been loaded in memory. That means that the\n     * image has been downloaded and can be modified before being drawn to the canvas.\n     *\n     * @event tile-loaded\n     * @memberof OpenSeadragon.Viewer\n     * @type {object}\n     * @property {Image} image - The image of the tile.\n     * @property {OpenSeadragon.TiledImage} tiledImage - The tiled image of the loaded tile.\n     * @property {OpenSeadragon.Tile} tile - The tile which has been loaded.\n     * @property {function} getCompletionCallback - A function giving a callback to call\n     * when the asynchronous processing of the image is done. The image will be\n     * marked as entirely loaded when the callback has been called once for each\n     * call to getCompletionCallback.\n     */tiledImage.viewer.raiseEvent("tile-loaded",{tile:tile,tiledImage:tiledImage,image:image,getCompletionCallback:getCompletionCallback});// In case the completion callback is never called, we at least force it once.\ngetCompletionCallback()();}function positionTile(tile,overlap,viewport,viewportCenter,levelVisibility,tiledImage){var boundsTL=tile.bounds.getTopLeft();boundsTL.x*=tiledImage._scaleSpring.current.value;boundsTL.y*=tiledImage._scaleSpring.current.value;boundsTL.x+=tiledImage._xSpring.current.value;boundsTL.y+=tiledImage._ySpring.current.value;var boundsSize=tile.bounds.getSize();boundsSize.x*=tiledImage._scaleSpring.current.value;boundsSize.y*=tiledImage._scaleSpring.current.value;var positionC=viewport.pixelFromPointNoRotate(boundsTL,true),positionT=viewport.pixelFromPointNoRotate(boundsTL,false),sizeC=viewport.deltaPixelsFromPointsNoRotate(boundsSize,true),sizeT=viewport.deltaPixelsFromPointsNoRotate(boundsSize,false),tileCenter=positionT.plus(sizeT.divide(2)),tileDistance=viewportCenter.distanceTo(tileCenter);if(!overlap){sizeC=sizeC.plus(new $.Point(1,1));}tile.position=positionC;tile.size=sizeC;tile.distance=tileDistance;tile.visibility=levelVisibility;}function blendTile(tiledImage,tile,x,y,level,levelOpacity,currentTime){var blendTimeMillis=1000*tiledImage.blendTime,deltaTime,opacity;if(!tile.blendStart){tile.blendStart=currentTime;}deltaTime=currentTime-tile.blendStart;opacity=blendTimeMillis?Math.min(1,deltaTime/blendTimeMillis):1;if(tiledImage.alwaysBlend){opacity*=levelOpacity;}tile.opacity=opacity;tiledImage.lastDrawn.push(tile);if(opacity==1){setCoverage(tiledImage.coverage,level,x,y,true);tiledImage._hasOpaqueTile=true;}else if(deltaTime<blendTimeMillis){return true;}return false;}/**\n * @private\n * @inner\n * Returns true if the given tile provides coverage to lower-level tiles of\n * lower resolution representing the same content. If neither x nor y is\n * given, returns true if the entire visible level provides coverage.\n *\n * Note that out-of-bounds tiles provide coverage in this sense, since\n * there\'s no content that they would need to cover. Tiles at non-existent\n * levels that are within the image bounds, however, do not.\n */function providesCoverage(coverage,level,x,y){var rows,cols,i,j;if(!coverage[level]){return false;}if(x===undefined||y===undefined){rows=coverage[level];for(i in rows){if(rows.hasOwnProperty(i)){cols=rows[i];for(j in cols){if(cols.hasOwnProperty(j)&&!cols[j]){return false;}}}}return true;}return coverage[level][x]===undefined||coverage[level][x][y]===undefined||coverage[level][x][y]===true;}/**\n * @private\n * @inner\n * Returns true if the given tile is completely covered by higher-level\n * tiles of higher resolution representing the same content. If neither x\n * nor y is given, returns true if the entire visible level is covered.\n */function isCovered(coverage,level,x,y){if(x===undefined||y===undefined){return providesCoverage(coverage,level+1);}else{return providesCoverage(coverage,level+1,2*x,2*y)&&providesCoverage(coverage,level+1,2*x,2*y+1)&&providesCoverage(coverage,level+1,2*x+1,2*y)&&providesCoverage(coverage,level+1,2*x+1,2*y+1);}}/**\n * @private\n * @inner\n * Sets whether the given tile provides coverage or not.\n */function setCoverage(coverage,level,x,y,covers){if(!coverage[level]){$.console.warn("Setting coverage for a tile before its level\'s coverage has been reset: %s",level);return;}if(!coverage[level][x]){coverage[level][x]={};}coverage[level][x][y]=covers;}/**\n * @private\n * @inner\n * Resets coverage information for the given level. This should be called\n * after every draw routine. Note that at the beginning of the next draw\n * routine, coverage for every visible tile should be explicitly set.\n */function resetCoverage(coverage,level){coverage[level]={};}/**\n * @private\n * @inner\n * Determines whether the \'last best\' tile for the area is better than the\n * tile in question.\n */function compareTiles(previousBest,tile){if(!previousBest){return tile;}if(tile.visibility>previousBest.visibility){return tile;}else if(tile.visibility==previousBest.visibility){if(tile.distance<previousBest.distance){return tile;}}return previousBest;}function drawTiles(tiledImage,lastDrawn){var i,tile=lastDrawn[0];if(tiledImage.opacity<=0){drawDebugInfo(tiledImage,lastDrawn);return;}var useSketch=tiledImage.opacity<1||tiledImage.compositeOperation&&tiledImage.compositeOperation!==\'source-over\';var sketchScale;var sketchTranslate;var zoom=tiledImage.viewport.getZoom(true);var imageZoom=tiledImage.viewportToImageZoom(zoom);if(imageZoom>tiledImage.smoothTileEdgesMinZoom&&tile){// When zoomed in a lot (>100%) the tile edges are visible.\n// So we have to composite them at ~100% and scale them up together.\nuseSketch=true;sketchScale=tile.getScaleForEdgeSmoothing();sketchTranslate=tile.getTranslationForEdgeSmoothing(sketchScale,tiledImage._drawer.getCanvasSize(false),tiledImage._drawer.getCanvasSize(true));}if(useSketch){tiledImage._drawer._clear(true);}// When scaling, we must rotate only when blending the sketch canvas to avoid\n// interpolation\nif(tiledImage.viewport.degrees!==0&&!sketchScale){tiledImage._drawer._offsetForRotation(tiledImage.viewport.degrees,useSketch);}var usedClip=false;if(tiledImage._clip){tiledImage._drawer.saveContext(useSketch);var box=tiledImage.imageToViewportRectangle(tiledImage._clip,true);var clipRect=tiledImage._drawer.viewportToDrawerRectangle(box);if(sketchScale){clipRect=clipRect.times(sketchScale);}if(sketchTranslate){clipRect=clipRect.translate(sketchTranslate);}tiledImage._drawer.setClip(clipRect,useSketch);usedClip=true;}if(tiledImage.placeholderFillStyle&&tiledImage._hasOpaqueTile===false){var placeholderRect=tiledImage._drawer.viewportToDrawerRectangle(tiledImage.getBounds(true));if(sketchScale){placeholderRect=placeholderRect.times(sketchScale);}if(sketchTranslate){placeholderRect=placeholderRect.translate(sketchTranslate);}var fillStyle=null;if(typeof tiledImage.placeholderFillStyle==="function"){fillStyle=tiledImage.placeholderFillStyle(tiledImage,tiledImage._drawer.context);}else{fillStyle=tiledImage.placeholderFillStyle;}tiledImage._drawer.drawRectangle(placeholderRect,fillStyle,useSketch);}for(i=lastDrawn.length-1;i>=0;i--){tile=lastDrawn[i];tiledImage._drawer.drawTile(tile,tiledImage._drawingHandler,useSketch,sketchScale,sketchTranslate);tile.beingDrawn=true;if(tiledImage.viewer){/**\n             * <em>- Needs documentation -</em>\n             *\n             * @event tile-drawn\n             * @memberof OpenSeadragon.Viewer\n             * @type {object}\n             * @property {OpenSeadragon.Viewer} eventSource - A reference to the Viewer which raised the event.\n             * @property {OpenSeadragon.TiledImage} tiledImage - Which TiledImage is being drawn.\n             * @property {OpenSeadragon.Tile} tile\n             * @property {?Object} userData - Arbitrary subscriber-defined object.\n             */tiledImage.viewer.raiseEvent(\'tile-drawn\',{tiledImage:tiledImage,tile:tile});}}if(usedClip){tiledImage._drawer.restoreContext(useSketch);}if(tiledImage.viewport.degrees!==0&&!sketchScale){tiledImage._drawer._restoreRotationChanges(useSketch);}if(useSketch){var offsetForRotation=tiledImage.viewport.degrees!==0&&sketchScale;if(offsetForRotation){tiledImage._drawer._offsetForRotation(tiledImage.viewport.degrees,false);}tiledImage._drawer.blendSketch(tiledImage.opacity,sketchScale,sketchTranslate,tiledImage.compositeOperation);if(offsetForRotation){tiledImage._drawer._restoreRotationChanges(false);}}drawDebugInfo(tiledImage,lastDrawn);}function drawDebugInfo(tiledImage,lastDrawn){if(tiledImage.debugMode){for(var i=lastDrawn.length-1;i>=0;i--){var tile=lastDrawn[i];try{tiledImage._drawer.drawDebugInfo(tile,lastDrawn.length,i);}catch(e){$.console.error(e);}}}}})(OpenSeadragon);/*\n * OpenSeadragon - TileCache\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){// private class\nvar TileRecord=function TileRecord(options){$.console.assert(options,"[TileCache.cacheTile] options is required");$.console.assert(options.tile,"[TileCache.cacheTile] options.tile is required");$.console.assert(options.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");this.tile=options.tile;this.tiledImage=options.tiledImage;};// private class\nvar ImageRecord=function ImageRecord(options){$.console.assert(options,"[ImageRecord] options is required");$.console.assert(options.image,"[ImageRecord] options.image is required");this._image=options.image;this._tiles=[];};ImageRecord.prototype={destroy:function destroy(){this._image=null;this._renderedContext=null;this._tiles=null;},getImage:function getImage(){return this._image;},getRenderedContext:function getRenderedContext(){if(!this._renderedContext){var canvas=document.createElement(\'canvas\');canvas.width=this._image.width;canvas.height=this._image.height;this._renderedContext=canvas.getContext(\'2d\');this._renderedContext.drawImage(this._image,0,0);//since we are caching the prerendered image on a canvas\n//allow the image to not be held in memory\nthis._image=null;}return this._renderedContext;},setRenderedContext:function setRenderedContext(renderedContext){$.console.error("ImageRecord.setRenderedContext is deprecated. "+"The rendered context should be created by the ImageRecord "+"itself when calling ImageRecord.getRenderedContext.");this._renderedContext=renderedContext;},addTile:function addTile(tile){$.console.assert(tile,\'[ImageRecord.addTile] tile is required\');this._tiles.push(tile);},removeTile:function removeTile(tile){for(var i=0;i<this._tiles.length;i++){if(this._tiles[i]===tile){this._tiles.splice(i,1);return;}}$.console.warn(\'[ImageRecord.removeTile] trying to remove unknown tile\',tile);},getTileCount:function getTileCount(){return this._tiles.length;}};/**\n * @class TileCache\n * @memberof OpenSeadragon\n * @classdesc Stores all the tiles displayed in a {@link OpenSeadragon.Viewer}.\n * You generally won\'t have to interact with the TileCache directly.\n * @param {Object} options - Configuration for this TileCache.\n * @param {Number} [options.maxImageCacheCount] - See maxImageCacheCount in\n * {@link OpenSeadragon.Options} for details.\n */$.TileCache=function(options){options=options||{};this._maxImageCacheCount=options.maxImageCacheCount||$.DEFAULT_SETTINGS.maxImageCacheCount;this._tilesLoaded=[];this._imagesLoaded=[];this._imagesLoadedCount=0;};/** @lends OpenSeadragon.TileCache.prototype */$.TileCache.prototype={/**\n     * @returns {Number} The total number of tiles that have been loaded by\n     * this TileCache.\n     */numTilesLoaded:function numTilesLoaded(){return this._tilesLoaded.length;},/**\n     * Caches the specified tile, removing an old tile if necessary to stay under the\n     * maxImageCacheCount specified on construction. Note that if multiple tiles reference\n     * the same image, there may be more tiles than maxImageCacheCount; the goal is to keep\n     * the number of images below that number. Note, as well, that even the number of images\n     * may temporarily surpass that number, but should eventually come back down to the max specified.\n     * @param {Object} options - Tile info.\n     * @param {OpenSeadragon.Tile} options.tile - The tile to cache.\n     * @param {Image} options.image - The image of the tile to cache.\n     * @param {OpenSeadragon.TiledImage} options.tiledImage - The TiledImage that owns that tile.\n     * @param {Number} [options.cutoff=0] - If adding this tile goes over the cache max count, this\n     * function will release an old tile. The cutoff option specifies a tile level at or below which\n     * tiles will not be released.\n     */cacheTile:function cacheTile(options){$.console.assert(options,"[TileCache.cacheTile] options is required");$.console.assert(options.tile,"[TileCache.cacheTile] options.tile is required");$.console.assert(options.tile.url,"[TileCache.cacheTile] options.tile.url is required");$.console.assert(options.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var cutoff=options.cutoff||0;var insertionIndex=this._tilesLoaded.length;var imageRecord=this._imagesLoaded[options.tile.url];if(!imageRecord){$.console.assert(options.image,"[TileCache.cacheTile] options.image is required to create an ImageRecord");imageRecord=this._imagesLoaded[options.tile.url]=new ImageRecord({image:options.image});this._imagesLoadedCount++;}imageRecord.addTile(options.tile);options.tile.cacheImageRecord=imageRecord;// Note that just because we\'re unloading a tile doesn\'t necessarily mean\n// we\'re unloading an image. With repeated calls it should sort itself out, though.\nif(this._imagesLoadedCount>this._maxImageCacheCount){var worstTile=null;var worstTileIndex=-1;var worstTileRecord=null;var prevTile,worstTime,worstLevel,prevTime,prevLevel,prevTileRecord;for(var i=this._tilesLoaded.length-1;i>=0;i--){prevTileRecord=this._tilesLoaded[i];prevTile=prevTileRecord.tile;if(prevTile.level<=cutoff||prevTile.beingDrawn){continue;}else if(!worstTile){worstTile=prevTile;worstTileIndex=i;worstTileRecord=prevTileRecord;continue;}prevTime=prevTile.lastTouchTime;worstTime=worstTile.lastTouchTime;prevLevel=prevTile.level;worstLevel=worstTile.level;if(prevTime<worstTime||prevTime==worstTime&&prevLevel>worstLevel){worstTile=prevTile;worstTileIndex=i;worstTileRecord=prevTileRecord;}}if(worstTile&&worstTileIndex>=0){this._unloadTile(worstTileRecord);insertionIndex=worstTileIndex;}}this._tilesLoaded[insertionIndex]=new TileRecord({tile:options.tile,tiledImage:options.tiledImage});},/**\n     * Clears all tiles associated with the specified tiledImage.\n     * @param {OpenSeadragon.TiledImage} tiledImage\n     */clearTilesFor:function clearTilesFor(tiledImage){$.console.assert(tiledImage,\'[TileCache.clearTilesFor] tiledImage is required\');var tileRecord;for(var i=0;i<this._tilesLoaded.length;++i){tileRecord=this._tilesLoaded[i];if(tileRecord.tiledImage===tiledImage){this._unloadTile(tileRecord);this._tilesLoaded.splice(i,1);i--;}}},// private\ngetImageRecord:function getImageRecord(url){$.console.assert(url,\'[TileCache.getImageRecord] url is required\');return this._imagesLoaded[url];},// private\n_unloadTile:function _unloadTile(tileRecord){$.console.assert(tileRecord,\'[TileCache._unloadTile] tileRecord is required\');var tile=tileRecord.tile;var tiledImage=tileRecord.tiledImage;tile.unload();tile.cacheImageRecord=null;var imageRecord=this._imagesLoaded[tile.url];imageRecord.removeTile(tile);if(!imageRecord.getTileCount()){imageRecord.destroy();delete this._imagesLoaded[tile.url];this._imagesLoadedCount--;}/**\n         * Triggered when a tile has just been unloaded from memory.\n         *\n         * @event tile-unloaded\n         * @memberof OpenSeadragon.Viewer\n         * @type {object}\n         * @property {OpenSeadragon.TiledImage} tiledImage - The tiled image of the unloaded tile.\n         * @property {OpenSeadragon.Tile} tile - The tile which has been unloaded.\n         */tiledImage.viewer.raiseEvent("tile-unloaded",{tile:tile,tiledImage:tiledImage});}};})(OpenSeadragon);/*\n * OpenSeadragon - World\n *\n * Copyright (C) 2009 CodePlex Foundation\n * Copyright (C) 2010-2013 OpenSeadragon contributors\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * - Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * - Redistributions in binary form must reproduce the above copyright\n *   notice, this list of conditions and the following disclaimer in the\n *   documentation and/or other materials provided with the distribution.\n *\n * - Neither the name of CodePlex Foundation nor the names of its\n *   contributors may be used to endorse or promote products derived from\n *   this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function($){/**\n * @class World\n * @memberof OpenSeadragon\n * @extends OpenSeadragon.EventSource\n * @classdesc Keeps track of all of the tiled images in the scene.\n * @param {Object} options - World options.\n * @param {OpenSeadragon.Viewer} options.viewer - The Viewer that owns this World.\n **/$.World=function(options){var _this=this;$.console.assert(options.viewer,"[World] options.viewer is required");$.EventSource.call(this);this.viewer=options.viewer;this._items=[];this._needsDraw=false;this._autoRefigureSizes=true;this._needsSizesFigured=false;this._delegatedFigureSizes=function(event){if(_this._autoRefigureSizes){_this._figureSizes();}else{_this._needsSizesFigured=true;}};this._figureSizes();};$.extend($.World.prototype,$.EventSource.prototype,/** @lends OpenSeadragon.World.prototype */{/**\n     * Add the specified item.\n     * @param {OpenSeadragon.TiledImage} item - The item to add.\n     * @param {Number} [options.index] - Index for the item. If not specified, goes at the top.\n     * @fires OpenSeadragon.World.event:add-item\n     * @fires OpenSeadragon.World.event:metrics-change\n     */addItem:function addItem(item,options){$.console.assert(item,"[World.addItem] item is required");$.console.assert(item instanceof $.TiledImage,"[World.addItem] only TiledImages supported at this time");options=options||{};if(options.index!==undefined){var index=Math.max(0,Math.min(this._items.length,options.index));this._items.splice(index,0,item);}else{this._items.push(item);}if(this._autoRefigureSizes){this._figureSizes();}else{this._needsSizesFigured=true;}this._needsDraw=true;item.addHandler(\'bounds-change\',this._delegatedFigureSizes);/**\n         * Raised when an item is added to the World.\n         * @event add-item\n         * @memberOf OpenSeadragon.World\n         * @type {object}\n         * @property {OpenSeadragon.Viewer} eventSource - A reference to the World which raised the event.\n         * @property {OpenSeadragon.TiledImage} item - The item that has been added.\n         * @property {?Object} userData - Arbitrary subscriber-defined object.\n         */this.raiseEvent(\'add-item\',{item:item});},/**\n     * Get the item at the specified index.\n     * @param {Number} index - The item\'s index.\n     * @returns {OpenSeadragon.TiledImage} The item at the specified index.\n     */getItemAt:function getItemAt(index){$.console.assert(index!==undefined,"[World.getItemAt] index is required");return this._items[index];},/**\n     * Get the index of the given item or -1 if not present.\n     * @param {OpenSeadragon.TiledImage} item - The item.\n     * @returns {Number} The index of the item or -1 if not present.\n     */getIndexOfItem:function getIndexOfItem(item){$.console.assert(item,"[World.getIndexOfItem] item is required");return $.indexOf(this._items,item);},/**\n     * @returns {Number} The number of items used.\n     */getItemCount:function getItemCount(){return this._items.length;},/**\n     * Change the index of a item so that it appears over or under others.\n     * @param {OpenSeadragon.TiledImage} item - The item to move.\n     * @param {Number} index - The new index.\n     * @fires OpenSeadragon.World.event:item-index-change\n     */setItemIndex:function setItemIndex(item,index){$.console.assert(item,"[World.setItemIndex] item is required");$.console.assert(index!==undefined,"[World.setItemIndex] index is required");var oldIndex=this.getIndexOfItem(item);if(index>=this._items.length){throw new Error("Index bigger than number of layers.");}if(index===oldIndex||oldIndex===-1){return;}this._items.splice(oldIndex,1);this._items.splice(index,0,item);this._needsDraw=true;/**\n         * Raised when the order of the indexes has been changed.\n         * @event item-index-change\n         * @memberOf OpenSeadragon.World\n         * @type {object}\n         * @property {OpenSeadragon.World} eventSource - A reference to the World which raised the event.\n         * @property {OpenSeadragon.TiledImage} item - The item whose index has\n         * been changed\n         * @property {Number} previousIndex - The previous index of the item\n         * @property {Number} newIndex - The new index of the item\n         * @property {?Object} userData - Arbitrary subscriber-defined object.\n         */this.raiseEvent(\'item-index-change\',{item:item,previousIndex:oldIndex,newIndex:index});},/**\n     * Remove an item.\n     * @param {OpenSeadragon.TiledImage} item - The item to remove.\n     * @fires OpenSeadragon.World.event:remove-item\n     * @fires OpenSeadragon.World.event:metrics-change\n     */removeItem:function removeItem(item){$.console.assert(item,"[World.removeItem] item is required");var index=$.indexOf(this._items,item);if(index===-1){return;}item.removeHandler(\'bounds-change\',this._delegatedFigureSizes);item.destroy();this._items.splice(index,1);this._figureSizes();this._needsDraw=true;this._raiseRemoveItem(item);},/**\n     * Remove all items.\n     * @fires OpenSeadragon.World.event:remove-item\n     * @fires OpenSeadragon.World.event:metrics-change\n     */removeAll:function removeAll(){// We need to make sure any pending images are canceled so the world items don\'t get messed up\nthis.viewer._cancelPendingImages();var item;for(var i=0;i<this._items.length;i++){item=this._items[i];item.removeHandler(\'bounds-change\',this._delegatedFigureSizes);item.destroy();}var removedItems=this._items;this._items=[];this._figureSizes();this._needsDraw=true;for(i=0;i<removedItems.length;i++){item=removedItems[i];this._raiseRemoveItem(item);}},/**\n     * Clears all tiles and triggers updates for all items.\n     */resetItems:function resetItems(){for(var i=0;i<this._items.length;i++){this._items[i].reset();}},/**\n     * Updates (i.e. animates bounds of) all items.\n     */update:function update(){var animated=false;for(var i=0;i<this._items.length;i++){animated=this._items[i].update()||animated;}return animated;},/**\n     * Draws all items.\n     */draw:function draw(){for(var i=0;i<this._items.length;i++){this._items[i].draw();}this._needsDraw=false;},/**\n     * @returns {Boolean} true if any items need updating.\n     */needsDraw:function needsDraw(){for(var i=0;i<this._items.length;i++){if(this._items[i].needsDraw()){return true;}}return this._needsDraw;},/**\n     * @returns {OpenSeadragon.Rect} The smallest rectangle that encloses all items, in viewport coordinates.\n     */getHomeBounds:function getHomeBounds(){return this._homeBounds.clone();},/**\n     * To facilitate zoom constraints, we keep track of the pixel density of the\n     * densest item in the World (i.e. the item whose content size to viewport size\n     * ratio is the highest) and save it as this "content factor".\n     * @returns {Number} the number of content units per viewport unit.\n     */getContentFactor:function getContentFactor(){return this._contentFactor;},/**\n     * As a performance optimization, setting this flag to false allows the bounds-change event handler\n     * on tiledImages to skip calculations on the world bounds. If a lot of images are going to be positioned in\n     * rapid succession, this is a good idea. When finished, setAutoRefigureSizes should be called with true\n     * or the system may behave oddly.\n     * @param {Boolean} [value] The value to which to set the flag.\n     */setAutoRefigureSizes:function setAutoRefigureSizes(value){this._autoRefigureSizes=value;if(value&this._needsSizesFigured){this._figureSizes();this._needsSizesFigured=false;}},/**\n     * Arranges all of the TiledImages with the specified settings.\n     * @param {Object} options - Specifies how to arrange.\n     * @param {Boolean} [options.immediately=false] - Whether to animate to the new arrangement.\n     * @param {String} [options.layout] - See collectionLayout in {@link OpenSeadragon.Options}.\n     * @param {Number} [options.rows] - See collectionRows in {@link OpenSeadragon.Options}.\n     * @param {Number} [options.columns] - See collectionColumns in {@link OpenSeadragon.Options}.\n     * @param {Number} [options.tileSize] - See collectionTileSize in {@link OpenSeadragon.Options}.\n     * @param {Number} [options.tileMargin] - See collectionTileMargin in {@link OpenSeadragon.Options}.\n     * @fires OpenSeadragon.World.event:metrics-change\n     */arrange:function arrange(options){options=options||{};var immediately=options.immediately||false;var layout=options.layout||$.DEFAULT_SETTINGS.collectionLayout;var rows=options.rows||$.DEFAULT_SETTINGS.collectionRows;var columns=options.columns||$.DEFAULT_SETTINGS.collectionColumns;var tileSize=options.tileSize||$.DEFAULT_SETTINGS.collectionTileSize;var tileMargin=options.tileMargin||$.DEFAULT_SETTINGS.collectionTileMargin;var increment=tileSize+tileMargin;var wrap;if(!options.rows&&columns){wrap=columns;}else{wrap=Math.ceil(this._items.length/rows);}var x=0;var y=0;var item,box,width,height,position;this.setAutoRefigureSizes(false);for(var i=0;i<this._items.length;i++){if(i&&i%wrap===0){if(layout===\'horizontal\'){y+=increment;x=0;}else{x+=increment;y=0;}}item=this._items[i];box=item.getBounds();if(box.width>box.height){width=tileSize;}else{width=tileSize*(box.width/box.height);}height=width*(box.height/box.width);position=new $.Point(x+(tileSize-width)/2,y+(tileSize-height)/2);item.setPosition(position,immediately);item.setWidth(width,immediately);if(layout===\'horizontal\'){x+=increment;}else{y+=increment;}}this.setAutoRefigureSizes(true);},// private\n_figureSizes:function _figureSizes(){var oldHomeBounds=this._homeBounds?this._homeBounds.clone():null;var oldContentSize=this._contentSize?this._contentSize.clone():null;var oldContentFactor=this._contentFactor||0;if(!this._items.length){this._homeBounds=new $.Rect(0,0,1,1);this._contentSize=new $.Point(1,1);this._contentFactor=1;}else{var bounds=this._items[0].getBounds();this._contentFactor=this._items[0].getContentSize().x/bounds.width;var left=bounds.x;var top=bounds.y;var right=bounds.x+bounds.width;var bottom=bounds.y+bounds.height;var box;for(var i=1;i<this._items.length;i++){box=this._items[i].getBounds();this._contentFactor=Math.max(this._contentFactor,this._items[i].getContentSize().x/box.width);left=Math.min(left,box.x);top=Math.min(top,box.y);right=Math.max(right,box.x+box.width);bottom=Math.max(bottom,box.y+box.height);}this._homeBounds=new $.Rect(left,top,right-left,bottom-top);this._contentSize=new $.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor);}if(this._contentFactor!==oldContentFactor||!this._homeBounds.equals(oldHomeBounds)||!this._contentSize.equals(oldContentSize)){/**\n             * Raised when the home bounds or content factor change.\n             * @event metrics-change\n             * @memberOf OpenSeadragon.World\n             * @type {object}\n             * @property {OpenSeadragon.World} eventSource - A reference to the World which raised the event.\n             * @property {?Object} userData - Arbitrary subscriber-defined object.\n             */this.raiseEvent(\'metrics-change\',{});}},// private\n_raiseRemoveItem:function _raiseRemoveItem(item){/**\n         * Raised when an item is removed.\n         * @event remove-item\n         * @memberOf OpenSeadragon.World\n         * @type {object}\n         * @property {OpenSeadragon.World} eventSource - A reference to the World which raised the event.\n         * @property {OpenSeadragon.TiledImage} item - The item\'s underlying item.\n         * @property {?Object} userData - Arbitrary subscriber-defined object.\n         */this.raiseEvent(\'remove-item\',{item:item});}});})(OpenSeadragon);//# sourceMappingURL=openseadragon.js.map'},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(8),a=(n.n(o),n(82)),s=(n.n(a),n(84)),l=(n.n(s),window.OpenSeadragon);t.a=r.a.module("hj.customSeadragon",[]).directive("hjCustomSeadragon",["$window","$document",function(e,t){return{restrict:"AE",scope:{dzi:"=",focusPoint:"=?",zoomLevel:"=?",disabled:"=?"},controllerAs:"vm",bindToController:!0,template:'<hj-open-seadragon\n                      tile-sources="vm.dzi"\n                      options="vm.openSeadragonOptions"\n                      ></hj-open-seadragon>',controller:["$rootScope","$scope","$element","$window","$timeout",function(e,n,i,o,a){"ngInject";var s=this,c="ontouchstart"in o,u=c?0:5,d=c?0:1,p=!1,h=!1,f=void 0,m=void 0,g=void 0,v=void 0,y=void 0,w=void 0,b=void 0,S=void 0,T=void 0,E=i.children();s.zoomLevel=s.zoomLevel||2;var O=new Lethargy;s.openSeadragonOptions={constrainDuringPan:!0,visibilityRatio:1,minZoomLevel:1,defaultZoomLevel:1,maxZoomPixelRatio:.5,homeFillsViewer:!0,showZoomControl:!1,showHomeControl:!1,showFullPageControl:!1,animationTime:u,panHorizontal:c,panVertical:c,mouseNavEnabled:!!c,gestureSettingsTouch:{flickEnabled:!1}};var I=function(e,t){var n=e.viewport.containerSize,i=e.viewport.contentSize,r=e.viewport.viewportToImageZoom(e.viewport.getZoom()),o=e.viewport.getBounds(),a={x:(i.x-n.x*(1/r))/i.x,y:(i.y-n.y*(1/r))/i.x},s=new l.Point;s.x=t.x*a.x,s.y=t.y*a.y,s.x=s.x+.5*o.width,s.y=s.y+.5*o.height,e.viewport.panTo(s)};g=function(e,t){var n=e.viewport.containerSize,i=e.viewport.contentSize,r=e.viewport.viewportToImageZoom(e.viewport.getZoom());if(!(i.x*r<n.x-1||i.y*r<n.y-1||0===s.zoomLevel)){var o=t.clientX/n.x,a=t.clientY/n.y;I(e,{x:o,y:a})}};var x=[120,120,120],C=function(e,t){return Math.floor(e/t)===e/t},$=function(e){if(e){e=Math.abs(e),x.push(e),x.shift();return!(C(x[0],120)&&C(x[1],120)&&C(x[2],120))}};v=function(e,t){if(!s.disabled&&!p&&(t=t.originalEvent||t,t.preventDefault(),-0!==t.deltaY)){var n=$(t.wheelDeltaY||t.wheelDelta||t.detail||0),i=void 0;n?(t.originalEvent||(t.originalEvent=t),i=O.check(t)):i=Hamster.normalise.delta(t)[2]>0?1:-1,!1!==i&&(p=!0,a.cancel(T),T=a(function(){p=!1},n?1e3:0),m(e,Math.max(0,s.zoomLevel+i)))}},m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.viewport.containerSize,r=e.viewport.contentSize,l=Math.min(r.x/i.x,r.y/i.y)/(1*(o.devicePixelRatio||1)),c=Math.round(l);t>c&&(t=n?0:c),a(function(){if(s.zoomLevel=Math.max(0,t),s.zoomLevel===c?E.addClass("max-zoom"):E.removeClass("max-zoom"),0===s.zoomLevel)e.viewport.centerSpringX.animationTime=e.viewport.centerSpringY.animationTime=d,f(e);else if(1===s.zoomLevel){e.viewport.centerSpringX.animationTime=e.viewport.centerSpringY.animationTime=d,a(function(){e.viewport.centerSpringX.animationTime=e.viewport.centerSpringY.animationTime=u});var n=i.x/i.x,o=r.x/r.y/(i.x/i.y),p=Math.max(n,o);e.viewport.zoomTo(p)}else s.zoomLevel===c?(e.viewport.centerSpringX.animationTime=e.viewport.centerSpringY.animationTime=u,e.viewport.zoomTo(l)):(e.viewport.centerSpringX.animationTime=e.viewport.centerSpringY.animationTime=u,e.viewport.zoomTo(s.zoomLevel))})},f=function(e,t){var n=new l.Point;n.x=.5,n.y=e.viewport.contentAspectY/2;var i=e.viewport.containerSize,r=e.viewport.contentSize,o=(i.x-160)/i.x,a=r.x/r.y/(i.x/(i.y-160)),s=Math.min(o,a);e.viewport.panTo(n).zoomTo(s)};var _=function(e){c||(y=g.bind(null,e),w=v.bind(null,e),b=f.bind(null,e),t.on("mousemove",y),t.on("mousewheel",w),t.on("DOMMouseScroll",w),r.a.element(e.container).on("click",function(){m(e,s.zoomLevel+1,!0)}))},A=function(e,t){h||(h=!0,E.addClass("ready"),n.$emit("hjCustomSeadragon:ready"),e.viewport.centerSpringX.animationTime=e.viewport.centerSpringY.animationTime=0,s.zoomLevel>0&&I(e,s.focusPoint||{x:.5,y:.5}),a(function(){e.viewport.centerSpringX.animationTime=e.viewport.centerSpringY.animationTime=u}),_(e))},R=function fullyLoadedHandler(e){var t=e.eventSource.viewer;t.world.getItemAt(0).removeHandler("fully-loaded",fullyLoadedHandler),A(t)},P=function(e){o.vp=e.viewport,e.world.getItemAt(0).addHandler("fully-loaded",R),e.viewport.zoomSpring.animationTime=0,m(e,s.zoomLevel),e.viewport.zoomSpring.animationTime=d};n.$on("hjOpenSeadragon:tile-loaded",function(e,t){var n=t.eventSource;a.cancel(S),S=a(function(){var e=!0,i=t.tile.level;r.a.forEach(t.tiledImage.tilesMatrix[i],function(t){r.a.forEach(t,function(t){t.loaded||(e=!1)})}),e&&A(n)})}),n.$on("hjOpenSeadragon:open",function(e,t){P(t.eventSource)}),n.$on("$destroy",function(){t.off("mousemove",y),t.off("mousewheel",w),t.off("DOMMouseScroll",w)})}]}}])},function(e,t,n){n(1)(n(83))},function(e,t){e.exports='// Generated by CoffeeScript 1.9.2\n(function() {\n  var root;\n\n  root = typeof exports !== "undefined" && exports !== null ? exports : this;\n\n  root.Lethargy = (function() {\n    function Lethargy(stability, sensitivity, tolerance, delay) {\n      this.stability = stability != null ? Math.abs(stability) : 8;\n      this.sensitivity = sensitivity != null ? 1 + Math.abs(sensitivity) : 100;\n      this.tolerance = tolerance != null ? 1 + Math.abs(tolerance) : 1.1;\n      this.delay = delay != null ? delay : 150;\n      this.lastUpDeltas = (function() {\n        var i, ref, results;\n        results = [];\n        for (i = 1, ref = this.stability * 2; 1 <= ref ? i <= ref : i >= ref; 1 <= ref ? i++ : i--) {\n          results.push(null);\n        }\n        return results;\n      }).call(this);\n      this.lastDownDeltas = (function() {\n        var i, ref, results;\n        results = [];\n        for (i = 1, ref = this.stability * 2; 1 <= ref ? i <= ref : i >= ref; 1 <= ref ? i++ : i--) {\n          results.push(null);\n        }\n        return results;\n      }).call(this);\n      this.deltasTimestamp = (function() {\n        var i, ref, results;\n        results = [];\n        for (i = 1, ref = this.stability * 2; 1 <= ref ? i <= ref : i >= ref; 1 <= ref ? i++ : i--) {\n          results.push(null);\n        }\n        return results;\n      }).call(this);\n    }\n\n    Lethargy.prototype.check = function(e) {\n      var lastDelta;\n      e = e.originalEvent || e;\n      if (e.wheelDelta != null) {\n        lastDelta = e.wheelDelta;\n      } else if (e.deltaY != null) {\n        lastDelta = e.deltaY * -40;\n      } else if ((e.detail != null) || e.detail === 0) {\n        lastDelta = e.detail * -40;\n      }\n      this.deltasTimestamp.push(Date.now());\n      this.deltasTimestamp.shift();\n      if (lastDelta > 0) {\n        this.lastUpDeltas.push(lastDelta);\n        this.lastUpDeltas.shift();\n        return this.isInertia(1);\n      } else {\n        this.lastDownDeltas.push(lastDelta);\n        this.lastDownDeltas.shift();\n        return this.isInertia(-1);\n      }\n      return false;\n    };\n\n    Lethargy.prototype.isInertia = function(direction) {\n      var lastDeltas, lastDeltasNew, lastDeltasOld, newAverage, newSum, oldAverage, oldSum;\n      lastDeltas = direction === -1 ? this.lastDownDeltas : this.lastUpDeltas;\n      if (lastDeltas[0] === null) {\n        return direction;\n      }\n      if (this.deltasTimestamp[(this.stability * 2) - 2] + this.delay > Date.now() && lastDeltas[0] === lastDeltas[(this.stability * 2) - 1]) {\n        return false;\n      }\n      lastDeltasOld = lastDeltas.slice(0, this.stability);\n      lastDeltasNew = lastDeltas.slice(this.stability, this.stability * 2);\n      oldSum = lastDeltasOld.reduce(function(t, s) {\n        return t + s;\n      });\n      newSum = lastDeltasNew.reduce(function(t, s) {\n        return t + s;\n      });\n      oldAverage = oldSum / lastDeltasOld.length;\n      newAverage = newSum / lastDeltasNew.length;\n      if (Math.abs(oldAverage) < Math.abs(newAverage * this.tolerance) && (this.sensitivity < Math.abs(newAverage))) {\n        return direction;\n      } else {\n        return false;\n      }\n    };\n\n    Lethargy.prototype.showLastUpDeltas = function() {\n      return this.lastUpDeltas;\n    };\n\n    Lethargy.prototype.showLastDownDeltas = function() {\n      return this.lastDownDeltas;\n    };\n\n    return Lethargy;\n\n  })();\n\n}).call(this);\n'},function(e,t,n){n(1)(n(85))},function(e,t){e.exports="/*\n * Hamster.js v1.1.2\n * (c) 2013 Monospaced http://monospaced.com\n * License: MIT\n */\n\n(function(window, document){\n'use strict';\n\n/**\n * Hamster\n * use this to create instances\n * @returns {Hamster.Instance}\n * @constructor\n */\nvar Hamster = function(element) {\n  return new Hamster.Instance(element);\n};\n\n// default event name\nHamster.SUPPORT = 'wheel';\n\n// default DOM methods\nHamster.ADD_EVENT = 'addEventListener';\nHamster.REMOVE_EVENT = 'removeEventListener';\nHamster.PREFIX = '';\n\n// until browser inconsistencies have been fixed...\nHamster.READY = false;\n\nHamster.Instance = function(element){\n  if (!Hamster.READY) {\n    // fix browser inconsistencies\n    Hamster.normalise.browser();\n\n    // Hamster is ready...!\n    Hamster.READY = true;\n  }\n\n  this.element = element;\n\n  // store attached event handlers\n  this.handlers = [];\n\n  // return instance\n  return this;\n};\n\n/**\n * create new hamster instance\n * all methods should return the instance itself, so it is chainable.\n * @param   {HTMLElement}       element\n * @returns {Hamster.Instance}\n * @constructor\n */\nHamster.Instance.prototype = {\n  /**\n   * bind events to the instance\n   * @param   {Function}    handler\n   * @param   {Boolean}     useCapture\n   * @returns {Hamster.Instance}\n   */\n  wheel: function onEvent(handler, useCapture){\n    Hamster.event.add(this, Hamster.SUPPORT, handler, useCapture);\n\n    // handle MozMousePixelScroll in older Firefox\n    if (Hamster.SUPPORT === 'DOMMouseScroll') {\n      Hamster.event.add(this, 'MozMousePixelScroll', handler, useCapture);\n    }\n\n    return this;\n  },\n\n  /**\n   * unbind events to the instance\n   * @param   {Function}    handler\n   * @param   {Boolean}     useCapture\n   * @returns {Hamster.Instance}\n   */\n  unwheel: function offEvent(handler, useCapture){\n    // if no handler argument,\n    // unbind the last bound handler (if exists)\n    if (handler === undefined && (handler = this.handlers.slice(-1)[0])) {\n      handler = handler.original;\n    }\n\n    Hamster.event.remove(this, Hamster.SUPPORT, handler, useCapture);\n\n    // handle MozMousePixelScroll in older Firefox\n    if (Hamster.SUPPORT === 'DOMMouseScroll') {\n      Hamster.event.remove(this, 'MozMousePixelScroll', handler, useCapture);\n    }\n\n    return this;\n  }\n};\n\nHamster.event = {\n  /**\n   * cross-browser 'addWheelListener'\n   * @param   {Instance}    hamster\n   * @param   {String}      eventName\n   * @param   {Function}    handler\n   * @param   {Boolean}     useCapture\n   */\n  add: function add(hamster, eventName, handler, useCapture){\n    // store the original handler\n    var originalHandler = handler;\n\n    // redefine the handler\n    handler = function(originalEvent){\n\n      if (!originalEvent) {\n        originalEvent = window.event;\n      }\n\n      // create a normalised event object,\n      // and normalise \"deltas\" of the mouse wheel\n      var event = Hamster.normalise.event(originalEvent),\n          delta = Hamster.normalise.delta(originalEvent);\n\n      // fire the original handler with normalised arguments\n      return originalHandler(event, delta[0], delta[1], delta[2]);\n\n    };\n\n    // cross-browser addEventListener\n    hamster.element[Hamster.ADD_EVENT](Hamster.PREFIX + eventName, handler, useCapture || false);\n\n    // store original and normalised handlers on the instance\n    hamster.handlers.push({\n      original: originalHandler,\n      normalised: handler\n    });\n  },\n\n  /**\n   * removeWheelListener\n   * @param   {Instance}    hamster\n   * @param   {String}      eventName\n   * @param   {Function}    handler\n   * @param   {Boolean}     useCapture\n   */\n  remove: function remove(hamster, eventName, handler, useCapture){\n    // find the normalised handler on the instance\n    var originalHandler = handler,\n        lookup = {},\n        handlers;\n    for (var i = 0, len = hamster.handlers.length; i < len; ++i) {\n      lookup[hamster.handlers[i].original] = hamster.handlers[i];\n    }\n    handlers = lookup[originalHandler];\n    handler = handlers.normalised;\n\n    // cross-browser removeEventListener\n    hamster.element[Hamster.REMOVE_EVENT](Hamster.PREFIX + eventName, handler, useCapture || false);\n\n    // remove original and normalised handlers from the instance\n    for (var h in hamster.handlers) {\n      if (hamster.handlers[h] == handlers) {\n        hamster.handlers.splice(h, 1);\n        break;\n      }\n    }\n  }\n};\n\n/**\n * these hold the lowest deltas,\n * used to normalise the delta values\n * @type {Number}\n */\nvar lowestDelta,\n    lowestDeltaXY;\n\nHamster.normalise = {\n  /**\n   * fix browser inconsistencies\n   */\n  browser: function normaliseBrowser(){\n    // detect deprecated wheel events\n    if (!('onwheel' in document || document.documentMode >= 9)) {\n      Hamster.SUPPORT = document.onmousewheel !== undefined ?\n                        'mousewheel' : // webkit and IE < 9 support at least \"mousewheel\"\n                        'DOMMouseScroll'; // assume remaining browsers are older Firefox\n    }\n\n    // detect deprecated event model\n    if (!window.addEventListener) {\n      // assume IE < 9\n      Hamster.ADD_EVENT = 'attachEvent';\n      Hamster.REMOVE_EVENT = 'detachEvent';\n      Hamster.PREFIX = 'on';\n    }\n\n  },\n\n  /**\n   * create a normalised event object\n   * @param   {Function}    originalEvent\n   * @returns {Object}      event\n   */\n   event: function normaliseEvent(originalEvent){\n    var event = {\n          // keep a reference to the original event object\n          originalEvent: originalEvent,\n          target: originalEvent.target || originalEvent.srcElement,\n          type: 'wheel',\n          deltaMode: originalEvent.type === 'MozMousePixelScroll' ? 0 : 1,\n          deltaX: 0,\n          delatZ: 0,\n          preventDefault: function(){\n            if (originalEvent.preventDefault) {\n              originalEvent.preventDefault();\n            } else {\n              originalEvent.returnValue = false;\n            }\n          },\n          stopPropagation: function(){\n            if (originalEvent.stopPropagation) {\n              originalEvent.stopPropagation();\n            } else {\n              originalEvent.cancelBubble = false;\n            }\n          }\n        };\n\n    // calculate deltaY (and deltaX) according to the event\n\n    // 'mousewheel'\n    if (originalEvent.wheelDelta) {\n      event.deltaY = - 1/40 * originalEvent.wheelDelta;\n    }\n    // webkit\n    if (originalEvent.wheelDeltaX) {\n      event.deltaX = - 1/40 * originalEvent.wheelDeltaX;\n    }\n\n    // 'DomMouseScroll'\n    if (originalEvent.detail) {\n      event.deltaY = originalEvent.detail;\n    }\n\n    return event;\n  },\n\n  /**\n   * normalise 'deltas' of the mouse wheel\n   * @param   {Function}    originalEvent\n   * @returns {Array}       deltas\n   */\n  delta: function normaliseDelta(originalEvent){\n    var delta = 0,\n      deltaX = 0,\n      deltaY = 0,\n      absDelta = 0,\n      absDeltaXY = 0,\n      fn;\n\n    // normalise deltas according to the event\n\n    // 'wheel' event\n    if (originalEvent.deltaY) {\n      deltaY = originalEvent.deltaY * -1;\n      delta  = deltaY;\n    }\n    if (originalEvent.deltaX) {\n      deltaX = originalEvent.deltaX;\n      delta  = deltaX * -1;\n    }\n\n    // 'mousewheel' event\n    if (originalEvent.wheelDelta) {\n      delta = originalEvent.wheelDelta;\n    }\n    // webkit\n    if (originalEvent.wheelDeltaY) {\n      deltaY = originalEvent.wheelDeltaY;\n    }\n    if (originalEvent.wheelDeltaX) {\n      deltaX = originalEvent.wheelDeltaX * -1;\n    }\n\n    // 'DomMouseScroll' event\n    if (originalEvent.detail) {\n      delta = originalEvent.detail * -1;\n    }\n\n    // Don't return NaN\n    if (delta === 0) {\n      return [0, 0, 0];\n    }\n\n    // look for lowest delta to normalize the delta values\n    absDelta = Math.abs(delta);\n    if (!lowestDelta || absDelta < lowestDelta) {\n      lowestDelta = absDelta;\n    }\n    absDeltaXY = Math.max(Math.abs(deltaY), Math.abs(deltaX));\n    if (!lowestDeltaXY || absDeltaXY < lowestDeltaXY) {\n      lowestDeltaXY = absDeltaXY;\n    }\n\n    // convert deltas to whole numbers\n    fn = delta > 0 ? 'floor' : 'ceil';\n    delta  = Math[fn](delta / lowestDelta);\n    deltaX = Math[fn](deltaX / lowestDeltaXY);\n    deltaY = Math[fn](deltaY / lowestDeltaXY);\n\n    return [delta, deltaX, deltaY];\n  }\n};\n\nif (typeof window.define === 'function' && window.define.amd) {\n  // AMD\n  window.define('hamster', [], function(){\n    return Hamster;\n  });\n} else if (typeof exports === 'object') {\n  // CommonJS\n  module.exports = Hamster;\n} else {\n  // Browser global\n  window.Hamster = Hamster;\n}\n\n})(window, window.document);\n"},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=function(){function Froogaloop(e){return new Froogaloop.fn.init(e)}function postMessage(e,t,i){if(!i.contentWindow.postMessage)return!1;var r=JSON.stringify({method:e,value:t});i.contentWindow.postMessage(r,n)}function onMessageReceived(e){var i,r;try{i=JSON.parse(e.data),r=i.event||i.method}catch(e){}"ready"!=r||t||(t=!0),/^https?:\/\/player.vimeo.com/.test(e.origin),"*"===n&&(n=e.origin);var o=i.value,a=i.data,s=""===s?null:i.player_id,l=getCallback(r,s),c=[];return!!l&&(void 0!==o&&c.push(o),a&&c.push(a),s&&c.push(s),c.length>0?l.apply(null,c):l.call())}function storeCallback(t,n,i){i?(e[i]||(e[i]={}),e[i][t]=n):e[t]=n}function getCallback(t,n){return n?e[n][t]:e[t]}function removeCallback(t,n){if(n&&e[n]){if(!e[n][t])return!1;e[n][t]=null}else{if(!e[t])return!1;e[t]=null}return!0}function isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)}var e={},t=!1,n=(Array.prototype.slice,"*");return Froogaloop.fn=Froogaloop.prototype={element:null,init:function(e){return"string"==typeof e&&(e=document.getElementById(e)),this.element=e,this},api:function(e,t){if(!this.element||!e)return!1;var n=this,i=n.element,r=""!==i.id?i.id:null,o=isFunction(t)?null:t,a=isFunction(t)?t:null;return a&&storeCallback(e,a,r),postMessage(e,o,i),n},addEvent:function(e,n){if(!this.element)return!1;var i=this,r=i.element,o=""!==r.id?r.id:null;return storeCallback(e,n,o),"ready"!=e?postMessage("addEventListener",e,r):"ready"==e&&t&&n.call(null,o),i},removeEvent:function(e){if(!this.element)return!1;var t=this,n=t.element,i=""!==n.id?n.id:null,r=removeCallback(e,i);"ready"!=e&&r&&postMessage("removeEventListener",e,n)}},Froogaloop.fn.init.prototype=Froogaloop.fn,window.addEventListener?window.addEventListener("message",onMessageReceived,!1):window.attachEvent("onmessage",onMessageReceived),window.Froogaloop=window.$f=Froogaloop}();t.a=r.a.module("hj.vimeoApi",[]).directive("hjVimeoApi",["$timeout",function(e){return{restrict:"A",link:function(t,n,i){e(function(){var e=o(n[0]);e.addEvent("ready",function(n){e.id=i.hjVimeoApi||i.vimeoId||+new Date,t.$emit("vimeoApi:ready",e)})})}}}])},function(e,t,n){"use strict";var i=n(0),r=n.n(i);t.a=r.a.module("hj.iframeEvents",[]).service("iframeEventsService",function(){var e=void 0;return e={iframe:null,setSource:function(t){t.on("click mouseup mousedown mousemove touchend touchstart touchmove mousewheel keydown keyup keypress",function(n){var i=void 0;if(e.iframe)i=e.iframe;else if(t[0].querySelector("iframe"))try{i=t[0].querySelector("iframe").contentWindow.document}catch(e){}if(i){var r=i.createEvent("Event");r.initEvent(n.type,!0,!1);for(var o in n)try{r[o]=n[o]}catch(e){}i.dispatchEvent(r)}})}}}).directive("iframeEventsDst",["iframeEventsService",function(e){return{restrict:"A",link:function(t,n,i){n.on("load",function(){e.iframe=n[0].contentWindow.document})}}}]).directive("iframeEventsSrc",["iframeEventsService","$document",function(e,t){return{restrict:"A",link:function(n,i,r){"document"===r.iframeEventsSrc?e.setSource(t):e.setSource(i)}}}])},function(e,t,n){"use strict";var i=n(0),r=n.n(i);t.a=r.a.module("hj.splitCursor",[]).directive("hjSplitCursor",function(){return{restrict:"A",link:function(e,t,n){var i={left:.5,right:.5,top:.5,bottom:.5,leftClass:"cursor--left",rightClass:"cursor--right",topClass:"cursor--top",bottomClass:"cursor--bottom"},o=r.a.extend(i,e.$eval(n.hjSplitCursor)||{}),a=void 0,s=function(n){n.pageX<=n.view.innerWidth*o.left?(e.$cursorLeft=!0,e.$cursorRight=!1,a!==o.leftClass&&(t.removeClass(o.rightClass),t.addClass(o.leftClass),e.$apply()),a=o.leftClass):n.pageX>=n.view.innerWidth*(1-o.right)?(e.$cursorRight=!0,e.$cursorLeft=!1,a!==o.rightClass&&(t.removeClass(o.leftClass),t.addClass(o.rightClass),e.$apply()),a=o.rightClass):(e.$cursorRight=!1,e.$cursorLeft=!1,!1!==a&&(t.removeClass(o.leftClass),t.removeClass(o.rightClass),e.$apply()),a=!1)};t.on("mouseenter",s),t.on("mousemove",s)}}})},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(90),a=(n.n(o),n(5));n.n(a);t.a=r.a.module("hj.shine",[]).directive("hjShine",["$window","$timeout",function(e,t){return{restrict:"A",link:function(n,i,o){var a={numSteps:8,opacity:.1,opacityPow:1.2,offset:.1,offsetPow:1.8,blur:40,blurPow:1.4,shadowRGB:new shinejs.Color(255,255,255),spinDuration:2,spinOpacity:.2},s=r.a.extend(a,n.$eval(o.hjShine)||{});if(!("ontouchstart"in e)){var l=new shinejs.Config(s),c=new shinejs.Shine(i[0],l),u=!1,d=void 0,p=function(){u=!0;var t=e.innerWidth,n=e.innerHeight,i={x:0,y:0};c.config.opacity=s.spinOpacity,d=TweenMax.to(i,s.spinDuration,{bezier:[{x:0,y:0},{x:t,y:0},{x:t,y:n},{x:0,y:n},{x:0,y:0}],repeat:-1,delay:1,ease:Power3.easeInOut,onUpdate:function(){c.light&&(c.light.position.x=i.x,c.light.position.y=i.y,c.draw())}})},h=function(){u=!1,d.kill(),c.config.opacity=s.opacity,c.draw()};t(function(){c.light.position.x=.5*e.innerWidth,c.light.position.y=.5*e.innerHeight,c.draw()});var f=function(e){u||(c.light.position.x=e.clientX,c.light.position.y=e.clientY,c.draw())};r.a.element(e).on("mousemove",f),n.$on("$destroy",function(){r.a.element(e).off("mousemove",f),c.destroy()}),n.$on("hjShine:spin",function(){t(p)}),n.$on("hjShine:stop",h)}}}}])},function(e,t,n){n(1)(n(91))},function(e,t){e.exports="/*! shine.js - v0.2.8 - 2015-04-22\n* http://bigspaceship.github.io/shine.js\n* Copyright (c) 2015 Big Spaceship; Licensed MIT */\n/* jshint ignore:start */\nif (!Function.prototype.bind) {\n  Function.prototype.bind = function (oThis) {\n    if (typeof this !== \"function\") {\n      // closest thing possible to the ECMAScript 5 internal IsCallable function\n      throw new TypeError(\"Function.prototype.bind - what is trying to be bound is not callable\");\n    }\n\n    var aArgs = Array.prototype.slice.call(arguments, 1),\n        fToBind = this,\n        fNOP = function () {},\n        fBound = function () {\n          return fToBind.apply(this instanceof fNOP && oThis\n                                 ? this\n                                 : oThis,\n                               aArgs.concat(Array.prototype.slice.call(arguments)));\n        };\n\n    fNOP.prototype = this.prototype;\n    fBound.prototype = new fNOP();\n\n    return fBound;\n  };\n}\n/* jshint ignore:end */\n\n'use strict';\n\n/**\n * window.performance.now() polyfill\n * @type {Object.<string, Function>}\n */\nwindow.performance = window.performance || window.webkitPeformance || window.mozPeformance || {\n  'now': function(){\n    return new Date().getTime();\n  }\n};\n\n'use strict';\n\n/* jshint ignore:start */\nvar shinejs;\nvar shinejsGlobal;\n\n// Wrap assigments in try/catch to support running unminified code\ntry {\n  shinejs = shinejs || exports || {};\n} catch(error) {\n  shinejs = {};\n}\ntry {\n  shinejsGlobal = shinejsGlobal || global || {};\n} catch(error) {\n  shinejsGlobal = {};\n}\n/* jshint ignore:end */\n\n'use strict';\n\n/* jshint ignore:start */\nif (typeof define !== 'undefined' && define.amd) {\n define([], function() {\n   return shinejs;\n });\n}\n/* jshint ignore:end */\n\n'use strict';\n\n/**\n * @constructor\n * @param {number=} r 0...255\n * @param {number=} g 0...255\n * @param {number=} b 0...255\n */\nshinejs.Color = function(r, g, b) {\n  /**\n   * @type {number}\n   */\n  this.r = r || 0;\n  /**\n   * @type {number}\n   */\n  this.g = g || 0;\n  /**\n   * @type {number}\n   */\n  this.b = b || 0;\n};\n\n/**\n * Creates a new color instance from a hex string.\n * @param {string} hex E.g. #ff0000 for red\n * @return {shinejs.Color}\n */\nshinejs.Color.colorFromHex = function(hex) {\n  var c = new shinejs.Color();\n  c.parseHex(hex);\n  return c;\n};\n\n/**\n * Assigns r, g and b from a hex string.\n * @param {string} hex E.g. #ff0000 for red\n */\nshinejs.Color.prototype.parseHex = function(hex) {\n  hex = hex.replace('#', '');\n  var color = parseInt(hex, 16);\n  this.r = (color >> 16) & 0xff;\n  this.g = (color >> 8) & 0xff;\n  this.b = color & 0xff;\n};\n\n/**\n * Returns an rgba string.\n * @return {string} E.g. rgba(255, 0, 0, 1.0) for red\n */\nshinejs.Color.prototype.getRGBAString = function() {\n  return 'rgba(' +\n    Math.round(this.r) + ',' +\n    Math.round(this.g) + ',' +\n    Math.round(this.b) + ',' +\n  ' 1.0)';\n};\n\n'use strict';\n\n/**\n * Creates a new Config instance that can be shared across multiple\n * Shadow instance.\n *\n * @constructor\n * @param {?Object=} optSettings An optional settings file with existing values.\n *\n * Valid settings are:\n *  * numSteps\n *  * opacity\n *  * opacityPow\n *  * offset\n *  * offsetPow\n *  * blur\n *  * blurPow\n *  * shadowRGB\n */\nshinejs.Config = function(optSettings) {\n  /** @type {number} */\n  this.numSteps = 5;\n\n  /** @type {number} */\n  this.opacity = 0.15;\n  /** @type {number} */\n  this.opacityPow = 1.2;\n\n  /** @type {number} */\n  this.offset = 0.15;\n  /** @type {number} */\n  this.offsetPow = 1.8;\n\n  /** @type {number} */\n  this.blur = 40;\n  /** @type {number} */\n  this.blurPow = 1.0;\n\n  /** @type {!shinejs.Color} */\n  this.shadowRGB = new shinejs.Color(0, 0, 0);\n\n  this.applyValues(optSettings);\n};\n\n/**\n * Extends this instance with all valid values from <code>settings</code>.\n * @param {?Object=} settings An object containing the properties to override.\n */\nshinejs.Config.prototype.applyValues = function(settings) {\n  if (!settings) {\n    return;\n  }\n\n  for (var key in this) {\n    if (key in settings) {\n      this[key] = settings[key];\n    }\n  }\n};\n\n'use strict';\n\n/**\n * @constructor\n * @param {?shinejs.Point=} optPosition An optional position. Defaults to (0, 0).\n */\nshinejs.Light = function Light(optPosition) {\n  /**\n   * @type {shinejs.Point}\n   */\n  this.position = optPosition || new shinejs.Point(0, 0);\n\n  /**\n   * @type {number}\n   */\n  this.intensity = 1.0;\n};\n\n'use strict';\n\n/**\n * @constructor\n * @param {number=} x\n * @param {number=} y\n */\nshinejs.Point = function(x, y) {\n  /** @type {number} */\n  this.x = x || 0;\n  /** @type {number} */\n  this.y = y || 0;\n};\n\n/**\n * A point representing the x and y distance to a point <code>p</code>\n * @param {shinejs.Point} p\n * @return {shinejs.Point} A new instance of shinejs.Point\n */\nshinejs.Point.prototype.delta = function(p) {\n  return new shinejs.Point(p.x - this.x, p.y - this.y);\n};\n\n'use strict';\n\n/**\n * @constructor\n * @param {!HTMLElement} domElement\n */\nshinejs.Shadow = function(domElement) {\n  /** @type {!shinejs.Point} */\n  this.position = new shinejs.Point(0, 0);\n  /** @type {!HTMLElement} */\n  this.domElement = domElement;\n\n  /** @type {!string} */\n  this.shadowProperty = 'textShadow';\n\n  /**\n   * @const\n   * @type {Function}\n   */\n  this.fnHandleViewportUpdate = null;\n  this.fnHandleWindowLoaded = this.handleWindowLoaded.bind(this);\n\n  this.enableAutoUpdates();\n  this.handleViewportUpdate();\n\n  // this.fnHandleViewportUpdate will get set in enableAutoUpdates();\n  window.addEventListener('load', this.fnHandleWindowLoaded, false);\n};\n\n/**\n * Removes all listeners and frees resources.\n * Destroyed instances can't be reused.\n */\nshinejs.Shadow.prototype.destroy = function() {\n  window.removeEventListener('load', this.fnHandleWindowLoaded, false);\n  this.disableAutoUpdates();\n  this.fnHandleWindowLoaded = null;\n  this.domElement = null;\n  this.position = null;\n};\n\n/**\n * Draw this shadow with based on a light source\n * @param {shinejs.Light} light\n * @param {!Config} config\n */\nshinejs.Shadow.prototype.draw = function(light, config) {\n\n  var delta = this.position.delta(light.position);\n  var distance = Math.sqrt(delta.x * delta.x + delta.y * delta.y);\n  distance = Math.max(32, distance);  // keep a min amount of shadow\n\n  var shadows = [];\n\n  for (var i = 0; i < config.numSteps; i++) {\n    var ratio = i / config.numSteps;\n\n    var ratioOpacity = Math.pow(ratio, config.opacityPow);\n    var ratioOffset = Math.pow(ratio, config.offsetPow);\n    var ratioBlur = Math.pow(ratio, config.blurPow);\n\n    var opacity = light.intensity * Math.max(0, config.opacity * (1.0 - ratioOpacity));\n    var offsetX = - config.offset * delta.x * ratioOffset;\n    var offsetY = - config.offset * delta.y * ratioOffset;\n    var blurRadius = distance * config.blur * ratioBlur / 512;\n\n    var shadow = this.getShadow(config.shadowRGB, opacity, offsetX, offsetY, blurRadius);\n    shadows.push(shadow);\n  }\n\n  this.drawShadows(shadows);\n};\n\n/**\n * Returns an individual shadow step for this caster\n * @param {shinejs.Color} colorRGB\n * @param {number} opacity\n * @param {number} offsetX\n * @param {number} offsetY\n * @param {number} blurRadius\n * @return {string}\n */\nshinejs.Shadow.prototype.getShadow = function(colorRGB, opacity, offsetX, offsetY, blurRadius) {\n  var color = 'rgba(' + colorRGB.r + ', ' + colorRGB.g + ', ' + colorRGB.b + ', ' + opacity + ')';\n  return color + ' ' + offsetX + 'px ' + offsetY + 'px ' + Math.round(blurRadius) + 'px';\n};\n\n/**\n * Applies shadows to the DOM element\n * @param {Array.<string>} shadows\n */\nshinejs.Shadow.prototype.drawShadows = function(shadows) {\n  this.domElement.style[this.shadowProperty] = shadows.join(', ');\n};\n\n/**\n * Adds DOM event listeners for resize, scroll and load\n */\nshinejs.Shadow.prototype.enableAutoUpdates = function() {\n  this.disableAutoUpdates();\n\n  // store reference fore more efficient minification\n  var fnHandleViewportUpdate = this.fnHandleViewportUpdate =\n    shinejs.Timing.debounce(this.handleViewportUpdate, 1000/15, this);\n    // this.handleViewportUpdate.bind(this);\n\n  document.addEventListener('resize', fnHandleViewportUpdate, false);\n  window.addEventListener('resize', fnHandleViewportUpdate, false);\n  window.addEventListener('scroll', fnHandleViewportUpdate, false);\n};\n\n/**\n * Removes DOM event listeners for resize, scroll and load\n */\nshinejs.Shadow.prototype.disableAutoUpdates = function() {\n\n  // store reference fore more efficient minification\n  var fnHandleViewportUpdate = this.fnHandleViewportUpdate;\n\n  // old FF versions break when removing listeners that haven't been added\n  if (!fnHandleViewportUpdate) {\n    return;\n  }\n\n  this.fnHandleViewportUpdate = null;\n\n  document.removeEventListener('resize', fnHandleViewportUpdate, false);\n  window.removeEventListener('resize', fnHandleViewportUpdate, false);\n  window.removeEventListener('scroll', fnHandleViewportUpdate, false);\n};\n\n/**\n * @private Called when DOM event listeners fire\n */\nshinejs.Shadow.prototype.handleViewportUpdate = function() {\n  var boundingRect = this.domElement.getBoundingClientRect();\n  this.position.x = boundingRect.left + boundingRect.width * 0.5;\n  this.position.y = boundingRect.top + boundingRect.height * 0.5;\n};\n\n/**\n * @private Called when window loads\n */\nshinejs.Shadow.prototype.handleWindowLoaded = function() {\n  this.handleViewportUpdate();\n};\n\n'use strict';\n\n/**\n * Splits element into individual elements per word and letter\n *\n * @constructor\n * @param {!HTMLElement} domElement\n * @param {?string=} optClassPrefix\n */\nshinejs.Splitter = function(domElement, optClassPrefix) {\n  /**\n   * @type {!HTMLElement}\n   */\n  this.domElement = domElement;\n  /**\n   * @type {!string}\n   */\n  this.classPrefix = optClassPrefix || '';\n\n  /**\n   * @type {!HTMLElement}\n   */\n  this.wrapperElement = document.createElement('div');\n\n  /**\n   * @type {!HTMLElement}\n   */\n  this.maskElement = document.createElement('div');\n\n  /**\n   * @type {!Array.<HTMLElement>}\n   */\n  this.wordElements = [];\n\n  /**\n   * @type {!Array.<HTMLElement>}\n   */\n  this.elements = [];\n\n  /**\n   * @type {string}\n   */\n  this.text = '';\n};\n\n/**\n * Performs the actual split\n * @param {?string=} optText Optional text to replace the content with\n * @param {?boolean=} preserveChildren Preserves the nodes children as opposed\n *                                     to converting its content to text-only.\n */\nshinejs.Splitter.prototype.split = function(optText, preserveChildren) {\n\n  this.text = optText || this.text;\n  this.wordElements.length = 0;\n  this.elements.length = 0;\n\n  this.wrapperElement.className = this.classPrefix + 'wrapper';\n  this.wrapperElement.innerHTML = '';\n\n  if (optText) {\n    this.domElement.textContent = this.text;\n  }\n\n  if (preserveChildren) {\n    this.splitChildren(this.domElement, this.maskElement, this.wrapperElement, this.classPrefix);\n  } else {\n    this.splitText(this.domElement, this.maskElement, this.wrapperElement, this.classPrefix);\n  }\n};\n\n/**\n * Assigns letter elements to a DOM element's children.\n * @param {HTMLElement} domElement\n * @param {HTMLElement} maskElement\n * @param {HTMLElement} wrapperElement\n * @param {string} classPrefix\n */\nshinejs.Splitter.prototype.splitChildren = function(domElement, maskElement, wrapperElement, classPrefix) {\n  var childNodes = domElement.childNodes;\n\n  for (var i = childNodes.length - 1; i >= 0; i--) {\n   var child = childNodes[i];\n\n   // see https://developer.mozilla.org/en-US/docs/Web/API/Node.nodeType\n   if (child.nodeType !== 1) {\n     continue;\n   }\n\n   child.className += ' ' + classPrefix + 'letter';\n   wrapperElement.insertBefore(child, wrapperElement.firstChild);\n   this.elements.push(child);\n  }\n\n  maskElement.innerHTML = wrapperElement.innerHTML;\n  maskElement.className = classPrefix + 'mask';\n  wrapperElement.appendChild(maskElement);\n\n  domElement.innerHTML = '';\n  domElement.appendChild(wrapperElement);\n};\n/**\n * Splits a DOM element into word and letter elements and masks them.\n * @param {HTMLElement} domElement\n * @param {HTMLElement} maskElement\n * @param {HTMLElement} wrapperElement\n * @param {string} classPrefix\n */\nshinejs.Splitter.prototype.splitText = function(domElement, maskElement, wrapperElement, classPrefix) {\n  var text = domElement.textContent;\n  var numLetters = text.length;\n  var wordElement = null;\n\n  for (var i = 0; i < numLetters; i++) {\n    var letter = text.charAt(i);\n\n    if (!wordElement) {\n      wordElement = document.createElement('span');\n      wordElement.className = classPrefix + 'word';\n\n      wrapperElement.appendChild(wordElement);\n      this.wordElements.push(wordElement);\n    }\n\n    // skip whitespace characters and create new word\n    if (letter.match(/[\\s]/)) {\n      var spacerElement = document.createElement('span');\n      spacerElement.className = classPrefix + 'spacer';\n      spacerElement.innerHTML = letter;\n      wrapperElement.appendChild(spacerElement);\n      wordElement = null;\n      continue;\n    }\n\n    var letterElement = document.createElement('span');\n    letterElement.innerHTML = letter;\n    letterElement.className = classPrefix + 'letter';\n    this.elements.push(letterElement);\n\n    wordElement.appendChild(letterElement);\n\n    if (letter.match(/[\\W]/)) {\n      wordElement = null;\n    }\n  }\n\n  maskElement.innerHTML = wrapperElement.innerHTML;\n  maskElement.className = classPrefix + 'mask';\n  wrapperElement.appendChild(maskElement);\n\n  domElement.innerHTML = '';\n  domElement.appendChild(wrapperElement);\n};\n\n'use strict';\n\n/**\n * @constructor\n */\nshinejs.StyleInjector = function() {\n  this.injections = {};\n};\n\n/**\n * @type {?shinejs.StyleInjector}\n */\nshinejs.StyleInjector.instance_ = null;\n\n/**\n * Singleton\n *\n * @return {shinejs.StyleInjector}\n */\nshinejs.StyleInjector.getInstance = function() {\n  if (!shinejs.StyleInjector.instance_) {\n    shinejs.StyleInjector.instance_ = new shinejs.StyleInjector();\n  }\n  return shinejs.StyleInjector.instance_;\n};\n\n/**\n * Injects css as a style node to the header.\n *\n * @param {string} css\n * @param {HTMLDocument=} doc The document. Defaults to window.document\n * @return {HTMLStyleElement} The created style node.\n */\nshinejs.StyleInjector.prototype.inject = function(css, doc) {\n  doc = doc || window.document;\n\n  // don't inject twice\n  if (this.injections[css] === doc) {\n    return;\n  }\n\n  /**\n   * @type {HTMLStyleElement}\n   */\n  var domElement = document.createElement('style');\n  domElement.type = 'text/css';\n  domElement.innerHTML = css;\n\n  var firstChild = doc.getElementsByTagName('head')[0].firstChild;\n  doc.getElementsByTagName('head')[0].insertBefore(domElement, firstChild);\n\n  this.injections[css] = doc;\n\n  return domElement;\n};\n\n'use strict';\n\nshinejs.Timing = function() {\n\n};\n\n/**\n * Debounces a function to only be called once with a minimum delay\n * of <code>delay</code>ms.\n *\n * Loosely based on http://remysharp.com/2010/07/21/throttling-function-calls/\n *\n * @param {Function} fnCallback The callback function\n * @param {number} delay The delay in ms. Defaults to 0.\n * @param {*} context The context to which to apply the function on.\n *                    Defaults to this.\n * @return {Function} The debounced function.\n */\nshinejs.Timing.debounce = function(fnCallback, delay, context) {\n\n  var timeoutId = NaN;\n\n  return function() {\n    delay = delay || 0;\n    context = context || this;\n    var currentArguments = arguments;\n\n    if (!isNaN(timeoutId)) {\n      clearTimeout(timeoutId);\n    }\n\n    timeoutId = setTimeout(function() {\n      fnCallback.apply(context, currentArguments);\n    }, delay);\n  };\n};\n\n\n/**\n * Throttles a function to only be called with a delay of <code>delay</code>ms.\n *\n * Will always execute the first time immediately.\n *\n * Loosely based on http://remysharp.com/2010/07/21/throttling-function-calls/\n *\n * @param {Function} fnCallback The callback function\n * @param {number} delay The delay in ms. Defaults to 0.\n * @param {*} context The context to which to apply the function on.\n *                    Defaults to this.\n * @return {Function} The throttled function.\n */\nshinejs.Timing.throttle = function(fnCallback, delay, context) {\n\n  var previousTimestamp = NaN;\n  var timeoutId = NaN;\n\n  return function() {\n    delay = delay || 0;\n    context = context || this;\n\n    // requires performance.now() polyfill\n    var currentTimestamp = window.performance.now();\n    var currentArguments = arguments;\n\n    if (!isNaN(previousTimestamp) && currentTimestamp < previousTimestamp +\n      delay) {\n      // clear if we haven't waited long enough\n      if (!isNaN(timeoutId)) {\n        clearTimeout(timeoutId);\n      }\n\n      // delay execution by delay ms\n      timeoutId = setTimeout(function() {\n        previousTimestamp = currentTimestamp;\n        fnCallback.apply(context, currentArguments);\n      }, delay);\n    } else {\n      if (!isNaN(timeoutId)) {\n        clearTimeout(timeoutId);\n      }\n      previousTimestamp = currentTimestamp;\n      fnCallback.apply(context, currentArguments);\n    }\n  };\n};\n\n'use strict';\n\n/**\n * Creates a new Shine instance for one dom element.\n *\n * @constructor\n * @param {!HTMLElement} domElement The element to apply the shine effect to.\n *                                  This element may contain text content only\n *                                  and have no children.\n * @param {!Config} optConfig An optional Config instance.\n * @param {?string=} optClassPrefix An optional class-prefix applied to all\n *                                  injected styles. Defaults to 'shine-'.\n * @param {?string=} optShadowProperty Can be 'textShadow' or 'boxShadow'.\n *                                     Defaults to 'textShadow'.\n */\nshinejs.Shine = function(domElement, optConfig, optClassPrefix, optShadowProperty) {\n  if (!domElement) {\n    throw new Error('No valid DOM element passed as first parameter');\n  }\n\n  this.light = new shinejs.Light();\n  this.config = optConfig || new shinejs.Config();\n  this.domElement = domElement;\n\n  this.classPrefix = optClassPrefix || 'shine-';\n  this.shadowProperty = optShadowProperty ||\n    (this.elememtHasTextOnly(domElement) ? 'textShadow' : 'boxShadow');\n\n  this.shadows = [];\n  this.splitter = new shinejs.Splitter(domElement, this.classPrefix);\n\n  this.areAutoUpdatesEnabled = true;\n\n  this.fnDrawHandler = null;\n\n  this.updateContent();\n};\n\n/**\n * Releases all resources and removes event listeners. Destroyed instances\n * can't be reused and must be discarded.\n */\nshinejs.Shine.prototype.destroy = function() {\n  this.disableAutoUpdates();\n\n  for (var i = this.shadows.length - 1; i >= 0; i--) {\n    this.shadows[i].destroy();\n  }\n\n  this.light = null;\n  this.shadows = null;\n  this.splitter = null;\n\n  this.fnDrawHandler = null;\n};\n\n/**\n * Draws all shadows based on the current light position.\n */\nshinejs.Shine.prototype.draw = function() {\n  for (var i = this.shadows.length - 1; i >= 0; i--) {\n    this.shadows[i].draw(this.light, this.config);\n  }\n};\n\n/**\n * Recreates all required DOM elements and injects CSS. Called by constructor.\n *\n * Use this method to re-initialize the DOM element (e.g. when the contents\n * have changed) or to change the text.\n *\n * @param {?string=} optText Will set the text of the domElement. If optText is\n *                           not defined, the current textContent of domElement\n *                           will be used.\n */\nshinejs.Shine.prototype.updateContent = function(optText) {\n  var wereAutoUpdatesEnabled = this.areAutoUpdatesEnabled;\n  this.disableAutoUpdates();\n\n  shinejs.StyleInjector.getInstance().inject(this.getCSS());\n\n  this.shadows.length = 0;\n\n  this.splitter.split(optText, !optText && !this.elememtHasTextOnly(this.domElement));\n\n  var shadowProperty = this.getPrefixed(this.shadowProperty);\n\n  for (var j = 0; j < this.splitter.elements.length; j++) {\n    var element = this.splitter.elements[j];\n    var shadow = new shinejs.Shadow(element);\n    shadow.shadowProperty = shadowProperty;\n    this.shadows.push(shadow);\n  }\n\n  if (wereAutoUpdatesEnabled) {\n    this.enableAutoUpdates();\n  }\n  this.draw();\n};\n\n/**\n * Adds DOM event listeners to automatically update all properties.\n */\nshinejs.Shine.prototype.enableAutoUpdates = function() {\n  this.disableAutoUpdates();\n  this.areAutoUpdatesEnabled = true;\n\n  // store reference fore more efficient minification\n  var fnDrawHandler = this.fnDrawHandler = this.draw.bind(this);\n\n  window.addEventListener('scroll', fnDrawHandler, false);\n  window.addEventListener('resize', fnDrawHandler, false);\n\n  for (var i = this.shadows.length - 1; i >= 0; i--) {\n    var shadow = this.shadows[i];\n    shadow.enableAutoUpdates();\n  }\n};\n/**\n * Removes DOM event listeners to automatically update all properties.\n */\nshinejs.Shine.prototype.disableAutoUpdates = function() {\n  this.areAutoUpdatesEnabled = false;\n\n  // store reference fore more efficient minification\n  var fnDrawHandler = this.fnDrawHandler;\n\n  if (!fnDrawHandler) {\n    return;\n  }\n\n  this.fnDrawHandler = null;\n\n  window.removeEventListener('scroll', fnDrawHandler, false);\n  window.removeEventListener('resize', fnDrawHandler, false);\n\n  for (var i = this.shadows.length - 1; i >= 0; i--) {\n    var shadow = this.shadows[i];\n    shadow.disableAutoUpdates();\n  }\n};\n\n/**\n * The CSS to inject into the header.\n * @protected\n * @return {string}\n */\nshinejs.Shine.prototype.getCSS = function() {\n  return '/* shine.js styles */' +\n    '.shine-wrapper {' +\n    ' display: inline-block;' +\n    ' position: relative;' +\n    ' max-width: 100%;' +\n    '}' +\n    '' +\n    '.shine-word {' +\n    ' display: inline-block;' +\n    ' white-space: nowrap;' +\n    '}' +\n    '' +\n    '.shine-letter {' +\n    ' position: relative;' +\n    ' display: inline-block;' +\n    '}' +\n    '' +\n    '.shine-mask {' +\n    ' position: absolute;' +\n    ' top: 0;' +\n    ' left: 0;' +\n    ' right: 0;' +\n    ' bottom: 0;' +\n    '}';\n};\n\n/**\n * Prefixes a CSS property.\n * @protected\n * @param {string} property The css property to prefix.\n * @return {string}\n */\nshinejs.Shine.prototype.getPrefixed = function(property) {\n  var element = this.domElement || document.createElement('div');\n  var style = element.style;\n\n  // bb: prioritize prefixed properties over non-prefixed to prevent usage\n  // of placeholders (e.g. 'filter' in webkit is defined but does nothing)\n  var prefixes = ['webkit', 'ms', 'Moz', 'Webkit', 'O'];\n  var suffix = property.charAt(0).toUpperCase() + property.substring(1);\n\n  for (var i = 0; i < prefixes.length; i++) {\n    var prefixed = prefixes[i] + suffix;\n    if (prefixed in style) {\n      return prefixed;\n    }\n  }\n\n  return property;\n};\n\n/**\n * Checks if a CSS property is supported in the current browser. Tests available\n * prefixes automatically.\n *\n * Example: <code>isCSSPropertySupported('filter', 'blur(2px)')</code>.\n *\n * @protected\n * @param {string} property The css property to test against.\n * @param {string} testValue The css property to test against.\n * @return {boolean}\n */\nshinejs.Shine.prototype.isCSSPropertySupported = function(property, testValue) {\n  var element = document.createElement('div');\n  var style = element.style;\n  var prefixes = ['-webkit-', '-ms-', '-moz-'];\n  style.cssText = prefixes.join(property + ':' + testValue + ';');\n  return !!style.length && ((document.documentMode === undefined || document.documentMode > 9));\n};\n\n/**\n * Checks if CSS filters (e.g. drop-shadow/blur) are supported.\n * @return {boolean}\n */\nshinejs.Shine.prototype.areFiltersSupported = function() {\n  return this.isCSSPropertySupported('filter', 'blur(2px)');\n};\n\n/**\n * Checks whether a DOM element only contains childNodes of type TEXT_NODE (3).\n * @protected\n * @param {HTMLElement} domElement\n * @return {boolean}\n */\nshinejs.Shine.prototype.elememtHasTextOnly = function(domElement) {\n  var childNodes = domElement.childNodes;\n\n  if (!childNodes || childNodes.length === 0) {\n    return true;\n  }\n\n  for (var i = 0; i < childNodes.length; i++) {\n    if (childNodes[i].nodeType !== 3) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n/**\n * @const\n * @type {shinejs.Shine}\n */\nshinejsGlobal.Shine = shinejsGlobal.Shine || shinejs.Shine;\n"},function(e,t,n){"use strict";var i=n(0),r=n.n(i);t.a=r.a.module("hj.isScrolling",[]).directive("hjIsScrolling",["$window","$timeout",function(e,t){return{restrict:"A",link:function(n,i,o){var a=!1,s=void 0,l=function(){a||(a=!0,i.addClass("is-scrolling"),t.cancel(s),s=t(function(){a=!1,i.removeClass("is-scrolling")},300))};r.a.element(e).on("scroll",l),n.$on("$destroy",function(){r.a.element(e).off("scroll",l)})}}}])},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(94),a=n.n(o);t.a=r.a.module("hj.scrollMonitor",[]).directive("scrollMonitor",function(){return{restrict:"EA",scope:{offsets:"=scrollMonitorOffsets",callback:"&scrollMonitorCallback"},controllerAs:"vm",bindToController:!0,controller:["$scope","$element","$timeout",function(e,t,n){"ngInject";var i=this,r=a.a.create(t[0],i.offsets);r.stateChange(function(){var t={$watcher:r};e.$apply(function(){i.callback(t)})}),n(function(){r.recalculateLocation(),r.update();var t={$watcher:r};e.$apply(function(){i.callback(t)})}),i.$onDestroy=function(){r.destroy()}}]}})},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(e,t,n){"use strict";var i=n(1),r=i.isInBrowser,o=n(2),a=new o(r?document.body:null);a.setStateFromDOM(null),a.listenToDOM(),r&&(window.scrollMonitor=a),e.exports=a},function(e,t){"use strict";t.VISIBILITYCHANGE="visibilityChange",t.ENTERVIEWPORT="enterViewport",t.FULLYENTERVIEWPORT="fullyEnterViewport",t.EXITVIEWPORT="exitViewport",t.PARTIALLYEXITVIEWPORT="partiallyExitViewport",t.LOCATIONCHANGE="locationChange",t.STATECHANGE="stateChange",t.eventTypes=[t.VISIBILITYCHANGE,t.ENTERVIEWPORT,t.FULLYENTERVIEWPORT,t.EXITVIEWPORT,t.PARTIALLYEXITVIEWPORT,t.LOCATIONCHANGE,t.STATECHANGE],t.isOnServer="undefined"==typeof window,t.isInBrowser=!t.isOnServer,t.defaultOffsets={top:0,bottom:0}},function(e,i,a){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){return u?0:e===document.body?window.innerHeight||document.documentElement.clientHeight:e.clientHeight}function n(e){return u?0:e===document.body?Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight):e.scrollHeight}function r(e){return u?0:e===document.body?window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop}var l=a(1),u=l.isOnServer,d=l.isInBrowser,p=l.eventTypes,f=a(3),m=!1;if(d)try{var g=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("test",null,g)}catch(e){}var v=!!m&&{capture:!1,passive:!0},y=function(){function t(e,i){function h(){if(a.viewportTop=r(e),a.viewportBottom=a.viewportTop+a.viewportHeight,a.documentHeight=n(e),a.documentHeight!==l){for(u=a.watchers.length;u--;)a.watchers[u].recalculateLocation();l=a.documentHeight}}function c(){for(d=a.watchers.length;d--;)a.watchers[d].update();for(d=a.watchers.length;d--;)a.watchers[d].triggerCallbacks()}o(this,t);var a=this;this.item=e,this.watchers=[],this.viewportTop=null,this.viewportBottom=null,this.documentHeight=n(e),this.viewportHeight=s(e),this.DOMListener=function(){t.prototype.DOMListener.apply(a,arguments)},this.eventTypes=p,i&&(this.containerWatcher=i.create(e));var l,u,d;this.update=function(){h(),c()},this.recalculateLocations=function(){this.documentHeight=0,this.update()}}return t.prototype.listenToDOM=function(){d&&(window.addEventListener?(this.item===document.body?window.addEventListener("scroll",this.DOMListener,v):this.item.addEventListener("scroll",this.DOMListener,v),window.addEventListener("resize",this.DOMListener)):(this.item===document.body?window.attachEvent("onscroll",this.DOMListener):this.item.attachEvent("onscroll",this.DOMListener),window.attachEvent("onresize",this.DOMListener)),this.destroy=function(){window.addEventListener?(this.item===document.body?(window.removeEventListener("scroll",this.DOMListener,v),this.containerWatcher.destroy()):this.item.removeEventListener("scroll",this.DOMListener,v),window.removeEventListener("resize",this.DOMListener)):(this.item===document.body?(window.detachEvent("onscroll",this.DOMListener),this.containerWatcher.destroy()):this.item.detachEvent("onscroll",this.DOMListener),window.detachEvent("onresize",this.DOMListener))})},t.prototype.destroy=function(){},t.prototype.DOMListener=function(e){this.setStateFromDOM(e)},t.prototype.setStateFromDOM=function(e){var t=r(this.item),i=s(this.item),o=n(this.item);this.setState(t,i,o,e)},t.prototype.setState=function(e,t,n,i){var r=t!==this.viewportHeight||n!==this.contentHeight;if(this.latestEvent=i,this.viewportTop=e,this.viewportHeight=t,this.viewportBottom=e+t,this.contentHeight=n,r)for(var o=this.watchers.length;o--;)this.watchers[o].recalculateLocation();this.updateAndTriggerWatchers(i)},t.prototype.updateAndTriggerWatchers=function(e){for(var t=this.watchers.length;t--;)this.watchers[t].update();for(t=this.watchers.length;t--;)this.watchers[t].triggerCallbacks(e)},t.prototype.createCustomContainer=function(){return new t},t.prototype.createContainer=function(e){"string"==typeof e?e=document.querySelector(e):e&&e.length>0&&(e=e[0]);var n=new t(e,this);return n.setStateFromDOM(),n.listenToDOM(),n},t.prototype.create=function(e,t){"string"==typeof e?e=document.querySelector(e):e&&e.length>0&&(e=e[0]);var n=new f(this,e,t);return this.watchers.push(n),n},t.prototype.beget=function(e,t){return this.create(e,t)},t}();e.exports=y},function(e,t,n){"use strict";function o(e,t,n){function o(e,t){if(0!==e.length)for(b=e.length;b--;)S=e[b],S.callback.call(i,t,i),S.isOne&&e.splice(b,1)}var i=this;this.watchItem=t,this.container=e,this.offsets=n?n===+n?{top:n,bottom:n}:{top:n.top||h.top,bottom:n.bottom||h.bottom}:h,this.callbacks={};for(var f=0,m=p.length;f<m;f++)i.callbacks[p[f]]=[];this.locked=!1;var g,v,y,w,b,S;this.triggerCallbacks=function(e){switch(this.isInViewport&&!g&&o(this.callbacks[a],e),this.isFullyInViewport&&!v&&o(this.callbacks[s],e),this.isAboveViewport!==y&&this.isBelowViewport!==w&&(o(this.callbacks[r],e),v||this.isFullyInViewport||(o(this.callbacks[s],e),o(this.callbacks[c],e)),g||this.isInViewport||(o(this.callbacks[a],e),o(this.callbacks[l],e))),!this.isFullyInViewport&&v&&o(this.callbacks[c],e),!this.isInViewport&&g&&o(this.callbacks[l],e),this.isInViewport!==g&&o(this.callbacks[r],e),!0){case g!==this.isInViewport:case v!==this.isFullyInViewport:case y!==this.isAboveViewport:case w!==this.isBelowViewport:o(this.callbacks[d],e)}g=this.isInViewport,v=this.isFullyInViewport,y=this.isAboveViewport,w=this.isBelowViewport},this.recalculateLocation=function(){if(!this.locked){var e=this.top,t=this.bottom;if(this.watchItem.nodeName){var n=this.watchItem.style.display;"none"===n&&(this.watchItem.style.display="");for(var i=0,r=this.container;r.containerWatcher;)i+=r.containerWatcher.top-r.containerWatcher.container.viewportTop,r=r.containerWatcher.container;var a=this.watchItem.getBoundingClientRect();this.top=a.top+this.container.viewportTop-i,this.bottom=a.bottom+this.container.viewportTop-i,"none"===n&&(this.watchItem.style.display=n)}else this.watchItem===+this.watchItem?this.watchItem>0?this.top=this.bottom=this.watchItem:this.top=this.bottom=this.container.documentHeight-this.watchItem:(this.top=this.watchItem.top,this.bottom=this.watchItem.bottom);this.top-=this.offsets.top,this.bottom+=this.offsets.bottom,this.height=this.bottom-this.top,void 0===e&&void 0===t||this.top===e&&this.bottom===t||o(this.callbacks[u],null)}},this.recalculateLocation(),this.update(),g=this.isInViewport,v=this.isFullyInViewport,y=this.isAboveViewport,w=this.isBelowViewport}var i=n(1),r=i.VISIBILITYCHANGE,a=i.ENTERVIEWPORT,s=i.FULLYENTERVIEWPORT,l=i.EXITVIEWPORT,c=i.PARTIALLYEXITVIEWPORT,u=i.LOCATIONCHANGE,d=i.STATECHANGE,p=i.eventTypes,h=i.defaultOffsets;o.prototype={on:function(e,t,n){switch(!0){case e===r&&!this.isInViewport&&this.isAboveViewport:case e===a&&this.isInViewport:case e===s&&this.isFullyInViewport:case e===l&&this.isAboveViewport&&!this.isInViewport:case e===c&&this.isInViewport&&this.isAboveViewport:if(t.call(this,this.container.latestEvent,this),n)return}if(!this.callbacks[e])throw new Error("Tried to add a scroll monitor listener of type "+e+". Your options are: "+p.join(", "));this.callbacks[e].push({callback:t,isOne:n||!1})},off:function(e,t){if(!this.callbacks[e])throw new Error("Tried to remove a scroll monitor listener of type "+e+". Your options are: "+p.join(", "));for(var n,i=0;n=this.callbacks[e][i];i++)if(n.callback===t){this.callbacks[e].splice(i,1);break}},one:function(e,t){this.on(e,t,!0)},recalculateSize:function(){this.height=this.watchItem.offsetHeight+this.offsets.top+this.offsets.bottom,this.bottom=this.top+this.height},update:function(){this.isAboveViewport=this.top<this.container.viewportTop,this.isBelowViewport=this.bottom>this.container.viewportBottom,this.isInViewport=this.top<this.container.viewportBottom&&this.bottom>this.container.viewportTop,this.isFullyInViewport=this.top>=this.container.viewportTop&&this.bottom<=this.container.viewportBottom||this.isAboveViewport&&this.isBelowViewport},destroy:function(){var e=this.container.watchers.indexOf(this),t=this;this.container.watchers.splice(e,1);for(var n=0,i=p.length;n<i;n++)t.callbacks[p[n]].length=0},lock:function(){this.locked=!0},unlock:function(){this.locked=!1}};for(var f=0,m=p.length;f<m;f++){var g=p[f];o.prototype[g]=function(e){return function(t,n){this.on.call(this,e,t,n)}}(g)}e.exports=o}])})},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(96),a=n(101),s=n(106),l=n(110),c=n(117),u=n(122),d=n(128),p=n(133),h=r.a.module("app.components",[o.a.name,a.a.name,s.a.name,l.a.name,c.a.name,u.a.name,d.a.name,p.a.name]);t.a=h},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(97),l=r.a.module("notFound",[a.a]).config(["$stateProvider",function(e){"ngInject";e.state("notFound",{url:"/404",views:{app:{template:"<not-found></not-found>"}}})}]).directive("notFound",s.a);t.a=l},function(e,t,n){"use strict";var i=n(98),r=n.n(i),o=n(99),a=n(100),s=(n.n(a),function(){"ngInject";return{restrict:"E",scope:{},template:r.a,controller:o.a,controllerAs:"vm",bindToController:!0}});t.a=s},function(e,t){e.exports='<div style="position: absolute; display: table; width: 100%; height: 100%; width: 100vw; height: 100vh;">\n    <div style="display: table-cell; vertical-align: middle; text-align: center; padding: 20px;">\n        <h1>Page not found.</h1>\n        <p>¯\\_(ツ)_/¯</p>\n        <p><a href="/" style="background: none; text-decoration: none; border: none;">↩︎</a>\n    </div>\n</div>\n'},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function NotFoundController(){_classCallCheck(this,NotFoundController),this.name="notFound"};t.a=i},function(e,t){},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(102),l=r.a.module("menu",[a.a]).config(function(){"ngInject"}).directive("menu",s.a);t.a=l},function(e,t,n){"use strict";var i=n(103),r=n.n(i),o=n(104),a=n(105),s=(n.n(a),function(){"ngInject";return{restrict:"E",scope:{},template:r.a,controller:o.a,controllerAs:"vm",bindToController:!0}});t.a=s},function(e,t){e.exports='<div class="menu-wrapper" ng-mouseover="vm.showMenu = true" ng-mouseleave="vm.showMenu = false" ng-class="{\n  \'hidden\': vm.hidden,\n  \'show-menu\': vm.showMenu,\n}">\n\n  <h1 hj-shine>Universe Porn</h1>\n\n  <div class="table">\n\n    <div class="cell">\n\n      <ul>\n\n        <li ui-sref-active="active">\n          <a ng-focus="vm.showMenu = true" ng-blur="vm.showMenu = false" ui-sref="index.portfolio">\n            <span hj-shine>Observations</span>\n          </a>\n        </li>\n\n        <li ui-sref-active="active">\n          <a ng-focus="vm.showMenu = true" ng-blur="vm.showMenu = false" ui-sref="index.portfolio">\n            <span hj-shine>Back</span>\n          </a>\n        </li>\n\n        <li ui-sref-active="active">\n          <a ng-focus="vm.showMenu = true" ng-blur="vm.showMenu = false" ui-sref=".profile">\n            <span hj-shine>Information</span>\n          </a>\n        </li>\n\n        <li ui-sref-active="active">\n          <a ng-focus="vm.showMenu = true" ng-blur="vm.showMenu = false" ui-sref="index.archive">\n            <span hj-shine>Archive</span>\n          </a>\n        </li>\n\n      </ul>\n\n    </div>\n\n  </div>\n\n</div>\n'},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function MenuController(e,t,n,i){_classCallCheck(this,MenuController);var r=this;r.hidden=!1;var o=void 0,a=function(){i(function(){r.hidden=!1}),i.cancel(o),o=i(function(){r.hidden=!0},5e3)};t.on("mousemove",a),t.on("keypress",a),e.$on("$destroy",function(){t.off("mousemove",a),t.off("keypress",a)})};i.$inject=["$scope","$document","$element","$timeout"],t.a=i},function(e,t){},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(107),l=r.a.module("home",[a.a]).config(["$stateProvider",function(e){"ngInject";e.state("index.home",{url:"?zoom",views:{overlay:{template:"<menu></menu>"},content:{template:"<viewer></viewer>"}}}),e.state("index.home.profile",{url:"/information",views:{"overlay@index":{template:"<profile></profile>"}},data:{"gsapifyRouter.overlay":{enter:{in:{transition:"fadeUpDelayed"}}}}})}]).directive("home",s.a);t.a=l},function(e,t,n){"use strict";var i=n(108),r=n(109),o=(n.n(r),function(){"ngInject";return{restrict:"E",scope:{},controller:i.a,controllerAs:"vm",bindToController:!0}});t.a=o},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(0),r=(n.n(i),function HomeController(e,t){_classCallCheck(this,HomeController);t.$current.locals.globals;e.pageTitle=null});r.$inject=["$rootScope","$state"],t.a=r},function(e,t){},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(111),l=n.n(s),c=n(113),u=r.a.module("portfolio",[a.a,l.a]).config(["$stateProvider",function(e){"ngInject";e.state("index.portfolio",{url:"/observations",views:{overlay:{template:"<menu></menu>"},content:{template:"<portfolio></portfolio>"}},data:{"gsapifyRouter.content":{enter:{in:{trigger:"hjColumnify:init"}}}}}),e.state("index.portfolio.profile",{url:"/information",views:{"overlay@index":{template:"<profile></profile>"}},data:{"gsapifyRouter.overlay":{enter:{in:{transition:"fadeUpDelayed"}}}}})}]).directive("portfolio",c.a);t.a=u},function(e,t,n){n(0),n(112),e.exports="hj.columnify"},function(e,t){!function(){"use strict";angular.module("hj.columnify",[]).directive("hjColumnify",["$log","$timeout","$window",function(e,t,n){return{restrict:"AE",transclude:!0,template:'<div class="columnify__item {{::itemClass}}" ng-transclude></div>',link:function(i,r,o,a,s){var l=o.hjColumnify.match(/^\s*(.+)\s+in\s+(.*?)\s*$/);if(!l)throw Error('Expected hjColumnify attr in form of "_item_ in _array_" but got "'+o.hjColumnify+'".');var c=l[1],u=l[2],d=[],p=[],h=function(e){angular.forEach(e,function(e){var t=e.element[0].querySelectorAll("video[autoplay]");angular.forEach(t,function(e){e.play()})})},f={$element:r,columns:"auto",onAppend:function(){},resetItemsOnAppend:!0,resetItems:h,itemClass:"item",columnClass:"column"},m=angular.extend(f,i.$eval(o.hjColumnifyOptions));i.itemClass=m.itemClass,r.css("position","relative"),r.css("overflow","auto"),r.css("width","100%");var g;i.auto=function(e){if(!g){var t=angular.element('<div style="position: absolute; width: 100%; visibility: hidden"></div>');r.append(t),g=angular.element('<div class="columnify__auto-sizer '+e.columnClass+'"></div>'),t.append(g)}var n=Math.round(e.$element[0].clientWidth/g[0].clientWidth);if(isNaN(n))throw Error("Failed to calculate numColumns. Possibly caused by hidden parent element.");return n};var v=function(t){return"string"==typeof m[t]?"function"==typeof i[m[t]]?i[m[t]](m):(e.error("hjColumnify: "+t+" is not a function"),null):"function"==typeof m[t]?m[t](m):"number"==typeof m[t]?m[t]:void("object"==typeof m[t]&&e.error("hjColumnify: "+t+" is not valid"))},y=r.children();r.children().remove(),angular.element(r[0].previousElementSibling).after(angular.element("\x3c!-- hjColumnify --\x3e"));var w,b,S,T=function(e){s(e.$scope,function(t){var n=y.clone();n.children().replaceWith(t),e.element=n})},E=function(e){for(var t=[],n=t.length;n<e.length;n++){var r={};r.$scope=i.$new(),r.$scope.$index=n,t.push(r),T(r)}for(n=0;n<t.length;n++)t[n].$scope[c]=e[n];return t},O=function(e){var t=d.map(function(e,t){return{index:t,height:e.height}});return t=t.sort(function(e,t){var n=Math.abs(e.height-t.height);return e.height===t.height||n<3?0:e.height<t.height?-1:1}),d[t[0].index]},I=function(e){r.attr("data-columns",e),angular.element(r[0].querySelectorAll(".columnify__column")).remove(),d=[];for(var t=0;t<Math.max(1,e);t++){var n=angular.element('<div class="columnify__column '+m.columnClass+'"/>').attr("data-column",t);r.append(n),d.push({element:n,items:[],height:0})}},x=function(e){angular.forEach(d,function(e){e.items=[]}),angular.forEach(e,function(e){void 0===e.height?e.height=0:0===e.height&&(e.height=e.element[0].clientHeight);var t=O();e.column=t,t.items.push(e),t.height+=e.height}),angular.forEach(e,function(e){e.column.element.append(e.element[0])}),m.onAppend(e),m.resetItemsOnAppend&&m.resetItems(e)},C=function(){w=v("columns"),i.$$phase||i.$apply()},$=!1,_=function(){w=v("columns"),I(w),b=i.$watch(u,function(e,n){var r=!1;e.forEach(function(e,t){n[t]&&angular.equals(n[t],e)||!(t<n.length-1)||(r=!0)}),(0===e.length||e.length<n.length)&&(r=!0),r||(e=e.slice($?n.length:0,e.length)),e=E(e),r?(I(w),p=e):p=p.concat(e),x(e),t(function(){x(e),$=!0,i.$emit("hjColumnify:init")})}),S=i.$watch(function(){return w},function(){$&&(I(w),x(p))})},A=function(e){var i;return function(){var r=this,o=arguments;n.requestAnimationFrame?(n.cancelAnimationFrame(i),i=n.requestAnimationFrame(function(){e.apply(r,o),i=null})):(t.cancel(i),i=t(function(){e.apply(r,o),i=null},62.5))}}(C);angular.element(n).on("resize",A),i.$on("$destroy",function(){angular.element(n).off("resize",A),b(),S()}),t(function(){_(),t(C,100)})}}}])}()},function(e,t,n){"use strict";var i=n(114),r=n.n(i),o=n(115),a=n(116),s=(n.n(a),function(){"ngInject";return{restrict:"E",scope:{},template:r.a,controller:o.a,controllerAs:"vm",bindToController:!0}});t.a=s},function(e,t){e.exports='<div class="columnify" hj-columnify="asset in vm.assets">\n\n  <div class="asset" scroll-monitor scroll-monitor-offsets="{top: 3000}" scroll-monitor-callback="vm.scrollMonitorCallback($watcher, asset)">\n\n    <a ui-sref="index.viewer({index: $index + 1})">\n\n      <div class="asset__wrapper {{asset.schema}} {{asset.thumbnail.ratio >= 1 ? \'landscape\' : \'portrait\'}}">\n\n        <div ng-if="asset.$show" class="fade__wrapper images-loaded">\n\n          <img ng-show="asset.schema === \'image\' || (asset.schema === \'video\' && !$root.$isDesktop)" nopin="nopin" alt="{{asset.fields.description}}"\n            ng-src="{{ vm.getImageSrc(asset) }}"\n            ng-srcset="{{ vm.getImageSrcset(asset) }}"\n            sizes="50vw">\n\n          <div ng-show="asset.schema === \'video\' && !$root.$isDesktop" class="icon icon-play"></div>\n\n          <video ng-show="asset.schema === \'video\' && $root.$isDesktop" Xonmouseenter="play()" Xonmouseleave="pause()" autoplay loop muted preload="auto" ng-attr-poster="{{$root.$helper.videoThumbnailUrl(asset.fields.videoClip)}}">\n              <source ng-src="{{asset.fields.videoClip.metadata.zencoder.outputs.mp4Hd.url}}" type="video/mp4">\n              <source ng-src="{{asset.fields.videoClip.metadata.zencoder.outputs.webmHd.url}}" type="video/webm">\n          </video>\n\n        </div>\n\n      </div>\n\n    </a>\n\n  </div>\n\n</div>\n\n<div style="position: absolute; bottom: 0; left: 0; width: 100%; height: 300px; z-index: -9999; pointer-events: none" sm-scene duration="\'100%\'" trigger-hook="1"></div>\n\n<div class="scroll-prompt" sm-class-toggle classes="\'flip\'" ng-click="vm.clickScrollPrompt($event)">\n  <div class="flip__wrapper">\n    <div class="icon icon-arrow-down"></div>\n  </div>\n</div>\n'},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function PortfolioController(e,t,n,i,r){_classCallCheck(this,PortfolioController);var o=this,a=t.$current.locals.globals;o.assets=a.portfolio.fields.assets,o.getImageSrc=function(e){return e?e.thumbnail.ratio>=1?r.thumbnailSrc(e.thumbnail,"w:960;h:720;g:Center;q:80"):r.thumbnailSrc(e.thumbnail,"w:960;h:1440;g:Center;q:80"):""},o.getImageSrcset=function(e){if(!e)return"";var t=[];return e.thumbnail.ratio>=1?(t.push(r.thumbnailSrc(e.thumbnail,"w:540;h:405;g:Center;q:80")+" 540w"),t.push(r.thumbnailSrc(e.thumbnail,"w:960;h:720;g:Center;q:80")+" 960w"),t.push(r.thumbnailSrc(e.thumbnail,"w:1280;h:960;g:Center;q:80")+" 1280w")):(t.push(r.thumbnailSrc(e.thumbnail,"w:540;h:810;g:Center;q:80")+" 540w"),t.push(r.thumbnailSrc(e.thumbnail,"w:960;h:1440;g:Center;q:80")+" 960w"),t.push(r.thumbnailSrc(e.thumbnail,"w:1280;h:1920;g:Center;q:80")+" 1280w")),t.join(", ")};var s=function(){var e=n[0];return Math.max(e.body.scrollHeight,e.documentElement.scrollHeight,e.body.offsetHeight,e.documentElement.offsetHeight,e.body.clientHeight,e.documentElement.clientHeight)};o.clickScrollPrompt=function(e){i.scrollY+i.innerHeight>s()-300?n.scrollTo(0,0,1600):n.scrollTo(0,i.scrollY+i.innerHeight,800)},o.scrollMonitorCallback=function(e,t){t&&e.isInViewport&&(t.$show=!0)}};i.$inject=["$rootScope","$state","$document","$window","HelperService"],t.a=i},function(e,t){},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(118),a=r.a.module("profile",[]).directive("profile",o.a);t.a=a},function(e,t,n){"use strict";var i=n(119),r=n.n(i),o=n(120),a=n(121),s=(n.n(a),function(){"ngInject";return{restrict:"E",scope:{},template:r.a,controller:o.a,controllerAs:"vm",bindToController:!0}});t.a=s},function(e,t){e.exports='<div class="table">\n\n  <div class="cell">\n\n    <div class="row">\n\n      <div class="column small-24 text-center">\n\n        <a class="close" ui-sref="^">\n          <img src="/img/close.svg">\n        </a>\n\n        <span ng-bind-html="vm.profile.html | deWidow"></span>\n\n      </div>\n\n    </div>\n\n  </div>\n\n</div>\n'},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function ProfileController(e,t){_classCallCheck(this,ProfileController);var n=this,i=t.$current.locals.globals;n.profile=i.profile};i.$inject=["$rootScope","$state"],t.a=i},function(e,t){},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(123),l=r.a.module("viewer",[a.a]).config(["$stateProvider",function(e){"ngInject";e.state("index.viewer",{url:"/observations/{index:[0-9]{1,4}}?zoom",views:{overlay:{template:"<menu></menu>"},content:{template:"<viewer></viewer>"}}}),e.state("index.viewer.profile",{url:"/information",views:{"overlay@index":{template:"<profile></profile>"}},data:{"gsapifyRouter.overlay":{enter:{in:{transition:"fadeUpDelayed"}}}}})}]).directive("viewer",s.a);t.a=l},function(e,t,n){"use strict";var i=n(124),r=n.n(i),o=n(125),a=n(127),s=(n.n(a),function(){"ngInject";return{restrict:"E",scope:{},template:r.a,controller:o.a,controllerAs:"vm",bindToController:!0}});t.a=s},function(e,t){e.exports='<div class="viewer"\n  data-schema="{{vm.asset.schema}}"\n  data-zoom-level="{{vm.zoomLevel}}"\n  ng-class="{\'show-ui\': vm.showUI}">\n\n  <span ng-if="vm.asset.schema === \'image\'">\n\n    <hj-custom-seadragon\n      dzi="vm.dzi"\n      focus-point="vm.focusPoint"\n      zoom-level="vm.zoomLevel"\n      disabled="vm.disableViewer"\n      ></hj-custom-seadragon>\n\n  </span>\n\n  <span ng-if="vm.asset.schema === \'video\'">\n\n    <div class="video">\n      <iframe iframe-events-src="document" hj-vimeo-api ng-src="{{ \'//player.vimeo.com/video/\' + vm.asset.fields.video.oembed.id + \'?api=1&badge=0&byline=0&portrait=0&title=0&color=ffffff&hd=1&autoplay=1&loop=0\' }}"\n        style="position: absolute; width: 100%; height: 100%;"\n        width="100%" height="100%" frameborder="0" webkitallowfullscreen allowfullscreen></iframe>\n\n    </div>\n\n  </span>\n\n  <div class="back-wrapper">\n\n    <h4><a ui-sref="index.portfolio">{{ $root.$state.$current.name === \'index.home\' ? \'Thumbnails\' : \'Back\' }}</a></h4>\n\n  </div>\n\n  <div class="nav nav--next" ng-click="vm.next()">\n\n    <div class="icon icon-arrow-right"></div>\n\n  </div>\n\n  <div class="nav nav--prev" ng-click="vm.prev()">\n\n    <div class="icon icon-arrow-left"></div>\n\n  </div>\n\n  \x3c!--<div class="hints">\n\n    <div class="scroll">\n\n      <div class="icon icon-arrow-up"></div>\n\n      <div>•</div>\n\n      <div class="icon icon-arrow-down"></div>\n\n    </div>\n\n  </div>--\x3e\n\n  <div class="caption">\n    <p>\n      <span>{{vm.asset.fields.description}}</span>\n      <br>\n      <span>Distance: {{vm.asset.fields.distance}};</span>\n      <span>Constellation: {{vm.asset.fields.constellation.terms[0].title}};</span>\n      <span>Category: {{vm.asset.fields.category.terms[0].title}}</span>\n    </p>\n  </div>\n\n</div>\n'},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(0),r=n.n(i),o=n(126),a=(n.n(o),function ViewerController(e,t,n,i,o,a,s,l){_classCallCheck(this,ViewerController);var c=this,u=n.$current.locals.globals,d="index.home"===n.current.name,p=u.portfolio.fields.hero,h=u.portfolio.fields.assets,f=void 0!==i.index?parseInt(i.index)-1:0,m=f===h.length-1?0:f+1,g=0===f?h.length-1:f-1;c.asset=d?p[0]||h[f]:h[f],d||(e.pageTitle=c.asset.title);var v=l.thumbnailSrc(c.asset.thumbnail,"h:1000;q:90");/https?:\/\//.test(v)||(v=o.location.protocol+"//"+o.location.host+v),e.ogImage=e.twitterImage=v,t.$on("$stateChangeSuccess",function(e,t){c.disableViewer=/profile/.test(t.name)}),e.viewerSchema=c.asset.schema;var y=t.$on("$stateChangeStart",function(t,n){y(),e.$broadcast("hjShine:stop"),/profile/.test(n.name)||(a.off("mousewheel"),a.off("DOMMouseScroll")),"index.viewer"!==n.name&&s(function(){e.viewerSchema=null},400)});e.$broadcast("hjShine:spin");var w=Modernizr.touch;c.showUI=!1,1!==n.history.length&&"index.portfolio"!==n.history[n.history.length-1].name||(c.showUI=!0,s(function(){c.showUI=!1},3e3)),c.next=function(){n.go("index.viewer",{index:m+1,zoom:c.zoomLevel})},c.prev=function(){n.go("index.viewer",{index:g+1,zoom:c.zoomLevel})};var b=function(e){39===e.keyCode&&c.next(),37===e.keyCode&&c.prev()};if(d||a.on("keyup",b),t.$on("$destroy",function(){a.off("keyup",b)}),"video"===c.asset.schema){var S=!1;t.$on("vimeoApi:ready",function(t,n){var i=r.a.element(n.element);w?i.addClass("ready"):n.addEvent("playProgress",function(){S||(S=!0,i.addClass("ready"))}),e.$broadcast("hjShine:stop"),n.addEvent("finish",function(){n.api("play")})})}if("image"===c.asset.schema){var T=function(){c.dzi=[e.assistUrl,e.slug,c.asset.fields.image.dzi.dir,c.asset.fields.image.dzi.fileName].join("/")};if(c.zoomLevel=w?1:i.zoom||2,t.$on("hjCustomSeadragon:ready",function(){e.$broadcast("hjShine:stop")}),c.asset.fields.image.crops&&c.asset.fields.image.crops.focus){var E=c.asset.fields.image.crops.focus;c.focusPoint={x:E[0]+.5*(E[2]-E[0]),y:E[1]+.5*(E[3]-E[1])},T()}else l.focusPoint(c.asset).then(function(e){c.focusPoint={x:e.x/e.width,y:e.y/e.height},T()})}});a.$inject=["$rootScope","$scope","$state","$stateParams","$window","$document","$timeout","HelperService"],t.a=a},function(e,t){e.exports="#player, .fallback, body, html, iframe {\n  background: transparent !important; }\n\n.player:not(.touch-support) {\n  pointer-events: none; }\n\n.player .video-wrapper {\n  background: transparent !important; }\n\n.player .controls {\n  top: 0; }\n  .player .controls .play {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin: auto; }\n\n.player:not(.touch-support) > *:not(.video-wrapper) {\n  display: none; }\n\n.player.touch-support .controls-wrapper > *:not(.controls) {\n  display: none; }\n\n.player.touch-support .controls > *:not(.play) {\n  display: none; }\n"},function(e,t){},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(129),l=r.a.module("archive",[a.a]).config(["$stateProvider",function(e){"ngInject";e.state("index.archive",{url:"/archive",resolve:{archive:["ApiService",function(e){return e.entitySearchOne({q:"schema:archive",children:1}).then(function(e){return e.fields.assets})}]},views:{content:{template:"<archive></archive>"}}}),e.state("index.archive.profile",{url:"/information",views:{"overlay@index":{template:"<profile></profile>"}},data:{"gsapifyRouter.overlay":{enter:{in:{transition:"fadeUpDelayed"}}}}})}]).directive("archive",s.a);t.a=l},function(e,t,n){"use strict";var i=n(130),r=n.n(i),o=n(131),a=n(132),s=(n.n(a),function(){"ngInject";return{restrict:"E",scope:{},template:r.a,controller:o.a,controllerAs:"vm",bindToController:!0}});t.a=s},function(e,t){e.exports='<nav class="row">\n\n  <ul>\n    <li class="column small-12 medium-4 medium-push-4 text-center"><a ui-sref="index.home"><h1>Universe Porn</h1></a></li>\n    <li class="column small-6 medium-4 medium-pull-4 text-center"><a ui-sref="index.portfolio">Observations</a></li>\n    <li class="column small-6 medium-4 text-center"><a ui-sref=".profile">Information</a></li>\n  </ul>\n\n</nav>\n\n<div class="row">\n\n  <figure ng-repeat="group in vm.assets track by $index" class="column end small-6 medium-3 large-2">\n\n    <a ui-sref="index.archive.viewer({index: $index})">\n\n      <div class="background"></div>\n\n      <div class="flex__wrapper">\n\n        <div ng-repeat="asset in group.entities track by $index"\n          class="asset__wrapper"\n          ng-style="{\n            \'flex-basis\': asset.thumbnail.ratio / group.ratio * 100 + \'%\',\n          }">\n\n          <img nopin="nopin" ng-src="{{$root.$helper.thumbnailSrc(asset.thumbnail, \'w:450;h:300;q:80;sh:1\')}}" title="{{asset.fields.description}}">\n\n          <div ng-if="asset.schema === \'video\'" class="icon icon-play"></div>\n\n        </div>\n\n      </div>\n\n    </a>\n\n  </figure>\n\n</div>\n'},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function ArchiveController(e,t,n){_classCallCheck(this,ArchiveController);var i=this,r=t.$current.locals.globals;e.pageTitle="Archive",i.assets=n.group(r.archive)};i.$inject=["$rootScope","$state","HelperService"],t.a=i},function(e,t){},function(e,t,n){"use strict";var i=n(0),r=n.n(i),o=n(2),a=n.n(o),s=n(134),l=r.a.module("archiveViewer",[a.a]).config(["$stateProvider",function(e){"ngInject";e.state("index.archive.viewer",{url:"/{index:[0-9]{1,5}}",views:{"overlay@index":{template:"<archive-viewer></archive-viewer>"}},data:{"gsapifyRouter.overlay":{enter:{in:{transition:["$state","$stateParams",function(e,t){return"index.archive.viewer"!==e.history[e.history.length-1].name?"fadeUpDelayed":"none"}]}},leave:{out:{transition:["$state","$stateParams",function(e,t){e.history[e.history.length-1];return"index.archive.viewer"!==e.current.name?"fade":"none"}]}}}}})}]).directive("archiveViewer",s.a);t.a=l},function(e,t,n){"use strict";var i=n(135),r=n.n(i),o=n(136),a=n(139),s=(n.n(a),function(){"ngInject";return{restrict:"E",scope:{},template:r.a,controller:o.a,controllerAs:"vm",bindToController:!0}});t.a=s},function(e,t){e.exports='<div class="table"\n  ng-click="vm.close()"\n  ng-swipe-right="vm.prev()"\n  ng-swipe-left="vm.next()">\n\n  <div class="cell">\n\n    <div class="row row--max-width">\n\n      <div class="column small-24 text-center">\n\n        <a class="close" ui-sref="^">\n          <img src="/img/close.svg">\n        </a>\n\n        <a ng-href="{{$root.$state.href($root.$state.$current.name, {index: vm.nextIndex})}}">\n\n          <div class="flex__wrapper images-loaded" ng-click="vm.clickImage($event)" hj-split-cursor>\n\n            <div ng-repeat="asset in vm.assets.entities"\n              class="asset__wrapper"\n              ng-style="{\n                \'flex-basis\': asset.thumbnail.ratio / vm.assets.ratio * 100 + \'%\',\n              }">\n\n              <img ng-if="asset.schema === \'image\'" alt="{{asset.title}}"\n                ng-src="{{ vm.getImageSrc(asset) }}"\n                ng-srcset="{{ vm.getImageSrcset(asset) }}"\n                sizes="100vw">\n\n              <iframe ng-if="asset.schema === \'video\'" iframe-events-src="document" hj-vimeo-api ng-src="{{ \'//player.vimeo.com/video/\' + asset.fields.video.oembed.id + \'?api=1&badge=0&byline=0&portrait=0&title=0&color=ffffff&hd=1&autoplay=1&loop=0\' }}"\n                style="position: absolute; width: 100%; height: 100%;"\n                width="100%" height="100%" frameborder="0" webkitallowfullscreen allowfullscreen></iframe>\n\n            </div>\n\n          </div>\n\n          <div class="asset__caption">\n            <h4>{{vm.caption}}</h4>\n          </div>\n\n        </a>\n\n      </div>\n\n    </div>\n\n  </div>\n\n</div>\n\n<div class="nav nav--next" ng-click="vm.next()">\n\n  <div class="icon icon-arrow-right"></div>\n\n</div>\n\n<div class="nav nav--prev" ng-click="vm.prev()">\n\n  <div class="icon icon-arrow-left"></div>\n\n</div>\n'},function(e,t,n){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n(0),r=n.n(i),o=n(137),a=n.n(o),s=n(138),l=(n.n(s),function ArchiveViewerController(e,t,n,i,o){_classCallCheck(this,ArchiveViewerController);var s=this,l=n.$current.locals.globals,c=o.group(l.archive),u=parseInt(i.index,10);s.nextIndex=u===c.length-1?0:u+1,s.prevIndex=0===u?c.length-1:u-1,s.assets=c[i.index];var d=s.assets.entities.map(function(e){return e.fields.description}).filter(function(e){return e&&""!==e});s.caption=a.a.uniq(d).join(" / "),e.viewer=s.assets.entities[0].schema;var p=t.$on("$stateChangeStart",function(t,n){p(),e.viewer=null});s.getImageSrc=function(e){return o.thumbnailSrc(e.thumbnail,"w:960;q:80")},s.getImageSrcset=function(e){var t=[];return t.push(o.thumbnailSrc(e.thumbnail,"w:540;q:80")+" 540w"),t.push(o.thumbnailSrc(e.thumbnail,"w:960;q:80")+" 960w"),t.push(o.thumbnailSrc(e.thumbnail,"w:1280;q:80")+" 1280w"),t.join(", ")},s.close=function(){n.go("index.archive")},s.next=function(){n.go("index.archive.viewer",{index:s.nextIndex})},s.prev=function(){n.go("index.archive.viewer",{index:s.prevIndex})},s.clickImage=function(e){e.stopPropagation(),e.preventDefault(),t.$cursorRight||!t.$cursorLeft?s.next():s.prev()};var h=Modernizr.touch,f=!1;t.$on("vimeoApi:ready",function(e,t){var n=r.a.element(t.element);h?n.addClass("ready"):t.addEvent("playProgress",function(){f||(f=!0,n.addClass("ready"))}),t.addEvent("finish",function(){t.api("play")})})});l.$inject=["$rootScope","$scope","$state","$stateParams","HelperService"],t.a=l},function(e,t,n){(function(e,i){var r;(function(){function addMapEntry(e,t){return e.set(t[0],t[1]),e}function addSetEntry(e,t){return e.add(t),e}function apply(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function arrayAggregator(e,t,n,i){for(var r=-1,o=null==e?0:e.length;++r<o;){var a=e[r];t(i,a,n(a),e)}return i}function arrayEach(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function arrayEachRight(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function arrayEvery(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function arrayFilter(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var a=e[n];t(a,n,e)&&(o[r++]=a)}return o}function arrayIncludes(e,t){return!!(null==e?0:e.length)&&baseIndexOf(e,t,0)>-1}function arrayIncludesWith(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function arrayMap(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function arrayPush(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function arrayReduce(e,t,n,i){var r=-1,o=null==e?0:e.length;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}function arrayReduceRight(e,t,n,i){var r=null==e?0:e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function arraySome(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function asciiToArray(e){return e.split("")}function asciiWords(e){return e.match(He)||[]}function baseFindKey(e,t,n){var i;return n(e,function(e,n,r){if(t(e,n,r))return i=n,!1}),i}function baseFindIndex(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return-1}function baseIndexOf(e,t,n){return t===t?strictIndexOf(e,t,n):baseFindIndex(e,baseIsNaN,n)}function baseIndexOfWith(e,t,n,i){for(var r=n-1,o=e.length;++r<o;)if(i(e[r],t))return r;return-1}function baseIsNaN(e){return e!==e}function baseMean(e,t){var n=null==e?0:e.length;return n?baseSum(e,t)/n:L}function baseProperty(e){return function(t){return null==t?o:t[e]}}function basePropertyOf(e){return function(t){return null==e?o:e[t]}}function baseReduce(e,t,n,i,r){return r(e,function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)}),n}function baseSortBy(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function baseSum(e,t){for(var n,i=-1,r=e.length;++i<r;){var a=t(e[i]);a!==o&&(n=n===o?a:n+a)}return n}function baseTimes(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function baseToPairs(e,t){return arrayMap(t,function(t){return[t,e[t]]})}function baseUnary(e){return function(t){return e(t)}}function baseValues(e,t){return arrayMap(t,function(t){return e[t]})}function cacheHas(e,t){return e.has(t)}function charsStartIndex(e,t){for(var n=-1,i=e.length;++n<i&&baseIndexOf(t,e[n],0)>-1;);return n}function charsEndIndex(e,t){for(var n=e.length;n--&&baseIndexOf(t,e[n],0)>-1;);return n}function countHolders(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}function escapeStringChar(e){return"\\"+$t[e]}function getValue(e,t){return null==e?o:e[t]}function hasUnicode(e){return wt.test(e)}function hasUnicodeWord(e){return bt.test(e)}function iteratorToArray(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function mapToArray(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}function overArg(e,t){return function(n){return e(t(n))}}function replaceHolders(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var a=e[n];a!==t&&a!==d||(e[n]=d,o[r++]=n)}return o}function setToArray(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function setToPairs(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function strictIndexOf(e,t,n){for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}function strictLastIndexOf(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}function stringSize(e){return hasUnicode(e)?unicodeSize(e):Wt(e)}function stringToArray(e){return hasUnicode(e)?unicodeToArray(e):asciiToArray(e)}function unicodeSize(e){for(var t=vt.lastIndex=0;vt.test(e);)++t;return t}function unicodeToArray(e){return e.match(vt)||[]}function unicodeWords(e){return e.match(yt)||[]}var o,a=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="__lodash_hash_undefined__",u=500,d="__lodash_placeholder__",p=1,h=2,f=4,m=1,g=2,v=1,y=2,w=4,b=8,S=16,T=32,E=64,O=128,I=256,x=512,C=30,$="...",_=800,A=16,R=1,P=2,k=1/0,N=9007199254740991,D=1.7976931348623157e308,L=NaN,M=4294967295,F=M-1,j=M>>>1,B=[["ary",O],["bind",v],["bindKey",y],["curry",b],["curryRight",S],["flip",x],["partial",T],["partialRight",E],["rearg",I]],H="[object Arguments]",z="[object Array]",U="[object AsyncFunction]",V="[object Boolean]",W="[object Date]",G="[object DOMException]",q="[object Error]",Y="[object Function]",X="[object GeneratorFunction]",Z="[object Map]",K="[object Number]",Q="[object Null]",J="[object Object]",ee="[object Proxy]",te="[object RegExp]",ne="[object Set]",ie="[object String]",re="[object Symbol]",oe="[object Undefined]",ae="[object WeakMap]",se="[object WeakSet]",le="[object ArrayBuffer]",ce="[object DataView]",ue="[object Float32Array]",de="[object Float64Array]",pe="[object Int8Array]",he="[object Int16Array]",fe="[object Int32Array]",me="[object Uint8Array]",ge="[object Uint8ClampedArray]",ve="[object Uint16Array]",ye="[object Uint32Array]",we=/\b__p \+= '';/g,be=/\b(__p \+=) '' \+/g,Se=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Te=/&(?:amp|lt|gt|quot|#39);/g,Ee=/[&<>"']/g,Oe=RegExp(Te.source),Ie=RegExp(Ee.source),xe=/<%-([\s\S]+?)%>/g,Ce=/<%([\s\S]+?)%>/g,$e=/<%=([\s\S]+?)%>/g,_e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ae=/^\w*$/,Re=/^\./,Pe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ke=/[\\^$.*+?()[\]{}|]/g,Ne=RegExp(ke.source),De=/^\s+|\s+$/g,Le=/^\s+/,Me=/\s+$/,Fe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,je=/\{\n\/\* \[wrapped with (.+)\] \*/,Be=/,? & /,He=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ze=/\\(\\)?/g,Ue=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ve=/\w*$/,We=/^[-+]0x[0-9a-f]+$/i,Ge=/^0b[01]+$/i,qe=/^\[object .+?Constructor\]$/,Ye=/^0o[0-7]+$/i,Xe=/^(?:0|[1-9]\d*)$/,Ze=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ke=/($^)/,Qe=/['\n\r\u2028\u2029\\]/g,Je="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",et="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tt="["+et+"]",nt="["+Je+"]",it="[a-z\\xdf-\\xf6\\xf8-\\xff]",rt="[^\\ud800-\\udfff"+et+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",ot="\\ud83c[\\udffb-\\udfff]",at="(?:\\ud83c[\\udde6-\\uddff]){2}",st="[\\ud800-\\udbff][\\udc00-\\udfff]",lt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",ct="(?:"+it+"|"+rt+")",ut="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",dt="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",at,st].join("|")+")[\\ufe0e\\ufe0f]?"+ut+")*",pt="[\\ufe0e\\ufe0f]?"+ut+dt,ht="(?:"+["[\\u2700-\\u27bf]",at,st].join("|")+")"+pt,ft="(?:"+["[^\\ud800-\\udfff]"+nt+"?",nt,at,st,"[\\ud800-\\udfff]"].join("|")+")",mt=RegExp("['’]","g"),gt=RegExp(nt,"g"),vt=RegExp(ot+"(?="+ot+")|"+ft+pt,"g"),yt=RegExp([lt+"?"+it+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[tt,lt,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[tt,lt+ct,"$"].join("|")+")",lt+"?"+ct+"+(?:['’](?:d|ll|m|re|s|t|ve))?",lt+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)","\\d+",ht].join("|"),"g"),wt=RegExp("[\\u200d\\ud800-\\udfff"+Je+"\\ufe0e\\ufe0f]"),bt=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,St=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Tt=-1,Et={};Et[ue]=Et[de]=Et[pe]=Et[he]=Et[fe]=Et[me]=Et[ge]=Et[ve]=Et[ye]=!0,Et[H]=Et[z]=Et[le]=Et[V]=Et[ce]=Et[W]=Et[q]=Et[Y]=Et[Z]=Et[K]=Et[J]=Et[te]=Et[ne]=Et[ie]=Et[ae]=!1;var Ot={};Ot[H]=Ot[z]=Ot[le]=Ot[ce]=Ot[V]=Ot[W]=Ot[ue]=Ot[de]=Ot[pe]=Ot[he]=Ot[fe]=Ot[Z]=Ot[K]=Ot[J]=Ot[te]=Ot[ne]=Ot[ie]=Ot[re]=Ot[me]=Ot[ge]=Ot[ve]=Ot[ye]=!0,Ot[q]=Ot[Y]=Ot[ae]=!1;var It={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},xt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ct={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},$t={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},_t=parseFloat,At=parseInt,Rt="object"==typeof e&&e&&e.Object===Object&&e,Pt="object"==typeof self&&self&&self.Object===Object&&self,kt=Rt||Pt||Function("return this")(),Nt="object"==typeof t&&t&&!t.nodeType&&t,Dt=Nt&&"object"==typeof i&&i&&!i.nodeType&&i,Lt=Dt&&Dt.exports===Nt,Mt=Lt&&Rt.process,Ft=function(){try{return Mt&&Mt.binding&&Mt.binding("util")}catch(e){}}(),jt=Ft&&Ft.isArrayBuffer,Bt=Ft&&Ft.isDate,Ht=Ft&&Ft.isMap,zt=Ft&&Ft.isRegExp,Ut=Ft&&Ft.isSet,Vt=Ft&&Ft.isTypedArray,Wt=baseProperty("length"),Gt=basePropertyOf(It),qt=basePropertyOf(xt),Yt=basePropertyOf(Ct),Xt=function runInContext(e){function lodash(e){if(isObjectLike(e)&&!_i(e)&&!(e instanceof LazyWrapper)){if(e instanceof LodashWrapper)return e;if(lt.call(e,"__wrapped__"))return wrapperClone(e)}return new LodashWrapper(e)}function baseLodash(){}function LodashWrapper(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=o}function LazyWrapper(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=M,this.__views__=[]}function lazyClone(){var e=new LazyWrapper(this.__wrapped__);return e.__actions__=copyArray(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=copyArray(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=copyArray(this.__views__),e}function lazyReverse(){if(this.__filtered__){var e=new LazyWrapper(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function lazyValue(){var e=this.__wrapped__.value(),t=this.__dir__,n=_i(e),i=t<0,r=n?e.length:0,o=getView(0,r,this.__views__),a=o.start,s=o.end,l=s-a,c=i?s:a-1,u=this.__iteratees__,d=u.length,p=0,h=on(l,this.__takeCount__);if(!n||!i&&r==l&&h==l)return baseWrapperValue(e,this.__actions__);var f=[];e:for(;l--&&p<h;){c+=t;for(var m=-1,g=e[c];++m<d;){var v=u[m],y=v.iteratee,w=v.type,b=y(g);if(w==P)g=b;else if(!b){if(w==R)continue e;break e}}f[p++]=g}return f}function Hash(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function hashClear(){this.__data__=mn?mn(null):{},this.size=0}function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function hashGet(e){var t=this.__data__;if(mn){var n=t[e];return n===c?o:n}return lt.call(t,e)?t[e]:o}function hashHas(e){var t=this.__data__;return mn?t[e]!==o:lt.call(t,e)}function hashSet(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=mn&&t===o?c:t,this}function ListCache(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function listCacheClear(){this.__data__=[],this.size=0}function listCacheDelete(e){var t=this.__data__,n=assocIndexOf(t,e);return!(n<0)&&(n==t.length-1?t.pop():$t.call(t,n,1),--this.size,!0)}function listCacheGet(e){var t=this.__data__,n=assocIndexOf(t,e);return n<0?o:t[n][1]}function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,t){var n=this.__data__,i=assocIndexOf(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}function MapCache(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(dn||ListCache),string:new Hash}}function mapCacheDelete(e){var t=getMapData(this,e).delete(e);return this.size-=t?1:0,t}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,t){var n=getMapData(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}function SetCache(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new MapCache;++t<n;)this.add(e[t])}function setCacheAdd(e){return this.__data__.set(e,c),this}function setCacheHas(e){return this.__data__.has(e)}function Stack(e){var t=this.__data__=new ListCache(e);this.size=t.size}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function stackGet(e){return this.__data__.get(e)}function stackHas(e){return this.__data__.has(e)}function stackSet(e,t){var n=this.__data__;if(n instanceof ListCache){var i=n.__data__;if(!dn||i.length<a-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new MapCache(i)}return n.set(e,t),this.size=n.size,this}function arrayLikeKeys(e,t){var n=_i(e),i=!n&&$i(e),r=!n&&!i&&Ri(e),o=!n&&!i&&!r&&Li(e),a=n||i||r||o,s=a?baseTimes(e.length,tt):[],l=s.length;for(var c in e)!t&&!lt.call(e,c)||a&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||isIndex(c,l))||s.push(c);return s}function arraySample(e){var t=e.length;return t?e[baseRandom(0,t-1)]:o}function arraySampleSize(e,t){return shuffleSelf(copyArray(e),baseClamp(t,0,e.length))}function arrayShuffle(e){return shuffleSelf(copyArray(e))}function assignMergeValue(e,t,n){(n===o||eq(e[t],n))&&(n!==o||t in e)||baseAssignValue(e,t,n)}function assignValue(e,t,n){var i=e[t];lt.call(e,t)&&eq(i,n)&&(n!==o||t in e)||baseAssignValue(e,t,n)}function assocIndexOf(e,t){for(var n=e.length;n--;)if(eq(e[n][0],t))return n;return-1}function baseAggregator(e,t,n,i){return Cn(e,function(e,r,o){t(i,e,n(e),o)}),i}function baseAssign(e,t){return e&&copyObject(t,keys(t),e)}function baseAssignIn(e,t){return e&&copyObject(t,keysIn(t),e)}function baseAssignValue(e,t,n){"__proto__"==t&&Dt?Dt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function baseAt(e,n){for(var i=-1,r=n.length,a=t(r),s=null==e;++i<r;)a[i]=s?o:get(e,n[i]);return a}function baseClamp(e,t,n){return e===e&&(n!==o&&(e=e<=n?e:n),t!==o&&(e=e>=t?e:t)),e}function baseClone(e,t,n,i,r,a){var s,l=t&p,c=t&h,u=t&f;if(n&&(s=r?n(e,i,r,a):n(e)),s!==o)return s;if(!isObject(e))return e;var d=_i(e);if(d){if(s=initCloneArray(e),!l)return copyArray(e,s)}else{var m=jn(e),g=m==Y||m==X;if(Ri(e))return cloneBuffer(e,l);if(m==J||m==H||g&&!r){if(s=c||g?{}:initCloneObject(e),!l)return c?copySymbolsIn(e,baseAssignIn(s,e)):copySymbols(e,baseAssign(s,e))}else{if(!Ot[m])return r?e:{};s=initCloneByTag(e,m,baseClone,l)}}a||(a=new Stack);var v=a.get(e);if(v)return v;a.set(e,s);var y=u?c?getAllKeysIn:getAllKeys:c?keysIn:keys,w=d?o:y(e);return arrayEach(w||e,function(i,r){w&&(r=i,i=e[r]),assignValue(s,r,baseClone(i,t,n,r,e,a))}),s}function baseConforms(e){var t=keys(e);return function(n){return baseConformsTo(n,e,t)}}function baseConformsTo(e,t,n){var i=n.length;if(null==e)return!i;for(e=Je(e);i--;){var r=n[i],a=t[r],s=e[r];if(s===o&&!(r in e)||!a(s))return!1}return!0}function baseDelay(e,t,n){if("function"!=typeof e)throw new nt(l);return zn(function(){e.apply(o,n)},t)}function baseDifference(e,t,n,i){var r=-1,o=arrayIncludes,s=!0,l=e.length,c=[],u=t.length;if(!l)return c;n&&(t=arrayMap(t,baseUnary(n))),i?(o=arrayIncludesWith,s=!1):t.length>=a&&(o=cacheHas,s=!1,t=new SetCache(t));e:for(;++r<l;){var d=e[r],p=null==n?d:n(d);if(d=i||0!==d?d:0,s&&p===p){for(var h=u;h--;)if(t[h]===p)continue e;c.push(d)}else o(t,p,i)||c.push(d)}return c}function baseEvery(e,t){var n=!0;return Cn(e,function(e,i,r){return n=!!t(e,i,r)}),n}function baseExtremum(e,t,n){for(var i=-1,r=e.length;++i<r;){var a=e[i],s=t(a);if(null!=s&&(l===o?s===s&&!isSymbol(s):n(s,l)))var l=s,c=a}return c}function baseFill(e,t,n,i){var r=e.length;for(n=toInteger(n),n<0&&(n=-n>r?0:r+n),i=i===o||i>r?r:toInteger(i),i<0&&(i+=r),i=n>i?0:toLength(i);n<i;)e[n++]=t;return e}function baseFilter(e,t){var n=[];return Cn(e,function(e,i,r){t(e,i,r)&&n.push(e)}),n}function baseFlatten(e,t,n,i,r){var o=-1,a=e.length;for(n||(n=isFlattenable),r||(r=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?baseFlatten(s,t-1,n,i,r):arrayPush(r,s):i||(r[r.length]=s)}return r}function baseForOwn(e,t){return e&&_n(e,t,keys)}function baseForOwnRight(e,t){return e&&An(e,t,keys)}function baseFunctions(e,t){return arrayFilter(t,function(t){return isFunction(e[t])})}function baseGet(e,t){t=castPath(t,e);for(var n=0,i=t.length;null!=e&&n<i;)e=e[toKey(t[n++])];return n&&n==i?e:o}function baseGetAllKeys(e,t,n){var i=t(e);return _i(e)?i:arrayPush(i,n(e))}function baseGetTag(e){return null==e?e===o?oe:Q:Nt&&Nt in Je(e)?getRawTag(e):objectToString(e)}function baseGt(e,t){return e>t}function baseHas(e,t){return null!=e&&lt.call(e,t)}function baseHasIn(e,t){return null!=e&&t in Je(e)}function baseInRange(e,t,n){return e>=on(t,n)&&e<rn(t,n)}function baseIntersection(e,n,i){for(var r=i?arrayIncludesWith:arrayIncludes,a=e[0].length,s=e.length,l=s,c=t(s),u=1/0,d=[];l--;){var p=e[l];l&&n&&(p=arrayMap(p,baseUnary(n))),u=on(p.length,u),c[l]=!i&&(n||a>=120&&p.length>=120)?new SetCache(l&&p):o}p=e[0];var h=-1,f=c[0];e:for(;++h<a&&d.length<u;){var m=p[h],g=n?n(m):m;if(m=i||0!==m?m:0,!(f?cacheHas(f,g):r(d,g,i))){for(l=s;--l;){var v=c[l];if(!(v?cacheHas(v,g):r(e[l],g,i)))continue e}f&&f.push(g),d.push(m)}}return d}function baseInverter(e,t,n,i){return baseForOwn(e,function(e,r,o){t(i,n(e),r,o)}),i}function baseInvoke(e,t,n){t=castPath(t,e),e=parent(e,t);var i=null==e?e:e[toKey(last(t))];return null==i?o:apply(i,e,n)}function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==H}function baseIsArrayBuffer(e){return isObjectLike(e)&&baseGetTag(e)==le}function baseIsDate(e){return isObjectLike(e)&&baseGetTag(e)==W}function baseIsEqual(e,t,n,i,r){return e===t||(null==e||null==t||!isObjectLike(e)&&!isObjectLike(t)?e!==e&&t!==t:baseIsEqualDeep(e,t,n,i,baseIsEqual,r))}function baseIsEqualDeep(e,t,n,i,r,o){var a=_i(e),s=_i(t),l=a?z:jn(e),c=s?z:jn(t);l=l==H?J:l,c=c==H?J:c;var u=l==J,d=c==J,p=l==c;if(p&&Ri(e)){if(!Ri(t))return!1;a=!0,u=!1}if(p&&!u)return o||(o=new Stack),a||Li(e)?equalArrays(e,t,n,i,r,o):equalByTag(e,t,l,n,i,r,o);if(!(n&m)){var h=u&&lt.call(e,"__wrapped__"),f=d&&lt.call(t,"__wrapped__");if(h||f){var g=h?e.value():e,v=f?t.value():t;return o||(o=new Stack),r(g,v,n,i,o)}}return!!p&&(o||(o=new Stack),equalObjects(e,t,n,i,r,o))}function baseIsMap(e){return isObjectLike(e)&&jn(e)==Z}function baseIsMatch(e,t,n,i){var r=n.length,a=r,s=!i;if(null==e)return!a;for(e=Je(e);r--;){var l=n[r];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++r<a;){l=n[r];var c=l[0],u=e[c],d=l[1];if(s&&l[2]){if(u===o&&!(c in e))return!1}else{var p=new Stack;if(i)var h=i(u,d,c,e,t,p);if(!(h===o?baseIsEqual(d,u,m|g,i,p):h))return!1}}return!0}function baseIsNative(e){return!(!isObject(e)||isMasked(e))&&(isFunction(e)?ft:qe).test(toSource(e))}function baseIsRegExp(e){return isObjectLike(e)&&baseGetTag(e)==te}function baseIsSet(e){return isObjectLike(e)&&jn(e)==ne}function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!Et[baseGetTag(e)]}function baseIteratee(e){return"function"==typeof e?e:null==e?identity:"object"==typeof e?_i(e)?baseMatchesProperty(e[0],e[1]):baseMatches(e):property(e)}function baseKeys(e){if(!isPrototype(e))return nn(e);var t=[];for(var n in Je(e))lt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function baseKeysIn(e){if(!isObject(e))return nativeKeysIn(e);var t=isPrototype(e),n=[];for(var i in e)("constructor"!=i||!t&&lt.call(e,i))&&n.push(i);return n}function baseLt(e,t){return e<t}function baseMap(e,n){var i=-1,r=isArrayLike(e)?t(e.length):[];return Cn(e,function(e,t,o){r[++i]=n(e,t,o)}),r}function baseMatches(e){var t=getMatchData(e);return 1==t.length&&t[0][2]?matchesStrictComparable(t[0][0],t[0][1]):function(n){return n===e||baseIsMatch(n,e,t)}}function baseMatchesProperty(e,t){return isKey(e)&&isStrictComparable(t)?matchesStrictComparable(toKey(e),t):function(n){var i=get(n,e);return i===o&&i===t?hasIn(n,e):baseIsEqual(t,i,m|g)}}function baseMerge(e,t,n,i,r){e!==t&&_n(t,function(a,s){if(isObject(a))r||(r=new Stack),baseMergeDeep(e,t,s,n,baseMerge,i,r);else{var l=i?i(e[s],a,s+"",e,t,r):o;l===o&&(l=a),assignMergeValue(e,s,l)}},keysIn)}function baseMergeDeep(e,t,n,i,r,a,s){var l=e[n],c=t[n],u=s.get(c);if(u)return void assignMergeValue(e,n,u);var d=a?a(l,c,n+"",e,t,s):o,p=d===o;if(p){var h=_i(c),f=!h&&Ri(c),m=!h&&!f&&Li(c);d=c,h||f||m?_i(l)?d=l:isArrayLikeObject(l)?d=copyArray(l):f?(p=!1,d=cloneBuffer(c,!0)):m?(p=!1,d=cloneTypedArray(c,!0)):d=[]:isPlainObject(c)||$i(c)?(d=l,$i(l)?d=toPlainObject(l):(!isObject(l)||i&&isFunction(l))&&(d=initCloneObject(c))):p=!1}p&&(s.set(c,d),r(d,c,i,a,s),s.delete(c)),assignMergeValue(e,n,d)}function baseNth(e,t){var n=e.length;if(n)return t+=t<0?n:0,isIndex(t,n)?e[t]:o}function baseOrderBy(e,t,n){var i=-1;return t=arrayMap(t.length?t:[identity],baseUnary(getIteratee())),baseSortBy(baseMap(e,function(e,n,r){return{criteria:arrayMap(t,function(t){return t(e)}),index:++i,value:e}}),function(e,t){return compareMultiple(e,t,n)})}function basePick(e,t){return basePickBy(e,t,function(t,n){return hasIn(e,n)})}function basePickBy(e,t,n){for(var i=-1,r=t.length,o={};++i<r;){var a=t[i],s=baseGet(e,a);n(s,a)&&baseSet(o,castPath(a,e),s)}return o}function basePropertyDeep(e){return function(t){return baseGet(t,e)}}function basePullAll(e,t,n,i){var r=i?baseIndexOfWith:baseIndexOf,o=-1,a=t.length,s=e;for(e===t&&(t=copyArray(t)),n&&(s=arrayMap(e,baseUnary(n)));++o<a;)for(var l=0,c=t[o],u=n?n(c):c;(l=r(s,u,l,i))>-1;)s!==e&&$t.call(s,l,1),$t.call(e,l,1);return e}function basePullAt(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==o){var o=r;isIndex(r)?$t.call(e,r,1):baseUnset(e,r)}}return e}function baseRandom(e,t){return e+Kt(ln()*(t-e+1))}function baseRange(e,n,i,r){for(var o=-1,a=rn(Zt((n-e)/(i||1)),0),s=t(a);a--;)s[r?a:++o]=e,e+=i;return s}function baseRepeat(e,t){var n="";if(!e||t<1||t>N)return n;do{t%2&&(n+=e),(t=Kt(t/2))&&(e+=e)}while(t);return n}function baseRest(e,t){return Un(overRest(e,t,identity),e+"")}function baseSample(e){return arraySample(values(e))}function baseSampleSize(e,t){var n=values(e);return shuffleSelf(n,baseClamp(t,0,n.length))}function baseSet(e,t,n,i){if(!isObject(e))return e;t=castPath(t,e);for(var r=-1,a=t.length,s=a-1,l=e;null!=l&&++r<a;){var c=toKey(t[r]),u=n;if(r!=s){var d=l[c];u=i?i(d,c,l):o,u===o&&(u=isObject(d)?d:isIndex(t[r+1])?[]:{})}assignValue(l,c,u),l=l[c]}return e}function baseShuffle(e){return shuffleSelf(values(e))}function baseSlice(e,n,i){var r=-1,o=e.length;n<0&&(n=-n>o?0:o+n),i=i>o?o:i,i<0&&(i+=o),o=n>i?0:i-n>>>0,n>>>=0;for(var a=t(o);++r<o;)a[r]=e[r+n];return a}function baseSome(e,t){var n;return Cn(e,function(e,i,r){return!(n=t(e,i,r))}),!!n}function baseSortedIndex(e,t,n){var i=0,r=null==e?i:e.length;if("number"==typeof t&&t===t&&r<=j){for(;i<r;){var o=i+r>>>1,a=e[o];null!==a&&!isSymbol(a)&&(n?a<=t:a<t)?i=o+1:r=o}return r}return baseSortedIndexBy(e,t,identity,n)}function baseSortedIndexBy(e,t,n,i){t=n(t);for(var r=0,a=null==e?0:e.length,s=t!==t,l=null===t,c=isSymbol(t),u=t===o;r<a;){var d=Kt((r+a)/2),p=n(e[d]),h=p!==o,f=null===p,m=p===p,g=isSymbol(p);if(s)var v=i||m;else v=u?m&&(i||h):l?m&&h&&(i||!f):c?m&&h&&!f&&(i||!g):!f&&!g&&(i?p<=t:p<t);v?r=d+1:a=d}return on(a,F)}function baseSortedUniq(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var a=e[n],s=t?t(a):a;if(!n||!eq(s,l)){var l=s;o[r++]=0===a?0:a}}return o}function baseToNumber(e){return"number"==typeof e?e:isSymbol(e)?L:+e}function baseToString(e){if("string"==typeof e)return e;if(_i(e))return arrayMap(e,baseToString)+"";if(isSymbol(e))return In?In.call(e):"";var t=e+"";return"0"==t&&1/e==-k?"-0":t}function baseUniq(e,t,n){var i=-1,r=arrayIncludes,o=e.length,s=!0,l=[],c=l;if(n)s=!1,r=arrayIncludesWith;else if(o>=a){var u=t?null:Dn(e);if(u)return setToArray(u);s=!1,r=cacheHas,c=new SetCache}else c=t?[]:l;e:for(;++i<o;){var d=e[i],p=t?t(d):d;if(d=n||0!==d?d:0,s&&p===p){for(var h=c.length;h--;)if(c[h]===p)continue e;t&&c.push(p),l.push(d)}else r(c,p,n)||(c!==l&&c.push(p),l.push(d))}return l}function baseUnset(e,t){return t=castPath(t,e),null==(e=parent(e,t))||delete e[toKey(last(t))]}function baseUpdate(e,t,n,i){return baseSet(e,t,n(baseGet(e,t)),i)}function baseWhile(e,t,n,i){for(var r=e.length,o=i?r:-1;(i?o--:++o<r)&&t(e[o],o,e););return n?baseSlice(e,i?0:o,i?o+1:r):baseSlice(e,i?o+1:0,i?r:o)}function baseWrapperValue(e,t){var n=e;return n instanceof LazyWrapper&&(n=n.value()),arrayReduce(t,function(e,t){return t.func.apply(t.thisArg,arrayPush([e],t.args))},n)}function baseXor(e,n,i){var r=e.length;if(r<2)return r?baseUniq(e[0]):[];for(var o=-1,a=t(r);++o<r;)for(var s=e[o],l=-1;++l<r;)l!=o&&(a[o]=baseDifference(a[o]||s,e[l],n,i));return baseUniq(baseFlatten(a,1),n,i)}function baseZipObject(e,t,n){for(var i=-1,r=e.length,a=t.length,s={};++i<r;){var l=i<a?t[i]:o;n(s,e[i],l)}return s}function castArrayLikeObject(e){return isArrayLikeObject(e)?e:[]}function castFunction(e){return"function"==typeof e?e:identity}function castPath(e,t){return _i(e)?e:isKey(e,t)?[e]:Vn(toString(e))}function castSlice(e,t,n){var i=e.length;return n=n===o?i:n,!t&&n>=i?e:baseSlice(e,t,n)}function cloneBuffer(e,t){if(t)return e.slice();var n=e.length,i=bt?bt(n):new e.constructor(n);return e.copy(i),i}function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new wt(t).set(new wt(e)),t}function cloneDataView(e,t){var n=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function cloneMap(e,t,n){return arrayReduce(t?n(mapToArray(e),p):mapToArray(e),addMapEntry,new e.constructor)}function cloneRegExp(e){var t=new e.constructor(e.source,Ve.exec(e));return t.lastIndex=e.lastIndex,t}function cloneSet(e,t,n){return arrayReduce(t?n(setToArray(e),p):setToArray(e),addSetEntry,new e.constructor)}function cloneSymbol(e){return On?Je(On.call(e)):{}}function cloneTypedArray(e,t){var n=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function compareAscending(e,t){if(e!==t){var n=e!==o,i=null===e,r=e===e,a=isSymbol(e),s=t!==o,l=null===t,c=t===t,u=isSymbol(t);if(!l&&!u&&!a&&e>t||a&&s&&c&&!l&&!u||i&&s&&c||!n&&c||!r)return 1;if(!i&&!a&&!u&&e<t||u&&n&&r&&!i&&!a||l&&n&&r||!s&&r||!c)return-1}return 0}function compareMultiple(e,t,n){for(var i=-1,r=e.criteria,o=t.criteria,a=r.length,s=n.length;++i<a;){var l=compareAscending(r[i],o[i]);if(l){if(i>=s)return l;return l*("desc"==n[i]?-1:1)}}return e.index-t.index}function composeArgs(e,n,i,r){for(var o=-1,a=e.length,s=i.length,l=-1,c=n.length,u=rn(a-s,0),d=t(c+u),p=!r;++l<c;)d[l]=n[l];for(;++o<s;)(p||o<a)&&(d[i[o]]=e[o]);for(;u--;)d[l++]=e[o++];return d}function composeArgsRight(e,n,i,r){for(var o=-1,a=e.length,s=-1,l=i.length,c=-1,u=n.length,d=rn(a-l,0),p=t(d+u),h=!r;++o<d;)p[o]=e[o];for(var f=o;++c<u;)p[f+c]=n[c];for(;++s<l;)(h||o<a)&&(p[f+i[s]]=e[o++]);return p}function copyArray(e,n){var i=-1,r=e.length;for(n||(n=t(r));++i<r;)n[i]=e[i];return n}function copyObject(e,t,n,i){var r=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var l=t[a],c=i?i(n[l],e[l],l,n,e):o;c===o&&(c=e[l]),r?baseAssignValue(n,l,c):assignValue(n,l,c)}return n}function copySymbols(e,t){return copyObject(e,Mn(e),t)}function copySymbolsIn(e,t){return copyObject(e,Fn(e),t)}function createAggregator(e,t){return function(n,i){var r=_i(n)?arrayAggregator:baseAggregator,o=t?t():{};return r(n,e,getIteratee(i,2),o)}}function createAssigner(e){return baseRest(function(t,n){var i=-1,r=n.length,a=r>1?n[r-1]:o,s=r>2?n[2]:o;for(a=e.length>3&&"function"==typeof a?(r--,a):o,s&&isIterateeCall(n[0],n[1],s)&&(a=r<3?o:a,r=1),t=Je(t);++i<r;){var l=n[i];l&&e(t,l,i,a)}return t})}function createBaseEach(e,t){return function(n,i){if(null==n)return n;if(!isArrayLike(n))return e(n,i);for(var r=n.length,o=t?r:-1,a=Je(n);(t?o--:++o<r)&&!1!==i(a[o],o,a););return n}}function createBaseFor(e){return function(t,n,i){for(var r=-1,o=Je(t),a=i(t),s=a.length;s--;){var l=a[e?s:++r];if(!1===n(o[l],l,o))break}return t}}function createBind(e,t,n){function wrapper(){return(this&&this!==kt&&this instanceof wrapper?r:e).apply(i?n:this,arguments)}var i=t&v,r=createCtor(e);return wrapper}function createCaseFirst(e){return function(t){t=toString(t);var n=hasUnicode(t)?stringToArray(t):o,i=n?n[0]:t.charAt(0),r=n?castSlice(n,1).join(""):t.slice(1);return i[e]()+r}}function createCompounder(e){return function(t){return arrayReduce(words(deburr(t).replace(mt,"")),e,"")}}function createCtor(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=xn(e.prototype),i=e.apply(n,t);return isObject(i)?i:n}}function createCurry(e,n,i){function wrapper(){for(var a=arguments.length,s=t(a),l=a,c=getHolder(wrapper);l--;)s[l]=arguments[l];var u=a<3&&s[0]!==c&&s[a-1]!==c?[]:replaceHolders(s,c);return(a-=u.length)<i?createRecurry(e,n,createHybrid,wrapper.placeholder,o,s,u,o,o,i-a):apply(this&&this!==kt&&this instanceof wrapper?r:e,this,s)}var r=createCtor(e);return wrapper}function createFind(e){return function(t,n,i){var r=Je(t);if(!isArrayLike(t)){var a=getIteratee(n,3);t=keys(t),n=function(e){return a(r[e],e,r)}}var s=e(t,n,i);return s>-1?r[a?t[s]:s]:o}}function createFlow(e){return flatRest(function(t){var n=t.length,i=n,r=LodashWrapper.prototype.thru;for(e&&t.reverse();i--;){var a=t[i];if("function"!=typeof a)throw new nt(l);if(r&&!s&&"wrapper"==getFuncName(a))var s=new LodashWrapper([],!0)}for(i=s?i:n;++i<n;){a=t[i];var c=getFuncName(a),u="wrapper"==c?Ln(a):o;s=u&&isLaziable(u[0])&&u[1]==(O|b|T|I)&&!u[4].length&&1==u[9]?s[getFuncName(u[0])].apply(s,u[3]):1==a.length&&isLaziable(a)?s[c]():s.thru(a)}return function(){var e=arguments,i=e[0];if(s&&1==e.length&&_i(i))return s.plant(i).value();for(var r=0,o=n?t[r].apply(this,e):i;++r<n;)o=t[r].call(this,o);return o}})}function createHybrid(e,n,i,r,a,s,l,c,u,d){function wrapper(){for(var o=arguments.length,v=t(o),y=o;y--;)v[y]=arguments[y];if(m)var b=getHolder(wrapper),S=countHolders(v,b);if(r&&(v=composeArgs(v,r,a,m)),s&&(v=composeArgsRight(v,s,l,m)),o-=S,m&&o<d){var T=replaceHolders(v,b);return createRecurry(e,n,createHybrid,wrapper.placeholder,i,v,T,c,u,d-o)}var E=h?i:this,O=f?E[e]:e;return o=v.length,c?v=reorder(v,c):g&&o>1&&v.reverse(),p&&u<o&&(v.length=u),this&&this!==kt&&this instanceof wrapper&&(O=w||createCtor(O)),O.apply(E,v)}var p=n&O,h=n&v,f=n&y,m=n&(b|S),g=n&x,w=f?o:createCtor(e);return wrapper}function createInverter(e,t){return function(n,i){return baseInverter(n,e,t(i),{})}}function createMathOperation(e,t){return function(n,i){var r;if(n===o&&i===o)return t;if(n!==o&&(r=n),i!==o){if(r===o)return i;"string"==typeof n||"string"==typeof i?(n=baseToString(n),i=baseToString(i)):(n=baseToNumber(n),i=baseToNumber(i)),r=e(n,i)}return r}}function createOver(e){return flatRest(function(t){return t=arrayMap(t,baseUnary(getIteratee())),baseRest(function(n){var i=this;return e(t,function(e){return apply(e,i,n)})})})}function createPadding(e,t){t=t===o?" ":baseToString(t);var n=t.length;if(n<2)return n?baseRepeat(t,e):t;var i=baseRepeat(t,Zt(e/stringSize(t)));return hasUnicode(t)?castSlice(stringToArray(i),0,e).join(""):i.slice(0,e)}function createPartial(e,n,i,r){function wrapper(){for(var n=-1,s=arguments.length,l=-1,c=r.length,u=t(c+s),d=this&&this!==kt&&this instanceof wrapper?a:e;++l<c;)u[l]=r[l];for(;s--;)u[l++]=arguments[++n];return apply(d,o?i:this,u)}var o=n&v,a=createCtor(e);return wrapper}function createRange(e){return function(t,n,i){return i&&"number"!=typeof i&&isIterateeCall(t,n,i)&&(n=i=o),t=toFinite(t),n===o?(n=t,t=0):n=toFinite(n),i=i===o?t<n?1:-1:toFinite(i),baseRange(t,n,i,e)}}function createRelationalOperation(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=toNumber(t),n=toNumber(n)),e(t,n)}}function createRecurry(e,t,n,i,r,a,s,l,c,u){var d=t&b,p=d?s:o,h=d?o:s,f=d?a:o,m=d?o:a;t|=d?T:E,(t&=~(d?E:T))&w||(t&=~(v|y));var g=[e,t,r,f,p,m,h,l,c,u],S=n.apply(o,g);return isLaziable(e)&&Hn(S,g),S.placeholder=i,setWrapToString(S,e,t)}function createRound(e){var t=He[e];return function(e,n){if(e=toNumber(e),n=null==n?0:on(toInteger(n),292)){var i=(toString(e)+"e").split("e");return i=(toString(t(i[0]+"e"+(+i[1]+n)))+"e").split("e"),+(i[0]+"e"+(+i[1]-n))}return t(e)}}function createToPairs(e){return function(t){var n=jn(t);return n==Z?mapToArray(t):n==ne?setToPairs(t):baseToPairs(t,e(t))}}function createWrap(e,t,n,i,r,a,s,c){var u=t&y;if(!u&&"function"!=typeof e)throw new nt(l);var d=i?i.length:0;if(d||(t&=~(T|E),i=r=o),s=s===o?s:rn(toInteger(s),0),c=c===o?c:toInteger(c),d-=r?r.length:0,t&E){var p=i,h=r;i=r=o}var f=u?o:Ln(e),m=[e,t,n,i,r,p,h,a,s,c];if(f&&mergeData(m,f),e=m[0],t=m[1],n=m[2],i=m[3],r=m[4],c=m[9]=m[9]===o?u?0:e.length:rn(m[9]-d,0),!c&&t&(b|S)&&(t&=~(b|S)),t&&t!=v)g=t==b||t==S?createCurry(e,t,c):t!=T&&t!=(v|T)||r.length?createHybrid.apply(o,m):createPartial(e,t,n,i);else var g=createBind(e,t,n);return setWrapToString((f?Rn:Hn)(g,m),e,t)}function customDefaultsAssignIn(e,t,n,i){return e===o||eq(e,ot[n])&&!lt.call(i,n)?t:e}function customDefaultsMerge(e,t,n,i,r,a){return isObject(e)&&isObject(t)&&(a.set(t,e),baseMerge(e,t,o,customDefaultsMerge,a),a.delete(t)),e}function customOmitClone(e){return isPlainObject(e)?o:e}function equalArrays(e,t,n,i,r,a){var s=n&m,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=a.get(e);if(u&&a.get(t))return u==t;var d=-1,p=!0,h=n&g?new SetCache:o;for(a.set(e,t),a.set(t,e);++d<l;){var f=e[d],v=t[d];if(i)var y=s?i(v,f,d,t,e,a):i(f,v,d,e,t,a);if(y!==o){if(y)continue;p=!1;break}if(h){if(!arraySome(t,function(e,t){if(!cacheHas(h,t)&&(f===e||r(f,e,n,i,a)))return h.push(t)})){p=!1;break}}else if(f!==v&&!r(f,v,n,i,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function equalByTag(e,t,n,i,r,o,a){switch(n){case ce:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case le:return!(e.byteLength!=t.byteLength||!o(new wt(e),new wt(t)));case V:case W:case K:return eq(+e,+t);case q:return e.name==t.name&&e.message==t.message;case te:case ie:return e==t+"";case Z:var s=mapToArray;case ne:var l=i&m;if(s||(s=setToArray),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;i|=g,a.set(e,t);var u=equalArrays(s(e),s(t),i,r,o,a);return a.delete(e),u;case re:if(On)return On.call(e)==On.call(t)}return!1}function equalObjects(e,t,n,i,r,a){var s=n&m,l=getAllKeys(e),c=l.length;if(c!=getAllKeys(t).length&&!s)return!1;for(var u=c;u--;){var d=l[u];if(!(s?d in t:lt.call(t,d)))return!1}var p=a.get(e);if(p&&a.get(t))return p==t;var h=!0;a.set(e,t),a.set(t,e);for(var f=s;++u<c;){d=l[u];var g=e[d],v=t[d];if(i)var y=s?i(v,g,d,t,e,a):i(g,v,d,e,t,a);if(!(y===o?g===v||r(g,v,n,i,a):y)){h=!1;break}f||(f="constructor"==d)}if(h&&!f){var w=e.constructor,b=t.constructor;w!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof b&&b instanceof b)&&(h=!1)}return a.delete(e),a.delete(t),h}function flatRest(e){return Un(overRest(e,o,flatten),e+"")}function getAllKeys(e){return baseGetAllKeys(e,keys,Mn)}function getAllKeysIn(e){return baseGetAllKeys(e,keysIn,Fn)}function getFuncName(e){for(var t=e.name+"",n=vn[t],i=lt.call(vn,t)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==e)return r.name}return t}function getHolder(e){return(lt.call(lodash,"placeholder")?lodash:e).placeholder}function getIteratee(){var e=lodash.iteratee||iteratee;return e=e===iteratee?baseIteratee:e,arguments.length?e(arguments[0],arguments[1]):e}function getMapData(e,t){var n=e.__data__;return isKeyable(t)?n["string"==typeof t?"string":"hash"]:n.map}function getMatchData(e){for(var t=keys(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,isStrictComparable(r)]}return t}function getNative(e,t){var n=getValue(e,t);return baseIsNative(n)?n:o}function getRawTag(e){var t=lt.call(e,Nt),n=e[Nt];try{e[Nt]=o;var i=!0}catch(e){}var r=dt.call(e);return i&&(t?e[Nt]=n:delete e[Nt]),r}function getView(e,t,n){for(var i=-1,r=n.length;++i<r;){var o=n[i],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=on(t,e+a);break;case"takeRight":e=rn(e,t-a)}}return{start:e,end:t}}function getWrapDetails(e){var t=e.match(je);return t?t[1].split(Be):[]}function hasPath(e,t,n){t=castPath(t,e);for(var i=-1,r=t.length,o=!1;++i<r;){var a=toKey(t[i]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++i!=r?o:!!(r=null==e?0:e.length)&&isLength(r)&&isIndex(a,r)&&(_i(e)||$i(e))}function initCloneArray(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&lt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function initCloneObject(e){return"function"!=typeof e.constructor||isPrototype(e)?{}:xn(It(e))}function initCloneByTag(e,t,n,i){var r=e.constructor;switch(t){case le:return cloneArrayBuffer(e);case V:case W:return new r(+e);case ce:return cloneDataView(e,i);case ue:case de:case pe:case he:case fe:case me:case ge:case ve:case ye:return cloneTypedArray(e,i);case Z:return cloneMap(e,i,n);case K:case ie:return new r(e);case te:return cloneRegExp(e);case ne:return cloneSet(e,i,n);case re:return cloneSymbol(e)}}function insertWrapDetails(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(Fe,"{\n/* [wrapped with "+t+"] */\n")}function isFlattenable(e){return _i(e)||$i(e)||!!(Rt&&e&&e[Rt])}function isIndex(e,t){return!!(t=null==t?N:t)&&("number"==typeof e||Xe.test(e))&&e>-1&&e%1==0&&e<t}function isIterateeCall(e,t,n){if(!isObject(n))return!1;var i=typeof t;return!!("number"==i?isArrayLike(n)&&isIndex(t,n.length):"string"==i&&t in n)&&eq(n[t],e)}function isKey(e,t){if(_i(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!isSymbol(e))||(Ae.test(e)||!_e.test(e)||null!=t&&e in Je(t))}function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function isLaziable(e){var t=getFuncName(e),n=lodash[t];if("function"!=typeof n||!(t in LazyWrapper.prototype))return!1;if(e===n)return!0;var i=Ln(n);return!!i&&e===i[0]}function isMasked(e){return!!ut&&ut in e}function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ot)}function isStrictComparable(e){return e===e&&!isObject(e)}function matchesStrictComparable(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==o||e in Je(n)))}}function mergeData(e,t){var n=e[1],i=t[1],r=n|i,o=r<(v|y|O),a=i==O&&n==b||i==O&&n==I&&e[7].length<=t[8]||i==(O|I)&&t[7].length<=t[8]&&n==b;if(!o&&!a)return e;i&v&&(e[2]=t[2],r|=n&v?0:w);var s=t[3];if(s){var l=e[3];e[3]=l?composeArgs(l,s,t[4]):s,e[4]=l?replaceHolders(e[3],d):t[4]}return s=t[5],s&&(l=e[5],e[5]=l?composeArgsRight(l,s,t[6]):s,e[6]=l?replaceHolders(e[5],d):t[6]),s=t[7],s&&(e[7]=s),i&O&&(e[8]=null==e[8]?t[8]:on(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}function nativeKeysIn(e){var t=[];if(null!=e)for(var n in Je(e))t.push(n);return t}function objectToString(e){return dt.call(e)}function overRest(e,n,i){return n=rn(n===o?e.length-1:n,0),function(){for(var r=arguments,o=-1,a=rn(r.length-n,0),s=t(a);++o<a;)s[o]=r[n+o];o=-1;for(var l=t(n+1);++o<n;)l[o]=r[o];return l[n]=i(s),apply(e,this,l)}}function parent(e,t){return t.length<2?e:baseGet(e,baseSlice(t,0,-1))}function reorder(e,t){for(var n=e.length,i=on(t.length,n),r=copyArray(e);i--;){var a=t[i];e[i]=isIndex(a,n)?r[a]:o}return e}function setWrapToString(e,t,n){var i=t+"";return Un(e,insertWrapDetails(i,updateWrapDetails(getWrapDetails(i),n)))}function shortOut(e){var t=0,n=0;return function(){var i=an(),r=A-(i-n);if(n=i,r>0){if(++t>=_)return arguments[0]}else t=0;return e.apply(o,arguments)}}function shuffleSelf(e,t){var n=-1,i=e.length,r=i-1;for(t=t===o?i:t;++n<t;){var a=baseRandom(n,r),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}function toKey(e){if("string"==typeof e||isSymbol(e))return e;var t=e+"";return"0"==t&&1/e==-k?"-0":t}function toSource(e){if(null!=e){try{return st.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function updateWrapDetails(e,t){return arrayEach(B,function(n){var i="_."+n[0];t&n[1]&&!arrayIncludes(e,i)&&e.push(i)}),e.sort()}function wrapperClone(e){if(e instanceof LazyWrapper)return e.clone();var t=new LodashWrapper(e.__wrapped__,e.__chain__);return t.__actions__=copyArray(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function chunk(e,n,i){n=(i?isIterateeCall(e,n,i):n===o)?1:rn(toInteger(n),0);var r=null==e?0:e.length;if(!r||n<1)return[];for(var a=0,s=0,l=t(Zt(r/n));a<r;)l[s++]=baseSlice(e,a,a+=n);return l}function compact(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var o=e[t];o&&(r[i++]=o)}return r}function concat(){var e=arguments.length;if(!e)return[];for(var n=t(e-1),i=arguments[0],r=e;r--;)n[r-1]=arguments[r];return arrayPush(_i(i)?copyArray(i):[i],baseFlatten(n,1))}function drop(e,t,n){var i=null==e?0:e.length;return i?(t=n||t===o?1:toInteger(t),baseSlice(e,t<0?0:t,i)):[]}function dropRight(e,t,n){var i=null==e?0:e.length;return i?(t=n||t===o?1:toInteger(t),t=i-t,baseSlice(e,0,t<0?0:t)):[]}function dropRightWhile(e,t){return e&&e.length?baseWhile(e,getIteratee(t,3),!0,!0):[]}function dropWhile(e,t){return e&&e.length?baseWhile(e,getIteratee(t,3),!0):[]}function fill(e,t,n,i){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&isIterateeCall(e,t,n)&&(n=0,i=r),baseFill(e,t,n,i)):[]}function findIndex(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:toInteger(n);return r<0&&(r=rn(i+r,0)),baseFindIndex(e,getIteratee(t,3),r)}function findLastIndex(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i-1;return n!==o&&(r=toInteger(n),r=n<0?rn(i+r,0):on(r,i-1)),baseFindIndex(e,getIteratee(t,3),r,!0)}function flatten(e){return(null==e?0:e.length)?baseFlatten(e,1):[]}function flattenDeep(e){return(null==e?0:e.length)?baseFlatten(e,k):[]}function flattenDepth(e,t){return(null==e?0:e.length)?(t=t===o?1:toInteger(t),baseFlatten(e,t)):[]}function fromPairs(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i}function head(e){return e&&e.length?e[0]:o}function indexOf(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:toInteger(n);return r<0&&(r=rn(i+r,0)),baseIndexOf(e,t,r)}function initial(e){return(null==e?0:e.length)?baseSlice(e,0,-1):[]}function join(e,t){return null==e?"":tn.call(e,t)}function last(e){var t=null==e?0:e.length;return t?e[t-1]:o}function lastIndexOf(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=i;return n!==o&&(r=toInteger(n),r=r<0?rn(i+r,0):on(r,i-1)),t===t?strictLastIndexOf(e,t,r):baseFindIndex(e,baseIsNaN,r,!0)}function nth(e,t){return e&&e.length?baseNth(e,toInteger(t)):o}function pullAll(e,t){return e&&e.length&&t&&t.length?basePullAll(e,t):e}function pullAllBy(e,t,n){return e&&e.length&&t&&t.length?basePullAll(e,t,getIteratee(n,2)):e}function pullAllWith(e,t,n){return e&&e.length&&t&&t.length?basePullAll(e,t,o,n):e}function remove(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],o=e.length;for(t=getIteratee(t,3);++i<o;){var a=e[i];t(a,i,e)&&(n.push(a),r.push(i))}return basePullAt(e,r),n}function reverse(e){return null==e?e:cn.call(e)}function slice(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&isIterateeCall(e,t,n)?(t=0,n=i):(t=null==t?0:toInteger(t),n=n===o?i:toInteger(n)),baseSlice(e,t,n)):[]}function sortedIndex(e,t){return baseSortedIndex(e,t)}function sortedIndexBy(e,t,n){return baseSortedIndexBy(e,t,getIteratee(n,2))}function sortedIndexOf(e,t){var n=null==e?0:e.length;if(n){var i=baseSortedIndex(e,t);if(i<n&&eq(e[i],t))return i}return-1}function sortedLastIndex(e,t){return baseSortedIndex(e,t,!0)}function sortedLastIndexBy(e,t,n){return baseSortedIndexBy(e,t,getIteratee(n,2),!0)}function sortedLastIndexOf(e,t){if(null==e?0:e.length){var n=baseSortedIndex(e,t,!0)-1;if(eq(e[n],t))return n}return-1}function sortedUniq(e){return e&&e.length?baseSortedUniq(e):[]}function sortedUniqBy(e,t){return e&&e.length?baseSortedUniq(e,getIteratee(t,2)):[]}function tail(e){var t=null==e?0:e.length;return t?baseSlice(e,1,t):[]}function take(e,t,n){return e&&e.length?(t=n||t===o?1:toInteger(t),baseSlice(e,0,t<0?0:t)):[]}function takeRight(e,t,n){var i=null==e?0:e.length;return i?(t=n||t===o?1:toInteger(t),t=i-t,baseSlice(e,t<0?0:t,i)):[]}function takeRightWhile(e,t){return e&&e.length?baseWhile(e,getIteratee(t,3),!1,!0):[]}function takeWhile(e,t){return e&&e.length?baseWhile(e,getIteratee(t,3)):[]}function uniq(e){return e&&e.length?baseUniq(e):[]}function uniqBy(e,t){return e&&e.length?baseUniq(e,getIteratee(t,2)):[]}function uniqWith(e,t){return t="function"==typeof t?t:o,e&&e.length?baseUniq(e,o,t):[]}function unzip(e){if(!e||!e.length)return[];var t=0;return e=arrayFilter(e,function(e){if(isArrayLikeObject(e))return t=rn(e.length,t),!0}),baseTimes(t,function(t){return arrayMap(e,baseProperty(t))})}function unzipWith(e,t){if(!e||!e.length)return[];var n=unzip(e);return null==t?n:arrayMap(n,function(e){return apply(t,o,e)})}function zipObject(e,t){return baseZipObject(e||[],t||[],assignValue)}function zipObjectDeep(e,t){return baseZipObject(e||[],t||[],baseSet)}function chain(e){var t=lodash(e);return t.__chain__=!0,t}function tap(e,t){return t(e),e}function thru(e,t){return t(e)}function wrapperChain(){return chain(this)}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)}function wrapperNext(){this.__values__===o&&(this.__values__=toArray(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?o:this.__values__[this.__index__++]}}function wrapperToIterator(){return this}function wrapperPlant(e){for(var t,n=this;n instanceof baseLodash;){var i=wrapperClone(n);i.__index__=0,i.__values__=o,t?r.__wrapped__=i:t=i;var r=i;n=n.__wrapped__}return r.__wrapped__=e,t}function wrapperReverse(){var e=this.__wrapped__;if(e instanceof LazyWrapper){var t=e;return this.__actions__.length&&(t=new LazyWrapper(this)),t=t.reverse(),t.__actions__.push({func:thru,args:[reverse],thisArg:o}),new LodashWrapper(t,this.__chain__)}return this.thru(reverse)}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}function every(e,t,n){var i=_i(e)?arrayEvery:baseEvery;return n&&isIterateeCall(e,t,n)&&(t=o),i(e,getIteratee(t,3))}function filter(e,t){return(_i(e)?arrayFilter:baseFilter)(e,getIteratee(t,3))}function flatMap(e,t){return baseFlatten(map(e,t),1)}function flatMapDeep(e,t){return baseFlatten(map(e,t),k)}function flatMapDepth(e,t,n){return n=n===o?1:toInteger(n),baseFlatten(map(e,t),n)}function forEach(e,t){return(_i(e)?arrayEach:Cn)(e,getIteratee(t,3))}function forEachRight(e,t){return(_i(e)?arrayEachRight:$n)(e,getIteratee(t,3))}function includes(e,t,n,i){e=isArrayLike(e)?e:values(e),n=n&&!i?toInteger(n):0;var r=e.length;return n<0&&(n=rn(r+n,0)),isString(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&baseIndexOf(e,t,n)>-1}function map(e,t){return(_i(e)?arrayMap:baseMap)(e,getIteratee(t,3))}function orderBy(e,t,n,i){return null==e?[]:(_i(t)||(t=null==t?[]:[t]),n=i?o:n,_i(n)||(n=null==n?[]:[n]),baseOrderBy(e,t,n))}function reduce(e,t,n){var i=_i(e)?arrayReduce:baseReduce,r=arguments.length<3;return i(e,getIteratee(t,4),n,r,Cn)}function reduceRight(e,t,n){var i=_i(e)?arrayReduceRight:baseReduce,r=arguments.length<3;return i(e,getIteratee(t,4),n,r,$n)}function reject(e,t){return(_i(e)?arrayFilter:baseFilter)(e,negate(getIteratee(t,3)))}function sample(e){return(_i(e)?arraySample:baseSample)(e)}function sampleSize(e,t,n){return t=(n?isIterateeCall(e,t,n):t===o)?1:toInteger(t),(_i(e)?arraySampleSize:baseSampleSize)(e,t)}function shuffle(e){return(_i(e)?arrayShuffle:baseShuffle)(e)}function size(e){if(null==e)return 0;if(isArrayLike(e))return isString(e)?stringSize(e):e.length;var t=jn(e);return t==Z||t==ne?e.size:baseKeys(e).length}function some(e,t,n){var i=_i(e)?arraySome:baseSome;return n&&isIterateeCall(e,t,n)&&(t=o),i(e,getIteratee(t,3))}function after(e,t){if("function"!=typeof t)throw new nt(l);return e=toInteger(e),function(){if(--e<1)return t.apply(this,arguments)}}function ary(e,t,n){return t=n?o:t,t=e&&null==t?e.length:t,createWrap(e,O,o,o,o,o,t)}function before(e,t){var n;if("function"!=typeof t)throw new nt(l);return e=toInteger(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=o),n}}function curry(e,t,n){t=n?o:t;var i=createWrap(e,b,o,o,o,o,o,t);return i.placeholder=curry.placeholder,i}function curryRight(e,t,n){t=n?o:t;var i=createWrap(e,S,o,o,o,o,o,t);return i.placeholder=curryRight.placeholder,i}function debounce(e,t,n){function invokeFunc(t){var n=i,a=r;return i=r=o,d=t,s=e.apply(a,n)}function leadingEdge(e){return d=e,c=zn(timerExpired,t),p?invokeFunc(e):s}function remainingWait(e){var n=e-u,i=e-d,r=t-n;return h?on(r,a-i):r}function shouldInvoke(e){var n=e-u,i=e-d;return u===o||n>=t||n<0||h&&i>=a}function timerExpired(){var e=vi();if(shouldInvoke(e))return trailingEdge(e);c=zn(timerExpired,remainingWait(e))}function trailingEdge(e){return c=o,f&&i?invokeFunc(e):(i=r=o,s)}function cancel(){c!==o&&Nn(c),d=0,i=u=r=c=o}function flush(){return c===o?s:trailingEdge(vi())}function debounced(){var e=vi(),n=shouldInvoke(e);if(i=arguments,r=this,u=e,n){if(c===o)return leadingEdge(u);if(h)return c=zn(timerExpired,t),invokeFunc(u)}return c===o&&(c=zn(timerExpired,t)),s}var i,r,a,s,c,u,d=0,p=!1,h=!1,f=!0;if("function"!=typeof e)throw new nt(l);return t=toNumber(t)||0,isObject(n)&&(p=!!n.leading,h="maxWait"in n,a=h?rn(toNumber(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),debounced.cancel=cancel,debounced.flush=flush,debounced}function flip(e){return createWrap(e,x)}function memoize(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new nt(l);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=e.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(memoize.Cache||MapCache),n}function negate(e){if("function"!=typeof e)throw new nt(l);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function once(e){return before(2,e)}function rest(e,t){if("function"!=typeof e)throw new nt(l);return t=t===o?t:toInteger(t),baseRest(e,t)}function spread(e,t){if("function"!=typeof e)throw new nt(l);return t=null==t?0:rn(toInteger(t),0),baseRest(function(n){var i=n[t],r=castSlice(n,0,t);return i&&arrayPush(r,i),apply(e,this,r)})}function throttle(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new nt(l);return isObject(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),debounce(e,t,{leading:i,maxWait:t,trailing:r})}function unary(e){return ary(e,1)}function wrap(e,t){return Ei(castFunction(t),e)}function castArray(){if(!arguments.length)return[];var e=arguments[0];return _i(e)?e:[e]}function clone(e){return baseClone(e,f)}function cloneWith(e,t){return t="function"==typeof t?t:o,baseClone(e,f,t)}function cloneDeep(e){return baseClone(e,p|f)}function cloneDeepWith(e,t){return t="function"==typeof t?t:o,baseClone(e,p|f,t)}function conformsTo(e,t){return null==t||baseConformsTo(e,t,keys(t))}function eq(e,t){return e===t||e!==e&&t!==t}function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isBoolean(e){return!0===e||!1===e||isObjectLike(e)&&baseGetTag(e)==V}function isElement(e){return isObjectLike(e)&&1===e.nodeType&&!isPlainObject(e)}function isEmpty(e){if(null==e)return!0;if(isArrayLike(e)&&(_i(e)||"string"==typeof e||"function"==typeof e.splice||Ri(e)||Li(e)||$i(e)))return!e.length;var t=jn(e);if(t==Z||t==ne)return!e.size;if(isPrototype(e))return!baseKeys(e).length;for(var n in e)if(lt.call(e,n))return!1;return!0}function isEqual(e,t){return baseIsEqual(e,t)}function isEqualWith(e,t,n){n="function"==typeof n?n:o;var i=n?n(e,t):o;return i===o?baseIsEqual(e,t,o,n):!!i}function isError(e){if(!isObjectLike(e))return!1;var t=baseGetTag(e);return t==q||t==G||"string"==typeof e.message&&"string"==typeof e.name&&!isPlainObject(e)}function isFinite(e){return"number"==typeof e&&en(e)}function isFunction(e){if(!isObject(e))return!1;var t=baseGetTag(e);return t==Y||t==X||t==U||t==ee}function isInteger(e){return"number"==typeof e&&e==toInteger(e)}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=N}function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function isObjectLike(e){return null!=e&&"object"==typeof e}function isMatch(e,t){return e===t||baseIsMatch(e,t,getMatchData(t))}function isMatchWith(e,t,n){return n="function"==typeof n?n:o,baseIsMatch(e,t,getMatchData(t),n)}function isNaN(e){return isNumber(e)&&e!=+e}function isNative(e){if(Bn(e))throw new i(s);return baseIsNative(e)}function isNull(e){return null===e}function isNil(e){return null==e}function isNumber(e){return"number"==typeof e||isObjectLike(e)&&baseGetTag(e)==K}function isPlainObject(e){if(!isObjectLike(e)||baseGetTag(e)!=J)return!1;var t=It(e);if(null===t)return!0;var n=lt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&st.call(n)==pt}function isSafeInteger(e){return isInteger(e)&&e>=-N&&e<=N}function isString(e){return"string"==typeof e||!_i(e)&&isObjectLike(e)&&baseGetTag(e)==ie}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&baseGetTag(e)==re}function isUndefined(e){return e===o}function isWeakMap(e){return isObjectLike(e)&&jn(e)==ae}function isWeakSet(e){return isObjectLike(e)&&baseGetTag(e)==se}function toArray(e){if(!e)return[];if(isArrayLike(e))return isString(e)?stringToArray(e):copyArray(e);if(Pt&&e[Pt])return iteratorToArray(e[Pt]());var t=jn(e);return(t==Z?mapToArray:t==ne?setToArray:values)(e)}function toFinite(e){if(!e)return 0===e?e:0;if((e=toNumber(e))===k||e===-k){return(e<0?-1:1)*D}return e===e?e:0}function toInteger(e){var t=toFinite(e),n=t%1;return t===t?n?t-n:t:0}function toLength(e){return e?baseClamp(toInteger(e),0,M):0}function toNumber(e){if("number"==typeof e)return e;if(isSymbol(e))return L;if(isObject(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(De,"");var n=Ge.test(e);return n||Ye.test(e)?At(e.slice(2),n?2:8):We.test(e)?L:+e}function toPlainObject(e){return copyObject(e,keysIn(e))}function toSafeInteger(e){return e?baseClamp(toInteger(e),-N,N):0===e?e:0}function toString(e){return null==e?"":baseToString(e)}function create(e,t){var n=xn(e);return null==t?n:baseAssign(n,t)}function findKey(e,t){return baseFindKey(e,getIteratee(t,3),baseForOwn)}function findLastKey(e,t){return baseFindKey(e,getIteratee(t,3),baseForOwnRight)}function forIn(e,t){return null==e?e:_n(e,getIteratee(t,3),keysIn)}function forInRight(e,t){return null==e?e:An(e,getIteratee(t,3),keysIn)}function forOwn(e,t){return e&&baseForOwn(e,getIteratee(t,3))}function forOwnRight(e,t){return e&&baseForOwnRight(e,getIteratee(t,3))}function functions(e){return null==e?[]:baseFunctions(e,keys(e))}function functionsIn(e){return null==e?[]:baseFunctions(e,keysIn(e))}function get(e,t,n){var i=null==e?o:baseGet(e,t);return i===o?n:i}function has(e,t){return null!=e&&hasPath(e,t,baseHas)}function hasIn(e,t){return null!=e&&hasPath(e,t,baseHasIn)}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}function mapKeys(e,t){var n={};return t=getIteratee(t,3),baseForOwn(e,function(e,i,r){baseAssignValue(n,t(e,i,r),e)}),n}function mapValues(e,t){var n={};return t=getIteratee(t,3),baseForOwn(e,function(e,i,r){baseAssignValue(n,i,t(e,i,r))}),n}function omitBy(e,t){return pickBy(e,negate(getIteratee(t)))}function pickBy(e,t){if(null==e)return{};var n=arrayMap(getAllKeysIn(e),function(e){return[e]});return t=getIteratee(t),basePickBy(e,n,function(e,n){return t(e,n[0])})}function result(e,t,n){t=castPath(t,e);var i=-1,r=t.length;for(r||(r=1,e=o);++i<r;){var a=null==e?o:e[toKey(t[i])];a===o&&(i=r,a=n),e=isFunction(a)?a.call(e):a}return e}function set(e,t,n){return null==e?e:baseSet(e,t,n)}function setWith(e,t,n,i){return i="function"==typeof i?i:o,null==e?e:baseSet(e,t,n,i)}function transform(e,t,n){var i=_i(e),r=i||Ri(e)||Li(e);if(t=getIteratee(t,4),null==n){var o=e&&e.constructor;n=r?i?new o:[]:isObject(e)&&isFunction(o)?xn(It(e)):{}}return(r?arrayEach:baseForOwn)(e,function(e,i,r){return t(n,e,i,r)}),n}function unset(e,t){return null==e||baseUnset(e,t)}function update(e,t,n){return null==e?e:baseUpdate(e,t,castFunction(n))}function updateWith(e,t,n,i){return i="function"==typeof i?i:o,null==e?e:baseUpdate(e,t,castFunction(n),i)}function values(e){return null==e?[]:baseValues(e,keys(e))}function valuesIn(e){return null==e?[]:baseValues(e,keysIn(e))}function clamp(e,t,n){return n===o&&(n=t,t=o),n!==o&&(n=toNumber(n),n=n===n?n:0),t!==o&&(t=toNumber(t),t=t===t?t:0),baseClamp(toNumber(e),t,n)}function inRange(e,t,n){return t=toFinite(t),n===o?(n=t,t=0):n=toFinite(n),e=toNumber(e),baseInRange(e,t,n)}function random(e,t,n){if(n&&"boolean"!=typeof n&&isIterateeCall(e,t,n)&&(t=n=o),n===o&&("boolean"==typeof t?(n=t,t=o):"boolean"==typeof e&&(n=e,e=o)),e===o&&t===o?(e=0,t=1):(e=toFinite(e),t===o?(t=e,e=0):t=toFinite(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var r=ln();return on(e+r*(t-e+_t("1e-"+((r+"").length-1))),t)}return baseRandom(e,t)}function capitalize(e){return lr(toString(e).toLowerCase())}function deburr(e){return(e=toString(e))&&e.replace(Ze,Gt).replace(gt,"")}function endsWith(e,t,n){e=toString(e),t=baseToString(t);var i=e.length;n=n===o?i:baseClamp(toInteger(n),0,i);var r=n;return(n-=t.length)>=0&&e.slice(n,r)==t}function escape(e){return e=toString(e),e&&Ie.test(e)?e.replace(Ee,qt):e}function escapeRegExp(e){return e=toString(e),e&&Ne.test(e)?e.replace(ke,"\\$&"):e}function pad(e,t,n){e=toString(e),t=toInteger(t);var i=t?stringSize(e):0;if(!t||i>=t)return e;var r=(t-i)/2;return createPadding(Kt(r),n)+e+createPadding(Zt(r),n)}function padEnd(e,t,n){e=toString(e),t=toInteger(t);var i=t?stringSize(e):0;return t&&i<t?e+createPadding(t-i,n):e}function padStart(e,t,n){e=toString(e),t=toInteger(t);var i=t?stringSize(e):0;return t&&i<t?createPadding(t-i,n)+e:e}function parseInt(e,t,n){return n||null==t?t=0:t&&(t=+t),sn(toString(e).replace(Le,""),t||0)}function repeat(e,t,n){return t=(n?isIterateeCall(e,t,n):t===o)?1:toInteger(t),baseRepeat(toString(e),t)}function replace(){var e=arguments,t=toString(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function split(e,t,n){return n&&"number"!=typeof n&&isIterateeCall(e,t,n)&&(t=n=o),(n=n===o?M:n>>>0)?(e=toString(e),e&&("string"==typeof t||null!=t&&!Ni(t))&&!(t=baseToString(t))&&hasUnicode(e)?castSlice(stringToArray(e),0,n):e.split(t,n)):[]}function startsWith(e,t,n){return e=toString(e),n=null==n?0:baseClamp(toInteger(n),0,e.length),t=baseToString(t),e.slice(n,n+t.length)==t}function template(e,t,n){var i=lodash.templateSettings;n&&isIterateeCall(e,t,n)&&(t=o),e=toString(e),t=Hi({},t,i,customDefaultsAssignIn);var a,s,l=Hi({},t.imports,i.imports,customDefaultsAssignIn),c=keys(l),u=baseValues(l,c),d=0,p=t.interpolate||Ke,h="__p += '",f=et((t.escape||Ke).source+"|"+p.source+"|"+(p===$e?Ue:Ke).source+"|"+(t.evaluate||Ke).source+"|$","g"),m="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Tt+"]")+"\n";e.replace(f,function(t,n,i,r,o,l){return i||(i=r),h+=e.slice(d,l).replace(Qe,escapeStringChar),n&&(a=!0,h+="' +\n__e("+n+") +\n'"),o&&(s=!0,h+="';\n"+o+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),d=l+t.length,t}),h+="';\n";var g=t.variable;g||(h="with (obj) {\n"+h+"\n}\n"),h=(s?h.replace(we,""):h).replace(be,"$1").replace(Se,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v=cr(function(){return r(c,m+"return "+h).apply(o,u)});if(v.source=h,isError(v))throw v;return v}function toLower(e){return toString(e).toLowerCase()}function toUpper(e){return toString(e).toUpperCase()}function trim(e,t,n){if((e=toString(e))&&(n||t===o))return e.replace(De,"");if(!e||!(t=baseToString(t)))return e;var i=stringToArray(e),r=stringToArray(t);return castSlice(i,charsStartIndex(i,r),charsEndIndex(i,r)+1).join("")}function trimEnd(e,t,n){if((e=toString(e))&&(n||t===o))return e.replace(Me,"");if(!e||!(t=baseToString(t)))return e;var i=stringToArray(e);return castSlice(i,0,charsEndIndex(i,stringToArray(t))+1).join("")}function trimStart(e,t,n){if((e=toString(e))&&(n||t===o))return e.replace(Le,"");if(!e||!(t=baseToString(t)))return e;var i=stringToArray(e);return castSlice(i,charsStartIndex(i,stringToArray(t))).join("")}function truncate(e,t){var n=C,i=$;if(isObject(t)){var r="separator"in t?t.separator:r;n="length"in t?toInteger(t.length):n,i="omission"in t?baseToString(t.omission):i}e=toString(e);var a=e.length;if(hasUnicode(e)){var s=stringToArray(e);a=s.length}if(n>=a)return e;var l=n-stringSize(i);if(l<1)return i;var c=s?castSlice(s,0,l).join(""):e.slice(0,l);if(r===o)return c+i;if(s&&(l+=c.length-l),Ni(r)){if(e.slice(l).search(r)){var u,d=c;for(r.global||(r=et(r.source,toString(Ve.exec(r))+"g")),r.lastIndex=0;u=r.exec(d);)var p=u.index;c=c.slice(0,p===o?l:p)}}else if(e.indexOf(baseToString(r),l)!=l){var h=c.lastIndexOf(r);h>-1&&(c=c.slice(0,h))}return c+i}function unescape(e){return e=toString(e),e&&Oe.test(e)?e.replace(Te,Yt):e}function words(e,t,n){return e=toString(e),t=n?o:t,t===o?hasUnicodeWord(e)?unicodeWords(e):asciiWords(e):e.match(t)||[]}function cond(e){var t=null==e?0:e.length,n=getIteratee();return e=t?arrayMap(e,function(e){if("function"!=typeof e[1])throw new nt(l);return[n(e[0]),e[1]]}):[],baseRest(function(n){for(var i=-1;++i<t;){var r=e[i];if(apply(r[0],this,n))return apply(r[1],this,n)}})}function conforms(e){return baseConforms(baseClone(e,p))}function constant(e){return function(){return e}}function defaultTo(e,t){return null==e||e!==e?t:e}function identity(e){return e}function iteratee(e){return baseIteratee("function"==typeof e?e:baseClone(e,p))}function matches(e){return baseMatches(baseClone(e,p))}function matchesProperty(e,t){return baseMatchesProperty(e,baseClone(t,p))}function mixin(e,t,n){var i=keys(t),r=baseFunctions(t,i);null!=n||isObject(t)&&(r.length||!i.length)||(n=t,t=e,e=this,r=baseFunctions(t,keys(t)));var o=!(isObject(n)&&"chain"in n&&!n.chain),a=isFunction(e);return arrayEach(r,function(n){var i=t[n];e[n]=i,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=copyArray(this.__actions__)).push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,arrayPush([this.value()],arguments))})}),e}function noConflict(){return kt._===this&&(kt._=ht),this}function noop(){}function nthArg(e){return e=toInteger(e),baseRest(function(t){return baseNth(t,e)})}function property(e){return isKey(e)?baseProperty(toKey(e)):basePropertyDeep(e)}function propertyOf(e){return function(t){return null==e?o:baseGet(e,t)}}function stubArray(){return[]}function stubFalse(){return!1}function stubObject(){return{}}function stubString(){return""}function stubTrue(){return!0}function times(e,t){if((e=toInteger(e))<1||e>N)return[];var n=M,i=on(e,M);t=getIteratee(t),e-=M;for(var r=baseTimes(i,t);++n<e;)t(n);return r}function toPath(e){return _i(e)?arrayMap(e,toKey):isSymbol(e)?[e]:copyArray(Vn(toString(e)))}function uniqueId(e){var t=++ct;return toString(e)+t}function max(e){return e&&e.length?baseExtremum(e,identity,baseGt):o}function maxBy(e,t){return e&&e.length?baseExtremum(e,getIteratee(t,2),baseGt):o}function mean(e){return baseMean(e,identity)}function meanBy(e,t){return baseMean(e,getIteratee(t,2))}function min(e){return e&&e.length?baseExtremum(e,identity,baseLt):o}function minBy(e,t){return e&&e.length?baseExtremum(e,getIteratee(t,2),baseLt):o}function sum(e){return e&&e.length?baseSum(e,identity):0}function sumBy(e,t){return e&&e.length?baseSum(e,getIteratee(t,2)):0}e=null==e?kt:Xt.defaults(kt.Object(),e,Xt.pick(kt,St));var t=e.Array,n=e.Date,i=e.Error,r=e.Function,He=e.Math,Je=e.Object,et=e.RegExp,tt=e.String,nt=e.TypeError,it=t.prototype,rt=r.prototype,ot=Je.prototype,at=e["__core-js_shared__"],st=rt.toString,lt=ot.hasOwnProperty,ct=0,ut=function(){var e=/[^.]+$/.exec(at&&at.keys&&at.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),dt=ot.toString,pt=st.call(Je),ht=kt._,ft=et("^"+st.call(lt).replace(ke,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vt=Lt?e.Buffer:o,yt=e.Symbol,wt=e.Uint8Array,bt=vt?vt.allocUnsafe:o,It=overArg(Je.getPrototypeOf,Je),xt=Je.create,Ct=ot.propertyIsEnumerable,$t=it.splice,Rt=yt?yt.isConcatSpreadable:o,Pt=yt?yt.iterator:o,Nt=yt?yt.toStringTag:o,Dt=function(){try{var e=getNative(Je,"defineProperty");return e({},"",{}),e}catch(e){}}(),Mt=e.clearTimeout!==kt.clearTimeout&&e.clearTimeout,Ft=n&&n.now!==kt.Date.now&&n.now,Wt=e.setTimeout!==kt.setTimeout&&e.setTimeout,Zt=He.ceil,Kt=He.floor,Qt=Je.getOwnPropertySymbols,Jt=vt?vt.isBuffer:o,en=e.isFinite,tn=it.join,nn=overArg(Je.keys,Je),rn=He.max,on=He.min,an=n.now,sn=e.parseInt,ln=He.random,cn=it.reverse,un=getNative(e,"DataView"),dn=getNative(e,"Map"),pn=getNative(e,"Promise"),hn=getNative(e,"Set"),fn=getNative(e,"WeakMap"),mn=getNative(Je,"create"),gn=fn&&new fn,vn={},yn=toSource(un),wn=toSource(dn),bn=toSource(pn),Sn=toSource(hn),Tn=toSource(fn),En=yt?yt.prototype:o,On=En?En.valueOf:o,In=En?En.toString:o,xn=function(){function object(){}return function(e){if(!isObject(e))return{};if(xt)return xt(e);object.prototype=e;var t=new object;return object.prototype=o,t}}();lodash.templateSettings={escape:xe,evaluate:Ce,interpolate:$e,variable:"",imports:{_:lodash}},lodash.prototype=baseLodash.prototype,lodash.prototype.constructor=lodash,LodashWrapper.prototype=xn(baseLodash.prototype),LodashWrapper.prototype.constructor=LodashWrapper,LazyWrapper.prototype=xn(baseLodash.prototype),LazyWrapper.prototype.constructor=LazyWrapper,Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var Cn=createBaseEach(baseForOwn),$n=createBaseEach(baseForOwnRight,!0),_n=createBaseFor(),An=createBaseFor(!0),Rn=gn?function(e,t){return gn.set(e,t),e}:identity,Pn=Dt?function(e,t){return Dt(e,"toString",{configurable:!0,enumerable:!1,value:constant(t),writable:!0})}:identity,kn=baseRest,Nn=Mt||function(e){return kt.clearTimeout(e)},Dn=hn&&1/setToArray(new hn([,-0]))[1]==k?function(e){return new hn(e)}:noop,Ln=gn?function(e){return gn.get(e)}:noop,Mn=Qt?function(e){return null==e?[]:(e=Je(e),arrayFilter(Qt(e),function(t){return Ct.call(e,t)}))}:stubArray,Fn=Qt?function(e){for(var t=[];e;)arrayPush(t,Mn(e)),e=It(e);return t}:stubArray,jn=baseGetTag;(un&&jn(new un(new ArrayBuffer(1)))!=ce||dn&&jn(new dn)!=Z||pn&&"[object Promise]"!=jn(pn.resolve())||hn&&jn(new hn)!=ne||fn&&jn(new fn)!=ae)&&(jn=function(e){var t=baseGetTag(e),n=t==J?e.constructor:o,i=n?toSource(n):"";if(i)switch(i){case yn:return ce;case wn:return Z;case bn:return"[object Promise]";case Sn:return ne;case Tn:return ae}return t});var Bn=at?isFunction:stubFalse,Hn=shortOut(Rn),zn=Wt||function(e,t){return kt.setTimeout(e,t)},Un=shortOut(Pn),Vn=function(e){var t=memoize(e,function(e){return n.size===u&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return Re.test(e)&&t.push(""),e.replace(Pe,function(e,n,i,r){t.push(i?r.replace(ze,"$1"):n||e)}),t}),Wn=baseRest(function(e,t){return isArrayLikeObject(e)?baseDifference(e,baseFlatten(t,1,isArrayLikeObject,!0)):[]}),Gn=baseRest(function(e,t){var n=last(t);return isArrayLikeObject(n)&&(n=o),isArrayLikeObject(e)?baseDifference(e,baseFlatten(t,1,isArrayLikeObject,!0),getIteratee(n,2)):[]}),qn=baseRest(function(e,t){var n=last(t);return isArrayLikeObject(n)&&(n=o),isArrayLikeObject(e)?baseDifference(e,baseFlatten(t,1,isArrayLikeObject,!0),o,n):[]}),Yn=baseRest(function(e){var t=arrayMap(e,castArrayLikeObject);return t.length&&t[0]===e[0]?baseIntersection(t):[]}),Xn=baseRest(function(e){var t=last(e),n=arrayMap(e,castArrayLikeObject);return t===last(n)?t=o:n.pop(),n.length&&n[0]===e[0]?baseIntersection(n,getIteratee(t,2)):[]}),Zn=baseRest(function(e){var t=last(e),n=arrayMap(e,castArrayLikeObject);return t="function"==typeof t?t:o,t&&n.pop(),n.length&&n[0]===e[0]?baseIntersection(n,o,t):[]}),Kn=baseRest(pullAll),Qn=flatRest(function(e,t){var n=null==e?0:e.length,i=baseAt(e,t);return basePullAt(e,arrayMap(t,function(e){return isIndex(e,n)?+e:e}).sort(compareAscending)),i}),Jn=baseRest(function(e){return baseUniq(baseFlatten(e,1,isArrayLikeObject,!0))}),ei=baseRest(function(e){var t=last(e);return isArrayLikeObject(t)&&(t=o),baseUniq(baseFlatten(e,1,isArrayLikeObject,!0),getIteratee(t,2))}),ti=baseRest(function(e){var t=last(e);return t="function"==typeof t?t:o,baseUniq(baseFlatten(e,1,isArrayLikeObject,!0),o,t)}),ni=baseRest(function(e,t){return isArrayLikeObject(e)?baseDifference(e,t):[]}),ii=baseRest(function(e){return baseXor(arrayFilter(e,isArrayLikeObject))}),ri=baseRest(function(e){var t=last(e);return isArrayLikeObject(t)&&(t=o),baseXor(arrayFilter(e,isArrayLikeObject),getIteratee(t,2))}),oi=baseRest(function(e){var t=last(e);return t="function"==typeof t?t:o,baseXor(arrayFilter(e,isArrayLikeObject),o,t)}),ai=baseRest(unzip),si=baseRest(function(e){var t=e.length,n=t>1?e[t-1]:o;return n="function"==typeof n?(e.pop(),n):o,unzipWith(e,n)}),li=flatRest(function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,r=function(t){return baseAt(t,e)};return!(t>1||this.__actions__.length)&&i instanceof LazyWrapper&&isIndex(n)?(i=i.slice(n,+n+(t?1:0)),i.__actions__.push({func:thru,args:[r],thisArg:o}),new LodashWrapper(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(o),e})):this.thru(r)}),ci=createAggregator(function(e,t,n){lt.call(e,n)?++e[n]:baseAssignValue(e,n,1)}),ui=createFind(findIndex),di=createFind(findLastIndex),pi=createAggregator(function(e,t,n){lt.call(e,n)?e[n].push(t):baseAssignValue(e,n,[t])}),hi=baseRest(function(e,n,i){var r=-1,o="function"==typeof n,a=isArrayLike(e)?t(e.length):[];return Cn(e,function(e){a[++r]=o?apply(n,e,i):baseInvoke(e,n,i)}),a}),fi=createAggregator(function(e,t,n){baseAssignValue(e,n,t)}),mi=createAggregator(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),gi=baseRest(function(e,t){if(null==e)return[];var n=t.length;return n>1&&isIterateeCall(e,t[0],t[1])?t=[]:n>2&&isIterateeCall(t[0],t[1],t[2])&&(t=[t[0]]),baseOrderBy(e,baseFlatten(t,1),[])}),vi=Ft||function(){return kt.Date.now()},yi=baseRest(function(e,t,n){var i=v;if(n.length){var r=replaceHolders(n,getHolder(yi));i|=T}return createWrap(e,i,t,n,r)}),wi=baseRest(function(e,t,n){var i=v|y;if(n.length){var r=replaceHolders(n,getHolder(wi));i|=T}return createWrap(t,i,e,n,r)}),bi=baseRest(function(e,t){return baseDelay(e,1,t)}),Si=baseRest(function(e,t,n){return baseDelay(e,toNumber(t)||0,n)});memoize.Cache=MapCache;var Ti=kn(function(e,t){t=1==t.length&&_i(t[0])?arrayMap(t[0],baseUnary(getIteratee())):arrayMap(baseFlatten(t,1),baseUnary(getIteratee()));var n=t.length;return baseRest(function(i){for(var r=-1,o=on(i.length,n);++r<o;)i[r]=t[r].call(this,i[r]);return apply(e,this,i)})}),Ei=baseRest(function(e,t){var n=replaceHolders(t,getHolder(Ei));return createWrap(e,T,o,t,n)}),Oi=baseRest(function(e,t){var n=replaceHolders(t,getHolder(Oi));return createWrap(e,E,o,t,n)}),Ii=flatRest(function(e,t){return createWrap(e,I,o,o,o,t)}),xi=createRelationalOperation(baseGt),Ci=createRelationalOperation(function(e,t){return e>=t}),$i=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&lt.call(e,"callee")&&!Ct.call(e,"callee")},_i=t.isArray,Ai=jt?baseUnary(jt):baseIsArrayBuffer,Ri=Jt||stubFalse,Pi=Bt?baseUnary(Bt):baseIsDate,ki=Ht?baseUnary(Ht):baseIsMap,Ni=zt?baseUnary(zt):baseIsRegExp,Di=Ut?baseUnary(Ut):baseIsSet,Li=Vt?baseUnary(Vt):baseIsTypedArray,Mi=createRelationalOperation(baseLt),Fi=createRelationalOperation(function(e,t){return e<=t}),ji=createAssigner(function(e,t){if(isPrototype(t)||isArrayLike(t))return void copyObject(t,keys(t),e);for(var n in t)lt.call(t,n)&&assignValue(e,n,t[n])}),Bi=createAssigner(function(e,t){copyObject(t,keysIn(t),e)}),Hi=createAssigner(function(e,t,n,i){copyObject(t,keysIn(t),e,i)}),zi=createAssigner(function(e,t,n,i){copyObject(t,keys(t),e,i)}),Ui=flatRest(baseAt),Vi=baseRest(function(e){return e.push(o,customDefaultsAssignIn),apply(Hi,o,e)}),Wi=baseRest(function(e){return e.push(o,customDefaultsMerge),apply(Zi,o,e)}),Gi=createInverter(function(e,t,n){e[t]=n},constant(identity)),qi=createInverter(function(e,t,n){lt.call(e,t)?e[t].push(n):e[t]=[n]},getIteratee),Yi=baseRest(baseInvoke),Xi=createAssigner(function(e,t,n){baseMerge(e,t,n)}),Zi=createAssigner(function(e,t,n,i){baseMerge(e,t,n,i)}),Ki=flatRest(function(e,t){var n={};if(null==e)return n;var i=!1;t=arrayMap(t,function(t){return t=castPath(t,e),i||(i=t.length>1),t}),copyObject(e,getAllKeysIn(e),n),i&&(n=baseClone(n,p|h|f,customOmitClone));for(var r=t.length;r--;)baseUnset(n,t[r]);return n}),Qi=flatRest(function(e,t){return null==e?{}:basePick(e,t)}),Ji=createToPairs(keys),er=createToPairs(keysIn),tr=createCompounder(function(e,t,n){return t=t.toLowerCase(),e+(n?capitalize(t):t)}),nr=createCompounder(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),ir=createCompounder(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),rr=createCaseFirst("toLowerCase"),or=createCompounder(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),ar=createCompounder(function(e,t,n){return e+(n?" ":"")+lr(t)}),sr=createCompounder(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),lr=createCaseFirst("toUpperCase"),cr=baseRest(function(e,t){try{return apply(e,o,t)}catch(e){return isError(e)?e:new i(e)}}),ur=flatRest(function(e,t){return arrayEach(t,function(t){t=toKey(t),baseAssignValue(e,t,yi(e[t],e))}),e}),dr=createFlow(),pr=createFlow(!0),hr=baseRest(function(e,t){return function(n){return baseInvoke(n,e,t)}}),fr=baseRest(function(e,t){return function(n){return baseInvoke(e,n,t)}}),mr=createOver(arrayMap),gr=createOver(arrayEvery),vr=createOver(arraySome),yr=createRange(),wr=createRange(!0),br=createMathOperation(function(e,t){return e+t},0),Sr=createRound("ceil"),Tr=createMathOperation(function(e,t){return e/t},1),Er=createRound("floor"),Or=createMathOperation(function(e,t){return e*t},1),Ir=createRound("round"),xr=createMathOperation(function(e,t){return e-t},0);return lodash.after=after,lodash.ary=ary,lodash.assign=ji,lodash.assignIn=Bi,lodash.assignInWith=Hi,lodash.assignWith=zi,lodash.at=Ui,lodash.before=before,lodash.bind=yi,lodash.bindAll=ur,lodash.bindKey=wi,lodash.castArray=castArray,lodash.chain=chain,lodash.chunk=chunk,lodash.compact=compact,lodash.concat=concat,lodash.cond=cond,lodash.conforms=conforms,lodash.constant=constant,lodash.countBy=ci,lodash.create=create,lodash.curry=curry,lodash.curryRight=curryRight,lodash.debounce=debounce,lodash.defaults=Vi,lodash.defaultsDeep=Wi,lodash.defer=bi,lodash.delay=Si,lodash.difference=Wn,lodash.differenceBy=Gn,lodash.differenceWith=qn,lodash.drop=drop,lodash.dropRight=dropRight,lodash.dropRightWhile=dropRightWhile,lodash.dropWhile=dropWhile,lodash.fill=fill,lodash.filter=filter,lodash.flatMap=flatMap,lodash.flatMapDeep=flatMapDeep,lodash.flatMapDepth=flatMapDepth,lodash.flatten=flatten,lodash.flattenDeep=flattenDeep,lodash.flattenDepth=flattenDepth,lodash.flip=flip,lodash.flow=dr,lodash.flowRight=pr,lodash.fromPairs=fromPairs,lodash.functions=functions,lodash.functionsIn=functionsIn,lodash.groupBy=pi,lodash.initial=initial,lodash.intersection=Yn,lodash.intersectionBy=Xn,lodash.intersectionWith=Zn,lodash.invert=Gi,lodash.invertBy=qi,lodash.invokeMap=hi,lodash.iteratee=iteratee,lodash.keyBy=fi,lodash.keys=keys,lodash.keysIn=keysIn,lodash.map=map,lodash.mapKeys=mapKeys,lodash.mapValues=mapValues,lodash.matches=matches,lodash.matchesProperty=matchesProperty,lodash.memoize=memoize,lodash.merge=Xi,lodash.mergeWith=Zi,lodash.method=hr,lodash.methodOf=fr,lodash.mixin=mixin,lodash.negate=negate,lodash.nthArg=nthArg,lodash.omit=Ki,lodash.omitBy=omitBy,lodash.once=once,lodash.orderBy=orderBy,lodash.over=mr,lodash.overArgs=Ti,lodash.overEvery=gr,lodash.overSome=vr,lodash.partial=Ei,lodash.partialRight=Oi,lodash.partition=mi,lodash.pick=Qi,lodash.pickBy=pickBy,lodash.property=property,lodash.propertyOf=propertyOf,lodash.pull=Kn,lodash.pullAll=pullAll,lodash.pullAllBy=pullAllBy,lodash.pullAllWith=pullAllWith,lodash.pullAt=Qn,lodash.range=yr,lodash.rangeRight=wr,lodash.rearg=Ii,lodash.reject=reject,lodash.remove=remove,lodash.rest=rest,lodash.reverse=reverse,lodash.sampleSize=sampleSize,lodash.set=set,lodash.setWith=setWith,lodash.shuffle=shuffle,lodash.slice=slice,lodash.sortBy=gi,lodash.sortedUniq=sortedUniq,lodash.sortedUniqBy=sortedUniqBy,lodash.split=split,lodash.spread=spread,lodash.tail=tail,lodash.take=take,lodash.takeRight=takeRight,lodash.takeRightWhile=takeRightWhile,lodash.takeWhile=takeWhile,lodash.tap=tap,lodash.throttle=throttle,lodash.thru=thru,lodash.toArray=toArray,lodash.toPairs=Ji,lodash.toPairsIn=er,lodash.toPath=toPath,lodash.toPlainObject=toPlainObject,lodash.transform=transform,lodash.unary=unary,lodash.union=Jn,lodash.unionBy=ei,lodash.unionWith=ti,lodash.uniq=uniq,lodash.uniqBy=uniqBy,lodash.uniqWith=uniqWith,lodash.unset=unset,lodash.unzip=unzip,lodash.unzipWith=unzipWith,lodash.update=update,lodash.updateWith=updateWith,lodash.values=values,lodash.valuesIn=valuesIn,lodash.without=ni,lodash.words=words,lodash.wrap=wrap,lodash.xor=ii,lodash.xorBy=ri,lodash.xorWith=oi,lodash.zip=ai,lodash.zipObject=zipObject,lodash.zipObjectDeep=zipObjectDeep,lodash.zipWith=si,lodash.entries=Ji,lodash.entriesIn=er,lodash.extend=Bi,lodash.extendWith=Hi,mixin(lodash,lodash),lodash.add=br,lodash.attempt=cr,lodash.camelCase=tr,lodash.capitalize=capitalize,lodash.ceil=Sr,lodash.clamp=clamp,lodash.clone=clone,lodash.cloneDeep=cloneDeep,lodash.cloneDeepWith=cloneDeepWith,lodash.cloneWith=cloneWith,lodash.conformsTo=conformsTo,lodash.deburr=deburr,lodash.defaultTo=defaultTo,lodash.divide=Tr,lodash.endsWith=endsWith,lodash.eq=eq,lodash.escape=escape,lodash.escapeRegExp=escapeRegExp,lodash.every=every,lodash.find=ui,lodash.findIndex=findIndex,lodash.findKey=findKey,lodash.findLast=di,lodash.findLastIndex=findLastIndex,lodash.findLastKey=findLastKey,lodash.floor=Er,lodash.forEach=forEach,lodash.forEachRight=forEachRight,lodash.forIn=forIn,lodash.forInRight=forInRight,lodash.forOwn=forOwn,lodash.forOwnRight=forOwnRight,lodash.get=get,lodash.gt=xi,lodash.gte=Ci,lodash.has=has,lodash.hasIn=hasIn,lodash.head=head,lodash.identity=identity,lodash.includes=includes,lodash.indexOf=indexOf,lodash.inRange=inRange,lodash.invoke=Yi,lodash.isArguments=$i,lodash.isArray=_i,lodash.isArrayBuffer=Ai,lodash.isArrayLike=isArrayLike,lodash.isArrayLikeObject=isArrayLikeObject,lodash.isBoolean=isBoolean,lodash.isBuffer=Ri,lodash.isDate=Pi,lodash.isElement=isElement,lodash.isEmpty=isEmpty,lodash.isEqual=isEqual,lodash.isEqualWith=isEqualWith,lodash.isError=isError,lodash.isFinite=isFinite,lodash.isFunction=isFunction,lodash.isInteger=isInteger,lodash.isLength=isLength,lodash.isMap=ki,lodash.isMatch=isMatch,lodash.isMatchWith=isMatchWith,lodash.isNaN=isNaN,lodash.isNative=isNative,lodash.isNil=isNil,lodash.isNull=isNull,lodash.isNumber=isNumber,lodash.isObject=isObject,lodash.isObjectLike=isObjectLike,lodash.isPlainObject=isPlainObject,lodash.isRegExp=Ni,lodash.isSafeInteger=isSafeInteger,lodash.isSet=Di,lodash.isString=isString,lodash.isSymbol=isSymbol,lodash.isTypedArray=Li,lodash.isUndefined=isUndefined,lodash.isWeakMap=isWeakMap,lodash.isWeakSet=isWeakSet,lodash.join=join,lodash.kebabCase=nr,lodash.last=last,lodash.lastIndexOf=lastIndexOf,lodash.lowerCase=ir,lodash.lowerFirst=rr,lodash.lt=Mi,lodash.lte=Fi,lodash.max=max,lodash.maxBy=maxBy,lodash.mean=mean,lodash.meanBy=meanBy,lodash.min=min,lodash.minBy=minBy,lodash.stubArray=stubArray,lodash.stubFalse=stubFalse,lodash.stubObject=stubObject,lodash.stubString=stubString,lodash.stubTrue=stubTrue,lodash.multiply=Or,lodash.nth=nth,lodash.noConflict=noConflict,lodash.noop=noop,lodash.now=vi,lodash.pad=pad,lodash.padEnd=padEnd,lodash.padStart=padStart,lodash.parseInt=parseInt,lodash.random=random,lodash.reduce=reduce,lodash.reduceRight=reduceRight,lodash.repeat=repeat,lodash.replace=replace,lodash.result=result,lodash.round=Ir,lodash.runInContext=runInContext,lodash.sample=sample,lodash.size=size,lodash.snakeCase=or,lodash.some=some,lodash.sortedIndex=sortedIndex,lodash.sortedIndexBy=sortedIndexBy,lodash.sortedIndexOf=sortedIndexOf,lodash.sortedLastIndex=sortedLastIndex,lodash.sortedLastIndexBy=sortedLastIndexBy,lodash.sortedLastIndexOf=sortedLastIndexOf,lodash.startCase=ar,lodash.startsWith=startsWith,lodash.subtract=xr,lodash.sum=sum,lodash.sumBy=sumBy,lodash.template=template,lodash.times=times,lodash.toFinite=toFinite,lodash.toInteger=toInteger,lodash.toLength=toLength,lodash.toLower=toLower,lodash.toNumber=toNumber,lodash.toSafeInteger=toSafeInteger,lodash.toString=toString,lodash.toUpper=toUpper,lodash.trim=trim,lodash.trimEnd=trimEnd,lodash.trimStart=trimStart,lodash.truncate=truncate,lodash.unescape=unescape,lodash.uniqueId=uniqueId,lodash.upperCase=sr,lodash.upperFirst=lr,lodash.each=forEach,lodash.eachRight=forEachRight,lodash.first=head,mixin(lodash,function(){var e={};return baseForOwn(lodash,function(t,n){lt.call(lodash.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),lodash.VERSION="4.17.4",arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){lodash[e].placeholder=lodash}),arrayEach(["drop","take"],function(e,t){LazyWrapper.prototype[e]=function(n){n=n===o?1:rn(toInteger(n),0);var i=this.__filtered__&&!t?new LazyWrapper(this):this.clone();return i.__filtered__?i.__takeCount__=on(n,i.__takeCount__):i.__views__.push({size:on(n,M),type:e+(i.__dir__<0?"Right":"")}),i},LazyWrapper.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),arrayEach(["filter","map","takeWhile"],function(e,t){var n=t+1,i=n==R||3==n;LazyWrapper.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:getIteratee(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}}),arrayEach(["head","last"],function(e,t){var n="take"+(t?"Right":"");LazyWrapper.prototype[e]=function(){return this[n](1).value()[0]}}),arrayEach(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");LazyWrapper.prototype[e]=function(){return this.__filtered__?new LazyWrapper(this):this[n](1)}}),LazyWrapper.prototype.compact=function(){return this.filter(identity)},LazyWrapper.prototype.find=function(e){return this.filter(e).head()},LazyWrapper.prototype.findLast=function(e){return this.reverse().find(e)},LazyWrapper.prototype.invokeMap=baseRest(function(e,t){return"function"==typeof e?new LazyWrapper(this):this.map(function(n){return baseInvoke(n,e,t)})}),LazyWrapper.prototype.reject=function(e){return this.filter(negate(getIteratee(e)))},LazyWrapper.prototype.slice=function(e,t){e=toInteger(e);var n=this;return n.__filtered__&&(e>0||t<0)?new LazyWrapper(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==o&&(t=toInteger(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},LazyWrapper.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},LazyWrapper.prototype.toArray=function(){return this.take(M)},baseForOwn(LazyWrapper.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),r=lodash[i?"take"+("last"==t?"Right":""):t],a=i||/^find/.test(t);r&&(lodash.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,l=t instanceof LazyWrapper,c=s[0],u=l||_i(t),d=function(e){var t=r.apply(lodash,arrayPush([e],s));return i&&p?t[0]:t};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var p=this.__chain__,h=!!this.__actions__.length,f=a&&!p,m=l&&!h;if(!a&&u){t=m?t:new LazyWrapper(this);var g=e.apply(t,s);return g.__actions__.push({func:thru,args:[d],thisArg:o}),new LodashWrapper(g,p)}return f&&m?e.apply(this,s):(g=this.thru(d),f?i?g.value()[0]:g.value():g)})}),arrayEach(["pop","push","shift","sort","splice","unshift"],function(e){var t=it[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);lodash.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var r=this.value();return t.apply(_i(r)?r:[],e)}return this[n](function(n){return t.apply(_i(n)?n:[],e)})}}),baseForOwn(LazyWrapper.prototype,function(e,t){var n=lodash[t];if(n){var i=n.name+"";(vn[i]||(vn[i]=[])).push({name:t,func:n})}}),vn[createHybrid(o,y).name]=[{name:"wrapper",func:o}],LazyWrapper.prototype.clone=lazyClone,LazyWrapper.prototype.reverse=lazyReverse,LazyWrapper.prototype.value=lazyValue,lodash.prototype.at=li,lodash.prototype.chain=wrapperChain,lodash.prototype.commit=wrapperCommit,lodash.prototype.next=wrapperNext,lodash.prototype.plant=wrapperPlant,lodash.prototype.reverse=wrapperReverse,lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue,lodash.prototype.first=lodash.prototype.head,Pt&&(lodash.prototype[Pt]=wrapperToIterator),lodash}();kt._=Xt,(r=function(){return Xt}.call(t,n,t,i))!==o&&(i.exports=r)}).call(this)}).call(t,n(6),n(7)(e))},function(e,t){e.exports="#player, .fallback, body, html, iframe {\n  background: transparent !important; }\n\n.player:not(.touch-support) {\n  pointer-events: none; }\n\n.player .video-wrapper {\n  background: transparent !important; }\n\n.player .controls {\n  top: 0; }\n  .player .controls .play {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    margin: auto; }\n\n.player:not(.touch-support) > *:not(.video-wrapper) {\n  display: none; }\n\n.player.touch-support .controls-wrapper > *:not(.controls) {\n  display: none; }\n\n.player.touch-support .controls > *:not(.play) {\n  display: none; }\n"},function(e,t){},function(e,t,n){"use strict";var i=n(141),r=n.n(i),o=n(142),a=(n.n(o),function(){return{template:r.a,restrict:"E"}});t.a=a},function(e,t){e.exports='<div ui-view="app">\n\n  <div ui-view="overlay" class="gsapify-router"></div>\n\n  <div ui-view="content" class="gsapify-router"></div>\n\n</div>'},function(e,t){}]);
//# sourceMappingURL=bundle.js.map